
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
          "http://www.w3.org/TR/html4/strict.dtd">
<html>
  <head>
    
<meta http-equiv="X-UA-Compatible" content="chrome=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Gluster Docs Project - GlusterFS_34_Release_Notes - Open wiki - Gluster Community Forge</title>
<link href="/stylesheets/gts-common-customizations-stylesheets-common.css?1374646485" media="screen" rel="stylesheet" type="text/css" />
<link href="//fonts.googleapis.com/css?family=Nobile&amp;v1" type="text/css" rel="stylesheet">

<script src="/javascripts/all.js?1365063394" type="text/javascript"></script>  <link href="/gluster-docs-project/pages.atom" rel="alternate" title="ATOM" type="application/atom+xml" /><!--[if IE 8]><link rel="stylesheet" href="/stylesheets/ie8.css" type="text/css"><![endif]-->
<!--[if IE 7]><link rel="stylesheet" href="/stylesheets/ie7.css" type="text/css"><![endif]-->
<meta name="csrf-param" content="authenticity_token"/>
<meta name="csrf-token" content="FkHbaaVa4AqMa//IT8CmcmiAhkFRJdRu9KMQGvMs+pM="/>
<script type="application/javascript">var _prum={id:"5167c272abe53da02a000000"};var PRUM_EPISODES=PRUM_EPISODES||{};PRUM_EPISODES.q=[];PRUM_EPISODES.mark=function(b,a){PRUM_EPISODES.q.push(["mark",b,a||new Date().getTime()])};PRUM_EPISODES.measure=function(b,a,b){PRUM_EPISODES.q.push(["measure",b,a,b||new Date().getTime()])};PRUM_EPISODES.done=function(a){PRUM_EPISODES.q.push(["done",a])};PRUM_EPISODES.mark("firstbyte");(function(){var b=document.getElementsByTagName("script")[0];var a=document.createElement("script");a.type="text/javascript";a.async=true;a.charset="UTF-8";a.src="//rum-static.pingdom.net/prum.min.js";b.parentNode.insertBefore(a,b)})();</script>
  </head>
  <body id="pages">

    
    <div id="topbar">
      <div class="constrictor">
	<div id="glusterCommunityLogo" onclick="window.location.href = '/'" style="cursor:pointer"></div>
	<div class="toplinks">
	  <ul id="user-nav">
	    <li><a href="http://www.gluster.org">Gluster Home</a></li>
	    <li><a href="/dashboard">Dashboard</a></li>
	    
          <li class="secondary"><a href="/users/new">Register</a></li>
    <li class="secondary"><a href="/login">Login</a></li>
	  </ul>
	</div>
      </div>
    </div>

    <div id="dropshadow"></div>

    <div id="wrapper">



      <div id="header">

	

	<ul id="menu">
                    <li class="activity"><a href="/activities">Activities</a></li>
          <li class="projects"><a href="/projects">Projects</a></li>
          <li class="teams"><a href="/teams">Teams</a></li>
          
	</ul>
      </div>
      <div id="top-bar">
	<ul id="breadcrumbs">
          <li class="project"><a href="/gluster-docs-project">Gluster Docs Project</a></li><li class="wiki"><a href="/gluster-docs-project/pages">Wiki</a></li><li class="file"><a href="/gluster-docs-project/pages/GlusterFS_34_Release_Notes">GlusterFS_34_Release_Notes</a></li>	</ul>
	        <div id="searchbox">
          


<div class="search_bar">
  <form action="/search" method="get">    <p>
      <input class="text search-field round-5" id="q" name="q" type="text" />      <input type="submit" value="Search" class="search-submit round-5" />
    </p>
    <p class="hint search-hint" style="display: none;">
      eg. 'wrapper', 'category:python' or '"document database"'
          </p>
  </form></div>
        </div>
	      </div>
      <div id="container" class="">
	<div id="content" class="with_sidebar">
          
          


<div class="page-header">
  <h1>
    GlusterFS_34_Release_Notes 
  </h1>
</div>

<div class="page wiki-page"><div class="toc">
  <ul>

  <ul>
  <li><a href="#Major+Changes+and+Features">Major Changes and Features</a>
   <ul>
   <li><a href="#Dual+Licensing">Dual Licensing</a>   </li>
   <li><a href="#libgfapi">libgfapi</a>   </li>
   <li><a href="#Quorum+enforcement+from+Trusted+Storage+Pool">Quorum enforcement from Trusted Storage Pool</a>   </li>
   <li><a href="#Improvements+for+Virtual+Machine+Image+Storage">Improvements for Virtual Machine Image Storage</a>   </li>
   <li><a href="#Synchronous+Replication+Improvements">Synchronous Replication Improvements</a>   </li>
   <li><a href="#Open+Cluster+Framework+compliant+Resource+Agents">Open Cluster Framework compliant Resource Agents</a>   </li>
   <li><a href="#POSIX+ACL+support+over+NFSv3">POSIX ACL support over NFSv3</a>   </li>
   <li><a href="#3.3.x+compatibility">3.3.x compatibility</a>   </li>
   <li><a href="#Packaging+changes">Packaging changes</a>   </li>
   <li><a href="#Brick+port+changes">Brick port changes</a>   </li>
   <li><a href="#Experimental+Features">Experimental Features</a>   </li>
  </ul>
  <li><a href="#Minor+Improvements:">Minor Improvements:</a>
   <ul>
   <li><a href="#Known+Issues:">Known Issues:</a>   </li>
   </ul>
  </li>
  </ul>
 </li>
 </ul>
</div><div><h2 id="Major+Changes+and+Features">Major Changes and Features</h2>

<h3 id="Dual+Licensing">Dual Licensing</h3>

<p>All of GlusterFS 3.4.0 is available under this dual License:</p>

<ul>
<li><p>GNU Lesser General Public License, version 3 or any later version (LGPLv3 or later), </p>

<p>or </p></li>
<li><p>GNU General Public License, version 2 (GPLv2)</p></li>
</ul>


<h3 id="libgfapi">libgfapi</h3>

<p>libgfapi provides API access to data that is stored in gluster volumes. Description of the API can be found <a href="https://forge.gluster.org/glusterfs-core/glusterfs/blobs/release-3.4/api/src/glfs.h">here</a>.</p>

<p>qemu and samba are already integrated with libgfapi. You can now access gluster volumes directly from qemu and samba without having to come through a  regular filesystem mount point.</p>

<h3 id="Quorum+enforcement+from+Trusted+Storage+Pool">Quorum enforcement from Trusted Storage Pool</h3>

<p>Quorum can now be enforced from the Trusted Storage Pool. Connectivity information present in glusterd is used to determine quorum. Server Side quorum<br />
 can be enabled by:</p>

<p><em>#gluster volume set &lt;volname> cluster.server-quorum-type server</em></p>

<p><em>#gluster volume set &lt;volname> cluster.server-quorum-ratio &lt;percentage></em></p>

<p>More details about this feature can be found <a href="http://www.gluster.org/community/documentation/index.php/Features/Server-quorum">here</a>.</p>

<h3 id="Improvements+for+Virtual+Machine+Image+Storage">Improvements for Virtual Machine Image Storage</h3>

<p>A number of improvements have been performed to let Gluster volumes provide storage for Virtual Machine Images. Some of them include:</p>

<ul>
<li>qemu &ndash; libgfapi integration.<br />
</li>
<li>Causal ordering in write-behind translator.<br />
</li>
<li>Tunables for a gluster volume in group-virt.example.</li>
</ul>


<p>The above result in significant improvements in performance for VM hosting. </p>

<h3 id="Synchronous+Replication+Improvements">Synchronous Replication Improvements</h3>

<p>GlusterFS 3.4 features significant improvements in performance for the replication (AFR) translator. This is in addition to bug fixes for volumes that used replica 3. </p>

<h3 id="Open+Cluster+Framework+compliant+Resource+Agents">Open Cluster Framework compliant Resource Agents</h3>

<p>Resource Agents (RA) plug glusterd into Open Cluster Framework<br />
(OCF) compliant cluster resource managers, like Pacemaker.<br />
</p>

<p>The glusterd RA manages the glusterd daemon like any upstart or systemd job would, except that Pacemaker can do it in a cluster-aware fashion.<br />
</p>

<p>The volume RA starts a volume and monitors individual brick&rsquo;s daemons in a cluster aware fashion, recovering bricks when their processes fail.</p>

<h3 id="POSIX+ACL+support+over+NFSv3">POSIX ACL support over NFSv3</h3>

<p>setfacl and getfacl commands now can be used on a nfs mount that exports a gluster volume to set or read posix ACLs.</p>

<h3 id="3.3.x+compatibility">3.3.x compatibility</h3>

<p>The new op-version infrastructure provides compatibility with 3.3.x release of GlusterFS. 3.3.x clients can talk to 3.4.x servers and the vice-versa is also possible. </p>

<p>If a volume option that corresponds to 3.4 is enabled, then 3.3 clients cannot mount the volume.</p>

<h3 id="Packaging+changes">Packaging changes</h3>

<p>New RPMs for libgfapi and OCF RA are present with 3.4.0.</p>

<h3 id="Brick+port+changes">Brick port changes</h3>

<p>Brick ports will now listen from 49152 onwards (instead of 24009 onwards as with previous releases). The brick port assignment scheme is now compliant with IANA guidelines.</p>

<h3 id="Experimental+Features">Experimental Features</h3>

<p>The following features are experimental with this release:</p>

<ul>
<li>RDMA-connection manager (RDMA-CM)<br />
</li>
<li>Block Device translator  <br />
</li>
<li>support for NUFA </li>
</ul>


<h2 id="Minor+Improvements:">Minor Improvements:</h2>

<ul>
<li><p>The Ext4 file system change which affected readdir workloads for Gluster volumes has been addressed.</p></li>
<li><p>More options for selecting read-child with afr available now.</p></li>
<li><p>Custom layouts possible with distribute translator.</p></li>
<li><p>No 32-aux-gid limit</p></li>
<li><p>SSL support for socket connections.</p></li>
<li><p>Known issues with replica count greater than 2 addressed.</p></li>
<li><p>quick-read and md-cache translators have been refactored.</p></li>
<li><p>open-behind translator introduced.</p></li>
<li><p>Ability to avoid glusterfs bind to reserved ports.</p></li>
<li><p>statedumps are now created in /var/run/gluster instead of /tmp by default.</p></li>
<li><p>UFO Rebased to Openstack Swift 1.8.0 (Grizzly).</p></li>
</ul>


<p>Note that UFO will be renamed G4S (Gluster For Swift) and decoupled from<br />
GlusterFS in the next release. The UFO source in the GlusterFS ufo subdirectory is deprecated following this release. <br />
The G4S source is now in the separate git repository <a href="ssh://git.gluster.com/gluster-swift.git">here</a>.</p>

<ul>
<li><p>glusterfs.spec.in mirrors the Fedora glusterfs.spec (delta UFO packages until G4S packages land in Fedora.)</p></li>
<li><p>Gluster NFS server now listens by default on port 2049. This allows auto negotiation with NFS clients.</p></li>
</ul>


<h3 id="Known+Issues:">Known Issues:</h3>

<ul>
<li><p>The following configuration changes are necessary for qemu and samba integration with libgfapi to work seamlessly:</p>

<pre><code>     1) gluster volume set &lt;volname&gt; server.allow-insecure on

     2) Edit /etc/glusterfs/glusterd.vol to contain this line:  
            option rpc-auth-allow-insecure on

    Post 2), restarting glusterd would be necessary. 
</code></pre></li>
<li><p>RDMA connection manager needs IPoIB for connection establishment. More details can be found <a href="https://github.com/gluster/glusterfs/blob/master/doc/rdma-cm-in-3.4.0.txt">here</a>.</p></li>
<li><p>When NUFA is enabled, client mounts fail outside the trusted storage pool.</p></li>
<li><p>Quota enforcement does not work correct with NFS access.</p></li>
<li><p>replace-brick operation does not work fine in all cases in this release. </p></li>
<li><p>For Block Device translator based volumes open-behind xlator at the client side needs to be disabled.</p></li>
</ul>

</div></div>
<div class="page-meta">
  <p>
                </p>
</div>



	</div>
	        <div id="sidebar">
            <ul class="links navigation">
        <li class="wiki_page_history">
      <a href="/gluster-docs-project/pages/GlusterFS_34_Release_Notes/history">History</a>    </li>
    <li class="wiki_page">
      <a href="/gluster-docs-project/pages">Pages index</a>    </li>
    <li class="wiki_via_git">
      <a href="/gluster-docs-project/pages/git_access">Git access</a>    </li>
  </ul>
  <p>
    <strong>Last update:</strong> 16 Jul 18:45  </p>
        </div>
	      </div>
      <div id="footer">
	
<div class="powered-by">
  <a href="http://gitorious.org"><img alt="Poweredby" src="/images/../img/poweredby.png?1365063237" title="Powered by Gitorious" /></a></div>
<script type="application/javascript">var _prum={id:"5167c272abe53da02a000000"};var PRUM_EPISODES=PRUM_EPISODES||{};PRUM_EPISODES.q=[];PRUM_EPISODES.mark=function(b,a){PRUM_EPISODES.q.push(["mark",b,a||new Date().getTime()])};PRUM_EPISODES.measure=function(b,a,b){PRUM_EPISODES.q.push(["measure",b,a,b||new Date().getTime()])};PRUM_EPISODES.done=function(a){PRUM_EPISODES.q.push(["done",a])};PRUM_EPISODES.mark("firstbyte");(function(){var b=document.getElementsByTagName("script")[0];var a=document.createElement("script");a.type="text/javascript";a.async=true;a.charset="UTF-8";a.src="//rum-static.pingdom.net/prum.min.js";b.parentNode.insertBefore(a,b)})();</script><script src="/javascripts/onload.js?1365063237" type="text/javascript"></script>
	<div id="footer-links">
  <h3>Gluster Community Forge</h3>

  <ul>
    <li><a href="/about/getting_started">Getting Started</a></li>
    <li><a href="/about">About</a></li>
  </ul>

  <ul>
    <li><a href="/about/faq">FAQ</a></li>
    <li><a href="/contact">Contact</a></li>
    <li><a href="/about/tos" target="_blank">Terms of Use</a></li>
  </ul>

</div>
	<p class="footer-blurb">
  
    Copyright © 2013 Red Hat, Inc. All Rights Reserved
  
</p>

	<div class="clear"></div>
      </div>
    </div>


    <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-10444844-5']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>


  </body>
</html>
