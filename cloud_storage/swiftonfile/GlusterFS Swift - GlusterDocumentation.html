<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">

<head>
	<script type="text/javascript"> 
		var wgBreakFrames = 0;
	</script>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta name="generator" content="MediaWiki 1.23.6" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="/community/documentation/opensearch_desc.php" title="GlusterDocumentation (en)" />
<link rel="EditURI" type="application/rsd+xml" href="http://www.gluster.org/community/documentation/api.php?action=rsd" />
<link rel="copyright" href="http://www.gnu.org/copyleft/fdl.html" />
<link rel="alternate" type="application/atom+xml" title="GlusterDocumentation Atom feed" href="/community/documentation/index.php?title=Special:RecentChanges&amp;feed=atom" />	<title>GlusterFS Swift - GlusterDocumentation</title>
	<style type="text/css" media="screen,projection">/*<![CDATA[*/ @import "/community/documentation/skins/gluster/main.css"; /*]]>*/</style>
	<style type="text/css" media="screen,projection">/*<![CDATA[*/ @import "/community/documentation/skins/gluster/extensions.css"; /*]]>*/</style>
	<link rel="stylesheet" type="text/css" media="print" href="/community/documentation/skins/common/commonPrint.css" />
		<script type="text/javascript" src="/community/documentation/skins/common/wikibits.js"></script>
			    
    
	<script type="text/javascript" src="http://www.gluster.org/global/milonic_src.js"></script>	
	<script type="text/javascript">
	<!--
	if(ns4)_d.write("<scr"+"ipt type=text/javascript src=http://www.gluster.org/global/mmenuns4.js><\/scr"+"ipt>");		
  	else _d.write("<scr"+"ipt type=text/javascript src=http://www.gluster.org/global/mmenudom.js><\/scr"+"ipt>");
	//-->
</script>

<script type="text/javascript" src="http://www.gluster.org/global/menu_data_wiki.js"></script>

</head>

<body       >

<!-- <div id="internal" style="height: 0px;"></div> -->
<div id="wrapContainer"><div id="gheaderbg">
    <div id="gheader">
    
  <div class="gheaderleft"><a href="http://www.gluster.org"><img src="/community/documentation/skins/gluster/gluster-community-logo.png" alt="Gluster" width="484" height="90" border="0" /></a></div>
      <div class="gheaderright">
			<ul id="gnav">
				<li><a href="/community/documentation/index.php/Main_Page"><img src="/community/documentation/skins/gluster/documentation.png" alt="Documentation"></a></li>
				<li><a href="/interact"><img src="/community/documentation/skins/gluster/contact.png" alt="Contact"></a></li>
				<li><a href="/about"><img src="/community/documentation/skins/gluster/about.png" alt="About"></a></li>
				<li><a href="http://forge.gluster.org/"><img src="/community/documentation/skins/gluster/developers.png" alt="Developers"></a></li>
				<li><a href="/download"><img src="/community/documentation/skins/gluster/download.png" alt="Download"></a></li>
			</ul>
			<div class="social">
				<div style="width: 85px; float: left;"><iframe src="http://www.facebook.com/plugins/like.php?app_id=110215952409351&amp;href=http%3A%2F%2Fwww.facebook.com%2Fpages%2FGluster%2F80854864899&amp;send=false&amp;layout=button_count&amp;width=450&amp;show_faces=false&amp;action=like&amp;colorscheme=light&amp;font&amp;height=21" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:450px; height:21px;" allowTransparency="true"></iframe></div>
				<div style="width: 50px; float: left; margin-top: -2px;"><g:plusone count="false"></g:plusone></div>
				<div style="float: left;"><a href="http://twitter.com/share" class="twitter-share-button" data-count="none">Tweet</a></div>
				
				<script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>

				<!--  Place this tag after the last plusone tag -->
				<script type="text/javascript">
				  (function() {
					var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
					po.src = 'https://apis.google.com/js/plusone.js';
					var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
				  })();
				</script>
			</div>
      </div>
  </div>
</div>


<div style="width: 990px;height: 20px;"></div>


<div id="container">
		<div id="header">
		<a name="top" id="contentTop"></a>
		<h1><a
	    href="/community/documentation/index.php/Main_Page"
	    title="Main Page">GlusterFS Swift</a></h1>
		<ul>
		   	<li
		       class="selected"		       ><a href="/community/documentation/index.php/GlusterFS_Swift">Page</a></li><li
		       class="new"		       ><a href="/community/documentation/index.php?title=Talk:GlusterFS_Swift&amp;action=edit&amp;redlink=1">Discussion</a></li><li
		       		       ><a href="/community/documentation/index.php?title=GlusterFS_Swift&amp;action=edit">View source</a></li><li
		       		       ><a href="/community/documentation/index.php?title=GlusterFS_Swift&amp;action=history">History</a></li>		</ul>
		<form name="searchform" action="/community/documentation/index.php/Special:Search" id="search">
			<div>
			<label for="q">Search</label>
			<input id="q" name="search" type="text"
			accesskey="f" value="" />
			<!--<input type="submit" name="go" class="searchButton" id="searchGoButton"
	        value=""
	        />-->&nbsp;<input type="submit" name="fulltext"
	        class="searchButton"
	        value="Search" />
	       </div>
		</form>
	</div>

	<div id="mBody">
	
		<div id="side">
			<ul id="nav">
				<li><span>Personal tools</span>
					<ul>
					<li id="pt-createaccount"><a href="/community/documentation/index.php?title=Special:UserLogin&amp;returnto=GlusterFS+Swift&amp;type=signup">Create account</a></li><li id="pt-login"><a href="/community/documentation/index.php?title=Special:UserLogin&amp;returnto=GlusterFS+Swift">Log in</a></li>					</ul>
				</li>
								<li><span>Navigation</span>
						<ul>
										<li id="n-Docs-Home"><a href="/community/documentation/index.php/Main_Page">Docs Home</a></li>
										<li id="n-GlusterFS-Concepts"><a href="/community/documentation/index.php/GlusterFS_Concepts">GlusterFS Concepts</a></li>
										<li id="n-Developers"><a href="/community/documentation/index.php/Developers">Developers</a></li>
										<li id="n-Participate-and-Plan"><a href="/community/documentation/index.php/GlusterPlanning">Participate and Plan</a></li>
										<li id="n-Archives"><a href="/community/documentation/index.php/Archives">Archives</a></li>
										<li id="n-recentchanges"><a href="/community/documentation/index.php/Special:RecentChanges">Recent changes</a></li>
									</ul>
					</li>
								<li><span>Tools</span>
					<ul>
					  					  <li id="t-whatlinkshere"><a href="/community/documentation/index.php/Special:WhatLinksHere/GlusterFS_Swift">What links here</a></li>
					  					  <li id="t-recentchangeslinked"><a href="/community/documentation/index.php/Special:RecentChangesLinked/GlusterFS_Swift">Related changes</a></li>
					  				      				      				      				      				      				      				      				      				      <li id="t-specialpages"><a href="/community/documentation/index.php/Special:SpecialPages">Special pages</a></li>				      					</ul>
				</li>
							</ul>
		</div><!-- end of SIDE div -->
		
		<div id="mainContent">
			<div id="toc_holder"> </div>
			<h1>GlusterFS Swift</h1>

			<h3 id="siteSub">From GlusterDocumentation</h3>
			<div id="contentSub"></div>
									<!-- start content -->
			<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><p>(Go back up to the <a href="/community/documentation/index.php/OpenStack" title="OpenStack">OpenStack</a> page.)
</p>
	<p>This sets up a GlusterFS Unified File and Object (UFO) server on a single node (single brick) Gluster server using the RPMs contained in my YUM repo at <a rel="nofollow" class="external free" href="http://repos.fedorapeople.org/repos/kkeithle/glusterfs/">http://repos.fedorapeople.org/repos/kkeithle/glusterfs/</a>. This repo contains RPMs for Fedora 16, Fedora 17, and RHEL 6.</p>
<p>1. Add the repo to your system. See the README file there for instructions. N.B. If you&#8217;re using CentOS or some other RHEL clone you&#8217;ll want (need) to add the Fedora EPEL repo — see <a rel="nofollow" class="external free" href="http://fedoraproject.org/wiki/EPEL">http://fedoraproject.org/wiki/EPEL</a>.</p>
<p>2. Install glusterfs and UFO (remember to enable the new repo first):</p>
<p><code>`yum install glusterfs glusterfs-server glusterfs-fuse glusterfs-swift glusterfs-swift-account glusterfs-swift-container glusterfs-swift-object glusterfs-swift-proxy glusterfs-ufo`</code></p>
<p>3. Start glusterfs:</p>
<ul>
<li>On Fedora 17, Fedora 18: <code>`systemctl start glusterd.service`</code></li>
<li>On Fedora 16 or  RHEL 6 <code>`service start glusterd`</code></li>
<li><code></code>On CentOS6.x <code>`/etc/init.d/glusterd start`</code></li>
</ul>
<p>4. Create a glusterfs volume:<br />
<code>`gluster volume create $myvolname $myhostname:$pathtobrick`</code></p>
<p>5. Start the glusterfs volume:<br />
<code>`gluster volume start $myvolname`</code></p>
<p>6. Create a self-signed cert for UFO:<br />
<code>`cd /etc/swift; openssl req -new -x509 -nodes -out cert.crt -keyout cert.key`</code></p>
<p>7. fixup some files in /etc/swift:</p>
<ul>
<li><code>`mv swift.conf-gluster swift.conf`</code></li>
<li><code>`mv fs.conf-gluster fs.conf`</code></li>
<li><code>`mv proxy-server.conf-gluster proxy-server.conf`</code></li>
<li><code>`mv account-server/1.conf-gluster account-server/1.conf`</code></li>
<li><code>`mv container-server/1.conf-gluster container-server/1.conf`</code></li>
<li><code>`mv object-server/1.conf-gluster object-server/1.conf`</code></li>
<li><code>`rm {account,container,object}-server.conf</code></li>
</ul>
<p>8. Configure UFO (edit /etc/swift/proxy-server.conf):<br />
+ add your cert and key to the [DEFAULT] section:<br />
bind_port = 443<br />
cert_file = /etc/swift/cert.crt<br />
key_file = /etc/swift/cert.key<br />
+ add one or more users of the gluster volume to the [filter:tempauth] section:<br />
user_$myvolname_$username=$password .admin<br />
+ add the memcache address to the [filter:cache] section:<br />
memcache_servers = 127.0.0.1:11211</p>
<p>9. Generate builders:<br />
<code>`/usr/bin/gluster-swift-gen-builders $myvolname`</code></p>
<p>10. Start memcached:</p>
<ul>
<li>On Fedora 17: <code>`systemctl start memcached.service`</code></li>
<li>On Fedora 16 or  RHEL 6 <code>`service start memcached`</code></li>
<li><code></code>On CentOS6.x <code>`/etc/init.d/memcached start`</code></li>
</ul>
<p>11. Start UFO:</p>
<p><code>`swift-init main start`</code></p>
<p>» This has bitten me more than once. If you ssh -X into the machine running swift, it&#8217;s likely that sshd will already be using ports 6010, 6011, and 6012, and will collide with the swift processes trying to use those ports «</p>
<p>12. Get authentication token from UFO:<br />
<code>`curl -v -H 'X-Storage-User: $myvolname:$username' -H 'X-Storage-Pass: $password' -k <a rel="nofollow" class="external free" href="https://$myhostname:443/auth/v1.0`">https://$myhostname:443/auth/v1.0`</a></code><br />
(authtoken similar to AUTH_tk2c69b572dd544383b352d0f0d61c2e6d)</p>
<p>13. Create a container:<br />
<code>`curl -v -X PUT -H 'X-Auth-Token: $authtoken' <a rel="nofollow" class="external free" href="https://$myhostname:443/v1/AUTH_$myvolname/$mycontainername">https://$myhostname:443/v1/AUTH_$myvolname/$mycontainername</a> -k`</code></p>
<p>14. List containers:<br />
<code>`curl -v -X GET -H 'X-Auth-Token: $authtoken' <a rel="nofollow" class="external free" href="https://$myhostname:443/v1/AUTH_$myvolname">https://$myhostname:443/v1/AUTH_$myvolname</a> -k`</code></p>
<p>15. Upload a file to a container:</p>
<p><code>`curl -v -X PUT -T $filename -H 'X-Auth-Token: $authtoken' -H 'Content-Length: $filelen' <a rel="nofollow" class="external free" href="https://$myhostname:443/v1/AUTH_$myvolname/$mycontainername/$filename">https://$myhostname:443/v1/AUTH_$myvolname/$mycontainername/$filename</a> -k`</code></p>
<p>16. Download the file:</p>
<p><code>`curl -v -X GET -H 'X-Auth-Token: $authtoken' <a rel="nofollow" class="external free" href="https://$myhostname:443/v1/AUTH_$myvolname/$mycontainername/$filename">https://$myhostname:443/v1/AUTH_$myvolname/$mycontainername/$filename</a> -k &gt; $filename`<br />
</code></p>
<p>More information and examples are available from</p>
<ul>
<li><a rel="nofollow" class="external free" href="http://docs.openstack.org/api/openstack-object-storage/1.0/content/">http://docs.openstack.org/api/openstack-object-storage/1.0/content/</a></li>
<li><a rel="nofollow" class="external free" href="https://access.redhat.com/knowledge/docs/en-US/Red_Hat_Storage/2.0/pdf/Administration_Guide/Red_Hat_Storage-2.0-Administration_Guide-en-US.pdf">https://access.redhat.com/knowledge/docs/en-US/Red_Hat_Storage/2.0/pdf/Administration_Guide/Red_Hat_Storage-2.0-Administration_Guide-en-US.pdf</a></li>
<li><a rel="nofollow" class="external free" href="http://docs.openstack.org/developer/swift/howto_installmultinode.html">http://docs.openstack.org/developer/swift/howto_installmultinode.html</a></li>
</ul>
<p>=======================================================================</p>
<p>N.B. We (Red Hat, Gluster) generally recommend using xfs for brick volumes; or if you&#8217;re feeling brave, btrfs. If you&#8217;re using ext4 be aware of the ext4 issue* and if you're using ext3 make sure you mount it with -o user_xattr.</p>
<p>* <a rel="nofollow" class="external free" href="http://joejulian.name/blog/glusterfs-bit-by-ext4-structure-change/">http://joejulian.name/blog/glusterfs-bit-by-ext4-structure-change/</a></p>

<!-- 
NewPP limit report
CPU time usage: 0.022 seconds
Real time usage: 0.022 seconds
Preprocessor visited node count: 18/1000000
Preprocessor generated node count: 38/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 1/40
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key wikidb-GlusterDocs:pcache:idhash:3714-0!*!0!*!*!*!* and timestamp 20141101201244 and revision id 13283
 -->
<!-- Bad Behavior 2.2.15 run time: 3.957 ms --></div><div class="printfooter">
Retrieved from "<a href="http://www.gluster.org/community/documentation/index.php?title=GlusterFS_Swift&amp;oldid=13283">http://www.gluster.org/community/documentation/index.php?title=GlusterFS_Swift&amp;oldid=13283</a>"</div>
			<div id="catlinks"><div id='catlinks' class='catlinks catlinks-allhidden'></div></div>			<!-- end content -->

		</div><!-- end of MAINCONTENT div -->	
	
	</div><!-- end of MBODY div -->

	<div id="footer"><table><tr><td align="left" width="1%" nowrap="nowrap">
		<div id="f-copyrightico"><a href="http://www.gnu.org/copyleft/fdl.html"><img src="/community/documentation/skins/common/images/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or Later" width="88" height="31" /></a></div></td><td align="center">
		<span id="f-lastmod"> This page was last modified on 15 April 2013, at 12:57.</span>		<span id="f-viewcount">This page has been accessed 1,712 times. </span>		<ul id="f-list">
						<li id="f-copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or Later</a> unless otherwise noted.</li>			<li id="f-about"><a href="/community/documentation/index.php/GlusterDocumentation:About" title="GlusterDocumentation:About">About GlusterDocumentation</a></li>			<li id="f-disclaimer"><a href="/community/documentation/index.php/GlusterDocumentation:General_disclaimer" title="GlusterDocumentation:General disclaimer">Disclaimers</a></li>		</ul></td><td align="right" width="1%" nowrap="nowrap"><div id="f-poweredbyico"><a href="//www.mediawiki.org/"><img src="/community/documentation/skins/common/images/poweredby_mediawiki_88x31.png" height="31" width="88" alt="Powered by MediaWiki" /></a></div></td></tr></table>
	</div><!-- end of the FOOTER div -->
</div><!-- end of the CONTAINER div -->

<div id="gfooterbg">

    <div id="gfooter">
		<div class="gfooterleft">
        	<p>&nbsp;</p>
        </div>
        <div class="gfooterright">
        	<p>Copyright &copy; <script language="JavaScript"><!--
//document.write(" 2005-");
    today=new Date();
    year0=today.getFullYear();
    document.write(year0);
//-->
    </script> Gluster, Inc. All Rights Reserved. </p>

        </div>
	
    </div>
    <div class="clear"></div>
</div>


</div>
<script>if(window.mw){
mw.config.set({"wgBackendResponseTime":153});
}</script><script type="text/javascript">
	var toc = document.getElementById('toc');
	var toc_holder = document.getElementById('toc_holder');
	if(toc && toc_holder){
		toc.parentNode.removeChild(toc);
		toc_holder.appendChild(toc);
		}
</script>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-10444844-3");
pageTracker._setDomainName(".gluster.org");
pageTracker._trackPageview();
} catch(err) {}</script>
<script type="text/javascript">
jQuery(document).ready(function($) {
	$('#mw-content-text div[style*=ffca45],#mw-content-text p[style*=ffca45],#mw-content-text div[style*=FF0000],#mw-content-text p[style*=FF0000]').css(
				{
					"color":"#777777",
					"background":"#FCF8E3",
					"border":"1px solid #FBEED5",
					"max-width":"440px",
					"padding":"20px",
					"border-radius":"4px",
					"text-align":"center",
					"margin-left":"0"
				}
			).addClass('notification-box');
});
</script>
</body>
<!-- Cached 20141101201246 -->
</html>
