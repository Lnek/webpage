<!DOCTYPE html>
<html>
<head>
	<title>using PyArg_ParseTuple with a list &laquo; python-list &laquo; ActiveState List Archives</title>
	<script type="text/javascript" language="JavaScript" src="http://code.activestate.com/lists/static/js/jquery-1.4.2.min.js"></script>
	<script type="text/javascript" language="javascript" src="http://code.activestate.com/lists/static/js/jquery.cookie.js"></script>
	<script type="text/javascript" language="javascript" src="http://code.activestate.com/lists/static/js/jquery.tiptip.min.js"></script>
	<link href='//fonts.googleapis.com/css?family=PT+Sans+Narrow:bold&subset=latin' rel='stylesheet' type='text/css'>
	<link href='//fonts.googleapis.com/css?family=PT+Sans:bold' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" href="http://code.activestate.com/lists/static/css/activestyle.css" type="text/css" />
	<link rel="stylesheet" href="http://code.activestate.com/lists/static/css/tiptip.css" type="text/css" />
	<link rel="stylesheet" href="//www.google.com/cse/style/look/default.css" type="text/css" />
		<link rel="alternate" href="http://code.activestate.com/lists/python-list/?rss_feed=25" title="RSS 2.0 news feed" type="application/rss+xml" />
	        <link rel="canonical" href="http://code.activestate.com/lists/python-list/31841/" />
    	<script type="text/javascript"> var _gaq = _gaq || [];
	var pluginUrl = '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
	_gaq.push(['_require', 'inpage_linkid', pluginUrl]);
	_gaq.push(['_setAccount', 'UA-20072-24']); _gaq.push(['_setDomainName', '.activestate.com']); _gaq.push(['_setAllowLinker', true]); _gaq.push(['_setAllowHash', false]); _gaq.push(['_trackPageview']);
	(function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async =
	true;
	ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
	var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	})();
	</script>
</head>
<body >
<div id="as_wrapper">
<div id="as_header_wrapper">
<div id="as_header">
<div id="as_navbar" class="as_navbar_short">
	<ul id="as_sitesnav">
		<li class="as_logo"><a href="//www.activestate.com/"><img height="18" width="90" src="/static/activestyle/img/activestate.png" title="ActiveState"/></a></li>
		<span class="as_navsep"></span>
		<li><a href="//community.activestate.com/">Community</a></li>
		<span class="as_navsep">|</span>    
		<li><a href="//code.activestate.com/"><strong>Code</strong></a></li>
		<span class="as_navsep">|</span>
		<li><a href="http://docs.activestate.com/">Docs</a></li>
		<span class="as_navsep">|</span>
		<li class="as_sitesnav_more"><a onclick="$('#as_sitesnav_downloads').slideToggle(100); return false;" href="//www.activestate.com/downloads" ><u>Downloads</u>  <small>&#9660;</small></a>
        <ul style="display: none;" id="as_sitesnav_downloads">
          <li><a href="//www.activestate.com/stackato/download_vm" title="Download Stackato">Stackato</a></li>
          <li><a href="//www.activestate.com/activeperl/downloads" title="Download Perl">ActivePerl</a></li>
          <li><a href="//www.activestate.com/activepython/downloads" title="Download Python">ActivePython</a></li>
          <li><a href="//www.activestate.com/activetcl/downloads" title="Download Tcl">ActiveTcl</a></li>
          <li><a href="//www.activestate.com/activeperl-pro-studio/downloads" title="Download ActivePerl Pro Studio">ActivePerl Pro Studio</a></li>
          <li><a href="//www.activestate.com/activetcl-pro-studio/downloads" title="Download ActiveTcl Pro Studio">ActiveTcl Pro Studio</a></li>
          <li><a href="//www.activestate.com/perl-dev-kit/downloads" title="Download Perl Dev Kit">Perl Dev Kit</a></li>
          <li><a href="//www.activestate.com/tcl-dev-kit/downloads" title="Download Tcl Dev Kit">Tcl Dev Kit</a></li>
          <li><a href="//www.activestate.com/komodo-ide/downloads" title="Download Komodo IDE">Komodo IDE</a></li>
        </ul>
      </li>
		<span class="as_navsep">|</span>
		<li class="as_sitesnav_more"><a href="//www.activestate.com/community" onclick="$('#as_sitesnav_more').slideToggle(100); return false;"><u>more</u> <small>&#9660;</small></a>
			<ul id="as_sitesnav_more" style="display: none;">
			  <li><a href="//code.activestate.com/lists">Lists</a></li>
			  <li><a href="//bugs.activestate.com/">Bugs</a></li>
			  <li><a href="//code.activestate.com/pypm">PyPM Index</a></li>
			</ul>
			<script type="text/javascript">
			  $('body').click(function() { $('#as_sitesnav_more').hide(); $('#as_sitesnav_downloads').hide(); });
			</script>
		</li>
	</ul>


    <div id="as_accountnav">    
      <span class="as_navsep">|</span> <a href="https://store.activestate.com/">Store</a>
      <span class="as_navsep">|</span> <a href="https://store.activestate.com/cart/" class="icon-cart">Cart</a>
    </div>

  </div>
  
  <div id="as_bannerbar">
		<div id="site_logo" class="as_banner_text">
			<a href="/" class="as_banner_text">ActiveState Code</a> &raquo; <a href="http://code.activestate.com/lists" class="as_banner_text">Lists</a>
		</div>
    
    <div id="site_nav">
		<form action="/search/lists/" id="cse-search-box">
		<div>
					  <input id="list_name" type="hidden" name ="list" value="python-list" />
		  		  <input id="search_query" type="text" name="q" size="20" />
		  <input type="submit" name="sa" value="Search"/>
		</div>
      </form>    </div>
    <div stye="clear:both"></div>
  </div>

</div> <!-- end of as_header -->

<div id="as_sub_banner">
	<div id="as_sub_site_nav">
		<div id="as_sub_site_links">
			<a title="Perl Mailing Lists" href="http://code.activestate.com/lists/group/perl">Perl Lists</a>
			<a title="Python Mailing Lists" href="http://code.activestate.com/lists/group/python">Python Lists</a>
			<a title="PHP Mailing Lists" href="http://code.activestate.com/lists/group/php">PHP Lists</a>
			<a title="Ruby Mailing Lists" href="http://code.activestate.com/lists/group/ruby">Ruby Lists</a>
			<a title="Tcl Mailing Lists" href="http://code.activestate.com/lists/group/tcl">Tcl Lists</a>
			<a title="ActiveState Mailing Lists" href="http://code.activestate.com/lists/group/activestate">ActiveState Lists</a>
		</div>
	</div>
</div> <!-- end of as_sub_banner -->

</div> <!-- end of as_header_wrapper -->

<div id="as_middle">
  <div id="as_content_wrapper">
    <div id="as_content">
	<div id='as_contentbox'>




<div id="news_nav">
	<a href="http://code.activestate.com/lists/">Lists</a>
	&raquo;
	<a href="http://code.activestate.com/lists/python-list/">python-list</a>
</div>
	
<h1 class="articlename">using PyArg_ParseTuple with a list</h1>

<div id="as_list_article_meta">
	<div id="as_list_article_from">
		<strong>From:</strong>
		Les Schaffer &lt;godz<a href='http://www.google.com/recaptcha/mailhide/d?k=01uFJNKBeSLW8hfjA-8d4AFA==&amp;c=XuV1sxynwm1k2cnfhKd1LxRbigPYWW2d6IUppJquM3U=' onclick="window.open('http://www.google.com/recaptcha/mailhide/d?k=01uFJNKBeSLW8hfjA-8d4AFA==&amp;c=XuV1sxynwm1k2cnfhKd1LxRbigPYWW2d6IUppJquM3U=', '', 'toolbar=0,scrollbars=0,location=0,statusbar=0,menubar=0,resizable=0,width=500,height=300'); return false;" title="Reveal this e-mail address">...</a>@netmeg.net&gt;	</div>
	<div id="as_list_article_date">
		Sat, 22 Apr 2000 13:54:20 GMT	</div>
	<div class="clearleft"></div>
</div>

<div id="as_list_article">
	



<div class='as_article_plain_text'><pre><span class='as_quoted_email'>&gt; I wish to pass a Python list [] to a C extension module, but I am</span><span class='as_quoted_email'>&gt; unsure of the proper format to specify in PyArg_ParseTuple</span>

here is a bit of code i wrote to pass a list of strings in to a C
extension:

...
    char * tok;         /* delimiter tokens for strtok */
    int cols;           /* number of cols to parse, from the left */

    int numLines;       /* how many lines we passed for parsing */
    char * line;        /* pointer to the line as a string */
    char * token;       /* token parsed by strtok */

    PyObject * listObj; /* the list of strings */
    PyObject * strObj;  /* one string in the list */
    
    /* the O! parses for a Python object (listObj) checked
       to be of type PyList_Type */
    if (! PyArg_ParseTuple( args, &quot;O!is&quot;, &amp;PyList_Type, &amp;listObj, 
			   &amp;cols, &amp;tok )) return NULL;
    
    /* get the number of lines passed to us */
    numLines = PyList_Size(listObj);

    /* should raise an error here. */
    if (numLines &lt; 0)	return NULL; /* Not a list */

...

    /* iterate over items of the list, grabbing strings, and parsing
       for numbers */
    for (i=0; i&lt;numLines; i++){

	/* grab the string object from the next element of the list */
	strObj = PyList_GetItem(listObj, i); /* Can't fail */

	/* make it a string */
	line = PyString_AsString( strObj );

	/* now do the parsing */


les schaffer

</pre></div>
</div>


<table class="as_lists_thread_navigation" id="as_lists_article_thread" cellpadding="0" cellspacing="0" border="0" align="left" width="100%">
	<tr>
		<th colspan="3">Recent Messages in this Thread</th>
	</tr>
<tr class='as_list_table_even'>
<td class='as_tree_message_title'>
<div class='as_artlink'><a name='31840'><a  href="http://code.activestate.com/lists/python-list/31840/">using PyArg_ParseTuple with a list</a></div></td>
<td nowrap='true' class='as_tree_message_author'>
j vickroy</td>
<td nowrap='true' class='as_tree_message_date'><span class='as_lists_date'>Apr 21, 2000 07:53 pm</span></td>
</tr>
<tr class='as_list_table_odd'>
<td class='as_tree_message_title'>
<div class='as_artlink'><div class='as_indent'>&nbsp;</div><span class='as_list_current'>using PyArg_ParseTuple with a list</span></div></td>
<td nowrap='true' class='as_tree_message_author'>
Les Schaffer</td>
<td nowrap='true' class='as_tree_message_date'><span class='as_lists_date'>Apr 22, 2000 01:54 pm</span></td>
</tr>
</table>

<script>
	$(document).ready(function() {
		$("div#as_list_show_plaintext a").click(function(e) {
			
			$('div#as_list_article_html').toggle();
			$('div#as_list_article_plaintext').toggle();
			var link_text = $(this).html();
			if (link_text == "Show HTML formatted message") {
				$(this).text("Hide HTML formatted message");
			}
			else {
				$(this).text("Show HTML formatted message");
			}
			e.preventDefault();
		})
	});
</script>	</div>
    </div> <!-- end of as_content -->
  </div> <!-- end of as_content_wrapper -->

  
  <div id="as_sidebar_wrapper">
	<div id="as_sidebar">
					<div id="as_article_nav">
									<div id="as_nav_by_thread">
											<a class="as_prev" href="http://code.activestate.com/lists/python-list/31840/">&#x25C4;</a>
										Messages in this thread
	
											<div class="as_next">&#x25BA</div>
										</div>
				
									<div id="as_nav_by_date">
															<div id="as_nav_prev_by_date">
					<strong>Previous post: </strong>
					<a href="http://code.activestate.com/lists/python-list/31907/">code not true?</a>
					</div>
									
															<div id="as_nav_next_by_date">
						<strong>Next post: </strong>
						<a href="http://code.activestate.com/lists/python-list/31903/">code not true?</a>
					</div>
										</div>
			</div>
											<div id="as_list_rss_feed">
					<a href="http://code.activestate.com/lists/python-list/?rss_feed=25"
					   target="_blank"
					   title="RSS 2.0 news feed">
					Subscribe to the python-list RSS feed</a>
				</div>
				
				<div id="as_promo">
		<script type='text/javascript'><!--//<![CDATA[
   var m3_u = (location.protocol=='https:'?'https://ads.activestate.com/www/delivery/ajs.php':'http://ads.activestate.com/www/delivery/ajs.php');
   var m3_r = Math.floor(Math.random()*99999999999);
   if (!document.MAX_used) document.MAX_used = ',';
   document.write ("<scr"+"ipt type='text/javascript' src='"+m3_u);
   document.write ("?zoneid=1");
   document.write ('&amp;cb=' + m3_r);
   if (document.MAX_used != ',') document.write ("&amp;exclude=" + document.MAX_used);
   document.write (document.charset ? '&amp;charset='+document.charset : (document.characterSet ? '&amp;charset='+document.characterSet : ''));
   document.write ("&amp;loc=" + escape(window.location));
   if (document.referrer) document.write ("&amp;referer=" + escape(document.referrer));
   if (document.context) document.write ("&context=" + escape(document.context));
   if (document.mmm_fo) document.write ("&amp;mmm_fo=1");
   document.write ("'><\/scr"+"ipt>");
//]]>--></script><noscript><a href='http://ads.activestate.com/www/delivery/ck.php?n=aa9dea02&amp;cb=INSERT_RANDOM_NUMBER_HERE' target='_blank'><img src='//ads.activestate.com/www/delivery/avw.php?zoneid=1&amp;cb=INSERT_RANDOM_NUMBER_HERE&amp;n=aa9dea02' border='0' alt='' /></a></noscript>
		</div>
	</div> <!-- end of as_sidebar -->
  </div> <!-- end of as_sidebar_wrapper -->
  <div class="as_clear">&nbsp;</div>
</div> <!-- end of as_middle -->

<div id="as_footer_wrapper" class="as_footer2">
<div id="as_footer">

	<div class="as_footer2_section">
	  <h2 class="as_footer2_header">Accounts</h2>
	  <ul id="as_account_footer">
	    
	  </ul>
	
	</div>
	<div class="as_footer2_section">
	  <h2 class="as_footer2_header">List Archives</h2>
	  <ul>
	<li><a href='http://code.activestate.com/lists/group/perl/'>Perl Lists</a></li><li><a href='http://code.activestate.com/lists/group/python/'>Python Lists</a></li><li><a href='http://code.activestate.com/lists/group/php/'>PHP Lists</a></li><li><a href='http://code.activestate.com/lists/group/ruby/'>Ruby Lists</a></li><li><a href='http://code.activestate.com/lists/group/tcl/'>Tcl Lists</a></li><li><a href='http://code.activestate.com/lists/group/activestate/'>ActiveState Lists</a></li>	    <li style="margin-top:10px"><a href="http://listserv.activestate.com/mailman/mysubs">Manage ActiveState Subscriptions</a></li>
	  </ul>
	</div>
	<div class="as_footer2_section">
	  <h2 class="as_footer2_header">Feedback & Information</h2>
	  <ul>
	    <li><a href="/help/feedback/?type=general">Give Site Feedback</a></li>
	
	    <li><a href="/help/feedback/?type=bug&subject=Problem on page '/'">Report a Site Problem</a></li>
	    <li style="margin-top: 10px;"><a href="/about/">About</a></li>
	    <li><a href="/help/faq/">FAQ</a></li>
	    <li><a href="/help/terms/">Terms of Service</a></li>
	  </ul>
	</div>
	<div class="as_footer2_section">
	  <h2 class="as_footer2_header">ActiveState</h2>
	
	  <ul>
	    <li class="as_footer2_feed"><a href="//www.activestate.com/blog">ActiveState Blog</a></li>
		<li><a title="Perl Solutions" href="//www.activestate.com/perl">Perl Solutions</a></li>
		<li><a title="Python Solutions" href="//www.activestate.com/python">Python Solutions</a></li>
		<li><a title="Tcl Solutions" href="//www.activestate.com/tcl">Tcl Solutions</a></li>
		<li><a title="Download Perl" href="//www.activestate.com/activeperl/downloads">Download ActivePerl</a></li>
		<li><a title="Download Python" href="//www.activestate.com/activepython/downloads">Download ActivePython</a></li>
		<li><a title="Download Tcl" href="//www.activestate.com/activetcl/downloads">Download ActiveTcl</a></li>
		<li style="margin-top: 10px"><a href="//www.activestate.com/company">About ActiveState</a></li>
		<li><a href="//www.activestate.com/company/careers">Careers</a></li>
	  </ul>
	</div>
	<div class="as_footer2_copyright">
	  <a href="//www.activestate.com/privacy_policy/">Privacy Policy</a>
	  | <a href="//www.activestate.com/support/contact_us/">Contact Us</a>
	
	  | <a href="//www.activestate.com/support/faqs/">Support</a>
	  <p>
        &copy; 2012 ActiveState Software Inc. All rights reserved.
        ActiveState&reg;, Komodo&reg;, ActivePerl&reg;, ActivePython&reg;, ActiveTcl&reg;,
        and Stackato&reg; are registered trademarks of ActiveState.
        All other marks are property of their respective owners.
      </p>
	</div>

  
</div> <!-- end of as_footer -->
</div> <!-- end of as_footer_wrapper -->

</div> <!-- end of as_wrapper -->

<script>
	// insert account links into top nav and footer
       cookie_json = $.cookie("SSO_DATA");
       account_nav = "";
       account_footer = "";
      if (cookie_json) {
		cookie = eval('(' + cookie_json + ')');
		account_nav = '<a href="https://account.activestate.com" id="profile_nav">' + cookie['email'] + '</a> <span class="as_navsep">|</span>';
		account_nav += '<a href="https://account.activestate.com/signout/?next=' + escape(location.href) + '" id="signout_nav">Sign Out</a>';
		account_footer = '<li><a href="https://account.activestate.com/signout/?next=' + escape(location.href) + '" id="signout_nav">Sign Out</a></li>';
      } 
      else {
		account_nav = '<span>Welcome, Guest</span> <span class="as_navsep">|</span> <a href="https://account.activestate.com/signin/?next=' + escape(location.href) + '" id="signin_nav">Sign In</a>';
		account_footer = '<li><a href="https://account.activestate.com/signin/?next=' + escape(location.href) + '" id="signin_nav">Sign In</a></li>';
      }
      
	  
	  $('document').ready(function() {
			$("div#as_accountnav").prepend(account_nav);
			$("ul#as_account_footer").prepend(account_footer);
			$(".as_show_tooltip").tipTip({maxWidth: "450px", edgeOffset: 10});
	  });
</script>

</body>
</html>

