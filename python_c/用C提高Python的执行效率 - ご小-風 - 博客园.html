<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-cn">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>用C提高Python的执行效率 - ご小-風 - 博客园</title>
<link type="text/css" rel="stylesheet" href="/bundles/blog-common.css?v=gdNkSiQMyBMkpTeO1ex9qW-60UbMszQItnCUpBAT3LQ1"/>
<link id="MainCss" type="text/css" rel="stylesheet" href="http://common.cnblogs.com/Skins/SimpleBlue/style.css?id=20140415"/>
<link type="text/css" rel="stylesheet" href="/blog/customcss/65531.css?v=tNcOWDXC%2bLzSgTJlngeYy4fArjw%3d"/>
<link title="RSS" type="application/rss+xml" rel="alternate" href="http://www.cnblogs.com/icgg/rss"/>
<link title="RSD" type="application/rsd+xml" rel="EditURI" href="http://www.cnblogs.com/icgg/rsd.xml"/>
<link type="application/wlwmanifest+xml" rel="wlwmanifest" href="http://www.cnblogs.com/icgg/wlwmanifest.xml"/>
<script src="http://common.cnblogs.com/script/jquery.js" type="text/javascript"></script>  
<script type="text/javascript">var currentBlogApp = 'icgg', cb_enable_mathjax=false;</script>
<script src="/bundles/blog-common.js?v=iPflrWoIo72rhU3cYfJbnUvK6QAYRd4QPEVSKbmA4gw1" type="text/javascript"></script>
</head>
<body>
<a name="top"></a>
<!--PageBeginHtml Block Begin-->
<script>
$().ready(function(){
	$('#sideBar').dblclick(function(){
		$('#sideBar').animate({height: 'toggle', opacity: 'toggle'}, "slow", mainConteStyle());
	})
function mainConteStyle(){
	var mainContent = $('#mainContent');
	if(mainContent.css('marginLeft') == '0px'){
		mainContent.animate({marginLeft: '300px'}, "slow");
	}else{
		mainContent.animate({marginLeft: '0px'}, "slow");
	}
}
})
</script>
<div id="topBannar">
  <div id="navmenu">
    <ul id="nav_menu">
      <li class="current"><a href="http://www.cnblogs.com/icgg/">Home</a></li>
      <li><a title="Account" href="http://passport.cnblogs.com/login.aspx">Account</a></li>
      <li><a title="About" href="http://www.cnblogs.com/icgg/">About</a></li>
      <li><a title="Links" href="http://www.cnblogs.com/icgg/">Links</a></li>
      <li><a title="Rss" href="http://www.cnblogs.com/icgg/rss">Rss</a></li>
    </ul>
  </div>
  <div id="logo">
    <h1><a href="http://www.cnblogs.com/icgg/">ご干煸土豆丝.</a></h1>
    <p class="description">下一站会是哪里``加油┢┦o┢┦o</p>
  </div>
</div>
<!--PageBeginHtml Block End-->

<div id="home">
<div id="header">
	<div id="blogTitle">
		
<!--done-->
<div class="title"><a id="Header1_HeaderTitle" class="headermaintitle" href="http://www.cnblogs.com/icgg/">ご干煸土豆丝</a></div>
<div class="subtitle">下一站会到哪里</div>



		
	</div><!--end: blogTitle 博客的标题和副标题 -->
	<div id="navigator">
		
<ul id="navList">
<li id="nav_sitehome"><a id="MyLinks1_HomeLink" class="menu" href="http://www.cnblogs.com/">博客园</a></li>
<li id="nav_myhome"><a id="MyLinks1_MyHomeLink" class="menu" href="http://www.cnblogs.com/icgg/">首页</a></li>
<li id="nav_q"><a class="menu" href="http://q.cnblogs.com/">博问</a></li>
<li id="nav_ing"><a class="menu" href="http://home.cnblogs.com/ing/">闪存</a></li>
<li id="nav_newpost"><a id="MyLinks1_NewPostLink" class="menu" rel="nofollow" href="http://i.cnblogs.com/EditPosts.aspx?opt=1">新随笔</a></li>
<li id="nav_contact"><a id="MyLinks1_ContactLink" class="menu" rel="nofollow" href="http://space.cnblogs.com/msg/send/%e3%81%94%e5%b0%8f-%e9%a2%a8%11%10%10%11">联系</a></li>
<li id="nav_rss"><a id="MyLinks1_Syndication" class="menu" href="http://www.cnblogs.com/icgg/rss">订阅</a>
<!--<a id="MyLinks1_XMLLink" class="aHeaderXML" href="http://www.cnblogs.com/icgg/rss"><img src="http://www.cnblogs.com/images/xml.gif" alt="订阅" /></a>--></li>
<li id="nav_admin"><a id="MyLinks1_Admin" class="menu" rel="nofollow" href="http://i.cnblogs.com/">管理</a></li>
</ul>

		<div class="blogStats">
			
			
<!--done-->
随笔-0&nbsp;
文章-233&nbsp;
评论-5&nbsp;

			
		</div><!--end: blogStats -->
	</div><!--end: navigator 博客导航栏 -->
</div><!--end: header 头部 -->
<div id="main">
	<div id="mainContent">
	<div class="forFlow">
		

<!--done-->
<div id="topics">
	<div class = "post">
		<h1 class = "postTitle">
			<a id="cb_post_title_url" class="postTitle2" href="http://www.cnblogs.com/icgg/articles/1854916.html">用C提高Python的执行效率</a>
		</h1>
		<div class="clear"></div>
		<div class="postBody">
			<div id="cnblogs_post_body"><p><span class="atitle">转自：<a href="http://blog.fulin.org/">http://blog.fulin.org/</a></span></p>
<p><span class="atitle">&nbsp;</span>&nbsp;</p>
<p>一、简介</p>
<p>Python是一门功能强大的高级脚本语言，它的强大不仅表现在其自身的功能上，而且还表现在其良好的可扩展性上，正因如此，Python已经开始受到越来越多人的青睐，并且被屡屡成功地应用于各类大型软件系统的开发过程中。</p>
<p>与其它普通脚本语言有所不同，Python程序员可以借助Python语言提供的API，使用C或者C++来对Python进行功能性扩展，从而即可以利用Python方便灵活的语法和功能，又可以获得与C或者C++几乎相同的执行性能。执行速度慢是几乎所有脚本语言都具有的共性，也是倍受人们指责的一个重要因素，Python则通过与C语言的有机结合巧妙地解决了这一问题，从而使脚本语言的应用范围得到了很大扩展。</p>
<p>在用Python开发实际软件系统时，很多时候都需要使用C/C++来对Python进行扩展。最常见的情况是目前已经存在一个用C编写的库，需要在Python语言中使用该库的某些功能，此时就可以借助Python提供的扩展功能来实现。此外，由于Python从本质上讲还是一种脚本语言，某些功能用Python实现可能很难满足实际软件系统对执行效率的要求，此时也可以借助Python提供的扩展功能，将这些关键代码段用C或者C++实现，从而提供程序的执行性能。</p>
<p>本文主要介绍Python提供的C语言扩展接口，以及如何使用这些接口和C/C++语言来对Python进行功能性扩展，并辅以具体的实例讲述如何实现Python的功能扩展。</p>
<p>&nbsp;</p>
<p>二、Python的C语言接口</p>
<p>Python是用C语言实现的一种脚本语言，本身具有优良的开放性和可扩展性，并提供了方便灵活的应用程序接口(API)，从而使得C/C++程序员能够在各个级别上对Python解释器的功能进行扩展。在使用C/C++对Python进行功能扩展之前，必须首先掌握Python解释所提供的C语言接口。</p>
<p>2.1 Python对象(PyObject)</p>
<p>Python是一门面向对象的脚本语言，所有的对象在Python解释器中都被表示成PyObject，PyObject结构包含Python对象的所有成员指针，并且对Python对象的类型信息和引用计数进行维护。在进行Python的扩展编程时，一旦要在C或者C++中对Python对象进行处理，就意味着要维护一个PyObject结构。</p>
<p>在Python的C语言扩展接口中，大部分函数都有一个或者多个参数为PyObject指针类型，并且返回值也大都为PyObject指针。</p>
<p>2.2 引用计数</p>
<p>为了简化内存管理，Python通过引用计数机制实现了自动的垃圾回收功能，Python中的每个对象都有一个引用计数，用来计数该对象在不同场所分别被引用了多少次。每当引用一次Python对象，相应的引用计数就增1，每当消毁一次Python对象，则相应的引用就减1，只有当引用计数为零时，才真正从内存中删除Python对象。</p>
<p>下面的例子说明了Python解释器如何利用引用计数来对Pyhon对象进行管理：</p>
<p>例1:refcount.py<br />class refcount:<br />&nbsp;&nbsp;&nbsp; # etc.<br />r1 = refcount() # 引用计数为1<br />r2 = r1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # 引用计数为2<br />del(r1)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # 引用计数为1<br />del(r2)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # 引用计数为0，删除对象 </p>
<p>在C/C++中处理Python对象时，对引用计数进行正确的维护是一个关键问题，处理不好将很容易产生内存泄漏。Python的C语言接口提供了一些宏来对引用计数进行维护，最常见的是用Py_INCREF()来增加使Python对象的引用计数增1，用Py_DECREF()来使Python对象的引用计数减1。</p>
<p>2.3 数据类型</p>
<p>Python定义了六种数据类型：整型、浮点型、字符串、元组、列表和字典，在使用C语言对Python进行功能扩展时，首先要了解如何在C和Python的数据类型间进行转化。</p>
<p>2.3.1 整型、浮点型和字符串</p>
<p>在Python的C语言扩展中要用到整型、浮点型和字符串这三种数据类型时相对比较简单，只需要知道如何生成和维护它们就可以了。下面的例子给出了如何在C语言中使用Python的这三种数据类型：</p>
<p>例2：typeifs.c<br />// build an integer<br />PyObject* pInt = Py_BuildValue("i", 2003);<br />assert(PyInt_Check(pInt));<br />int i = PyInt_AsLong(pInt);<br />Py_DECREF(pInt);<br />// build a float<br />PyObject* pFloat = Py_BuildValue("f", 3.14f);<br />assert(PyFloat_Check(pFloat));<br />float f = PyFloat_AsDouble(pFloat);<br />Py_DECREF(pFloat);<br />// build a string<br />PyObject* pString = Py_BuildValue("s", "Python");<br />assert(PyString_Check(pString);<br />int nLen = PyString_Size(pString);<br />char* s = PyString_AsString(pString);<br />Py_DECREF(pString); </p>
<p>2.3.2 元组</p>
<p>Python语言中的元组是一个长度固定的数组，当Python解释器调用C语言扩展中的方法时，所有非关键字(non-keyword)参数都以元组方式进行传递。下面的例子示范了如何在C语言中使用Python的元组类型：</p>
<p>例3：typetuple.c<br />// create the tuple<br />PyObject* pTuple = PyTuple_New(3);<br />assert(PyTuple_Check(pTuple));<br />assert(PyTuple_Size(pTuple) == 3);<br />// set the item<br />PyTuple_SetItem(pTuple, 0, Py_BuildValue("i", 2003));<br />PyTuple_SetItem(pTuple, 1, Py_BuildValue("f", 3.14f));<br />PyTuple_SetItem(pTuple, 2, Py_BuildValue("s", "Python"));<br />// parse tuple items<br />int i;<br />float f;<br />char *s;<br />if (!PyArg_ParseTuple(pTuple, "ifs", &amp;i, &amp;f, &amp;s))<br />&nbsp;&nbsp;&nbsp; PyErr_SetString(PyExc_TypeError, "invalid parameter");<br />// cleanup<br />Py_DECREF(pTuple); </p>
<p>2.3.3 列表</p>
<p>Python语言中的列表是一个长度可变的数组，列表比元组更为灵活，使用列表可以对其存储的Python对象进行随机访问。下面的例子示范了如何在C语言中使用Python的列表类型：</p>
<p>例4：typelist.c<br />// create the list<br />PyObject* pList = PyList_New(3); // new reference<br />assert(PyList_Check(pList));<br />// set some initial values<br />for(int i = 0; i &lt; 3; ++i)<br />&nbsp;&nbsp;&nbsp; PyList_SetItem(pList, i, Py_BuildValue("i", i));<br />// insert an item<br />PyList_Insert(pList, 2, Py_BuildValue("s", "inserted"));<br />// append an item<br />PyList_Append(pList, Py_BuildValue("s", "appended"));<br />// sort the list<br />PyList_Sort(pList);<br />// reverse the list<br />PyList_Reverse(pList);<br />// fetch and manipulate a list slice<br />PyObject* pSlice = PyList_GetSlice(pList, 2, 4); // new reference<br />for(int j = 0; j &lt; PyList_Size(pSlice); ++j) {<br />&nbsp; PyObject *pValue = PyList_GetItem(pList, j);<br />&nbsp; assert(pValue);<br />}<br />Py_DECREF(pSlice);<br />// cleanup<br />Py_DECREF(pList); </p>
<p>2.3.4 字典</p>
<p>Python语言中的字典是一个根据关键字进行访问的数据类型。下面的例子示范了如何在C语言中使用Python的字典类型：</p>
<p>例5：typedic.c<br />// create the dictionary<br />PyObject* pDict = PyDict_New(); // new reference<br />assert(PyDict_Check(pDict));<br />// add a few named values<br />PyDict_SetItemString(pDict, "first",<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Py_BuildValue("i", 2003));<br />PyDict_SetItemString(pDict, "second",<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Py_BuildValue("f", 3.14f));<br />// enumerate all named values<br />PyObject* pKeys = PyDict_Keys(); // new reference<br />for(int i = 0; i &lt; PyList_Size(pKeys); ++i) {<br />&nbsp; PyObject *pKey = PyList_GetItem(pKeys, i);<br />&nbsp; PyObject *pValue = PyDict_GetItem(pDict, pKey);<br />&nbsp; assert(pValue);<br />}<br />Py_DECREF(pKeys);<br />// remove a named value<br />PyDict_DelItemString(pDict, "second");<br />// cleanup<br />Py_DECREF(pDict); </p>
<p>&nbsp;</p>
<p>三、Python的C语言扩展</p>
<p>3.1 模块封装</p>
<p>在了解了Python的C语言接口后，就可以利用Python解释器提供的这些接口来编写Python的C语言扩展，假设有如下一个C语言函数：</p>
<p>例6：example.c<br />int fact(int n)<br />{<br />&nbsp; if (n &lt;= 1)<br />&nbsp;&nbsp;&nbsp; return 1;<br />&nbsp; else<br />&nbsp;&nbsp;&nbsp; return n * fact(n - 1);<br />} </p>
<p>该函数的功能是计算某个给定自然数的阶乘，如果想在Python解释器中调用该函数，则应该首先将其实现为Python中的一个模块，这需要编写相应的封装接口，如下所示：</p>
<p>例7: wrap.c<br />#include &lt;Python.h&gt;<br />PyObject* wrap_fact(PyObject* self, PyObject* args)<br />{<br />&nbsp; int n, result;</p>
<p>&nbsp; if (! PyArg_ParseTuple(args, "i:fact", &amp;n))<br />&nbsp;&nbsp;&nbsp; return NULL;<br />&nbsp; result = fact(n);<br />&nbsp; return Py_BuildValue("i", result);<br />}<br />static PyMethodDef exampleMethods[] =<br />{<br />&nbsp; {"fact", wrap_fact, METH_VARARGS, "Caculate N!"},<br />&nbsp; {NULL, NULL}<br />};<br />void initexample()<br />{<br />&nbsp; PyObject* m;<br />&nbsp; m = Py_InitModule("example", exampleMethods);<br />} </p>
<p>一个典型的Python扩展模块至少应该包含三个部分：导出函数、方法列表和初始化函数。</p>
<p>3.2 导出函数</p>
<p>要在Python解释器中使用C语言中的某个函数，首先要为其编写相应的导出函数，上述例子中的导出函数为wrap_fact。在Python的C语言扩展中，所有的导出函数都具有相同的函数原型：</p>
<p>PyObject* method(PyObject* self, PyObject* args);该函数是Python解释器和C函数进行交互的接口，带有两个参数：self和args。参数self只在C函数被实现为内联方法(built-in method)时才被用到，通常该参数的值为空(NULL)。参数args中包含了Python解释器要传递给C函数的所有参数，通常使用Python的C语言扩展接口提供的函数PyArg_ParseTuple()来获得这些参数值。</p>
<p>所有的导出函数都返回一个PyObject指针，如果对应的C函数没有真正的返回值(即返回值类型为void)，则应返回一个全局的None对象(Py_None)，并将其引用计数增1，如下所示：</p>
<p>PyObject* method(PyObject *self, PyObject *args)<br />{<br />&nbsp; Py_INCREF(Py_None);<br />&nbsp; return Py_None;<br />} </p>
<p>3.3 方法列表</p>
<p>方法列表中给出了所有可以被Python解释器使用的方法，上述例子对应的方法列表为：</p>
<p>static PyMethodDef exampleMethods[] =<br />{<br />&nbsp; {"fact", wrap_fact, METH_VARARGS, "Caculate N!"},<br />&nbsp; {NULL, NULL}<br />}; </p>
<p>方法列表中的每项由四个部分组成：方法名、导出函数、参数传递方式和方法描述。方法名是从Python解释器中调用该方法时所使用的名字。参数传递方式则规定了Python向C函数传递参数的具体形式，可选的两种方式是METH_VARARGS和METH_KEYWORDS，其中METH_VARARGS是参数传递的标准形式，它通过Python的元组在Python解释器和C函数之间传递参数，若采用METH_KEYWORD方式，则Python解释器和C函数之间将通过Python的字典类型在两者之间进行参数传递。</p>
<p>3.4 初始化函数</p>
<p>所有的Python扩展模块都必须要有一个初始化函数，以便Python解释器能够对模块进行正确的初始化。Python解释器规定所有的初始化函数的函数名都必须以init开头，并加上模块的名字。对于模块example来说，则相应的初始化函数为:</p>
<p>void initexample()<br />{<br />&nbsp; PyObject* m;<br />&nbsp; m = Py_InitModule("example", exampleMethods);<br />} </p>
<p>当Python解释器需要导入该模块时，将根据该模块的名称查找相应的初始化函数，一旦找到则调用该函数进行相应的初始化工作，初始化函数则通过调用Python的C语言扩展接口所提供的函数Py_InitModule()，来向Python解释器注册该模块中所有可以用到的方法。</p>
<p>3.5 编译链接</p>
<p>要在Python解释器中使用C语言编写的扩展模块，必须将其编译成动态链接库的形式。下面以RedHat Linux 8.0为例，介绍如何将C编写的Python扩展模块编译成动态链接库：</p>
<p>[xiaowp@gary code]$ gcc -fpic -c -I/usr/include/python2.2 \<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -I /usr/lib/python2.2/config \<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; example.c wrapper.c<br />[xiaowp@gary code]$ gcc -shared -o example.so example.o wrapper.o </p>
<p>3.6 引入Python解释器</p>
<p>当生成Python扩展模块的动态链接库后，就可以在Python解释器中使用该扩展模块了，与Python自带的模块一样，扩展模块也是通过import命令引入后再使用的，如下所示：</p>
<p>[xiaowp@gary code]$ python<br />Python 2.2.1 (#1, Aug 30 2002, 12:15:30)<br />[GCC 3.2 20020822 (Red Hat Linux Rawhide 3.2-4)] on linux2<br />Type "help", "copyright", "credits" or "license" for more information.<br />&gt;&gt;&gt; import example<br />&gt;&gt;&gt; example.fact(4)<br />24<br />&gt;&gt;&gt; </p>
<p>&nbsp;</p>
<p>四、结束语</p>
<p>作为一门功能强大的脚本语言，Python将被更加广泛地应用于各个领域。为了克服脚本语言执行速度慢的问题，Python提供了相应的C语言扩展接口，通过将影响执行性能的关键代码用C语言实现，可以很大程度上提高用Python编写的脚本在运行时的速度，从而满足实际需要。</p>
<p>&nbsp;</p>
<p>参考资料 </p>
<p>　　可以从Python( <a href="http://www.python.org">http://www.python.org</a>)网站着手了解所有关于Python的内容。 <br />　　可以在Python网站上找到正式的Python C/API文档( <a href="http://www.python.org/doc/current/api/api.html">http://www.python.org/doc/current/api/api.html</a>)。 <br />　　可以在Python网站上找到正式的编写Python扩展模块的文档( <a href="http://www.python.org/doc/current/api/api.html">http://www.python.org/doc/current/api/api.html</a>)。 </p></div><div id="MySignature"></div>
<div class="clear"></div>
<div id="blog_post_info_block">
<div id="blog_post_info">
</div>
<div class="clear"></div>
<div id="post_next_prev"></div>
</div>


		</div>
		<div class = "postDesc">posted @ <span id="post-date">2010-10-18 20:54</span> <a href='http://www.cnblogs.com/icgg/'>ご小-風</a> 阅读(<span id="post_view_count">...</span>) 评论(<span id="post_comment_count">...</span>) &nbsp;<a href="http://i.cnblogs.com/EditArticles.aspx?postid=1854916" rel="nofollow">编辑</a> <a href="#" onclick="AddToWz(1854916);return false;">收藏</a></div>
	</div>
	<script type="text/javascript">var allowComments=true,isLogined=false,cb_blogId=65531,cb_entryId=1854916,cb_blogApp=currentBlogApp,cb_blogUserGuid='09e79769-3800-df11-ba8f-001cf0cd104b',cb_entryCreatedDate='2010/10/18 20:54:00';loadViewCount(cb_entryId);</script>
	
</div><!--end: topics 文章、评论容器-->
<a name="!comments"></a><div id="blog-comments-placeholder"></div><script type="text/javascript">var commentManager = new blogCommentManager();commentManager.renderComments(0);</script>
<div id="comment_form" class="commentform">
<a name="commentform"></a>
<div id="divCommentShow"></div>
<div id="comment_nav"><span id="span_refresh_tips"></span><a href="javascript:void(0);" id="lnk_RefreshComments" onclick="return RefreshCommentList();">刷新评论</a><a href="#" onclick="return RefreshPage();">刷新页面</a><a href="#top">返回顶部</a></div>
<div id="comment_form_container"></div>
<div class="ad_text_commentbox" id="ad_text_under_commentbox"></div>
<div id="site_nav_under"><a href="http://www.cnblogs.com/" target="_blank" title="程序员的网上家园">博客园首页</a><a href="http://q.cnblogs.com/" target="_blank" title="程序员问答社区">博问</a><a href="http://news.cnblogs.com/" target="_blank" title="IT新闻">新闻</a><a href="http://home.cnblogs.com/ing/" target="_blank">闪存</a><a href="http://job.cnblogs.com/" target="_blank">程序员招聘</a><a href="http://kb.cnblogs.com/" target="_blank">知识库</a></div>
<div id="ad_under_post_holder"></div>
<script type="text/javascript">
var enableGoogleAd = true;
var googletag = googletag || {};
googletag.cmd = googletag.cmd || [];
fixPostBodyFormat();
loadAdUnderPost();
</script>
<div id="HistoryToday" class="c_ad_block"></div>
<script type="text/javascript">
loadBlogSignature();
LoadPostInfoBlock(cb_blogId, cb_entryId, cb_blogApp, cb_blogUserGuid);
GetPrevNextPost(cb_entryId, cb_blogId, cb_entryCreatedDate);
GetHistoryToday(cb_blogId, cb_blogApp, cb_entryCreatedDate);
</script>
<script type="text/javascript">
    $.ajax({ url: 'http://counter.cnblogs.com/blog/post/' + cb_entryId, type: 'get', dataType: 'script', cache: true });
</script>
</div>

	</div><!--end: forFlow -->
	</div><!--end: mainContent 主体内容容器-->

	<div id="sideBar">
		<div id="sideBarMain">
			
<!--done-->
<div class="newsItem">
<h3 class="catListTitle">公告</h3>
	<div id="blog-news"></div><script type="text/javascript">loadBlogNews();</script>
</div>

			<div id="calendar"><div id="blog-calendar" style="display:none"></div><script type="text/javascript">loadBlogDefaultCalendar();</script></div>
			
			<div id="leftcontentcontainer">
				<div id="blog-sidecolumn"></div><script type="text/javascript">loadBlogSideColumn();</script>
			</div>
			
		</div><!--end: sideBarMain -->
	</div><!--end: sideBar 侧边栏容器 -->
	<div class="clear"></div>
	</div><!--end: main -->
	<div class="clear"></div>
	<div id="footer">
		
<!--done-->
Copyright &copy;2014 ご小-風
	</div><!--end: footer -->
</div><!--end: home 自定义的最大容器 -->
</body>
</html>
