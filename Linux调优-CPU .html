<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Linux调优-CPU - lllzd的专栏 - 博客频道 - CSDN.NET</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="description" content="前言: 网上其实有很多关于这方面的文章,那为什么还会有此篇呢,有这么几个原因,是我翻译的动力,第一,概念和内容虽然老套,但都讲得很透彻,而且还很全面.第二,理论结合实际,其中案例分析都不错.第三,不花哨,采用的工具及命令都是最基本的,有助于实际操作.但本人才疏学浅,译文大多数都是立足于自己对原文的理解,大家也可以自己去OSCAN上找原文,如果有什么较大出入,还望留言回复,甚是感激!1.0" />
<script src="http://static.blog.csdn.net/scripts/jquery.js" type="text/javascript"></script>
<script src="http://static.blog.csdn.net/scripts/plugins.js" type="text/javascript"></script>
<script src="http://static.blog.csdn.net/scripts/common.js?v=1.2" type="text/javascript"></script>
<script type="text/javascript" src="http://static.blog.csdn.net/scripts/ad.js?v=1.1"></script>
<link rel="Stylesheet" type="text/css" href="http://static.blog.csdn.net/skin/light_blue/css/style.css?v=1.1" />
<link id="RSSLink" title="RSS" type="application/rss+xml" rel="alternate" href="/lllzd/rss/list" />
<link rel="shortcut icon" href="/favicon.ico" />
<link type="text/css" rel="stylesheet" href="http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/default.css" />
</head>
<body>
<script src="http://csdnimg.cn/pubnav/js/pub_topnav_2011.js"type="text/javascript"></script>
<div id="container">
<div id="header">
    <div class="header">
        <div id="blog_title">
            <h1><a href="/lllzd">lllzd的专栏</a></h1>
            <h2></h2>
            <div class="clear"></div>
        </div>
        <div class="clear"></div>
    </div>
</div>
<div id="navigator">
    <div class="navigator_bg"></div>
    <div class="navigator">
        <ul>
            <li id="btnContents"><a href="/lllzd?viewmode=contents"><span><img src="http://static.blog.csdn.net/images/ico_list.gif">目录视图</span></a></li>
            <li id="btnView"><a href="/lllzd?viewmode=list"><span><img src="http://static.blog.csdn.net/images/ico_summary.gif">摘要视图</span></a></li>
            <li id="btnRss"><a href="/lllzd/rss/list"><span><img src="http://static.blog.csdn.net/images/ico_rss.gif">订阅</span></a></li>
</ul>
    </div>
</div>
<script type="text/javascript">
    var username = "lllzd";
    var blog_address = "http://blog.csdn.net/lllzd";
    var static_host = "http://static.blog.csdn.net";
    var currentUserName = "";
</script>
        
<div id="body">
<div id="main">
<div class="main">
<div class="notice"> 

<a href="http://blog.csdn.net/blogdevteam/article/details/8424776" target="_blank">
<font color=blue>
2013年4月微软MVP申请开始啦！   </font></a>

&nbsp;&nbsp;

<a href="http://bbs.csdn.net/topics/390330213
" target="_blank"><font color=red>写给13岁的CSDN论坛 </font></a>

&nbsp;&nbsp;

<a href="http://blog.csdn.net/blogdevteam/article/details/8424675
" target="_blank"><font color=red>CSDN博客频道年终送好礼！</font></a>


<br />





<a href="http://vote.blog.csdn.net/details/blogstar"target="_blank">
<font color=red>2012CSDN博客之星评选正式上线 </font></a>

&nbsp;&nbsp;&nbsp;&nbsp;

<a href="http://blog.csdn.net/zhangoi391/article/details/8161343"target="_blank">
<font color=red>2000元大奖征异构开发博文  </font></a>

&nbsp;&nbsp;&nbsp;&nbsp;

<a href="http://huiyi.csdn.net/cmdn/view/183"target="_blank">
<font color=red>Q14年互联网产品进化史   </font></a>

</div><div id="article_details" class="details">
    <div class="article_title">
    <span class="ico ico_type_Original"></span>
    <h3>
        <span class="link_title"><a href="/lllzd/article/details/7871860">
        Linux调优-CPU
        </a></span>
    </h3>
</div>

        
    <div class="article_manage">
        <span class="link_categories">
        分类：
            <a href="/lllzd/article/category/1208869">Linux</a> 
        </span>
    <span class="link_postdate">2012-08-16 09:40</span>
    <span class="link_view" title="阅读次数">670人阅读</span>
    <span class="link_comments" title="评论次数"><a href="#comments">评论</a>(0)</span>
    <span class="link_collect"><a href="javascript:void(0);" onclick="javascript:collectArticle('Linux调优-CPU','7871860');return false;" title="收藏">收藏</a></span>
    <span class="link_report"><a href="#report"  onclick="javascript:report(7871860,2);return false;" title="举报">举报</a></span>
    
</div>


    
<div id="article_content" class="article_content">

<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
前言: 网上其实有很多关于这方面的文章,那为什么还会有此篇呢,有这么几个原因,是我翻译的动力,第一,概念和内容虽然老套,但都讲得很透彻,而且还很全面.第二,理论结合实际,其中案例分析都不错.第三,不花哨,采用的工具及命令都是最基本的,有助于实际操作.但本人才疏学浅,译文大多数都是立足于自己对原文的理解,大家也可以自己去OSCAN上找原文,如果有什么较大出入,还望留言回复,甚是感激!</p>
<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
1.0 性能监控介绍</p>
<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
性能优化就是找到系统处理中的瓶颈以及去除这些的过程,多数管理员相信看一些相关的”cook book”就可以实现性能优化,通常通过对内核的一些配置是可以简单的解决问题,但并不适合每个环境,性能优化其实是对OS 各子系统达到一种平衡的定义,这些子系统包括了:</p>
<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
CPU<br>
Memory<br>
IO<br>
Network</p>
<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
这些子系统之间关系是相互彼此依赖的,任何一个高负载都会导致其他子系统出现问题.比如:</p>
<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
大量的页调入请求导致内存队列的拥塞<br>
网卡的大吞吐量可能导致更多的 CPU开销<br>
大量的CPU开销又会尝试更多的内存使用请求<br>
大量来自内存的磁盘写请求可能导致更多的 CPU 以及 IO问题<br>
所以要对一个系统进行优化,查找瓶颈来自哪个方面是关键,虽然看&#20284;是某一个子系统出现问题,其实有可能是别的子系统导致的.</p>
<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
1.1 确定应用类型</p>
<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
基于需要理解该从什么地方来入手优化瓶颈,首先重要的一点,就是理解并分析当前系统的特点,多数系统所跑的应用类型,主要为2种:</p>
<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
IO Bound(译注:IO 范畴): 在这个范畴中的应用,一般都是高负荷的内存使用以及存储系统,这实际上表示IO 范畴的应用,就是一个大量数据处理的过程.IO 范畴的应用不对CPU以及网络发起更多请求(除非类&#20284;NAS这样的网络存储硬件).IO 范畴的应用通常使用CPU 资源都是为了产生IO 请求以及进入到内核调度的sleep 状态.通常数据库软件(译注:mysql,oracle等)被认为是IO 范畴的应用类型.</p>
<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
CPU Bound(译注:CPU 范畴): 在这个范畴中的应用,一般都是高负荷的CPU 占用. CPU 范畴的应用,就是一个批量处理CPU 请求以及数学计算的过程.通常web server,mail server,以及其他类型服务被认为是CPU 范畴的应用类型.</p>
<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
1.2 确定基准线统计</p>
<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
系统利用率情况,一般随管理员经验以及系统本身用途来决定.唯一要清楚的就是,系统优化希望达成什么效果,以及哪些方面是需要优化,还有参考&#20540;是什么?因此就建立一个基准线,这个统计数据必须是系统可用性能状态&#20540;,用来比较不可用性能状态&#20540;.</p>
<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
在以下例子中,1个系统性能的基准线快照,用来比较当高负荷时的系统性能快照.</p>
<div class="codecolorer-container bash geshi" style="margin:0px 0px 10px; padding:0px; color:rgb(84,84,84); text-align:left; font-size:13px; line-height:1.4em; font-family:Monaco,'Lucida Console',monospace; border:1px solid rgb(159,159,159); background-color:rgb(217,217,217); overflow:auto; width:640px; height:532px">
<div class="bash codecolorer" style="margin:0px; padding:5px; line-height:1.4em; background-color:rgb(241,241,241)">
<span style="margin:0px; padding:0px; line-height:1.4em">[</span>root<span style="margin:0px; padding:0px; line-height:1.4em">@</span>opt-001 ~<span style="margin:0px; padding:0px; line-height:1.4em">]</span><span style="margin:0px; padding:0px; line-height:1.4em">#
 vmstat 1 -S m</span><br style="line-height:1.4em">
procs&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">-----------memory----------</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">---swap--</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">-----io----</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">--system--</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">-----cpu------</span><br style="line-height:1.4em">
r &nbsp;b &nbsp; swpd &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">free</span>&nbsp;&nbsp; buff &nbsp;cache &nbsp; si &nbsp;so &nbsp; bi &nbsp; &nbsp;bo &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">in</span>&nbsp;&nbsp; cs &nbsp;us sy&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">id</span>&nbsp;wa
 st<br style="line-height:1.4em">
<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">91</span>&nbsp;&nbsp;
 &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">239</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">3047</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;
 &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">4</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">55</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">32</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">20</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">98</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span><br style="line-height:1.4em">
<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">92</span>&nbsp;&nbsp;
 &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">239</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">3047</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;
 &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1127</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">3131</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">100</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span><br style="line-height:1.4em">
<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">92</span>&nbsp;&nbsp;
 &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">239</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">3047</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;
 &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1105</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">3064</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">100</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span><br style="line-height:1.4em">
<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">92</span>&nbsp;&nbsp;
 &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">239</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">3047</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;
 &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">4</span>&nbsp;&nbsp; &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1156</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">3071</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">99</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span><br style="line-height:1.4em">
<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">92</span>&nbsp;&nbsp;
 &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">239</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">3047</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;
 &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">604</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1177</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">2976</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">100</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span><br style="line-height:1.4em">
<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">92</span>&nbsp;&nbsp;
 &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">239</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">3047</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;
 &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1082</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">3018</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">100</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span><br style="line-height:1.4em">
<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">92</span>&nbsp;&nbsp;
 &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">239</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">3047</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;
 &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">16</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1075</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">3023</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">99</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span><br style="line-height:1.4em">
<span style="margin:0px; padding:0px; line-height:1.4em">2</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">92</span>&nbsp;&nbsp;
 &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">239</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">3047</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;
 &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">56</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1101</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">3134</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">100</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span><br style="line-height:1.4em">
<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">92</span>&nbsp;&nbsp;
 &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">239</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">3047</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;
 &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1041</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">3040</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">100</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span><br style="line-height:1.4em">
<br style="line-height:1.4em">
<span style="margin:0px; padding:0px; line-height:1.4em">[</span>root<span style="margin:0px; padding:0px; line-height:1.4em">@</span>opt-001 ~<span style="margin:0px; padding:0px; line-height:1.4em">]</span><span style="margin:0px; padding:0px; line-height:1.4em">#
 vmstat 1 -S m</span><br style="line-height:1.4em">
procs&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">-----------memory----------</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">---swap--</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">-----io----</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">--system--</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">-----cpu------</span><br style="line-height:1.4em">
r &nbsp;b &nbsp; swpd &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">free</span>&nbsp;&nbsp; buff &nbsp;cache &nbsp; si &nbsp; so &nbsp; &nbsp;bi &nbsp; &nbsp;bo &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">in</span>&nbsp;&nbsp; cs us sy&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">id</span>&nbsp;wa
 st<br style="line-height:1.4em">
<span style="margin:0px; padding:0px; line-height:1.4em">1</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">710</span>&nbsp;&nbsp;
 &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">113</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">2573</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;
 &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">4</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">55</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">20</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">98</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span><br style="line-height:1.4em">
<span style="margin:0px; padding:0px; line-height:1.4em">2</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">701</span>&nbsp;&nbsp;
 &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">113</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">2582</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">4192</span>&nbsp;&nbsp;
 &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1175</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">4754</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">24</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">75</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span><br style="line-height:1.4em">
<span style="margin:0px; padding:0px; line-height:1.4em">2</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">694</span>&nbsp;&nbsp;
 &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">113</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">2590</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">3584</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">21012</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1470</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">4323</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">16</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">61</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">22</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span><br style="line-height:1.4em">
<span style="margin:0px; padding:0px; line-height:1.4em">2</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">684</span>&nbsp;&nbsp;
 &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">113</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">2598</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">4272</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">572</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1167</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">4813</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">23</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">75</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">2</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span><br style="line-height:1.4em">
<span style="margin:0px; padding:0px; line-height:1.4em">3</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">676</span>&nbsp;&nbsp;
 &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">113</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">2606</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">3832</span>&nbsp;&nbsp;
 &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1211</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">5168</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">25</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">75</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span><br style="line-height:1.4em">
<span style="margin:0px; padding:0px; line-height:1.4em">2</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">671</span>&nbsp;&nbsp;
 &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">113</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">2610</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1336</span>&nbsp;&nbsp;
 &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1061</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">4230</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">24</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">75</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span><br style="line-height:1.4em">
<span style="margin:0px; padding:0px; line-height:1.4em">2</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">664</span>&nbsp;&nbsp;
 &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">113</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">2618</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">2916</span>&nbsp;&nbsp;
 &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1168</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">5368</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">24</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">74</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span><br style="line-height:1.4em">
<span style="margin:0px; padding:0px; line-height:1.4em">2</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">658</span>&nbsp;&nbsp;
 &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">113</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">2623</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;
 &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">20228</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1099</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">5656</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">24</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">68</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">7</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span><br style="line-height:1.4em">
<span style="margin:0px; padding:0px; line-height:1.4em">2</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">654</span>&nbsp;&nbsp;
 &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">113</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">2628</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;
 &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1048</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">5275</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">24</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">75</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span><br style="line-height:1.4em">
<span style="margin:0px; padding:0px; line-height:1.4em">2</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">649</span>&nbsp;&nbsp;
 &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">113</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">2633</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;
 &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">4</span>&nbsp;&nbsp; &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1075</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">5681</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">25</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">73</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span><br style="line-height:1.4em">
<span style="margin:0px; padding:0px; line-height:1.4em">2</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">644</span>&nbsp;&nbsp;
 &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">113</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">2638</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;
 &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1066</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">5257</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">25</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">75</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span><br style="line-height:1.4em">
<span style="margin:0px; padding:0px; line-height:1.4em">2</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">637</span>&nbsp;&nbsp;
 &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">113</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">2645</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1432</span>&nbsp;&nbsp;
 &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1050</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">5462</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">24</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">75</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span><br style="line-height:1.4em">
<span style="margin:0px; padding:0px; line-height:1.4em">5</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">628</span>&nbsp;&nbsp;
 &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">113</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">2654</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">4348</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">24840</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1240</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">5301</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">23</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">2</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">70</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">6</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span></div>
</div>
<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
从上面第一个结果可看到,最后一列(id) 表示的是空闲时间,我们可以看到,在基准线统计时,CPU 的空闲时间在98% - 100%.在第二个结果可看到,系统处于60%~70%的占用率。从这个比较中,我们就可以确定是否是CPU 使用率应该被优化.</p>
<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
2.0 安装监控工具</p>
<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
多数 *nix系统都有一堆标准的监控命令.这些命令从一开始就是*nix 的一部分.Linux 则通过基本安装包以及额外包提供了其他监控工具,这些安装包多数都存在各个Linux 发布版本中.尽管还有其他更多的开源以及第三方监控软件,但本文档只讨论基于Linux 发布版本的监控工具.</p>
<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
本章将讨论哪些工具怎样来监控系统性能.</p>
<table border="1" cellspacing="0" cellpadding="0" width="463" style="margin:5px 0px 10px; padding:0px; border-collapse:collapse; border-spacing:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px; background-color:rgb(217,217,217)">
<tbody style="margin:0px; padding:0px">
<tr style="margin:0px; padding:0px">
<td width="80" style="margin:0px; padding:3px 10px; border:1px solid rgb(170,170,170); vertical-align:top">
Tool</td>
<td width="183" style="margin:0px; padding:3px 10px; border:1px solid rgb(170,170,170); vertical-align:top">
描述</td>
<td width="72" style="margin:0px; padding:3px 10px; border:1px solid rgb(170,170,170); vertical-align:top">
系统自带</td>
<td width="128" style="margin:0px; padding:3px 10px; border:1px solid rgb(170,170,170); vertical-align:top">
扩展包</td>
</tr>
<tr style="margin:0px; padding:0px">
<td width="80" style="margin:0px; padding:3px 10px; border:1px solid rgb(170,170,170); vertical-align:top">
vmstat</td>
<td width="183" style="margin:0px; padding:3px 10px; border:1px solid rgb(170,170,170); vertical-align:top">
通用的性能监控工具</td>
<td width="72" style="margin:0px; padding:3px 10px; border:1px solid rgb(170,170,170); vertical-align:top">
yes</td>
<td width="128" style="margin:0px; padding:3px 10px; border:1px solid rgb(170,170,170); vertical-align:top">
yes</td>
</tr>
<tr style="margin:0px; padding:0px">
<td width="80" style="margin:0px; padding:3px 10px; border:1px solid rgb(170,170,170); vertical-align:top">
mpstat</td>
<td width="183" style="margin:0px; padding:3px 10px; border:1px solid rgb(170,170,170); vertical-align:top">
提供每个cpu的统计信息</td>
<td width="72" style="margin:0px; padding:3px 10px; border:1px solid rgb(170,170,170); vertical-align:top">
no</td>
<td width="128" style="margin:0px; padding:3px 10px; border:1px solid rgb(170,170,170); vertical-align:top">
yes</td>
</tr>
<tr style="margin:0px; padding:0px">
<td width="80" style="margin:0px; padding:3px 10px; border:1px solid rgb(170,170,170); vertical-align:top">
sar</td>
<td width="183" style="margin:0px; padding:3px 10px; border:1px solid rgb(170,170,170); vertical-align:top">
通用的性能监控工具</td>
<td width="72" style="margin:0px; padding:3px 10px; border:1px solid rgb(170,170,170); vertical-align:top">
no</td>
<td width="128" style="margin:0px; padding:3px 10px; border:1px solid rgb(170,170,170); vertical-align:top">
yes</td>
</tr>
<tr style="margin:0px; padding:0px">
<td width="80" style="margin:0px; padding:3px 10px; border:1px solid rgb(170,170,170); vertical-align:top">
iostat</td>
<td width="183" style="margin:0px; padding:3px 10px; border:1px solid rgb(170,170,170); vertical-align:top">
提供磁盘统计</td>
<td width="72" style="margin:0px; padding:3px 10px; border:1px solid rgb(170,170,170); vertical-align:top">
no</td>
<td width="128" style="margin:0px; padding:3px 10px; border:1px solid rgb(170,170,170); vertical-align:top">
yes</td>
</tr>
<tr style="margin:0px; padding:0px">
<td width="80" style="margin:0px; padding:3px 10px; border:1px solid rgb(170,170,170); vertical-align:top">
netstat</td>
<td width="183" style="margin:0px; padding:3px 10px; border:1px solid rgb(170,170,170); vertical-align:top">
提供网络统计</td>
<td width="72" style="margin:0px; padding:3px 10px; border:1px solid rgb(170,170,170); vertical-align:top">
yes</td>
<td width="128" style="margin:0px; padding:3px 10px; border:1px solid rgb(170,170,170); vertical-align:top">
yes</td>
</tr>
<tr style="margin:0px; padding:0px">
<td width="80" style="margin:0px; padding:3px 10px; border:1px solid rgb(170,170,170); vertical-align:top">
dstat</td>
<td width="183" style="margin:0px; padding:3px 10px; border:1px solid rgb(170,170,170); vertical-align:top">
统计监控汇总</td>
<td width="72" style="margin:0px; padding:3px 10px; border:1px solid rgb(170,170,170); vertical-align:top">
no</td>
<td width="128" style="margin:0px; padding:3px 10px; border:1px solid rgb(170,170,170); vertical-align:top">
大多数发行版</td>
</tr>
<tr style="margin:0px; padding:0px">
<td width="80" style="margin:0px; padding:3px 10px; border:1px solid rgb(170,170,170); vertical-align:top">
iptraf</td>
<td width="183" style="margin:0px; padding:3px 10px; border:1px solid rgb(170,170,170); vertical-align:top">
网络流量监控</td>
<td width="72" style="margin:0px; padding:3px 10px; border:1px solid rgb(170,170,170); vertical-align:top">
no</td>
<td width="128" style="margin:0px; padding:3px 10px; border:1px solid rgb(170,170,170); vertical-align:top">
yes</td>
</tr>
<tr style="margin:0px; padding:0px">
<td width="80" style="margin:0px; padding:3px 10px; border:1px solid rgb(170,170,170); vertical-align:top">
netperf</td>
<td width="183" style="margin:0px; padding:3px 10px; border:1px solid rgb(170,170,170); vertical-align:top">
网络带宽工具</td>
<td width="72" style="margin:0px; padding:3px 10px; border:1px solid rgb(170,170,170); vertical-align:top">
no</td>
<td width="128" style="margin:0px; padding:3px 10px; border:1px solid rgb(170,170,170); vertical-align:top">
大多数发行版</td>
</tr>
<tr style="margin:0px; padding:0px">
<td width="80" style="margin:0px; padding:3px 10px; border:1px solid rgb(170,170,170); vertical-align:top">
ethtool</td>
<td width="183" style="margin:0px; padding:3px 10px; border:1px solid rgb(170,170,170); vertical-align:top">
网卡配置显示工具</td>
<td width="72" style="margin:0px; padding:3px 10px; border:1px solid rgb(170,170,170); vertical-align:top">
yes</td>
<td width="128" style="margin:0px; padding:3px 10px; border:1px solid rgb(170,170,170); vertical-align:top">
yes</td>
</tr>
<tr style="margin:0px; padding:0px">
<td width="80" style="margin:0px; padding:3px 10px; border:1px solid rgb(170,170,170); vertical-align:top">
iperf</td>
<td width="183" style="margin:0px; padding:3px 10px; border:1px solid rgb(170,170,170); vertical-align:top">
网络带宽公积金</td>
<td width="72" style="margin:0px; padding:3px 10px; border:1px solid rgb(170,170,170); vertical-align:top">
no</td>
<td width="128" style="margin:0px; padding:3px 10px; border:1px solid rgb(170,170,170); vertical-align:top">
yes</td>
</tr>
<tr style="margin:0px; padding:0px">
<td width="80" style="margin:0px; padding:3px 10px; border:1px solid rgb(170,170,170); vertical-align:top">
tcptrace</td>
<td width="183" style="margin:0px; padding:3px 10px; border:1px solid rgb(170,170,170); vertical-align:top">
网络包分析工具</td>
<td width="72" style="margin:0px; padding:3px 10px; border:1px solid rgb(170,170,170); vertical-align:top">
no</td>
<td width="128" style="margin:0px; padding:3px 10px; border:1px solid rgb(170,170,170); vertical-align:top">
yes</td>
</tr>
</tbody>
</table>
<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
3.0 CPU 介绍</p>
<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
CPU 利用率主要依赖于是什么资源在试图存取.内核调度器将负责调度2种资源种类:线程(单一或者多路)和中断.调度器去定义不同资源的不同优先权.以下列表从优先级高到低排列:</p>
<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
Interrupts(译注:中断) - 设备通知内核,他们完成一次数据处理的过程.例子,当一块网卡设备递送网络数据包或者一块硬件提供了一次IO 请求.</p>
<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
Kernel(System) Processes(译注:内核处理过程) - 所有内核处理过程就是控制优先级别.</p>
<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
User Processes(译注:用户进程) - 这块涉及”userland”.所有软件程序都运行在这个user space.这块在内核调度机制中处于低优先级.</p>
<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
从上面,我们可以看出内核是怎样管理不同资源的.还有几个关键内容需要介绍,以下部分就将介绍context(译注:上下文切换),run queues(译注:运行队列)以及utilization(译注:利用率).</p>
<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
3.1 上下文切换</p>
<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
多数现代处理器都能够运行一个进程(单一线程)或者线程.多路超线程处理器有能力运行多个线程.然而,Linux 内核还是把每个处理器核心的双核心芯片作为独立的处理器.比如,以Linux 内核的系统在一个双核心处理器上,是报告显示为两个独立的处理器.</p>
<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
一个标准的Linux 内核可以运行50 至 50,000 的处理线程.在只有一个CPU时,内核将调度并均衡每个进程线程.每个线程都分配一个在处理器中被开销的时间额度.一个线程要么就是获得时间额度或已抢先获得一些具有较高优先级(比如硬件中断),其中较高优先级的线程将从区域重新放置回处理器的队列中.这种线程的转换关系就是我们提到的上下文切换.</p>
<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
每次内核的上下文切换,资源被用于关闭在CPU寄存器中的线程和放置在队列中.系统中越多的上下文切换,在处理器的调度管理下,内核将得到更多的工作.</p>
<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
3.2 运行队列</p>
<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
每个CPU 都维护一个线程的运行队列.理论上,调度器应该不断的运行和执行线程.进程线程不是在sleep 状态中(译注:阻塞中和等待IO中)或就是在可运行状态中.如果CPU 子系统处于高负荷下,那就意味着内核调度将无法及时响应系统请求.导致结果,可运行状态进程拥塞在运行队列里.当运行队列越来越巨大,进程线程将花费更多的时间获取被执行.</p>
<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
比较流行的术语就是”load”,它提供当前运行队列的详细状态.系统 load 就是指在CPU 队列中有多少数目的线程,以及其中当前有多少进程线程数目被执行的组合.如果一个双核系统执行了2个线程,还有4个在运行队列中,则 load 应该为 6. top 这个程序里显示的load averages 是指1,5,15 分钟以内的load 情况.</p>
<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
3.3 CPU 利用率</p>
<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
CPU 利用率就是定义CPU 使用的百分比.评估系统最重要的一个度量方式就是CPU 的利用率.多数性能监控工具关于CPU 利用率的分类有以下几种:</p>
<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
User Time(译注:用户进程时间) - 关于在user space中被执行进程在CPU 开销时间百分比.</p>
<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
System Time(译注:内核线程以及中断时间) - 关于在kernel space中线程和中断在CPU 开销时间百分比.</p>
<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
Wait IO(译注:IO 请求等待时间) - 所有进程线程被阻塞等待完成一次IO 请求所占CPU 开销idle的时间百分比.</p>
<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
Idle(译注:空闲) - 一个完整空闲状态的进程在CPU 处理器中开销的时间百分比.</p>
<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
4.0 CPU 性能监控</p>
<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
理解运行队列,利用率,上下文切换对怎样CPU 性能最优化之间的关系.早期提及到,性能是相对于基准线数据的.在一些系统中,通常预期所达到的性能包括:</p>
<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
Run Queues -&nbsp; 每个处理器应该运行队列不超过1-3 个线程.例子,一个双核处理器应该运行队列不要超过6 个线程.</p>
<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
CPU Utiliation - 如果一个CPU 被充分使用,利用率分类之间均衡的比例应该是<br>
65% - 70% User Time<br>
30% - 35% System Time<br>
0% - 5%&nbsp;&nbsp; Idle Time</p>
<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
Context Switches - 上下文切换的数目直接关系到CPU 的使用率,如果CPU 利用率保持在上述均衡状态时,大量的上下文切换是正常的.</p>
<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
很多Linux 上的工具可以得到这些状态&#20540;,首先就是 vmstat 和 top 这2个工具.</p>
<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
4.1 vmstat 工具的使用</p>
<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
vmstat 工具提供了一种低开销的系统性能观察方式.因为 vmstat 本身就是低开销工具,在非常高负荷的服务器上,你需要查看并监控系统的健康情况,在控制窗口还是能够使用vmstat 输出结果.这个工具运行在2种模式下:average 和 sample 模式.sample 模式通过指定间隔时间测量状态&#20540;.这个模式对于理解在持续负荷下的性能表现,很有帮助.下面就是</p>
<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
vmstat 运行1秒间隔的示例:</p>
<div class="codecolorer-container bash geshi" style="margin:0px 0px 10px; padding:0px; color:rgb(84,84,84); text-align:left; font-size:13px; line-height:1.4em; font-family:Monaco,'Lucida Console',monospace; border:1px solid rgb(159,159,159); background-color:rgb(217,217,217); overflow:auto; width:640px">
<div class="bash codecolorer" style="margin:0px; padding:5px; line-height:1.4em; background-color:rgb(241,241,241)">
<span style="margin:0px; padding:0px; line-height:1.4em">[</span>root<span style="margin:0px; padding:0px; line-height:1.4em">@</span>opt-001 ~<span style="margin:0px; padding:0px; line-height:1.4em">]</span><span style="margin:0px; padding:0px; line-height:1.4em">#
 vmstat 1 -S m</span><br style="line-height:1.4em">
procs&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">-----------memory----------</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">---swap--</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">-----io----</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">--system--</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">-----cpu------</span><br style="line-height:1.4em">
&nbsp;r &nbsp;b &nbsp; swpd &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">free</span>&nbsp;&nbsp; buff &nbsp;cache &nbsp; si &nbsp; so &nbsp; &nbsp;bi &nbsp; &nbsp;bo &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">in</span>&nbsp;&nbsp; cs us sy&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">id</span>&nbsp;wa
 st<br style="line-height:1.4em">
&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">633</span>&nbsp;&nbsp;
 &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">157</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">2618</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;
 &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">4</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">54</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">12</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">23</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">98</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span><br style="line-height:1.4em">
&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">633</span>&nbsp;&nbsp;
 &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">157</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">2618</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;
 &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1062</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">3013</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">100</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span><br style="line-height:1.4em">
&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">633</span>&nbsp;&nbsp;
 &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">157</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">2618</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;
 &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1039</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">2924</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">100</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span><br style="line-height:1.4em">
&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">633</span>&nbsp;&nbsp;
 &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">157</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">2618</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;
 &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1041</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">3005</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">100</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span></div>
</div>
<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
Table 1:&nbsp; The vmstat CPU statistics<br>
Field&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Description<br>
r&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; The amount of threads in the run queue. These are threads that are runnable, but the CPU is not available to execute them.<br>
当前运行队列中线程的数目.代表线程处于可运行状态,但CPU 还未能执行.<br>
b&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; This is the number of processes blocked and waiting on IO requests to finish.<br>
当前进程阻塞并等待IO 请求完成的数目<br>
in&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; This is the number of interrupts being processed.<br>
当前中断被处理的数目<br>
cs&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; This is the number of context switches currently happening on the system.<br>
当前kernel system中,发生上下文切换的数目<br>
us&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; This is the percentage of user CPU utilization.<br>
CPU 利用率的百分比<br>
sys&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; This is the percentage of kernel and interrupts utilization.<br>
内核和中断利用率的百分比<br>
wa&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; This is the percentage of idle processor time due to the fact that ALL runnable threads are blocked waiting on IO.<br>
所有可运行状态线程被阻塞在等待IO 请求的百分比<br>
id&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; This is the percentage of time that the CPU is completely idle.<br>
CPU 空闲时间的百分比</p>
<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
4.2 案例学习:持续的CPU 利用率</p>
<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
在这个例子中,这个系统被充分利用</p>
<div class="codecolorer-container bash geshi" style="margin:0px 0px 10px; padding:0px; color:rgb(84,84,84); text-align:left; font-size:13px; line-height:1.4em; font-family:Monaco,'Lucida Console',monospace; border:1px solid rgb(159,159,159); background-color:rgb(217,217,217); overflow:auto; width:640px">
<div class="bash codecolorer" style="margin:0px; padding:5px; line-height:1.4em; background-color:rgb(241,241,241)">
<span style="margin:0px; padding:0px; line-height:1.4em">[</span>root<span style="margin:0px; padding:0px; line-height:1.4em">@</span>opt-001<span style="margin:0px; padding:0px; line-height:1.4em">]</span><span style="margin:0px; padding:0px; line-height:1.4em">#
 vmstat 1 -S m</span><br style="line-height:1.4em">
procs&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">-----------memory----------</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">---swap--</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">-----io----</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">--system--</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">-----cpu------</span><br style="line-height:1.4em">
&nbsp;r &nbsp;b &nbsp; swpd &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">free</span>&nbsp;&nbsp; buff &nbsp;cache &nbsp; si &nbsp;so &nbsp; bi &nbsp; &nbsp;bo &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">in</span>&nbsp;&nbsp; cs &nbsp; &nbsp;us sy&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">id</span>&nbsp;wa
 st<br style="line-height:1.4em">
&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">6</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">930</span>&nbsp;&nbsp;
 &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">62</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">271</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;
 &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">17818</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">35803</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">5</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">38</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">57</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span><br style="line-height:1.4em">
&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">8</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">561</span>&nbsp;&nbsp;
 &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">62</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">271</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;
 &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">17645</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">34637</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">4</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">35</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">61</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span><br style="line-height:1.4em">
&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">7</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">224</span>&nbsp;&nbsp;
 &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">62</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">271</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;
 &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">17837</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">32955</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">5</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">37</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">58</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span><br style="line-height:1.4em">
&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">5</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">129</span>&nbsp;&nbsp;
 &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">62</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">184</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;
 &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">17903</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">29061</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">3</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">24</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">73</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span><br style="line-height:1.4em">
&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">131</span>&nbsp;&nbsp;
 &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">58</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">159</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;
 &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">32</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">17855</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">21732</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">9</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">90</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span><br style="line-height:1.4em">
&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">128</span>&nbsp;&nbsp;
 &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">58</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">159</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;
 &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">17579</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">18884</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">7</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">93</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span><br style="line-height:1.4em">
&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">126</span>&nbsp;&nbsp;
 &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">58</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">159</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;
 &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">12</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">17598</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">18832</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">8</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">91</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span><br style="line-height:1.4em">
&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1</span>&nbsp;&nbsp; &nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">130</span>&nbsp;&nbsp;
 &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">55</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">156</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;
 &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp; &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">17553</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">18652</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">7</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">71</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">22</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span></div>
</div>
<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
根据观察&#20540;,我们可以得到以下结论:</p>
<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
1,有大量的中断(in) 和更多的的上下文切换(cs).这意味着一个单一的进程在产生对硬件设备请求的同时发生了很多的上下文切换，这也不奇怪，当系统中装有多颗CPU或者1CPU多核时这种上下文的切换会更频繁。</p>
<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
2,进一步显示某单个应用,user time(us) 经常在10%或者更少.但sy的却占了很多的比例，说明内核花了很多的资源来进行上下文切换。可以得知系统中并发了很多程序。</p>
<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
3,运行队列中有4次超出了允许的范围，还有4次在允许的范围内。这个队列数应该控制在小于等于CPU核心数量。</p>
<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
4.3 案例学习:超负荷调度</p>
<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
在这个例子中,io等待时间占用很多比例的例子</p>
<div class="codecolorer-container bash geshi" style="margin:0px 0px 10px; padding:0px; color:rgb(84,84,84); text-align:left; font-size:13px; line-height:1.4em; font-family:Monaco,'Lucida Console',monospace; border:1px solid rgb(159,159,159); background-color:rgb(217,217,217); overflow:auto; width:640px">
<div class="bash codecolorer" style="margin:0px; padding:5px; line-height:1.4em; background-color:rgb(241,241,241)">
<span style="margin:0px; padding:0px; line-height:1.4em">[</span>root<span style="margin:0px; padding:0px; line-height:1.4em">@</span>monitor ~<span style="margin:0px; padding:0px; line-height:1.4em">]</span><span style="margin:0px; padding:0px; line-height:1.4em">#
 vmstat 1 -S m</span><br style="line-height:1.4em">
procs&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">-----------memory----------</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">---swap--</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">-----io----</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">--system--</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">-----cpu------</span><br style="line-height:1.4em">
&nbsp;r &nbsp;b &nbsp; swpd &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">free</span>&nbsp;&nbsp; buff &nbsp;cache &nbsp;si &nbsp;so &nbsp; &nbsp;bi &nbsp; &nbsp;bo &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">in</span>&nbsp;&nbsp; cs &nbsp;us sy&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">id</span>&nbsp;wa
 st<br style="line-height:1.4em">
&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">3</span>&nbsp;&nbsp; &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">53</span>&nbsp;&nbsp; &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">55</span>&nbsp;&nbsp;
 &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">53</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1477</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;
 &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">9</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">216</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">5</span>&nbsp;&nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">6</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">2</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">93</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">4</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span><br style="line-height:1.4em">
&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">2</span>&nbsp;&nbsp; &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">53</span>&nbsp;&nbsp; &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">53</span>&nbsp;&nbsp;
 &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">54</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1474</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;
 &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">92</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">29820</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1195</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">2954</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">2</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">41</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">8</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">48</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span><br style="line-height:1.4em">
&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">3</span>&nbsp;&nbsp; &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">53</span>&nbsp;&nbsp; &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">27</span>&nbsp;&nbsp;
 &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">54</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1387</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;
 &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">950504</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1237</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">10419</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">43</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">6</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">51</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span><br style="line-height:1.4em">
&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">2</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">4</span>&nbsp;&nbsp; &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">53</span>&nbsp;&nbsp; &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">50</span>&nbsp;&nbsp;
 &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">48</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1369</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;
 &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">123744</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1172</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">297</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">7</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">93</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span><br style="line-height:1.4em">
&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">5</span>&nbsp;&nbsp; &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">53</span>&nbsp;&nbsp; &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">50</span>&nbsp;&nbsp;
 &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">40</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1378</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;
 &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">4</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">95996</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1179</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">325</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">10</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">90</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span><br style="line-height:1.4em">
&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">5</span>&nbsp;&nbsp; &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">53</span>&nbsp;&nbsp; &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">50</span>&nbsp;&nbsp;
 &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">18</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1400</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;
 &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">104108</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1150</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">301</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">9</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">91</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span><br style="line-height:1.4em">
&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">5</span>&nbsp;&nbsp; &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">53</span>&nbsp;&nbsp; &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">48</span>&nbsp;&nbsp;
 &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">10</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1408</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;
 &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">131272</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1173</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">345</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">8</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">92</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span><br style="line-height:1.4em">
&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">5</span>&nbsp;&nbsp; &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">53</span>&nbsp;&nbsp; &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">51</span>&nbsp;&nbsp;
 &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">10</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1406</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;
 &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">4</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">89912</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1161</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">249</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">7</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">94</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span><br style="line-height:1.4em">
&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">5</span>&nbsp;&nbsp; &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">53</span>&nbsp;&nbsp; &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">50</span>&nbsp;&nbsp;
 &nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">9</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1405</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;
 &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">112952</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1146</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">234</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">10</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">90</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span></div>
</div>
<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
根据观察&#20540;,我们可以得到以下结论:</p>
<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
1,某些时刻上下文切换数目高于中断数目,说明kernel中相当数量的时间都开销在上下文切换线程.</p>
<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
2,大量的上下文切换将导致CPU 利用率分类不均衡.很明显实际上等待io 请求的百分比(wa)非常高,以及user time百分比非常低(us).</p>
<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
3,因为CPU 都阻塞在IO请求上,所以运行队列里也有相当数目的可运行状态线程在等待执行.且还有阻塞线程</p>
<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
4.4 mpstat 工具的使用</p>
<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
如果你的系统运行在多处理器芯片上,你可以使用 mpstat 命令来监控每个独立的芯片.Linux 内核视双核处理器为2 CPU’s,因此一个双核处理器的双内核就报告有4 CPU’s 可用.</p>
<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
mpstat 命令给出的CPU 利用率统计&#20540;大致和 vmstat 一致,但是 mpstat 可以给出基于单个处理器的统计&#20540;.</p>
<div class="codecolorer-container bash geshi" style="margin:0px 0px 10px; padding:0px; color:rgb(84,84,84); text-align:left; font-size:13px; line-height:1.4em; font-family:Monaco,'Lucida Console',monospace; border:1px solid rgb(159,159,159); background-color:rgb(217,217,217); overflow:auto; width:640px">
<div class="bash codecolorer" style="margin:0px; padding:5px; line-height:1.4em; background-color:rgb(241,241,241)">
<span style="margin:0px; padding:0px; line-height:1.4em">[</span>root<span style="margin:0px; padding:0px; line-height:1.4em">@</span>opt-001 ~<span style="margin:0px; padding:0px; line-height:1.4em">]</span><span style="margin:0px; padding:0px; line-height:1.4em">#
 mpstat -P ALL 1</span><br style="line-height:1.4em">
Linux 2.6.18-<span style="margin:0px; padding:0px; line-height:1.4em">164</span>.el5&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">(</span>opt-001.jobkoo.com<span style="margin:0px; padding:0px; line-height:1.4em">)</span>&nbsp;&nbsp; &nbsp; &nbsp; 09<span style="margin:0px; padding:0px; line-height:1.4em">/</span><span style="margin:0px; padding:0px; line-height:1.4em">25</span><span style="margin:0px; padding:0px; line-height:1.4em">/</span><span style="margin:0px; padding:0px; line-height:1.4em">2009</span><br style="line-height:1.4em">
<br style="line-height:1.4em">
03:<span style="margin:0px; padding:0px; line-height:1.4em">12</span>:<span style="margin:0px; padding:0px; line-height:1.4em">25</span>&nbsp;PM &nbsp;CPU &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">%</span>user &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">%</span><span style="margin:0px; padding:0px; line-height:1.4em">nice</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">%</span>sys&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">%</span>iowait
 &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">%</span>irq &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">%</span>soft &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">%</span>steal &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">%</span>idle
 &nbsp;intr<span style="margin:0px; padding:0px; line-height:1.4em">/</span>s<br style="line-height:1.4em">
03:<span style="margin:0px; padding:0px; line-height:1.4em">12</span>:<span style="margin:0px; padding:0px; line-height:1.4em">26</span>&nbsp;PM &nbsp;all &nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">100.00</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1010.00</span><br style="line-height:1.4em">
03:<span style="margin:0px; padding:0px; line-height:1.4em">12</span>:<span style="margin:0px; padding:0px; line-height:1.4em">26</span>&nbsp;PM &nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">100.00</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1001.00</span><br style="line-height:1.4em">
03:<span style="margin:0px; padding:0px; line-height:1.4em">12</span>:<span style="margin:0px; padding:0px; line-height:1.4em">26</span>&nbsp;PM &nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">100.00</span>&nbsp;&nbsp;
 &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span><br style="line-height:1.4em">
03:<span style="margin:0px; padding:0px; line-height:1.4em">12</span>:<span style="margin:0px; padding:0px; line-height:1.4em">26</span>&nbsp;PM &nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">2</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">100.00</span>&nbsp;&nbsp;
 &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1.00</span><br style="line-height:1.4em">
03:<span style="margin:0px; padding:0px; line-height:1.4em">12</span>:<span style="margin:0px; padding:0px; line-height:1.4em">26</span>&nbsp;PM &nbsp; &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">3</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">100.00</span>&nbsp;&nbsp;
 &nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">7.00</span></div>
</div>
<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
4.5 案例学习: 未充分使用的处理量</p>
<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
在这个例子中,为4 CPU核心可用.其中2个CPU 主要处理进程运行(CPU 0 和1).第3个核心处理所有内核和其他系统功能(CPU 3).第4个核心处于idle(CPU 2).</p>
<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
使用 top 命令可以看到有3个进程差不多完全占用了整个CPU 核心.</p>
<div class="codecolorer-container bash geshi" style="margin:0px 0px 10px; padding:0px; color:rgb(84,84,84); text-align:left; font-size:13px; line-height:1.4em; font-family:Monaco,'Lucida Console',monospace; border:1px solid rgb(159,159,159); background-color:rgb(217,217,217); overflow:auto; width:640px; height:820px">
<div class="bash codecolorer" style="margin:0px; padding:5px; line-height:1.4em; background-color:rgb(241,241,241)">
<span style="margin:0px; padding:0px; line-height:1.4em"># top -d 1</span><br style="line-height:1.4em">
top -&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">23</span>:08:<span style="margin:0px; padding:0px; line-height:1.4em">53</span>&nbsp;up&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">8</span>:<span style="margin:0px; padding:0px; line-height:1.4em">34</span>,&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">3</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">users</span>,&nbsp;
 load average:&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.91</span>,&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.37</span>,&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.13</span><br style="line-height:1.4em">
Tasks:&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">190</span>&nbsp;total,&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">4</span>&nbsp;running,&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">186</span>&nbsp;sleeping,&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;stopped,&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;zombie<br style="line-height:1.4em">
Cpu<span style="margin:0px; padding:0px; line-height:1.4em">(</span>s<span style="margin:0px; padding:0px; line-height:1.4em">)</span>:&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">75.2</span><span style="margin:0px; padding:0px; line-height:1.4em">%</span>&nbsp;us,&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.2</span><span style="margin:0px; padding:0px; line-height:1.4em">%</span>&nbsp;sy,&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.0</span><span style="margin:0px; padding:0px; line-height:1.4em">%</span>&nbsp;ni,&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">24.5</span><span style="margin:0px; padding:0px; line-height:1.4em">%</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">id</span>,&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.0</span><span style="margin:0px; padding:0px; line-height:1.4em">%</span>&nbsp;wa,&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.0</span><span style="margin:0px; padding:0px; line-height:1.4em">%</span>&nbsp;hi,&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.0</span><span style="margin:0px; padding:0px; line-height:1.4em">%</span><br style="line-height:1.4em">
si<br style="line-height:1.4em">
Mem:&nbsp;&nbsp; 2074736k total,&nbsp;&nbsp; 448684k used,&nbsp; 1626052k&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">free</span>,&nbsp;&nbsp;&nbsp; 73756k buffers<br style="line-height:1.4em">
Swap:&nbsp; 4192956k total,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0k used,&nbsp; 4192956k&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">free</span>,&nbsp;&nbsp; 259044k cached<br style="line-height:1.4em">
<br style="line-height:1.4em">
PID USER&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; PR&nbsp; NI&nbsp; VIRT&nbsp; RES&nbsp; SHR S&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">%</span>CPU&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">%</span>MEM&nbsp;&nbsp;&nbsp; TIME&#43;&nbsp; COMMAND<br style="line-height:1.4em">
<span style="margin:0px; padding:0px; line-height:1.4em">15957</span>&nbsp;nobody&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">25</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">2776</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">280</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">224</span>&nbsp;R&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">100</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">20.5</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>:<span style="margin:0px; padding:0px; line-height:1.4em">25.48</span>&nbsp;php<br style="line-height:1.4em">
<span style="margin:0px; padding:0px; line-height:1.4em">15959</span>&nbsp;mysql&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">25</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">2256</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">280</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">224</span>&nbsp;R&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">100</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">38.2</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>:<span style="margin:0px; padding:0px; line-height:1.4em">17.78</span>&nbsp;mysqld<br style="line-height:1.4em">
<span style="margin:0px; padding:0px; line-height:1.4em">15960</span>&nbsp;apache&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">25</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">2416</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">280</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">224</span>&nbsp;R&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">100</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">15.7</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>:<span style="margin:0px; padding:0px; line-height:1.4em">11.20</span>&nbsp;httpd<br style="line-height:1.4em">
<span style="margin:0px; padding:0px; line-height:1.4em">15901</span>&nbsp;root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">16</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">2780</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1092</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">800</span>&nbsp;R&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.1</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>:<span style="margin:0px; padding:0px; line-height:1.4em">01.59</span>&nbsp;top<br style="line-height:1.4em">
<span style="margin:0px; padding:0px; line-height:1.4em">1</span>&nbsp;root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">16</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1780</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">660</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">572</span>&nbsp;S&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.0</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>:<span style="margin:0px; padding:0px; line-height:1.4em">00.64</span>&nbsp;init<br style="line-height:1.4em">
<br style="line-height:1.4em">
<span style="margin:0px; padding:0px; line-height:1.4em"># mpstat –P ALL 1</span><br style="line-height:1.4em">
Linux 2.4.21-<span style="margin:0px; padding:0px; line-height:1.4em">20</span>.ELsmp&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">(</span>localhost.localdomain<span style="margin:0px; padding:0px; line-height:1.4em">)</span>&nbsp;&nbsp; 05<span style="margin:0px; padding:0px; line-height:1.4em">/</span><span style="margin:0px; padding:0px; line-height:1.4em">23</span><span style="margin:0px; padding:0px; line-height:1.4em">/</span><span style="margin:0px; padding:0px; line-height:1.4em">2006</span><br style="line-height:1.4em">
<br style="line-height:1.4em">
05:<span style="margin:0px; padding:0px; line-height:1.4em">17</span>:<span style="margin:0px; padding:0px; line-height:1.4em">31</span>&nbsp;PM&nbsp; CPU&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">%</span>user&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">%</span><span style="margin:0px; padding:0px; line-height:1.4em">nice</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">%</span>system&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">%</span>idle&nbsp;&nbsp;&nbsp;
 intr<span style="margin:0px; padding:0px; line-height:1.4em">/</span>s<br style="line-height:1.4em">
05:<span style="margin:0px; padding:0px; line-height:1.4em">17</span>:<span style="margin:0px; padding:0px; line-height:1.4em">32</span>&nbsp;PM&nbsp; all&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">81.52</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">18.48</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">21.17</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">130.58</span><br style="line-height:1.4em">
05:<span style="margin:0px; padding:0px; line-height:1.4em">17</span>:<span style="margin:0px; padding:0px; line-height:1.4em">32</span>&nbsp;PM&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">83.67</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">17.35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">115.31</span><br style="line-height:1.4em">
05:<span style="margin:0px; padding:0px; line-height:1.4em">17</span>:<span style="margin:0px; padding:0px; line-height:1.4em">32</span>&nbsp;PM&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">80.61</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">19.39</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">13.27</span><br style="line-height:1.4em">
05:<span style="margin:0px; padding:0px; line-height:1.4em">17</span>:<span style="margin:0px; padding:0px; line-height:1.4em">32</span>&nbsp;PM&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">2</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">16.33</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">84.66</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">2.01</span><br style="line-height:1.4em">
05:<span style="margin:0px; padding:0px; line-height:1.4em">17</span>:<span style="margin:0px; padding:0px; line-height:1.4em">32</span>&nbsp;PM&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">3</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">79.59</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">21.43</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span><br style="line-height:1.4em">
<br style="line-height:1.4em">
05:<span style="margin:0px; padding:0px; line-height:1.4em">17</span>:<span style="margin:0px; padding:0px; line-height:1.4em">32</span>&nbsp;PM&nbsp; CPU&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">%</span>user&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">%</span><span style="margin:0px; padding:0px; line-height:1.4em">nice</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">%</span>system&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">%</span>idle&nbsp;&nbsp;&nbsp;
 intr<span style="margin:0px; padding:0px; line-height:1.4em">/</span>s<br style="line-height:1.4em">
05:<span style="margin:0px; padding:0px; line-height:1.4em">17</span>:<span style="margin:0px; padding:0px; line-height:1.4em">33</span>&nbsp;PM&nbsp; all&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">85.86</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">14.14</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">25.00</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">116.49</span><br style="line-height:1.4em">
05:<span style="margin:0px; padding:0px; line-height:1.4em">17</span>:<span style="margin:0px; padding:0px; line-height:1.4em">33</span>&nbsp;PM&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">88.66</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">12.37</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">116.49</span><br style="line-height:1.4em">
05:<span style="margin:0px; padding:0px; line-height:1.4em">17</span>:<span style="margin:0px; padding:0px; line-height:1.4em">33</span>&nbsp;PM&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">80.41</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">19.59</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span><br style="line-height:1.4em">
05:<span style="margin:0px; padding:0px; line-height:1.4em">17</span>:<span style="margin:0px; padding:0px; line-height:1.4em">33</span>&nbsp;PM&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">2</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">100.00</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span><br style="line-height:1.4em">
05:<span style="margin:0px; padding:0px; line-height:1.4em">17</span>:<span style="margin:0px; padding:0px; line-height:1.4em">33</span>&nbsp;PM&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">3</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">83.51</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">16.49</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span><br style="line-height:1.4em">
<br style="line-height:1.4em">
05:<span style="margin:0px; padding:0px; line-height:1.4em">17</span>:<span style="margin:0px; padding:0px; line-height:1.4em">33</span>&nbsp;PM&nbsp; CPU&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">%</span>user&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">%</span><span style="margin:0px; padding:0px; line-height:1.4em">nice</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">%</span>system&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">%</span>idle&nbsp;&nbsp;&nbsp;
 intr<span style="margin:0px; padding:0px; line-height:1.4em">/</span>s<br style="line-height:1.4em">
05:<span style="margin:0px; padding:0px; line-height:1.4em">17</span>:<span style="margin:0px; padding:0px; line-height:1.4em">34</span>&nbsp;PM&nbsp; all&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">82.74</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">17.26</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">25.00</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">115.31</span><br style="line-height:1.4em">
05:<span style="margin:0px; padding:0px; line-height:1.4em">17</span>:<span style="margin:0px; padding:0px; line-height:1.4em">34</span>&nbsp;PM&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">85.71</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">13.27</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">115.31</span><br style="line-height:1.4em">
05:<span style="margin:0px; padding:0px; line-height:1.4em">17</span>:<span style="margin:0px; padding:0px; line-height:1.4em">34</span>&nbsp;PM&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">78.57</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">21.43</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span><br style="line-height:1.4em">
05:<span style="margin:0px; padding:0px; line-height:1.4em">17</span>:<span style="margin:0px; padding:0px; line-height:1.4em">34</span>&nbsp;PM&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">2</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">100.00</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span><br style="line-height:1.4em">
05:<span style="margin:0px; padding:0px; line-height:1.4em">17</span>:<span style="margin:0px; padding:0px; line-height:1.4em">34</span>&nbsp;PM&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">3</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">92.86</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">9.18</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span><br style="line-height:1.4em">
<br style="line-height:1.4em">
05:<span style="margin:0px; padding:0px; line-height:1.4em">17</span>:<span style="margin:0px; padding:0px; line-height:1.4em">34</span>&nbsp;PM&nbsp; CPU&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">%</span>user&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">%</span><span style="margin:0px; padding:0px; line-height:1.4em">nice</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">%</span>system&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">%</span>idle&nbsp;&nbsp;&nbsp;
 intr<span style="margin:0px; padding:0px; line-height:1.4em">/</span>s<br style="line-height:1.4em">
05:<span style="margin:0px; padding:0px; line-height:1.4em">17</span>:<span style="margin:0px; padding:0px; line-height:1.4em">35</span>&nbsp;PM&nbsp; all&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">87.50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">12.50</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">25.00</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">115.31</span><br style="line-height:1.4em">
05:<span style="margin:0px; padding:0px; line-height:1.4em">17</span>:<span style="margin:0px; padding:0px; line-height:1.4em">35</span>&nbsp;PM&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">91.84</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">8.16</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">114.29</span><br style="line-height:1.4em">
05:<span style="margin:0px; padding:0px; line-height:1.4em">17</span>:<span style="margin:0px; padding:0px; line-height:1.4em">35</span>&nbsp;PM&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">90.82</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">10.20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1.02</span><br style="line-height:1.4em">
05:<span style="margin:0px; padding:0px; line-height:1.4em">17</span>:<span style="margin:0px; padding:0px; line-height:1.4em">35</span>&nbsp;PM&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">2</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">100.00</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span><br style="line-height:1.4em">
05:<span style="margin:0px; padding:0px; line-height:1.4em">17</span>:<span style="margin:0px; padding:0px; line-height:1.4em">35</span>&nbsp;PM&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">3</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">81.63</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">15.31</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0.00</span></div>
</div>
<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
你也可以使用 ps 命令通过查看 PSR 这列,检查哪个进程在占用了哪个CPU.</p>
<div class="codecolorer-container bash geshi" style="margin:0px 0px 10px; padding:0px; color:rgb(84,84,84); text-align:left; font-size:13px; line-height:1.4em; font-family:Monaco,'Lucida Console',monospace; border:1px solid rgb(159,159,159); background-color:rgb(217,217,217); overflow:auto; width:640px">
<div class="bash codecolorer" style="margin:0px; padding:5px; line-height:1.4em; background-color:rgb(241,241,241)">
<span style="margin:0px; padding:0px; line-height:1.4em">while</span>&nbsp;:;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">do</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">ps</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">-eo</span>&nbsp;pid,ni,pri,pcpu,psr,<span style="margin:0px; padding:0px; line-height:1.4em">comm</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">|</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">grep</span>&nbsp;‘mysqld’;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">sleep</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">1</span>;<span style="margin:0px; padding:0px; line-height:1.4em">done</span><br style="line-height:1.4em">
PID&nbsp; NI PRI&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">%</span>CPU PSR COMMAND<br style="line-height:1.4em">
<span style="margin:0px; padding:0px; line-height:1.4em">15775</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">15</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">86.0</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">3</span>&nbsp;mysqld<br style="line-height:1.4em">
PID&nbsp; NI PRI&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">%</span>CPU PSR COMMAND<br style="line-height:1.4em">
<span style="margin:0px; padding:0px; line-height:1.4em">15775</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">14</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">94.0</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">3</span>&nbsp;mysqld<br style="line-height:1.4em">
PID&nbsp; NI PRI&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">%</span>CPU PSR COMMAND<br style="line-height:1.4em">
<span style="margin:0px; padding:0px; line-height:1.4em">15775</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">14</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">96.6</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">3</span>&nbsp;mysqld<br style="line-height:1.4em">
PID&nbsp; NI PRI&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">%</span>CPU PSR COMMAND<br style="line-height:1.4em">
<span style="margin:0px; padding:0px; line-height:1.4em">15775</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">14</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">98.0</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">3</span>&nbsp;mysqld<br style="line-height:1.4em">
PID&nbsp; NI PRI&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">%</span>CPU PSR COMMAND<br style="line-height:1.4em">
<span style="margin:0px; padding:0px; line-height:1.4em">15775</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">14</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">98.8</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">3</span>&nbsp;mysqld<br style="line-height:1.4em">
PID&nbsp; NI PRI&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">%</span>CPU PSR COMMAND<br style="line-height:1.4em">
<span style="margin:0px; padding:0px; line-height:1.4em">15775</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">0</span>&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">14</span>&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">99.3</span>&nbsp;&nbsp;&nbsp;<span style="margin:0px; padding:0px; line-height:1.4em">3</span>&nbsp;mysqld</div>
</div>
<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
4.6 结论</p>
<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
监控 CPU 性能由以下几个部分组成:</p>
<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
1,检查system的运行队列,以及确定不要超出每个处理器3个可运行状态线程的限制.</p>
<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
2,确定CPU 利用率中user/system比例维持在70/30</p>
<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
3,当CPU 开销更多的时间在system mode,那就说明已经超负荷并且应该尝试重新调度优先级</p>
<p style="margin-top:1em; margin-bottom:1em; padding-top:0px; padding-bottom:0px; color:rgb(84,84,84); font-family:Tahoma,'Microsoft Yahei'; font-size:14px; line-height:22px">
4,当I/O 处理得到增长,CPU 范畴的应用处理将受到影响</p>

</div>
<div class="share_buttons" id="sharePanel"></div>
<!--192.168.1.236-->
<div class="article_next_prev">
    <li class="prev_article"><span>上一篇：</span><a href="/lllzd/article/details/7871857">Linux调优-Memory</a></li>
    <li class="next_article"><span>下一篇：</span><a href="/lllzd/article/details/7871865">linux swatch 日志监控使用笔记</a></li>
</div>


    
</div>
<div id="ad_cen"></div>
<script type="text/javascript">
    new Ad(4, 'ad_cen');
</script>
<div id="comment_title" class="panel_head">查看评论<a name="comments"></a></div>
<div id="comment_list"></div>
<div id="comment_bar"></div>
<div id="comment_form"></div>
<div class="announce">* 以上用户言论只代表其个人观点，不代表CSDN网站的观点或立场<a name="reply"></a><a name="quote"></a></div>
<script type="text/javascript">
    var fileName = '7871860';
    var commentscount = 0;
    var islock = false
</script>
<script type="text/javascript" src="http://static.blog.csdn.net/scripts/comment.js?v=1.8"></script>
<div id="ad_bot"></div>
<script type="text/javascript">
    new Ad(5, 'ad_bot');
</script>
<div id="report_dialog"></div>

<div id="d-top">
<a href="#" onclick="javascript:document.body.scrollTop=0;document.documentElement.scrollTop=0;this.blur();return false;" title="回到顶部">
<img src="http://static.blog.csdn.net/images/top.png" alt="TOP" /></a>
</div>



<div class="clear"></div>
</div>
</div>

<div id="side">
<div class="side">
<div id="panel_Profile" class="panel">
    <ul class="panel_head"><span>个人资料</span></ul>
    <ul class="panel_body profile">
        <div id="blog_userface">
            <a href="http://my.csdn.net/lllzd" target="_blank">
            <img src="http://avatar.csdn.net/B/F/4/1_lllzd.jpg" title="访问我的空间" style="max-width:90%"/>
            </a>
            <br />
            <span><a href="http://my.csdn.net/lllzd" class="user_name" target="_blank">lllzd</a></span>
        </div>
<div class="interact">
<!--<a href="#" class="attented" title="已关注"></a>-->
<a href="#" class="attent" id="span_add_follow" title="[加关注]"></a>
<a href="http://my.csdn.net/my/letter/send/lllzd" class="letter" title="[发私信]"></a>
</div>
        <div id="blog_medal">
        </div>
        <ul id="blog_rank">
            <li>访问：<span>59459次</span></li>
            <li>积分：<span>3883分</span></li>
            <li>排名：<span>第1123名</span></li>
        </ul>
        <ul id="blog_statistics">
            <li>原创：<span>342篇</span></li>
            <li>转载：<span>8篇</span></li>
            <li>译文：<span>1篇</span></li>
            <li>评论：<span>3条</span></li>
        </ul>
    </ul>
</div>
<script type="text/javascript">
    var _blogger = 'lllzd';
</script>
<script type='text/javascript'>
$(document).ready(function () {
    var un = getUN().toLowerCase();
    if (un == _blogger.toLowerCase()) {
        $('.interact').hide();
    } else if(un) {
        var url = "http://my.csdn.net/index.php/follow/check_is_followed/" + encodeURIComponent(un) + "/" + encodeURIComponent(_blogger) + "?jsonpcallback=?";
        $.getJSON(url, {}, function (data) {
            if (data.succ == 1 && data.info == 1) {
                $('#span_add_follow').attr('class', 'attented');
            } else {
                $('#span_add_follow').click(guanzhu);
            }
        }, 'json');
    }
});
function guanzhu() {
    var url = "http://my.csdn.net/index.php/follow/do_follow?jsonpcallback=?";
    $.getJSON(url, { "username": _blogger }, function (data) {
        if (data.succ == 1) {
            alert('关注成功！');
            $('#span_add_follow').attr('class', 'attented').click(function () { return false; });
        } else {
            alert(data.msg);
        }
    });
    return false;
}
function getUN() {
    var m = document.cookie.match(new RegExp("(^| )UserName=([^;]*)(;|$)"));
    if (m) return m[2];
    else return '';
}
</script>

<div id="custom_column_21861231" class="panel">
    <ul class="panel_head"><span>Shell</span></ul>
    <ul class="panel_body">
        
<ul>
<li><a href="http://blog.csdn.net/lllzd" target="_blank">lllzd的博客</a> </li></ul>

    </ul>
</div><div class="panel" id="panel_Search">
    <ul class="panel_head"><span>文章搜索</span></ul>
    <ul class="panel_body">
        <form id="frmSearch" action="http://so.csdn.net/search" class="form_search" target="_blank">
        <span><input id="inputSearch" type="text" class="blogsearch" title="请输入关键字" /></span>
        <input id="btnSubmit" type="submit" value="搜索" title="search in blog" />
        <input type="hidden" name="q" id="inputQ" />
        <input type="hidden" name="t" value="blog" />
        <a id="btnSearchBlog" target="_blank"></a>
        </form>
    </ul>
</div><div id="panel_Category" class="panel">
    <ul class="panel_head"><span>文章分类</span></ul>
    <ul class="panel_body">
        <li>
        <a href="http://blog.csdn.net/lllzd/article/category/1208870">Oracle 体系结构</a><span>(45)</span>
        </li>
        <li>
        <a href="http://blog.csdn.net/lllzd/article/category/1224419">Oracle 备份恢复</a><span>(20)</span>
        </li>
        <li>
        <a href="http://blog.csdn.net/lllzd/article/category/1224420">Oracle 性能优化</a><span>(10)</span>
        </li>
        <li>
        <a href="http://blog.csdn.net/lllzd/article/category/1224421">Oracle 故障处理</a><span>(10)</span>
        </li>
        <li>
        <a href="http://blog.csdn.net/lllzd/article/category/1224447">Oracle 数据迁移</a><span>(11)</span>
        </li>
        <li>
        <a href="http://blog.csdn.net/lllzd/article/category/1224461">Oracle 数据挖据</a><span>(3)</span>
        </li>
        <li>
        <a href="http://blog.csdn.net/lllzd/article/category/1224423">Oracle 其他特性</a><span>(10)</span>
        </li>
        <li>
        <a href="http://blog.csdn.net/lllzd/article/category/1224439">Oracle Plsql/Sql</a><span>(16)</span>
        </li>
        <li>
        <a href="http://blog.csdn.net/lllzd/article/category/1224426">Oracle Rac/DG/GG</a><span>(6)</span>
        </li>
        <li>
        <a href="http://blog.csdn.net/lllzd/article/category/1208869">Linux</a><span>(230)</span>
        </li>
        <li>
        <a href="http://blog.csdn.net/lllzd/article/category/1285832">代码/架构</a><span>(9)</span>
        </li>
        <li>
        <a href="http://blog.csdn.net/lllzd/article/category/1287576">高性能计算</a><span>(1)</span>
        </li>
        <li>
        <a href="http://blog.csdn.net/lllzd/article/category/1301542">PM项目经理</a><span>(5)</span>
        </li>
        <li>
        <a href="http://blog.csdn.net/lllzd/article/category/1302035">Mysql</a><span>(2)</span>
        </li>
    </ul>
</div><div id="panel_Archive" class="panel">
    <ul class="panel_head"><span>文章存档</span></ul>
    <ul class="panel_body">
        <div id="archive_list">
        <!--归档统计-->
        <li><a href="http://blog.csdn.net/lllzd/article/month/2012/12">2012年12月</a><span>(43)</span></li><li><a href="http://blog.csdn.net/lllzd/article/month/2012/11">2012年11月</a><span>(56)</span></li><li><a href="http://blog.csdn.net/lllzd/article/month/2012/10">2012年10月</a><span>(34)</span></li><li><a href="http://blog.csdn.net/lllzd/article/month/2012/09">2012年09月</a><span>(79)</span></li><li><a href="http://blog.csdn.net/lllzd/article/month/2012/08">2012年08月</a><span>(139)</span></li>
        </div>
    </ul>
</div>
<div id="hotarticls" class="panel">
    <ul class="panel_head"><span>阅读排行</span></ul>
    <ul class="panel_body itemlist">
        <li>
            <a href="/lllzd/article/details/7915823" title="centos 6.3 更改yum源 换成163">centos 6.3 更改yum源 换成163</a><span>(2697)</span>
        </li>
        <li>
            <a href="/lllzd/article/details/7900877" title="Linux系统安全(三): 系统安全工具介绍">Linux系统安全(三): 系统安全工具介绍</a><span>(1470)</span>
        </li>
        <li>
            <a href="/lllzd/article/details/7929118" title="武汉财政容灾系统应用案例">武汉财政容灾系统应用案例</a><span>(1400)</span>
        </li>
        <li>
            <a href="/lllzd/article/details/8000990" title="关于oracle新特性的推荐之一:物化视图">关于oracle新特性的推荐之一:物化视图</a><span>(1328)</span>
        </li>
        <li>
            <a href="/lllzd/article/details/7864607" title="http长连接200万尝试及调优">http长连接200万尝试及调优</a><span>(1287)</span>
        </li>
        <li>
            <a href="/lllzd/article/details/7877251" title="看我linux如何防SYN攻击,挺实用的">看我linux如何防SYN攻击,挺实用的</a><span>(1263)</span>
        </li>
        <li>
            <a href="/lllzd/article/details/7871853" title="Linux调优-I/O">Linux调优-I/O</a><span>(1229)</span>
        </li>
        <li>
            <a href="/lllzd/article/details/8102595" title="让U盘变成安全的加密便携式绿色软件盘">让U盘变成安全的加密便携式绿色软件盘</a><span>(1027)</span>
        </li>
        <li>
            <a href="/lllzd/article/details/7889327" title="rsync 服务器架设方法 v0.1b （正在修订中）">rsync 服务器架设方法 v0.1b （正在修订中）</a><span>(1001)</span>
        </li>
        <li>
            <a href="/lllzd/article/details/7966206" title="《鸟哥的Linux私房菜》精要">《鸟哥的Linux私房菜》精要</a><span>(969)</span>
        </li>
    </ul>
</div>
<div id="hotarticls2" class="panel">
    <ul class="panel_head"><span>评论排行</span></ul>
    <ul class="panel_body itemlist">
        <li>
            <a href="/lllzd/article/details/8191077" title="统一数据库互联（UDBC）的设计和实现">统一数据库互联（UDBC）的设计和实现</a><span>(2)</span>
        </li>
        <li>
            <a href="/lllzd/article/details/7877204" title="mtr检查网络丢包率详解">mtr检查网络丢包率详解</a><span>(1)</span>
        </li>
        <li>
            <a href="/lllzd/article/details/8080542" title="深入探索 Kdump，第 1 部分">深入探索 Kdump，第 1 部分</a><span>(0)</span>
        </li>
        <li>
            <a href="/lllzd/article/details/8080544" title="深入探索 Kdump，第 2 部分: Kdump 图形化配置工具">深入探索 Kdump，第 2 部分: Kdump 图形化配置工具</a><span>(0)</span>
        </li>
        <li>
            <a href="/lllzd/article/details/8080727" title="28个Unix/Linux的命令行神器">28个Unix/Linux的命令行神器</a><span>(0)</span>
        </li>
        <li>
            <a href="/lllzd/article/details/8103695" title="xshell十大技巧">xshell十大技巧</a><span>(0)</span>
        </li>
        <li>
            <a href="/lllzd/article/details/8055130" title="分表处理设计思想和实现">分表处理设计思想和实现</a><span>(0)</span>
        </li>
        <li>
            <a href="/lllzd/article/details/8081576" title="网络性能测试工具 Iperf">网络性能测试工具 Iperf</a><span>(0)</span>
        </li>
        <li>
            <a href="/lllzd/article/details/8084522" title="oracle坏块检测工具：DBV">oracle坏块检测工具：DBV</a><span>(0)</span>
        </li>
        <li>
            <a href="/lllzd/article/details/8084594" title="Oracle怎样标记坏块及一次数据恢复">Oracle怎样标记坏块及一次数据恢复</a><span>(0)</span>
        </li>
    </ul>
</div>
<div id="homepageArticles" class="panel">
    <ul class="panel_head"><span>推荐文章</span></ul>
    <ul class="panel_body" id="ad_commend">
    </ul>
</div>
<script type="text/javascript">
    new Ad(12, 'ad_commend');
</script><div id="newcomments" class="panel">
<ul class="panel_head"><span>最新评论</span></ul>
<ul class="panel_body itemlist">
    <li>
    <a href="/lllzd/article/details/8191077#comments">统一数据库互联（UDBC）的设计和实现</a>
    <p style="margin:0px;"><a href="/lllzd" class="user_name">lllzd</a>:
这是一个架构，统一结构需要根据业务环境去开发。
    </p>
    </li>
    <li>
    <a href="/lllzd/article/details/8191077#comments">统一数据库互联（UDBC）的设计和实现</a>
    <p style="margin:0px;"><a href="/anodas1" class="user_name">anodas1</a>:
哪里可以下载这组件？
    </p>
    </li>
    <li>
    <a href="/lllzd/article/details/7877204#comments">mtr检查网络丢包率详解</a>
    <p style="margin:0px;"><a href="/zhc285674517" class="user_name">zhc285674517</a>:
非常实用的哦，谢谢
    </p>
    </li>
</ul>
</div>
</div>
<div class="clear"></div>
</div>

<div class="clear"></div>
</div>
<script type="text/javascript" src="http://static.blog.csdn.net/scripts/SyntaxHighlighter/shCore-src.js"></script>
<script type="text/javascript" src="http://static.blog.csdn.net/scripts/ZeroClipboard/ZeroClipboard.js"></script>
<script type="text/javascript" src="http://static.blog.csdn.net/scripts/article_code.js"></script>
<script type="text/javascript" src="http://static.blog.csdn.net/scripts/cnick.js"></script>

<script type="text/javascript" src="http://medal.blog.csdn.net/scripts/show.js"></script>
<script type="text/javascript" src="http://medal.blog.csdn.net/showblogmedal.ashx?blogid=1333652"></script>

<script type="text/javascript" src="http://csdnimg.cn/pubfooter/js/publib_footer.js"></script>

<script type="text/javascript">document.write("<img src=http://counter.csdn.net/pv.aspx?id=24 border=0 width=0 height=0>");</script>
<script type="text/javascript" src="http://www.csdn.net/ui/scripts/Csdn/counter.js"></script>

<!--ad.csdn.net-->
<script type="text/javascript" src="http://ad.csdn.net/scripts/ad-blog.js"></script>



</div>
</body>
</html>