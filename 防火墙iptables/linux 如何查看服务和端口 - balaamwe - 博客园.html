<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>linux 如何查看服务和端口 - balaamwe - 博客园</title>
<link type="text/css" rel="stylesheet" href="http://common.cnblogs.com/blog/css/common.css?id=20121228"/>
<link id="MainCss" type="text/css" rel="stylesheet" href="http://common.cnblogs.com/Skins/ClearGertrude/style.css?id=20121228"/>
<link type="text/css" rel="stylesheet" href="http://common.cnblogs.com/blog/css/common2.css"/>
<link type="text/css" rel="stylesheet" href="http://common.cnblogs.com/css/shStyle.css"/>
<link title="RSS" type="application/rss+xml" rel="alternate" href="http://www.cnblogs.com/balaamwe/rss"/>
<link title="RSD" type="application/rsd+xml" rel="EditURI" href="http://www.cnblogs.com/balaamwe/rsd.xml"/>
<link type="application/wlwmanifest+xml" rel="wlwmanifest" href="http://www.cnblogs.com/balaamwe/wlwmanifest.xml"/>
<script src="http://common.cnblogs.com/script/jquery.js" type="text/javascript"></script>  
<script type="text/javascript">
var currentBlogApp = 'balaamwe';
</script>
<script src="http://common.cnblogs.com/blog/script/common.js?id=20121228" type="text/javascript"></script> 
<script src="http://common.cnblogs.com/script/json2.js" type="text/javascript"></script>
<script type="text/javascript" src="http://common.cnblogs.com/script/syntaxHighlighter.js"></script>
</head>
<body>
<a name="top"></a>

<div id="header">
<h1><a id="Header1_HeaderTitle" class="headermaintitle" href="http://www.cnblogs.com/balaamwe/">balaamwe</a></h1>
<p id="tagline"></p></div>
<div id="main">
	
	
	<div class="post">
		<h2>
			<a id="cb_post_title_url" href="http://www.cnblogs.com/balaamwe/archive/2011/12/07/2279314.html">linux 如何查看服务和端口</a>
		</h2>
		<div class="postText"><div id="cnblogs_post_body"><p>问：我该如何发现哪种服务正在某个特定端口上监听呢？我如何发现哪一个程序正在一个特定端口上监听呢？</p>
<p>　　答：在*NIX系统中，你可以使用下面的任何一个命令来得到在一个特定TCP端口上监听的列表。</p>
<p>　　Lsof:其功能是列示打开的文件，包括监听端口。</p>
<p>　　netstat :此命令象征性地展示各种与网络有关的数据和信息的内容。</p>
<p>　　<strong>Lsof命令示例</strong></p>
<p>　　你可以输入下面的命令来查看IPv4端口：</p>
<p>　　# lsof -Pnl +M -i4</p>
<p>　　你可以输入下面的命令来查看IPv6<a href="http://cisco.chinaitlab.com/List_11.html" rel="nofollow" target="_blank">协议</a>下的端口列示：</p>
<p>　　# lsof -Pnl +M -i6</p>
<p>　　<strong>此例输出：</strong></p>
<p>&nbsp;&nbsp;&nbsp;</p>
<p align="center"><img src="http://linux.chinaitlab.com/UploadFiles_7565/200802/20080228163333167.jpg" alt="1" border="1" /></p>
<p><br />&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp; 这里我们不妨解释一 下。第一栏是command，它给出了程序名称的有关信息。请注意标题的细节。例如，第二行的gweather* 命令从美国 NWS<a href="http://server.chinaitlab.com/" rel="nofollow" target="_blank">服务器</a>(140.90.128.70)获取天气的报告信息，包括交互天气信息网络和其它的天气服务。在这里，我们解释一下命令各个参数。</p>
<p>　　1. -P :这个选项约束着网络文件的端口号到端口名称的转换。约束转换可以使lsof运行得更快一些。在端口名称的查找不能奏效时，这是很有用的。</p>
<p>　　2. -n : 这个选项约束着网络文件的端口号到主机名称的转换。约束转换可以使lsof的运行更快一些。在主机名称的查找不能奏效时，它非常有用。</p>
<p>　　3. -l :这个选项约束着用户ID号到登录名的转换。在登录名的查找不正确或很慢时，这个选项就很有用。</p>
<p>　　4. +M :此选项支持本地TCP和UDP端口映射程序的注册报告。</p>
<p>　　5. -i4 :仅列示IPv4<a href="http://cisco.chinaitlab.com/List_11.html" rel="nofollow" target="_blank">协议</a>下的端口。</p>
<p>　　6. -i6 : 仅列示IPv6<a href="http://cisco.chinaitlab.com/List_11.html" rel="nofollow" target="_blank">协议</a>下的端口。</p>
<p><strong>　　Netstaty命令举例</strong></p>
<p>　　请输入下面的命令：</p>
<p>　　# netstat -tulpn</p>
<p>　　或者是</p>
<p>　　# netstat -npl</p>
<p>　　请看输出结果：:</p>
<p>　　</p>
<table style="width: 80%;" border="1" cellspacing="0" cellpadding="1" align="center" bgcolor="#ffffff">
<tbody>
<tr>
<td>&nbsp;Proto Recv-Q Send-Q Local Address Foreign Address State PID/Program name
<p>tcp 0 0 0.0.0.0:6881 0.0.0.0:* LISTEN 6908/python</p>
<p>tcp 0 0 127.0.0.1:631 0.0.0.0:* LISTEN 5562/cupsd</p>
<p>tcp 0 0 127.0.0.1:3128 0.0.0.0:* LISTEN 6278/(squid)</p>
<p>tcp 0 0 127.0.0.1:25 0.0.0.0:* LISTEN 5854/exim4</p>
<p>udp 0 0 0.0.0.0:32769 0.0.0.0:* 6278/(squid)</p>
<p>udp 0 0 0.0.0.0:3130 0.0.0.0:* 6278/(squid)</p>
<p>udp 0 0 0.0.0.0:68 0.0.0.0:* 4583/dhclient3</p>
<p>udp 0 0 0.0.0.0:6881 0.0.0.0:* 6908/python</p>
</td>
</tr>
</tbody>
</table>
<p>　　请注意，最后一栏给出了关于程序名称和端口的信息。在这里，我们解释一下各参数的含义：</p>
<p>　　-t : 指明显示TCP端口</p>
<p>　　-u : 指明显示UDP端口</p>
<p>　　-l : 仅显示监听套接字(所谓套接字就是使应用程序能够读写与收发通讯协议(protocol)与资料的程序)</p>
<p>　　-p : 显示进程标识符和程序名称，每一个套接字/端口都属于一个程序。</p>
<p>　　-n : 不进行DNS轮询(可以加速操作)</p>
<p><strong>　　关于/etc/services文件</strong></p>
<p>　　/etc/services是一个纯ASCII文件，它可以提供<a href="http://internet.chinaitlab.com/" rel="nofollow" target="_blank">互联网</a>服务的友好文本名称，还有其默认分配的端口号和协议类型。每一个网络程序都要进入这个文件得其服务的端口号(和协议)。你可以借助于cat命令或less命令等来查看这个文件：</p>
<p>　　</p>
<p>&nbsp;$ cat /etc/services</p>
<p>$ grep 110 /etc/services</p>
<p>$ less /etc/services</p></div><div id="MySignature"></div>
<script type="text/javascript">
var isLogined = false;
var cb_blogId = 96646;
var cb_entryId = 2279314;
var cb_blogApp = currentBlogApp;
var cb_blogUserGuid = "811ad955-8cd4-e011-8ee0-842b2b196315";
var cb_entryCreatedDate = '2011/12/7 14:56:00';
var enableGoogleAd = true;
var googletag = googletag || {};
googletag.cmd = googletag.cmd || [];
</script>
<div class="clear"></div>
<div id="blog_post_info_block">
<div id="blog_post_info">
</div>
<div class="clear"></div>
<div id="post_next_prev"></div>
</div>
<script type="text/javascript">
    //SyntaxHighlighter.config.strings.expandSource = '<span><img src="http://static.cnblogs.com/images/expand-code.gif" alt="" class="expand-code-icon"/>View Code</span>';
    $(function () {             
        fixPostBodyFormat();
        loadAdUnderPost();
        loadBlogSignature();
        LoadPostInfoBlock(cb_blogId, cb_entryId, cb_blogApp, cb_blogUserGuid);
        GetPrevNextPost(cb_entryId, cb_blogId, cb_entryCreatedDate);        
        GetHistoryToday(cb_blogId, cb_blogApp, cb_entryCreatedDate);        
    });
</script></div>
		<p class="postfoot">
			posted on <span id="post-date">2011-12-07 14:56</span> <a href='http://www.cnblogs.com/balaamwe/'>balaamwe</a> 阅读(785) 评论(<span id="post-comment-count">0</span>)  <a href ="http://www.cnblogs.com/balaamwe/admin/EditPosts.aspx?postid=2279314" rel="nofollow">编辑</a> <a href="#" onclick="AddToWz(2279314);return false;">收藏</a>
		</p>
	</div>
	<img src ="http://www.cnblogs.com/balaamwe/aggbug/2279314.html?type=1&amp;webview=1" width="1" height="1" alt=""/>
	
	<div id="blog-comments-placeholder"></div><script type="text/javascript">var commentManager = new blogCommentManager();commentManager.loadComments();</script>
<div id="comment_form" class="commentform">
<div id="divCommentShow"></div>
<div id="comment_nav"><span id="span_refresh_tips"></span><a href="#" onclick="return RefreshPage();">刷新页面</a><a href="#top">返回顶部</a></div>
<div id="comment_form_container">（评论功能已被博主禁用）</div>

<div class="ad_text_commentbox" id="ad_text_under_commentbox"></div>
<div id="site_nav_under"><a href="http://www.cnblogs.com/" target="_blank" title="程序员的网上家园">博客园首页</a><a href="http://q.cnblogs.com/" target="_blank" title="程序员问答社区">博问</a><a href="http://news.cnblogs.com/" target="_blank" title="IT新闻">新闻</a><a href="http://home.cnblogs.com/ing/" target="_blank">闪存</a><a href="http://job.cnblogs.com/" target="_blank">程序员招聘</a><a href="http://kb.cnblogs.com/" target="_blank">知识库</a></div>
<div id="ad_under_post_holder"></div>
<div id="HistoryToday" class="c_ad_block"></div>
</div>





</div>
<div id="rightmenu">
	
		
<h3>导航</h3>
<ul>
<li><a id="MyLinks1_HomeLink" href="http://www.cnblogs.com/">博客园</a></li>
<li><a id="MyLinks1_MyHomeLink" href="http://www.cnblogs.com/balaamwe/">首页</a></li>
<li><a id="MyLinks1_NewPostLink" rel="nofollow" href="http://www.cnblogs.com/balaamwe/admin/EditPosts.aspx?opt=1">新随笔</a></li>
<li><a id="MyLinks1_ContactLink" accesskey="9" rel="nofollow" href="http://space.cnblogs.com/msg/send/balaamwe">联系</a></li>
<li><a id="MyLinks1_Syndication" href="http://www.cnblogs.com/balaamwe/rss">订阅</a><a id="MyLinks1_XMLLink" href="http://www.cnblogs.com/balaamwe/rss"><img src="http://www.cnblogs.com/images/xml.gif" alt="订阅" /></a></li>
<li><a id="MyLinks1_Admin" rel="nofollow" href="http://www.cnblogs.com/balaamwe/admin/EditPosts.aspx">管理</a></li>
</ul>
		
<h3>公告</h3>
<div class="newsItem">
	<div id="blog-news"></div>
</div>					
		<div id="blog-calendar-block" style="display:none"><div id="blog-calendar"></div>
</div>
		
<h3>统计</h3>
<ul>
	<li>随笔 - 275</li>
	<li>文章 - 1</li>
	<li>评论 - 1</li>
	<li>引用 - 0</li>
 </ul>
		<div id="blog-sidecolumn"></div>
		
<div id="footer">
	Powered by: 
	<br />
	<a id="Footer1_Hyperlink3" href="http://www.cnblogs.com/" style="font-family:Verdana;font-size:12px;">博客园</a>
	<br />
	Copyright &copy; balaamwe
</div>
	
</div>			
			
	

<script type="text/javascript" src="http://common.cnblogs.com/script/google-analytics.js"></script>
</body>
</html>
