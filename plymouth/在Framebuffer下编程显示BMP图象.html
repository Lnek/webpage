<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<head>



<meta http-equiv="Content-Type" content="text/html; charset=gbk" />
<meta equiv="X-UA-Compatible" content="IE=EmulateIE7" /> 
<title>在Framebuffer下编程显示BMP图象-学习日志-搜狐博客</title>
<meta name="Keywords" content="博客,Blog,Blogger,搜狐,Sohu,网络日志 学习日志" />
<meta name="description" content="学习日志 " />
<meta name="robots" content="index,follow" />
<script type="text/javascript">
var JSPATH = {},
HCP='http://js2.pp.sohu.com.cn/ppp/js/common_v_20120320/',
HMP='http://js4.pp.sohu.com.cn/ppp/js/module_v_20130412/',
HTP='http://js5.pp.sohu.com.cn/ppp/js/tool_v_090418/';
JSPATH.util={common:HCP+'common.js',module:HMP,tool:HTP};

var BLOG_SP = 'http://js3.pp.sohu.com.cn/ppp/blog/js_ppp_v_20130412/';
JSPATH.blog={_path:BLOG_SP};

var TP = 'http://js2.pp.sohu.com.cn/ppp/group/toolbar_v_090827/';

</script>

<link href="http://js2.pp.sohu.com.cn/ppp/blog/themes_ppp_v_20120220/def/style.css" rel="stylesheet" type="text/css" />


<link id="themeCss" href="http://js2.pp.sohu.com.cn/ppp/blog/themes_ppp_v_20120220/p1002/style.css" themeid="p1002" rel="stylesheet" type="text/css" />


<link rel="stylesheet" type="text/css" href="http://js3.pp.sohu.com.cn/ppp/blog/entry_v_20130128/css/revoArticle.v.20130128.css" /> 
<link rel="alternate" type="application/rss+xml" title="RSS" href="http://yaos.blog.sohu.com/rss" />

<style type="text/css">
	.poping-yuntu {
		position: fixed;
		display: none;
		_position: absolute;
		z-index: 500;
		width: 352px;
		background-color: #ddd;
		padding: 3px;
	}
	.poping-yuntu-wrapper {
		border: 1px solid #999;
		width: 350px;
		background-color: #FFF;
	}
	.poping-yuntu p {
		margin: 0;
		color: #333;
	}
	.poping-yuntu a {
		text-decoration: none;
	}
	.poping-yuntu .bf-header {
		height: 28px;
		line-height: 28px;
		background-color: #f7f7f7;
		color: #818181;
		width: 100%;
	}
	.poping-yuntu .bf-header p {
		padding-left: 15px;
		line-height: 28px;
		color: #818181;
	}
	.poping-yuntu a.btn-close {
		float: right;
		width: 10px;
		height: 10px;
		background: url('http://s3.suc.itc.cn/app/tophoto/d/close.gif') no-repeat 0 0;
		margin: 8px 8px 0 0;
		cursor: pointer;
		display: inline-block;
		overflow: hidden;
	}
	.poping-yuntu a.btn-close:hover {
		background-position: 0 -20px;
	}
	.poping-yuntu .bf-body {
		background-color: #FFF;
		width: 330px;
		height: 130px;
		overflow: hidden;
		margin: 0 auto;
		zoom: 1;
	}
	.poping-yuntu .bf-body p.progress {
		width:218px;
		margin: 40px auto 0;
	}
	.poping-yuntu .bf-body h2.progress {
		width:265px;
		margin: 15px auto;
		padding: 0 0 0 15px;
	}
	.poping-yuntu .bf-body .img {

	}
	.poping-yuntu .bf-body .img img{
		margin: 6px;
	}
	.poping-yuntu .bf-body .img a{
		border: 1px solid #D4D4D4;
		display: block;
		float: left;
		margin: 0 10px;
	}
	.poping-yuntu .bf-body .txt {
		padding: 10px 3px;
		clear: both;
	}
	.poping-yuntu .bf-body .txt p{
		padding: 0 0 0 15px;
		background: url("http://s3.suc.itc.cn/app/tophoto/d/yes.gif") no-repeat 0 55%;
	}
	.poping-yuntu .bf-body .txt p.error{
		padding: 0 0 0 12px;
		background: url("http://s3.suc.itc.cn/app/tophoto/d/error.gif") no-repeat 0 55%;
	}
	.poping-yuntu .bf-body .txt a {
		float: right;
		color: #1f87be;
	}
	.poping-yuntu .bf-body .txt .tt a {
		font-weight: bold;
	}
	.poping-yuntu .bf-body .txt p.tt {
		font-size: 14px;
		color: #333;
		padding-bottom: 5px;
	}
	.poping-yuntu .bf-body .txt p.con {
		padding-bottom: 20px;
	}
	.poping-yuntu .bf-body .txt p.success {
		padding: 10px 0 34px 45px;
		background: url('http://s3.suc.itc.cn//s/blog/d/bg_bg_right.gif') no-repeat 10px 10px;
	}
	.poping-yuntu .bf-btn {
		height: 34px;
		line-height: 34px;
		margin-bottom: 10px;
		text-align: center;
	}
	.poping-yuntu  .bf-btn a {
		vertical-align: middle;
		color: #1f87be;
	}
	.poping-yuntu .bf-body .txt .bf-btn a.btn-geren {
		background: url("http://s3.suc.itc.cn//s/blog/d/bg_pop_bf.gif") no-repeat scroll 0 -117px transparent;
		display: inline-block;
		height: 32px;
		margin-left: 10px;
		margin-right: 20px;
		width: 106px;
	}
	.poping-yuntu .bf-btn a.btn-enter {
		width: 106px;
		height: 32px;
		display: inline-block;
		background: url('http://s3.suc.itc.cn/s/blog/d/bg_pop_bf.gif') no-repeat 0 -23px;
		overflow: hidden;
	}
	.poping-yuntu .bf-btn a.btn-enter:hover {
		background-position: 0 -70px;
	}
	.poping-yuntu .bf-btn a.btn-geren {
		width: 106px;
		height: 32px;
		display: inline-block;
		background: url('http://s3.suc.itc.cn//s/blog/d/bg_pop_bf.gif') no-repeat 0 -117px;
		margin-right: 20px;
		margin-left: 80px;
	}
	.poping-yuntu .bf-footer {
		height: 26px;
		line-height: 26px;
		border-top: 1px solid #f9f0bb;
		background-color: #fff9d7;
		text-indent: 15px;
	}
	.poping-yuntu .bf-footer {
		color: #c07b2b;
	}
	.poping-mask {
		position: fixed;
		display: none;
		_position: absolute;
		left: 0;
		top: 0;
		_top: expression(documentElement.scrollTop + 0 + "px");
		background: white;
		opacity: 0.1;
		filter: alpha(opacity=10);
	}
</style>
</head>
<body>
<a name="top"></a>
<script type="text/javascript">
var _blog_base_url = 'http://yaos.blog.sohu.com/';
var _blog_base_path = 'http://yaos.blog.sohu.com/';
var _blog_domain='yaos';
var _ebi = 'f136773792';
var _ept = '408studio';
var _xpt = 'NDA4c3R1ZGlvQHNvaHUuY29t';
var _upt = 'NDA4c3R1ZGlvQHNvaHUuY29t';
var $blog_config = {
		
};
</script>
 	<!-- <link rel="stylesheet" type="text/css" href="http://js6.pp.sohu.com.cn/core/js/jquery/itoolbar/global.css" charset="utf-8"/> -->
    <script type="text/javascript">
          var toolbarSysRec = [
                                
                   
                   
];

function showToolbarAd(){
	try {
	        if (toolbarSysRec) {
	                var len = toolbarSysRec.length;
	                if (!toolbarSysRec[len - 1]) {
	                        len = len - 1;
	                }
	                var n = Math.floor(Math.random() * len);
	                var rd = toolbarSysRec[n];
	                return '<a href="'+ rd.tip.url + '" target="_blank" onmousedown="CA.q(\'toolbar_tips\');">'
	                                                + rd.tip.title + '</a>';
	        }
	} catch (err) {
		
	}
     return '';
}
</script>
<div id="isohu-topbar" data-appid="1019" data-type="blog" ></div>
 
       
<div id="_preLoadText" style="text-align:center;">loading...</div>

<script type="text/javascript" src="http://js6.pp.sohu.com.cn/core/js/jquery/jquery.js" charset="utf-8"></script>
<script type="text/javascript">
var SP = BLOG_SP;
var ThP = 'http://js2.pp.sohu.com.cn/ppp/blog/themes_ppp_v_20120220/';
var WP = '/ppp/blog/widgets_v_201304111/';
var UWAP = 'http://js3.pp.sohu.com.cn/ppp/blog/widgets_v_080920/uwa_widget/';
document.write('<scr'+'ipt type="text/javascript" src="'+ SP + 'sohublog.js"></scr'+'ipt>');
</script>
<script type="text/javascript">
var utf8jss = [SP+'common.v.20130513.js', 'http://r.suc.itc.cn/combo.action?v.120412&r=/itoolbar/core/base64.js|/itoolbar/core/jquery.cookie.js|/itoolbar/core/jquery.easing.js|/itoolbar/core/jquery.hotmap.js|/itoolbar/core/passport.js&t=js&c=utf-8', 'http://r.suc.itc.cn/loader.itoolbar.public.js'];
lsl([HCP+'common.js'], 'utf-8');
lsl(['http://js2.pp.sohu.com.cn/ppp/blog/js_v_100326/pp18030_all.v.13042501.js', HTP+'effect.js']);
lsl(utf8jss, 'utf-8');
var noToolBar = true;
lsl([TP+'toolbar.v.11032401.js']);
</script>

<div id="wrapper">
	<div id="innerWrapper" >
		



<div id="header">
  <div id="playerBox"><div id="innerPlayerBox"></div></div>
  <div id="innerHeader">
  
	<div id="blogLogo"><a href="http://blog.sohu.com"><img src="http://js1.pp.sohu.com.cn/ppp/blog/styles_ppp/images/spacer.gif" id="logo" alt="搜狐博客" /></a></div>
	<h1 id="blogTitle"><a href="http://yaos.blog.sohu.com/"  id="blogAdmin" onmousedown="CA.q('blog_header_title');">学习日志</a></h1>
	<div id="blogUrl">
		<!-- a href="http://yaos.blog.sohu.com/">http://yaos.blog.sohu.com/</a --> 
		<a href="http://yaos.blog.sohu.com/" class="navUrl" title="查看学习日志的首页"><img src="http://js1.pp.sohu.com.cn/ppp/blog/styles_ppp/images/custom/icons/house.gif" alt="首页" align="absmiddle"  border="0"/></a><a href="http://yaos.blog.sohu.com/" class="navUrl" title="查看学习日志的首页">首页</a>
        <a href="http://yaos.blog.sohu.com/entry/" class="navUrl" title="查看学习日志的日志" onmousedown="CA.q('blog_header_entry');"><img src="http://js1.pp.sohu.com.cn/ppp/blog/styles_ppp/images/ico_entry.gif" alt="日志" align="absmiddle"  border="0"/></a><a href="http://yaos.blog.sohu.com/entry/" target="_blank" class="navUrl" title="查看学习日志的日志" onmousedown="CA.q('blog_header_entry');">日志</a> 
        <a href="http://yaos.i.sohu.com/album/index.htm" class="navUrl" title="查看学习日志的相册"  target="_blank" onmousedown="CA.q('blog_header_photo');"><img src="http://js1.pp.sohu.com.cn/ppp/blog/styles_ppp/images/ico_picture.gif" alt="相册" align="absmiddle" border="0" /></a><a href="http://yaos.i.sohu.com/album/index.htm" class="navUrl"  target="_blank" title="查看学习日志的相册" onmousedown="CA.q('blog_header_photo');">相册</a> 
        <a href="http://my.tv.sohu.com/people/NDA4c3R1ZGlvQHNvaHUuY29t" target="_blank" class="navUrl" title="查看学习日志的视频" onmousedown="CA.q('blog_header_video');"><img src="http://js1.pp.sohu.com.cn/ppp/blog/styles_ppp/images/ico_video.gif" alt="视频" align="absmiddle" border="0" /></a><a href="http://my.tv.sohu.com/people/NDA4c3R1ZGlvQHNvaHUuY29t" target="_blank" class="navUrl" title="查看学习日志的视频" onmousedown="CA.q('blog_header_video');">视频</a> 
        <a href="http://yaos.i.sohu.com/mblog/index.htm" class="navUrl" title="查看学习日志的微博"><img  border ="0" src="http://s1.suc.itc.cn/myspace/images/icon.gif" alt="微博" align="absmiddle" /></a><a href="http://yaos.i.sohu.com/mblog/index.htm" class="navUrl" title="查看学习日志的微博">微博</a> 
        <a href="http://yaos.i.sohu.com/profile/index.htm" class="navUrl" title="查看学习日志的个人资料" onmousedown="CA.q('blog_header_profile');"><img  border ="0" src="http://js1.pp.sohu.com.cn/ppp/blog/styles_ppp/images/ico_profile.gif" alt="资料" align="absmiddle" /></a><a href="http://yaos.i.sohu.com/profile/index.htm" class="navUrl" title="查看学习日志的个人资料" onmousedown="CA.q('blog_header_profile');">资料</a>
        <a href="http://yaos.blog.sohu.com/app/soShare/" class="navUrl" title="查看学习日志的分享" onmousedown="CA.q('blog_header_share');"><img src="http://js1.pp.sohu.com.cn/ppp/images/icons/ico_share2.gif" alt="分享" align="absmiddle"  border="0"/></a><a  href="http://yaos.blog.sohu.com/app/soShare/" class="navUrl" title="查看学习日志的分享" onmousedown="CA.q('blog_header_share');">分享</a> 
		<a href="http://yaos.blog.sohu.com/rss" target="_blank" onmousedown="CA.q('blog_header_rss');"><img src="http://js1.pp.sohu.com.cn/ppp/blog/styles_ppp/images/ico_rss.gif" alt="RSS订阅" align="absmiddle" /></a>
		<a href="javascript:void(0)" name="onlineIcon" style="display:none" rel="" param="NDA4c3R1ZGlvQHNvaHUuY29t;学习日志"></a>
	</div>
	<div id="blogDesc"></div>
  </div>
</div>
<div id="navBar">
  <div id="innerNavBar">
		<ul id="mainNav">
			<li><a href="http://yaos.blog.sohu.com/#tp_f136773792"><script type="text/javascript">document.write(getNavIco('', '首页'));</script><span>首页</span></a></li> 

		</ul>
	<ul id="optionNav">
	  <li id="mngOpr"></li>
	</ul>
	<div class="clear"></div>
  </div>
</div>
		<div id="mainWrapper">
		<div id="innerMainWrapper" class="revolution">
			<div id="articleContent">
                <div id="articleInnerContent">
                <div id="contentLabelBox" style="display:none">
  					<div id="innerContentLabelBox" style="height:25px;">
   						 <a href="http://blog.sohu.com">搜狐博客</a> 
							&gt; <a href="http://yaos.blog.sohu.com/">学习日志</a>
							&gt; <a href="http://yaos.blog.sohu.com/entry/">日志</a>
    					
  					</div>
 
  					<div class="clear"></div>
				</div>
					
					
					






<style type="text/css">

</style>
<script type="text/javascript">
	var bruUrl = "http://i.sohu.com/login/logon.do?bru=http://yaos.blog.sohu.com/20240931.html";
</script>
<div id="contentLabelBox" style="display:none">
  <div id="innerContentLabelBox" style="height:25px;" style="display:none">
    <a href="http://blog.sohu.com">搜狐博客</a> 
	&gt; <a href="http://yaos.blog.sohu.com/">学习日志</a>
	&gt; <a href="http://yaos.blog.sohu.com/entry/">日志</a>
    
  </div>
 
  <div class="clear"></div>
</div>
<div class="content-top"></div>
<div 
 
class="revoWarrper profileL"
> 










<div class="revoArtLeft">
	<div class="mod" id="m_1"><div class="modFrame"><table cellspacing="0" cellpadding="0" class="modTable"><thead><tr>
		<td class="mheader lt"></td>
		<td class="mheader t">
			<div class="modHeader clearfix">
				<div class="modIco" style=""><img src="http://js1.pp.sohu.com.cn/ppp/blog/widgets_v_100427/profile/ico_widget.gif"></div>
				<div class="modTitle">个人资料</div>
			</div>
		</td><td class="mheader rt"></td></tr></thead><tbody><tr style="display: none;"><td class="mneck l"></td><td class="mneck ec"><div class="modEditCon"></div></td><td class="mneck r"></td></tr><tr><td class="mbody l"></td><td class="mbody c"><div class="modCon profile-content"><div>
    <div id="profile_photo"  title="用户头像">
    	<img src="http://1832.img.pp.sohu.com.cn/images/2012/11/14/16/11/u12976391_13bc1f2c27fg2.jpg"/>
    </div>
    <div class="revoMyname"><a href ="http://yaos.blog.sohu.com/" onmousedown="CA.q('blog_entry_profile_blogName');"><strong>学习日志</strong></a></div>
    <div class="revoBtns">
   
    	<div >
    <a onmousedown="CA.q('blog_entry_profile_viewProfile');" target="_blank" title="查看个人资料" href="http://yaos.i.sohu.com/profile/index.htm" class="i-myprofile">看资料</a>
    
		<a title="将 学习日志 加为我的跟随" href="javascript:void(0);" class="i-addfriend">加跟随</a><br>
    
    <a onmousedown="CA.q('blog_entry_profile_leaveMessage');" target="_blank" title="给他留言" href="http://yaos.blog.sohu.com/message/" class="i-leavemsg">写留言</a>
    <a onclick="pokeMe(true,_xpt)" blogico="http://512.img.pp.sohu.com.cn/images/blog/2010/3/25/23/14/12847e420f7g214.jpg" title="向他打招呼" href="javascript:void(0);" onmousedown="CA.q('blog_entry_profile_poke');" class="i-poke">打招呼</a><br />
    	</div>
    	
     <a onmousedown="CA.q('blog_entry_profile_t');" href="http://t.sohu.com/people/!NDA4c3R1ZGlvQHNvaHUuY29t" target="_blank" class="i-tblogs">查看博主的微博</a>
    </div>
    <div class="revoBtns03">
    
   欢迎来地球
   
    </div>
    <style>
    #sideBlogStat ul{margin:0;overflow:hidden;white-space:nowrap;list-style:none;padding:0;}
    #sideBlogStat ul li{line-height:20px;}
    </style>
    <!-- <div class="revoBtns02" id="sideBlogStat">
    数据加载中
    </div> -->
    
    <div class="profile_list"></div>
    <div class="profile_content"><div style="text-align: right; display: none;"><a onmousedown="CA.q('blog_widget_profile_editIntro');" target="_blank" href="http://blog.sohu.com/manage/setting.do">修改个性介绍</a></div>
     
    </div></div></div><div style="text-align: right; display: none;" class="modSuffix"><hr><a onmousedown="CA.a('widget_share_' + (isPPLogin() ? (isMyBlog() ? 'admin' : 'blogger') : 'guest'))" href="javascript:void(0);"><img align="absmiddle" src="http://js2.pp.sohu.com.cn/ppp/images/icons/ico_share.gif">推荐给跟随</a></div></td><td class="mbody r"></td></tr></tbody><tfoot><tr><td class="mfooter lb"></td><td class="mfooter b"></td><td class="mfooter rb"></td></tr></tfoot></table></div>
	</div>
	<script>
//showBlogStat(); 
	</script>
    
<!--模块三-->

 
    
 
<div class="mod" id="m_3">
  <div class="modFrame">
    <table cellspacing="0" cellpadding="0" class="modTable">
      <thead>
        <tr>
          <td class="mheader lt"></td>
          <td class="mheader t"><div class="modHeader clearfix">
              <div class="modIco" style=""><img src="http://js3.pp.sohu.com.cn/ppp/blog/entry/i/1_29.gif"></div>
              <div class="modTitle">博主最新文章</div>
            </div></td>
          <td class="mheader rt"></td>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td class="mbody l"></td>
          <td class="mbody c">
          	<div class="modCon profile-content">
              <ul class="revoArticleLists"  onmousedown="CA.q('blog_entry_latest_list');">
              
              	<li>
                	<a href="http://yaos.blog.sohu.com/245448412.html">Posix消息队列 学习笔记（一）</a>
                </li>
                
              	<li>
                	<a href="http://yaos.blog.sohu.com/204414196.html">afdasdf</a>
                </li>
                
              	<li>
                	<a href="http://yaos.blog.sohu.com/199319878.html">CodeIgniter学习日志（一）</a>
                </li>
                
              	<li>
                	<a href="http://yaos.blog.sohu.com/172528451.html">遭遇一个奇怪的数据库连接问题：ORA-12546</a>
                </li>
                
              	<li>
                	<a href="http://yaos.blog.sohu.com/172103936.html">Oracle环境变量与中文显示的问题</a>
                </li>
                
              	<li>
                	<a href="http://yaos.blog.sohu.com/160389559.html">（转载）ld连接库命令</a>
                </li>
                
              	<li>
                	<a href="http://yaos.blog.sohu.com/151174995.html">dbtest_linux</a>
                </li>
                
              	<li>
                	<a href="http://yaos.blog.sohu.com/143997470.html">（转载）CentOS 5.4安装Oracle 10g </a>
                </li>
                
              	<li>
                	<a href="http://yaos.blog.sohu.com/131154332.html">在CentOS5.3里安装Oracle10g</a>
                </li>
                
              	<li>
                	<a href="http://yaos.blog.sohu.com/120155409.html">PNG Button</a>
                </li>
                
              </ul>
              <div class="revoArticlrMore"><a href="http://yaos.blog.sohu.com/entry/" onmousedown="CA.q('blog_entry_lastest_list_more');" target="_blank">更多文章&gt;&gt;</a></div>
            </div>
            </td>
          <td class="mbody r"></td>
        </tr>
      </tbody>
      <tfoot>
        <tr>
          <td class="mfooter lb"></td>
          <td class="mfooter b"></td>
          <td class="mfooter rb"></td>
        </tr>
      </tfoot>
    </table>
  </div>
</div>

<!--模块四-->
<div  onmousedown="CA.q('blog_entry_editor_list');">
<div class=mod id=m_4>
<div class=modFrame>
<table class=modTable cellSpacing=0 cellPadding=0>
<thead>
<tr>
<td class="mheader lt"></td>
<td class="mheader t">
<div class="modHeader clearfix">
<div class=modTitle>推荐博文</div></div></td>
<td class="mheader rt"></td></tr></thead>
<tbody>
<tr>
<td class="mbody l"></td>
<td class="mbody c">
<div class="modCon profile-content">
<div class=revoArticleCom>
<div class=artComPhoto><a href="http://ystjp.i.sohu.com/blog/view/264748421.htm" target=_blank><img height=56 alt=北京街头墨镜美女 src="http://i3.itc.cn/20130523/a9c_09700ea1_7f8f_0f31_06fb_f8ddc77f30e4_1.jpg" width=88 border=0></a><span><a href="http://ystjp.i.sohu.com/blog/view/264748421.htm" target=_blank>北京街头墨镜美女</a></span></div>
<div class=artComPhoto><a href="http://pcwli88.i.sohu.com/blog/view/264826268.htm" target=_blank><img height=56 alt=大美海南，我行我摄之亚龙湾 src="http://i0.itc.cn/20130523/a9c_868d47e3_13a7_f85d_7fee_0e09e12fc0c1_1.jpg" width=88 border=0 苦逼?北漂族?=""></a><span><a href="http://pcwli88.i.sohu.com/blog/view/264826268.htm" target=_blank>美丽海南之龙亚湾</a></span></div></div>
<ul class=revoArticleLists>
<li><a href="http://liuhb.i.sohu.com/blog/view/264846384.htm" target=_blank>胶原蛋白踩中新华社"痛脚"</a><br><a href="http://liuhb.i.sohu.com/" target=_blank>刘洪波</a></li>

<li><a href="http://shiyanping89.i.sohu.com/blog/view/264838484.htm" target=_blank>校长下跪的新教育是苦肉计</a><br><a href="http://shiyanping89.i.sohu.com/" target=_blank>时言平</a></li>

<li><a href="http://heller10.i.sohu.com/blog/view/264855522.htm" target=_blank>莱温斯基潦倒现状惹人叹</a><br><a href="http://heller10.i.sohu.com/" target=_blank>心路独舞</a></li>

<li><a href="http://yanghengjun65.i.sohu.com/blog/view/264813409.htm" target=_blank>香港为何走入死胡同</a><br><a href="http://yanghengjun65.i.sohu.com/" target=_blank>杨恒均</a></li>

<li><a href="http://hanks-zhang.i.sohu.com/blog/view/264715745.htm" target=_blank>美联储政策如何导致黄金大跌</a><br><a href="http://hanks-zhang.i.sohu.com/" target=_blank>张浩达</a></li>

<li><a href="http://fenqinyang.i.sohu.com/blog/view/264859445.htm" target=_blank>企业大佬玩"退休"的几重境界</a><br><a href="http://fenqinyang.i.sohu.com/" target=_blank>风青杨</a></li>
</ul>

<div class=revoArticlrMore><a href="http://blog.sohu.com/" target=_blank>更多相关文章&gt;&gt;</a></div></div></td>
<td class="mbody r"></td></tr></tbody>
<tfoot>
<tr>
<td class="mfooter lb"></td>
<td class="mfooter b"></td>
<td class="mfooter rb"></td></tr></tfoot></table></div></div>
</div>
<!--Ads模块-->
<div  onmousedown="CA.q('blog_entry_left_ads');">

</div>
</div>


<div class="revoArtRight">
	
    <div class="mod">
    <div class="modFrame">
    <table cellspacing="0" cellpadding="0" class="modTable">
     <thead>
                <tr>
                  <td class="mheader lt"></td>
                  <td class="mheader t"><div class="modHeader clearfix">
                      <div style="" class="modIco"><img src="http://js5.pp.sohu.com.cn/ppp/blog/widgets_v_100427/entries/ico_widget.gif"></div>
                      <div class="modTitle">日志正文</div>
                    </div></td>
                  <td class="mheader rt"></td>
                </tr>
              </thead>
               <tbody>
                <tr style="display: none;">
                  <td class="mneck l"></td>
                  <td class="mneck ec"><div class="modEditCon"></div></td>
                  <td class="mneck r"></td>
                </tr>
                <tr>
                <td class="mbody l"></td>
                  <td class="mbody c">
                  <div class="modCon profile-content">
<div class="item">
  <div class="item-top"></div>
  <div id="entry">
    <div class="item-title">
      <h3>
		<span style="float:left;">在Framebuffer下编程显示BMP图象</span>
        
      </h3>
      
      
      <div class="item-label">

      <span class="itemOpr"><a onmousedown="CA.q('blog_entryview_share_topright');" href="javascript:void(0);" entryTitle="在Framebuffer下编程显示BMP图象" data-shareType="31" data-title="#{@entryTitle}" data-url="http://yaos.blog.sohu.com/20240931.html" data-abstracts="#{#main-content@innerText<51}" data-ext="{v:'1',xpt:'#{$_xpt}'}" onclick="shareIt(this)" style="margin-right:10px;"><img src="http://js2.pp.sohu.com.cn/ppp/blog/styles_ppp/images/btn_share_s2.gif" alt="分享" title="分享" /></a></span><span id="itemId_20240931" class="itemOpr"></span>
      </div>
      <div class="clear"></div>
    </div>
    <div class="item-body">
      
      <div  class="item-title revoArtlabel"><span class="revoLeft">标签：
        
         <a href="http://tag.blog.sohu.com/Framebuffer/" target="_blank">Framebuffer</a>&nbsp;
        
         <a href="http://tag.blog.sohu.com/BMP/" target="_blank">BMP</a>&nbsp;
        
        </span>
        
        <span class="revoRight">2006-11-10 17:02</span></div>
      
      <div class="item-content" id="main-content"> <p>今天看别人的代码，知道可以使控制台进入图形模式，这样SHELL程序的显示就不会影响BMP图像的显示了。于是，COPY过来，放入自己先前的那个程序，再整个800x600的BMP图，试试全屏显示的效果！爽^0^爽</p>
<p><font face="宋体" color="#000000">/*<br />&nbsp;&nbsp; showbmp.c<br />&nbsp;&nbsp; allenyao 2006/11/10</font></p>
<p><font face="宋体" color="#000000">*/<br />#include &lt;unistd.h&gt;<br />#include &lt;stdio.h&gt;<br />#include &lt;stdlib.h&gt;<br />#include &lt;fcntl.h&gt;<br />#include &lt;string.h&gt;<br />#include &lt;linux/fb.h&gt;<br />#include &lt;linux/kd.h&gt;/*新添加的，用于进行图形模式时ioctl使用*/<br />#include &lt;sys/mman.h&gt;<br />#include &lt;sys/ioctl.h&gt;<br />#include &lt;arpa/inet.h&gt;</font></p>
<p><font face="宋体" color="#000000">typedef struct<br />{<br />&nbsp; char cfType[2];&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /* 文件类型, 必须为 &quot;BM&quot; (0x4D42) */<br />&nbsp; char cfSize[4];&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /* 文件的大小(字节) */<br />&nbsp; char cfReserved[4];&nbsp;&nbsp;&nbsp;&nbsp; /* 保留, 必须为 0 */<br />&nbsp; char cfoffBits[4];&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /* 位图阵列相对于文件头的偏移量(字节) */<br />} BITMAPFILEHEADER;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /* 文件头结构 */</font></p>
<p><font face="宋体" color="#000000">typedef struct<br />{<br />&nbsp; char ciSize[4];&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /* size of BITMAPINFOHEADER */<br />&nbsp; char ciWidth[4];&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /* 位图宽度(像素) */<br />&nbsp; char ciHeight[4];&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /* 位图高度(像素) */<br />&nbsp; char ciPlanes[2];&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /* 目标设备的位平面数, 必须置为1 */<br />&nbsp; char ciBitCount[2];&nbsp;&nbsp;&nbsp;&nbsp; /* 每个像素的位数, 1,4,8或24 */<br />&nbsp; char ciCompress[4];&nbsp;&nbsp;&nbsp;&nbsp; /* 位图阵列的压缩方法,0=不压缩 */<br />&nbsp; char ciSizeImage[4];&nbsp;&nbsp;&nbsp; /* 图像大小(字节) */<br />&nbsp; char ciXPelsPerMeter[4];/* 目标设备水平每米像素个数 */<br />&nbsp; char ciYPelsPerMeter[4];/* 目标设备垂直每米像素个数 */<br />&nbsp; char ciClrUsed[4];&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /* 位图实际使用的颜色表的颜色数 */<br />&nbsp; char ciClrImportant[4]; /* 重要颜色索引的个数 */<br />} BITMAPINFOHEADER;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /* 位图信息头结构 */</font></p>
<p><font face="宋体" color="#000000">typedef struct<br />{<br />&nbsp; char rgbBlue;<br />&nbsp; char rgbGreen;<br />&nbsp; char rgbRed;<br />&nbsp; char rgbReserved;<br />} RGBQUAD;</font></p>
<p><font face="宋体" color="#000000">BITMAPFILEHEADER FileHead;<br />BITMAPINFOHEADER InfoHead;<br />RGBQUAD rgbquad;</font></p>
<p><font face="宋体" color="#000000">char *fbp = 0;<br />int xres = 0;<br />int yres = 0;<br />int bits_per_pixel = 0;<br />int tty;<br />int tty_mode_was;</font></p>
<p><font face="宋体" color="#000000">int set_tty_graphics( void );<br />int set_tty_text( void );<br />int&nbsp; show_bmp&nbsp; ( char *bmpfile );<br />long chartolong( char * string, int length );<br />/******************************************************************************<br />&nbsp;*<br />&nbsp;******************************************************************************/<br />int main( int argc, char *argv[] )<br />{<br />&nbsp;&nbsp;&nbsp; int fbfd = 0;<br />&nbsp;&nbsp;&nbsp; struct fb_var_screeninfo vinfo;<br />&nbsp;&nbsp;&nbsp; struct fb_fix_screeninfo finfo;<br />&nbsp;&nbsp;&nbsp; long int screensize = 0;</font></p>
<p><font face="宋体" color="#000000">&nbsp;&nbsp;&nbsp; // Open the file for reading and writing<br />&nbsp;&nbsp;&nbsp; fbfd = open(&quot;/dev/fb0&quot;, O_RDWR);<br />&nbsp;&nbsp;&nbsp; if (!fbfd)<br />&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; printf(&quot;Error: cannot open framebuffer device.\n&quot;);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; exit(1);<br />&nbsp;&nbsp;&nbsp; }</font></p>
<p><font face="宋体" color="#000000">&nbsp;&nbsp;&nbsp; // Get fixed screen information<br />&nbsp;&nbsp;&nbsp; if (ioctl(fbfd, FBIOGET_FSCREENINFO, &amp;finfo))<br />&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; printf(&quot;Error reading fixed information.\n&quot;);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; exit(2);<br />&nbsp;&nbsp;&nbsp; }</font></p>
<p><font face="宋体" color="#000000">&nbsp;&nbsp;&nbsp; // Get variable screen information<br />&nbsp;&nbsp;&nbsp; if (ioctl(fbfd, FBIOGET_VSCREENINFO, &amp;vinfo))<br />&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; printf(&quot;Error reading variable information.\n&quot;);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; exit(3);<br />&nbsp;&nbsp;&nbsp; }</font></p>
<p><font face="宋体" color="#000000">&nbsp;&nbsp;&nbsp; printf(&quot;%dx%d, %dbpp\n&quot;, vinfo.xres, vinfo.yres, vinfo.bits_per_pixel );<br />&nbsp;&nbsp;&nbsp; xres = vinfo.xres;<br />&nbsp;&nbsp;&nbsp; yres = vinfo.yres;<br />&nbsp;&nbsp;&nbsp; bits_per_pixel = vinfo.bits_per_pixel;</font></p>
<p><font face="宋体" color="#000000">&nbsp;&nbsp;&nbsp; // Figure out the size of the screen in bytes<br />&nbsp;&nbsp;&nbsp; screensize = vinfo.xres * vinfo.yres * vinfo.bits_per_pixel / 8;</font></p>
<p><font face="宋体" color="#000000">&nbsp;&nbsp;&nbsp; // Map the device to memory<br />&nbsp;&nbsp;&nbsp; fbp = (char *)mmap(0, screensize, PROT_READ | PROT_WRITE, MAP_SHARED,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fbfd, 0);<br />&nbsp;&nbsp;&nbsp; if ((int)fbp == -1)<br />&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; printf(&quot;Error: failed to map framebuffer device to memory.\n&quot;);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; exit(4);<br />&nbsp;&nbsp;&nbsp; }</font></p>
<p><font face="宋体" color="#000000">&nbsp;if (set_tty_graphics())<br />&nbsp;{<br />&nbsp;&nbsp;show_bmp( argv[1] );<br />&nbsp;}<br />&nbsp;sleep( 10 );<br />&nbsp;set_tty_text();<br />&nbsp;<br />&nbsp;&nbsp;&nbsp; munmap(fbp, screensize);<br />&nbsp;&nbsp;&nbsp; close(fbfd);<br />&nbsp;&nbsp;&nbsp; return 0;<br />}</font></p>
<p><font face="宋体" color="#000000">/******************************************************************************<br />&nbsp;*<br />&nbsp;******************************************************************************/<br />int show_bmp( char *bmpfile )<br />{<br />&nbsp;FILE *fp;<br />&nbsp;int rc;<br />&nbsp;int ciBitCount, ciWidth, ciHeight;<br />&nbsp;int line_x, line_y;<br />&nbsp;long int location = 0, BytesPerLine = 0;<br />&nbsp;char tmp[1024*10];<br />&nbsp;&nbsp; <br />&nbsp;/* 打开位图文件 */<br />&nbsp;fp = fopen( bmpfile, &quot;rb&quot; );<br />&nbsp;if (fp == NULL)<br />&nbsp;{<br />&nbsp; return( -1 );<br />&nbsp;}<br />&nbsp;<br />&nbsp;/* 读取位图文件头 */<br />&nbsp;rc = fread( &amp;FileHead, 1, sizeof(BITMAPFILEHEADER), fp );<br />&nbsp;if ( rc != sizeof( BITMAPFILEHEADER ) )<br />&nbsp;{<br />&nbsp; fclose( fp );<br />&nbsp; return( -2 );<br />&nbsp;}<br />&nbsp;<br />&nbsp;/* 判断位图的类型 */<br />&nbsp;if (memcmp(FileHead.cfType, &quot;BM&quot;, 2) != 0)<br />&nbsp;{<br />&nbsp; fclose( fp );<br />&nbsp; return( -3 );<br />&nbsp;}</font></p>
<p><font face="宋体" color="#000000">&nbsp;/* 读取位图信息头 */<br />&nbsp;rc = fread( (char *)&amp;InfoHead, 1, sizeof(BITMAPINFOHEADER), fp );<br />&nbsp;if ( rc != sizeof(BITMAPINFOHEADER) )<br />&nbsp;{<br />&nbsp; fclose( fp );<br />&nbsp; return( -4 );<br />&nbsp;}<br />&nbsp;<br />&nbsp;ciWidth&nbsp;&nbsp;&nbsp; = (int) chartolong( InfoHead.ciWidth,&nbsp;&nbsp;&nbsp; 4 );<br />&nbsp;ciHeight&nbsp;&nbsp; = (int) chartolong( InfoHead.ciHeight,&nbsp;&nbsp; 4 );<br />&nbsp;ciBitCount = (int) chartolong( InfoHead.ciBitCount, 4 );<br />&nbsp;<br />&nbsp;line_x = line_y = 0;<br />&nbsp;/*<br />&nbsp;while( !feof( fp ) )<br />&nbsp;{<br />&nbsp; rc = fread( (char *)&amp;rgbquad, 1, sizeof(RGBQUAD), fp );<br />&nbsp; if ( rc != sizeof(RGBQUAD) )<br />&nbsp; {<br />&nbsp;&nbsp; break;<br />&nbsp; }</font></p>
<p><font face="宋体" color="#000000">&nbsp; location = line_x * bits_per_pixel / 8 + (ciHeight - line_y - 1) * xres * bits_per_pixel / 8;</font></p>
<p><font face="宋体" color="#000000">&nbsp; *(fbp + location) = rgbquad.rgbBlue;<br />&nbsp; *(fbp + location + 1) = rgbquad.rgbGreen;<br />&nbsp; *(fbp + location + 2) = rgbquad.rgbRed;<br />&nbsp; *(fbp + location + 3) = rgbquad.rgbReserved;<br />&nbsp; <br />&nbsp; line_x++;<br />&nbsp; if ( line_x == ( ciWidth - 1 ) )<br />&nbsp; {<br />&nbsp;&nbsp; line_x = 0;<br />&nbsp;&nbsp; line_y++;<br />&nbsp; }<br />&nbsp;}<br />&nbsp;*/<br />&nbsp;BytesPerLine = (ciWidth * ciBitCount + 31) / 32 * 4;<br />&nbsp;<br />&nbsp;while( !feof( fp ) )<br />&nbsp;{<br />&nbsp; rc = fread( tmp, 1, BytesPerLine, fp );<br />&nbsp; if ( rc != BytesPerLine )<br />&nbsp; {<br />&nbsp;&nbsp; break;<br />&nbsp; }<br />&nbsp; <br />&nbsp; location = (ciHeight - line_y - 1) * xres * bits_per_pixel / 8;<br />&nbsp; memcpy( (fbp + location) , tmp, BytesPerLine );</font></p>
<p><font face="宋体" color="#000000">&nbsp; line_y++;<br />&nbsp;}<br />&nbsp;fclose( fp );<br />&nbsp;return( 0 );<br />}</font></p>
<p><font face="宋体" color="#000000">/******************************************************************************<br />&nbsp;*<br />&nbsp;******************************************************************************/<br />long chartolong( char * string, int length )<br />{<br />&nbsp;long number;<br />&nbsp;<br />&nbsp;if (length &lt;= 4)<br />&nbsp;{<br />&nbsp; memset( &amp;number, 0x00, sizeof(long) );<br />&nbsp; memcpy( &amp;number, string, length );<br />&nbsp;}<br />&nbsp;<br />&nbsp;return( number );<br />}</font></p>
<p><font face="宋体" color="#000000">/******************************************************************************<br />&nbsp;*<br />&nbsp;******************************************************************************/<br />int set_tty_graphics( void )<br />{<br />&nbsp;&nbsp;&nbsp; int ret = 1;</font></p>
<p><font face="宋体" color="#000000">&nbsp;&nbsp;&nbsp; if(0 &gt; (tty = open(&quot;/dev/tty0&quot;, O_RDWR)))<br />&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; printf( &quot;ERROR: /dev/tty0 open failed\n&quot; );<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ret = 0;<br />&nbsp;&nbsp;&nbsp; }<br />&nbsp;&nbsp;&nbsp; else if(0 &gt; ioctl(tty, KDGETMODE, &amp;tty_mode_was))<br />&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; printf( &quot;ERROR: /dev/tty0 get mode failed\n&quot;);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; close(tty);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ret = 0;<br />&nbsp;&nbsp;&nbsp; }<br />&nbsp;&nbsp;&nbsp; else if((KD_GRAPHICS != tty_mode_was)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &amp;&amp; (0 &gt; ioctl(tty, KDSETMODE, KD_GRAPHICS)))<br />&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; printf( &quot;ERROR: /dev/tty0 set graphics failed\n&quot;);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; close(tty);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ret = 0;<br />&nbsp;&nbsp;&nbsp; }<br />&nbsp;&nbsp;&nbsp; else<br />&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; printf(&quot;tty mode was &quot;);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; switch(tty_mode_was)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case KD_TEXT&nbsp;&nbsp;&nbsp;&nbsp; :&nbsp; printf(&quot;KD_TEXT&quot;&nbsp;&nbsp;&nbsp;&nbsp; ); break;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case KD_GRAPHICS :&nbsp; printf(&quot;KD_GRAPHICS&quot; ); break;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; default&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; :&nbsp; printf(&quot;IMPOSSIBLE!&quot; ); break;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; printf(&quot;\n&quot;);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; printf(&quot;tty mode set to KD_GRAPHICS\n&quot;);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fflush(stdout);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; close(tty);<br />&nbsp;&nbsp;&nbsp; }<br />&nbsp;return( ret );<br />}</font></p>
<p><font face="宋体" color="#000000">/******************************************************************************<br />&nbsp;*<br />&nbsp;******************************************************************************/<br />int set_tty_text( void )<br />{<br />&nbsp;int ret = 1;</font></p>
<p><font face="宋体" color="#000000">&nbsp;&nbsp;&nbsp; if(0 &gt; (tty = open(&quot;/dev/tty0&quot;, O_RDWR)))<br />&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; printf( &quot;ERROR: /dev/tty0 open failed\n&quot; );<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ret = 0;<br />&nbsp;&nbsp;&nbsp; }<br />&nbsp;&nbsp;&nbsp; else if(0 &gt; ioctl(tty, KDSETMODE, tty_mode_was))<br />&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; printf( &quot;ERROR: /dev/tty0 reset mode failed\n&quot;);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; close(tty);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ret = 0;<br />&nbsp;&nbsp;&nbsp; }<br />&nbsp;&nbsp;&nbsp; else<br />&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; printf(&quot;tty mode set to &quot;);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; switch(tty_mode_was)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case KD_TEXT&nbsp;&nbsp;&nbsp;&nbsp; :&nbsp; printf(&quot;KD_TEXT&quot;&nbsp;&nbsp;&nbsp;&nbsp; ); break;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case KD_GRAPHICS :&nbsp; printf(&quot;KD_GRAPHICS&quot; ); break;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; default&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; :&nbsp; printf(&quot;IMPOSSIBLE!&quot; ); break;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; printf(&quot;\n&quot;);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fflush(stdout);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; close(tty);<br />&nbsp;&nbsp;&nbsp; }<br />&nbsp;return( ret );<br />}<br /></font></p>
			<div style="_width:92px;margin-top: 15px;float: right; height: 23px; border: #dfac63 1px solid; -webkit-border-radius: 4px; -moz-border-radius: 4px; border-radius: 4px;">
			<a style="line-height: 22px; height: 22px; padding: 0 8px; text-align: center; color: #000; display: block; border: #fdf7dd 1px solid; background: #f8e888; border-bottom: 0; -webkit-border-radius: 4px; -moz-border-radius: 4px; border-radius: 4px; text-decoration: none;"
				href="http://yaos.i.sohu.com/blog/view/20240931.htm" target="_blank">体验新版博客</a>
			</div>

			

			<div class="clear"></div>
       <div class="pn_na">
                   <div class="previous">
                   
                   <div class="previous_l"></div>
                   
                   <div class="previous_txt">上一篇：</div>
                   <div class="previous_txt"><a onmousedown="CA.q('blog_entryview_previous');" href="http://yaos.blog.sohu.com/20783655.html"> 涂鸦乱画</a>  </div>
         </div>
                   
                   <div class="next">
                   <div class="next_txt">下一篇：</div>
                   <div class="next_txt"><a onmousedown="CA.q('blog_entryview_next');" href="http://yaos.blog.sohu.com/20020522.html">终于把BMP显示出来了！ </a></div>
                  
                   <div class="next_r"></div>
                   
                   </div>
         </div>
     
       <div class="clear"></div>
      </div>
      <div class="item-info">
      <a onmousedown="CA.q('blog_entryview_share_bottom');" href="javascript:void(0);" entryTitle="在Framebuffer下编程显示BMP图象" data-shareType="31" data-title="#{@entryTitle}" data-url="http://yaos.blog.sohu.com/20240931.html" data-abstracts="#{#main-content@innerText<51}" data-ext="{v:'1',xpt:'#{$_xpt}'}" onclick="shareIt(this)"><img align="absmiddle" src="http://js2.pp.sohu.com.cn/ppp/images/icons/ico_share2.gif" alt="分享" title="分享" /> 分享</a>&nbsp;|&nbsp; 
	  	评论&nbsp;(<span id="discusscount">0</span>)&nbsp;|&nbsp;
		阅读&nbsp;(<span id="itemReadCount_20240931" class="itemReadCount">?</span>) &nbsp;|&nbsp;
		<a href="#" onclick="Element.toggle('folder0_f'); return false;">固定链接</a>&nbsp;|&nbsp;
        
        发表于 17:02 
		</div>
      
    </div>

    <div id="folder0_f" style="display:none;" class="item-infoBox"><span class="item-infoBoxTit"><strong>提示：</strong>“固定链接”为您显示此篇文章的固定不变链接，如果您有还有疑问<a href="/help.html">请点击帮助</a></span><br />
      链接地址：<a target="_blank" href="http://yaos.blog.sohu.com/20240931.html">http://yaos.blog.sohu.com/20240931.html</a> <a href="javascript:var url=window.clipboardData.setData('text','http://yaos.blog.sohu.com/20240931.html');alert('地址已保存到剪切板。');">复制此地址</a><br />
    </div>
  </div>
  <div class="blog-article-ad-wrapper"></div>
  
  <div id="entrycommentlist">
    <div id="messageWrapper"></div>
    <div class="item-title">
      <h3>评论&nbsp;&nbsp;&nbsp;<img align="absmiddle" class="icon" src="http://js2.pp.sohu.com.cn/ppp/images/icons/ico_question.gif"/>&nbsp;&nbsp;<a href=" http://admin.blog.sohu.com/85634919.html" target=”_blank” style="font-weight: normal;"  onmousedown="CA.a('entry_commemt_first');">想第一时间抢沙发么？</a></h3>
      <div class="clear"></div>
    </div>
    
   

    <div id="commentlist"></div>
    <div class="item-info">
      <div id="pageText"></div>
    </div>

  </div>
  <div id="tipBoxDiv"></div>
  <!--script src="http://s3.suc.itc.cn/app/tophoto/addimg.v.20130108.js" charset="utf-8"></script-->
  <script type="text/javascript">
var entryId = '20240931';
var blogId = '96886';

var pageTextContainer = $('pageText');
var curPage = 1;
var itemPerPage = 20;
var startPage = 1;
var totalCount = 0;
var chagePageAction = 'chagePage';
var jumpAnchor = false;
var noCache = (location.href.indexOf('?') > 0);
chagePage();

Entries.insertItemOpr('view');
Entries.insertItemReadCount('view');
</script>
  <div id="errormsgWrapper"></div>
  <div>
    
    
      

<a name="commentbox" id="commentbox"></a>
<div class="info-content" id="commentForm">
  <form name="commentForm" method="post" action="/page/comment.do">
    <input type="hidden" name="entryId" value="20240931" />
    <input type="hidden" name="blogId" value="96886" />
	<input type="hidden" name="replytopassport"/>
	<input type="hidden" name="replytodiscussid"/>
    <table width="100%" border="0" cellspacing="2" cellpadding="0">
	  <tr>
	  	<td>&nbsp;</td>
		<td height="30" valign="bottom">
		
		</td>
	  </tr>
      <tr>
        <td valign="top" style="width: 65px;"><label for="commentContent">评论内容:</label></td>
        <td><textarea id="commentContent" name="commentContent" class="text" style="width:330px;height:140px;float:left;"></textarea>
		</div></td>
      </tr>
	  <tr>
        <td valign="top">表　　情:</td>
        <td>
<script type="text/javascript">
document.write('<scr'+'ipt type="text/javascript" src="'+ HMP + 'emote.js"></scr'+'ipt>');
</script>
<div id="emotionBox">
加载中...
</div>
<script type="text/javascript">
var commentContentEl = null;
function addEmote(ubb) {
	if (!commentContentEl) commentContentEl = $('commentContent');
	commentContentEl.value += ' ' + ubb; 
	commentContentEl.focus();
}
Emote.init({parent: 'emotionBox', callback: addEmote, stat: 'reply'});
</script>
        </td>
	  </tr>
      <tr>
        <td class="redfont" id="c_codeTextBox"></td>
        <td id="c_codeInputBox"></td>
      </tr>
      <tr>
        <td>&nbsp;</td>
        <td>
        <input type="hidden" name="m" value="save" />
    	<input type="button" id="commentSubmit" value="发 表" class="button-submit" onclick="checkCForm()"/>
		 </td>
      </tr>
    </table>
  </form>
</div>

<script type="text/javascript">
var commentPermission = '0';
setCPShow();
// for olympic
if($('authorSite')){
	$('authorSite').value = 'http://blog.sohu.com';
}
if($('commentContent')){
	if (haveValue(getCookie('cc'))){
		$('commentContent').value = unescape(getCookie('cc'));
		setCookie('cc', '', '', '/', 'blog.sohu.com');
	}
}


</script>
    
    
  </div>
  <div class="item-bottom"></div>
</div>
</div>
</td>
 <td class="mbody r"></td>
</tr>
</tbody>
 <tfoot>
        <tr>
          <td class="mfooter lb"></td>
          <td class="mfooter b"></td>
          <td class="mfooter rb"></td>
        </tr>
</tfoot>
</table>
</div>
</div>
</div>
</div>
<div class="content-bottom"></div>
<script type="text/javascript">
var isblanked = false;
var hidimg = "http://1832.img.pp.sohu.com.cn/images/2012/11/14/16/11/u12976391_13bc1f2c27fg2.jpg";
var nick = "AllenYao";
var showurl = "http://yaos.i.sohu.com";
var tags = '';

tags = 'Framebuffer BMP';

</script>

<link type="text/css" rel="stylesheet" href="http://zt.blog.sohu.com/upload/cj09081817/blog_w.css"> <style> *html .fixed-bottom {position:absolute;bottom:auto;top:expression(eval(document.documentElement.scrollTop+document.documentElement.clientHeight-this.offsetHeight-parseInt(this.currentStyle.bottom)));}  #popup{ position:fixed; _position:absolute; display:none; } </style> <script> function wmh_linkClick() { var stat = new Image; stat.src = "http://pv.mini.sohu.com/blog.gif?t=" + new Date().getTime(); } </script>   <div id=popup> <div class=b_w> <div class=bar> <div class=bar01><img alt=博客推荐 src="http://zt.blog.sohu.com/upload/cj09081817/images/bt_01.gif"></div> <div class=bar02><a onMouseDown="CA.q('popup_close')" href="javascript:void(0)"><img id=closepopup src="http://zt.blog.sohu.com/upload/cj09081817/images/b_x.gif"></a></div></div> <div class=content_1> <div class=content_2 onMouseDown="CA.q('popup_tu')"><a href="http://shihuixiong.i.sohu.com/blog/view/264912239.htm" target=_blank><img src="http://i0.itc.cn/20130523/2ceb_5804a29f_23d4_59d8_b51f_5e3847246552_1.jpg" alt="上班族的苦逼表情" width="110" height="82" border="0"></a><br> <a href="http://shihuixiong.i.sohu.com/blog/view/264912239.htm" target=_blank> 上班族的苦逼表情</a></div> <div class=content_3> <p><a onMouseDown="CA.q('popup_toutiao')" href="http://blog.sohu.com/" target=_blank>请张天璞回祖国"自由呼吸"<a></p> <ul onMouseDown="CA.q('popup_list1')"> <li>・<A title="" href="http://xinlijian.i.sohu.com/blog/view/264864293.htm" target="_blank">中国不应对朝鲜有求必应 </A></li> <li>・<a href="http://songwzh.i.sohu.com/blog/view/264871777.htm" target=_blank>日本的哥如何咸鱼翻身</a></li> <li>・<a href="http://lunannanlu.i.sohu.com/blog/view/264909342.htm" target=_blank>金日成如何评价邓小平 </a></li>    <li>・<a href="http://sohuchi.i.sohu.com/blog/view/264034944.htm" target=_blank>美厨教你夏日快手营养餐 </a></li> </ul> </div></div> <div class=content_4> <ul onMouseDown="CA.q('popup_list2')">  <li>・<a href="http://chjl-2007.i.sohu.com/blog/view/264817152.htm" target=_blank>游走川滇藏的苦旅品人间天堂</a>   <a href="http://sangedoudou.i.sohu.com/blog/view/264700770.htm" target=_blank>育儿:冷漠不是孩子的错</a></li>   <li>・<a href="http://ninibabelin.i.sohu.com/blog/view/264892663.htm" target=_blank>白连身裙最能穿出气质仙范</a>  <a href="http://sohuchi.i.sohu.com/blog/view/264728861.htm" target=_blank>美食导师教你做河鲜 </a></li>   </ul> </div></div></div><!-- popup ad end --><script type="text/javascript" src="http://js2.pp.sohu.com.cn/ppp/bms/bms.popup.v.5.js"></script> <script> var popupAd = new bms.popup(); popupAd.init('popup','closepopup',false,120,function(){CA.q('popup_show')}); setTimeout(popupAd.popupAd,2000);  //window.onload=function(){setTimeout(popupAd.popupAd,500)}; </script> <script type="text/javascript"> (function(){ $(function(){ $('#popup .action i.btn-draw').hover(function(){ $(this).addClass('btn-draw-hover'); },function(){ $(this).removeClass('btn-draw-hover');  });  $('#popup .action i.btn-exchange').hover(function(){ $(this).addClass('btn-exchange-hover'); },function(){ $(this).removeClass('btn-exchange-hover');  });   }); })(jQuery)  </script>


                </div>
            </div>
			<div class="clear"></div>
		</div>
		</div>
		
<div id="footer">
  <div id="innerFooter">
	<div id="contact"> <a href="http://blog.sohu.com/help.html" target="_blank" rel="nofollow">帮助</a> - <a href="http://sohucallcenter.blog.sohu.com/" target="_blank" rel="nofollow">客服中心</a> - <a href="http://q.sohu.com/group/23063" target="_blank" rel="nofollow">意见建议</a> - <a href="mailto:jubao@contact.sohu.com">举报</a> - <a href="http://blog.sohu.com" target="_blank">搜狐博客</a> - <a href="http://www.sohu.com" target="_blank">搜狐首页</a> - <a href="http://blog.sohu.com/roll/" target="_blank">全部博文</a> - <a href="http://roll.sohu.com" target="_blank">新闻</a>
<script type="text/javascript">
function writeReport() {
	if (typeof entryId == 'undefined' || !entryId) return;
	var url = 'http://act.blog.sohu.com/plus/impeach.jsp?rp='+escape(location.href)+'&p='+escape(getP());
	var str = '';
	str += ' | <a href="'+ url +'" target="_blank"  rel="nofollow">举报不良信息</a>';
	document.write(str);
}
writeReport();
</script>
	</div>
	<div id="copyright">Copyright &copy; 2013 Sohu.com Inc. All rights reserved. 搜狐公司 版权所有 </div>
  </div>
</div>
<script src="http://js.sohu.com/mail/pv/pv_v206.js" type="text/javascript"></script>


<!-- sohu im -->

<!-- sohu im end -->
<script language="javascript">
var  _wratingId = '860010-0601020100';
if(_wratingId !=null){
document.write('<scr'+'ipt type="text/javascript" src="http://js.sohu.com/a1.js"></scr'+'ipt>');
}
</script>
<script language="javascript">
if(_wratingId !=null){
document.write('<scr'+'ipt type="text/javascript">');
document.write('var vjAcc="'+_wratingId+'";');
document.write('var wrUrl="http://sohu.wrating.com/";');
document.write('try{vjTrack();}catch(e){}');
document.write('</scr'+'ipt>');
}
</script>
<script type="text/ecmascript">
function checkLogonUserCount() {
	if (getCookie('lastdomain') && getCookie('lastdomain') != '') {
		var _lastdomain = getCookie('lastdomain').split('|')[1];
		if (_lastdomain) {
			var _url = 'http://bgt.blog.sohu.com/blogping.gif?sohupp='+ _lastdomain;
			_url += '&refer='+ escape(document.referrer);
			_url += '&c='+ timeStamp();
			if (isLogin()) {
				_url += '&logon='+ getXP();
			}
			document.write('<img src="'+ _url +'" />');
		}
	}
}
checkLogonUserCount();
</script>

	</div>
</div>
<script type="text/javascript">
Starter.start();
</script>

<script type="text/javascript">
document.write('<scr'+'ipt type="text/javascript" src="'+SP+'counter.js"></scr'+'ipt>');
</script>


<script type="text/javascript">
if($('errormsgWrapper')){
	var err = Info.readInfo(true);
	if(err){
		var str = '<div id="errormsg" style="background-color: #ffffe1; border: 2px solid #ccc; color: red; padding: 10px; padding-left: 30px; margin: 20px; background-image:url(http://js.pp.sohu.com/ppp/blog/styles/images/ico_error.gif); background-position: 7px 10px; background-repeat: no-repeat;">';
		str += err;
		str += '</div>';
		$('errormsgWrapper').innerHTML = str;
		try{flashErr('errormsg');}catch(e){}
	}
}
if($('messageWrapper')){
	var msg = Info.readInfo(false);
	if(msg){
		var str = '<div id="message" style="background-color: #ffffe1; color: 6D6D6D; border: 2px solid #ccc; padding: 10px; padding-left: 30px; margin: 20px; background-image:url(http://js.pp.sohu.com/ppp/blog/styles/images/ico_ok.gif); background-position: 7px 10px; background-repeat: no-repeat;">';
		str += msg;
		str += '</div>';
		$('messageWrapper').innerHTML = str;
		try{flashMsg('message');}catch(e){}
	}
}
</script>

<script type="text/javascript" charset="utf-8" src="http://s.suc.itc.cn/loader.action?key=ppdialog"></script>
</body>
</html>