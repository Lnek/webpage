
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" />
    <meta content="360doc" name="classification" />
    
    <meta content="Linux进程状态(ps stat)之R、S、D、T、Z、X" name=keywords>
    <meta content="Linux进程状态(ps stat)之R、S、D、T、Z、X" name=description>
    <meta content="www.360doc.com" name="author" />
    
    <title>
        Linux进程状态(ps stat)之R、S、D、T、Z、X
    </title>
    <script type="text/javascript" src="/js/jquery.js?t=2013072601"></script>
    <script type="text/javascript" src="http://www.360doc.com/js/jQuery.md5.js?t=2013072601"></script>
    <script type="text/javascript" src="/js/flexpaper_flash.js?t=2013072601"></script>
    <script type="text/javascript" language="javascript">
        window.onerror = ignoreError;
        function ignoreError() {
            return true;
        }  
    </script>
 <link href="http://css.360doc.com/wz.css?t=2013041801" rel="stylesheet" type="text/css" />
   <link href="http://css.360doc.com/wzhead.css?t=2013041701" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="/js/indexhead.js?t=2013072601"></script>


    <script type="text/javascript" src="/js/showarticlefollow.js?t=2013072601"></script>
</head>
<body  style="font-family: Arial, Helvetica, sans-serif;"   onmouseup="setDragEnd()" onmousemove="DragDiv();" onclick="delAllDiv(event)">
   <div class="mainnav">
        <div class="mainnav1">
            <div class="lf360" style="padding-top: 5px; padding-left: 10px; position: relative;">
                <a href="/index.html">
                    <img src="http://pubimage.360doc.com/index/sy-8.gif" /></a></div>
            <div style="position: absolute; padding-top: 12px; padding-left: 4px; width: 525px;">
                <table border="0" cellpadding="0" cellspacing="0" height="34">
                    <tbody>
                        <tr>
                            <td style="width: 110px; *width: 0px; _width: 0px;">
                            </td>
                            <td width="100px" class="  navwz1">
                                <a href="/index.html">首&nbsp;页</a>
                            </td>
                            <td width="100px" class="  navwz1">
                                <a href="/readroom.html">阅览室</a>
                            </td>
                            <td width="88px" class="  navwz1">
                                <a href="/weekstar.html">馆友</a>
                            </td>
                            <td width="132px" class="  navwz1">
                                <a href="http://www.360doc.com/my360doc.aspx">我的图书馆</a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="rt360" style="padding-top: 18px; width: 200px;" id="outerdiv">
            </div>
            <div class=" rt360" style="padding-top: 17px; padding-right: 0px;">
                <div class="lf360 serch">
                    <input id="txtSearchword" onkeyup="showIntelliSense()" name="input2" type="text" class="serchpt"
                        value="搜文章 找馆友" onblur="if(!this.value) {this.value='搜文章 找馆友';this.style.color='#b2b2b2';}"
                        onfocus="if(this.value=='搜文章 找馆友') this.value='';this.style.color='#272727'"
                        onkeydown="ongosearch()" onpaste="showIntelliSense1();" /></div>
                <div class="lf360 ssuo" style="position: relative;">
                    <a href="javascript:gosearch();" id="searchlinkid"></a>
                </div>
                <div id="divsearch" style="position: absolute; margin-top: 25px; margin-left: 1px; *margin-left: -223px;
                    z-index: 100; display: block;">
                </div>
            </div>
        </div>
    </div>
    <div class="navxt">
    </div>

 

  <div class="both"></div>
  <div class="mainzt">
<table class="index_main" border="0" cellpadding="0" cellspacing="0">
<tbody>
<tr>
<td align="left" valign="top" width="727px">
 <div id='ADAboveArtContent'></div>
 <div style=" height:7px;"></div>
<table border="0" cellpadding="0" cellspacing="0" class="mainbj"  id="docArtClass">
<tbody>
<tr>
<td>
<div style=" padding-top:8px; color:#797b7a; padding-left:6px;">
<div class=" lf360">来自：<span class="name" onclick="wzhit(1)"><A href="http://www.360doc.com/userhome/9484405" target="_blank">汉江秋月夜</A></span> > <span id="cname" onclick="wzhit(2)"></span></div>

<div class=" rt360">
<table border="0" cellpadding="0" cellspacing="0" style=" vertical-align: text-bottom;">
<tbody>
<tr >
<td width="40">配色：</td>
<td width="21"><img src="http://pubimage.360doc.com/wz/cr1.gif" id="docArtC1"  onclick="ChangeArtClass(1,this)"  style="cursor:pointer;"/></td>
<td width="21"><img src="http://pubimage.360doc.com/wz/cr2.gif" id="docArtC2"   onclick="ChangeArtClass(2,this)"  style="cursor:pointer;"/></td>
<td width="21"><img src="http://pubimage.360doc.com/wz/cr3.gif"  id="docArtC3"  onclick="ChangeArtClass(3,this)"  style="cursor:pointer;"/></td>
<td width="21"><img src="http://pubimage.360doc.com/wz/cr4.gif"  id="docArtC4"  onclick="ChangeArtClass(4,this)"  style="cursor:pointer;"/></td>
<td width="21"><img src="http://pubimage.360doc.com/wz/cr5.gif"   id="docArtC5"  onclick="ChangeArtClass(5,this)"  style="cursor:pointer;"/></td>
<td width="28"><img src="http://pubimage.360doc.com/wz/cr6.gif"  id="docArtC6"  onclick="ChangeArtClass(6,this)"  style="cursor:pointer;"/></td>
<td width="95" class="zihao">字号：<span style="cursor:pointer;" onclick="ChangeArtSize(3,this)" >大</span><span  style="cursor:pointer;"  onclick="ChangeArtSize(2,this)" >中</span><span  style="cursor:pointer;"  onclick="ChangeArtSize(1,this)" >小</span></td>
</tr>
</tbody>
</table>

</div>
</div>
</td>
</tr>
<tr>
<td>
<table border="0" cellpadding="0" cellspacing="0" style=" width:100%; text-align:center;">
<tbody>
<tr> 
<td class="biaoti">Linux进程状态(ps stat)之R、S、D、T、Z、X</td>
</tr>
<tr> 
<td class="biaoqian">


<table cellpadding="0" cellspacing="0" style="text-align:center;margin: 0px auto;" ><tbody><tr><td>


<div class="lf360">2013-03-21&nbsp;|&nbsp;阅：<span id="360doc_Readnum"></span>&nbsp;&nbsp;<span style=" position:relative;">转：<span id="360doc_saverNum"></span><span id="360doc_saverUser"></span></span>&nbsp;&nbsp;|&nbsp;&nbsp;<a href="#" onclick=" setTimeout(showShareLayer, 10);">分享</a>&nbsp;</div>

<div class="lf360" ><div style=" padding-top:3px;"><img style="cursor:pointer;" src="http://pubimage.360doc.com/wz/tb10.gif"  onclick="  setTimeout(showShareLayer, 10);"/></div>

<div class="fenxiang" id="fenxiangLayer" style="display:none;">


</div>
<div id="AlertArt1" style="display:none; position:absolute;"></div>
<div id="SendToFriends1" style="display:none;position:absolute;"></div>
<div id="resavelayer1" class="lf360 zcbutton" style=" margin-left:100px;"></div>
</div>

<div class="lf360">&nbsp;&nbsp;<span id="savestatus"></span></div>


</td></tr></tbody></table>



</td>
</tr>
<tr>
<td>
<table class="wenzhangcss" border="0" cellpadding="0" cellspacing="0" width="100%">
                                        <tbody>
                                        <tr><td style="height:29px;">
                                        <div class="xiantao"></div>
                                        </td></tr>
                                            <tr>
                                                <td align="left" valign="top" width="670px" style=" height:200px;">
                                                    <span id="articlecontent" onmouseup="NewHighlight(event)"><table>
                                                        <tbody><tr><td width="670px"><h3>
        <span class="link_title"><a name="baidusnap0"></a><a name="baidusnap2"></a><a name="baidusnap3"></a><a href="http://blog.csdn.net/brucexu1978/article/details/7721313">
        <b style="color:black;background-color:#ffff66">Linux</b>进程状态(ps <b style="color:black;background-color:#99ff99">stat</b>)之R、S、<b style="color:black;background-color:#ff9999">D</b>、T、Z、X
        </a></span>
    </h3>


        
    <div class="article_manage">
    <span class="link_postdate">2012-07-06 10:43</span>
    <span class="link_view" title="阅读次数">1276人阅读</span>
    <span class="link_comments" title="评论次数"><a href="http://blog.csdn.net/brucexu1978/article/details/7721313#comments">评论</a>(0)</span>
    <span class="link_collect"><a title="收藏">收藏</a></span>
    <span class="link_report"><a href="http://blog.csdn.net/brucexu1978/article/details/7721313#report" title="举报">举报</a></span>
    
</div>


    
<div id="article_content" class="article_content">

<h1 class="entry-title"><a href="http://wenku.baidu.com/view/8a932511866fb84ae45c8de8.html"><span style="font-size:16px">http://wenku.baidu.com/view/8a932511866fb84ae45c8de8.html</span></a></h1>
<h1 class="entry-title">&nbsp;</h1>
<h1 class="entry-title"><b style="color:black;background-color:#ffff66">Linux</b>进程状态(ps <b style="color:black;background-color:#99ff99">stat</b>)之R、S、<b style="color:black;background-color:#ff9999">D</b>、T、Z、X</h1>
<div class="entry-meta"><a href="http://www.54sa.net/?p=1382" rel="bookmark">2012 年 03 月 11 日</a><span class="sep">Posted by
</span><span class="author vcard"><a class="url fn n" title="View all posts by Jian" href="http://www.54sa.net/?author=1">Jian</a></span>
</div>
<div class="entry-content">
<p><b style="color:black;background-color:#ffff66">Linux</b>是一个多用户，多任务的系统，可以同时运行多个用户的多个程序，就必然会产生很多的进程，而每个进程会有不同的状态。</p>
<p><b style="color:black;background-color:#ffff66">Linux</b>进程状态：R (TASK_RUNNING)，可执行状态。</p>
<p>只有在该状态的进程才可能在CPU上运行。而同一时刻可能有多个进程处于可执行状态，这些进程的task_struct结构（进程控制块）被放入对
应CPU的可执行队列中（一个进程最多只能出现在一个CPU的可执行队列中）。进程调度器的任务就是从各个CPU的可执行队列中分别选择一个进程在该
CPU上运行。</p>
<p>很多操作系统教科书将正在CPU上执行的进程定义为RUNNING状态、而将可执行但是尚未被调度执行的进程定义为READY状态，这两种状态在<b style="color:black;background-color:#ffff66">linux</b>下统一为 TASK_RUNNING状态。</p>
<p><b style="color:black;background-color:#ffff66">Linux</b>进程状态：S (TASK_INTERRUPTIBLE)，可中断的睡眠状态。</p>
<p>处于这个状态的进程因为等待某某事件的发生（比如等待socket连接、等待信号量），而被挂起。这些进程的task_struct结构被放入对应事件的等待队列中。当这些事件发生时（由外部中断触发、或由其他进程触发），对应的等待队列中的一个或多个进程将被唤醒。</p>
<p>通过ps命令我们会看到，一般情况下，进程列表中的绝大多数进程都处于TASK_INTERRUPTIBLE状态（除非机器的负载很高）。毕竟CPU就这么一两个，进程动辄几十上百个，如果不是绝大多数进程都在睡眠，CPU又怎么响应得过来。</p>
<p><b style="color:black;background-color:#ffff66">Linux</b>进程状态：<b style="color:black;background-color:#ff9999">D</b> (TASK_UNINTERRUPTIBLE)，不可中断的睡眠状态。</p>
<p>与TASK_INTERRUPTIBLE状态类似，进程处于睡眠状态，但是此刻进程是不可中断的。不可中断，指的并不是CPU不响应外部硬件的中断，而是指进程不响应异步信号。<br>
绝大多数情况下，进程处在睡眠状态时，总是应该能够响应异步信号的。否则你将惊奇的发现，<a name="baidusnap1"></a><b style="color:black;background-color:#A0FFFF">kill</b> -9竟然杀不死一个正在睡眠的进程了！于是我们也很好理解，为什么ps命令看到的进程几乎不会出现TASK_UNINTERRUPTIBLE状态，而总是TASK_INTERRUPTIBLE状态。</p>
<p>而TASK_UNINTERRUPTIBLE状态存在的意义就在于，内核的某些处理流程是不能被打断的。如果响应异步信号，程序的执行流程中就会被
插入一段用于处理异步信号的流程（这个插入的流程可能只存在于内核态，也可能延伸到用户态），于是原有的流程就被中断了。（参见《<b style="color:black;background-color:#ffff66">linux</b>内核异步中断浅析》）<br>
在进程对某些硬件进行操作时（比如进程调用read系统调用对某个设备文件进行读操作，而read系统调用最终执行到对应设备驱动的代码，并与对应的物理
设备进行交互），可能需要使用TASK_UNINTERRUPTIBLE状态对进程进行保护，以避免进程与设备交互的过程被打断，造成设备陷入不可控的状
态。这种情况下的TASK_UNINTERRUPTIBLE状态总是非常短暂的，通过ps命令基本上不可能捕捉到。</p>
<p><b style="color:black;background-color:#ffff66">linux</b>系统中也存在容易捕捉的TASK_UNINTERRUPTIBLE状态。执行vfork系统调用后，父进程将进入TASK_UNINTERRUPTIBLE状态，直到子进程调用exit或exec（参见《神奇的vfork》）。<br>
通过下面的代码就能得到处于TASK_UNINTERRUPTIBLE状态的进程：</p>
<ol><li>#include </li><li>void&nbsp;main()&nbsp;{ </li><li>if&nbsp;(!vfork())&nbsp;sleep(100); </li><li>} </li></ol>
<p>编译运行，然后ps一下：</p>
<ol><li>kouu@kouu-one:~/test$&nbsp;ps&nbsp;-ax&nbsp;|&nbsp;grep&nbsp;a\.out </li><li>4371&nbsp;pts/0&nbsp;&nbsp;&nbsp;&nbsp;<b style="color:black;background-color:#ff9999">D</b>+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0:00&nbsp;./a.out </li><li>4372&nbsp;pts/0&nbsp;&nbsp;&nbsp;&nbsp;S+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0:00&nbsp;./a.out </li><li>4374&nbsp;pts/1&nbsp;&nbsp;&nbsp;&nbsp;S+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0:00&nbsp;grep&nbsp;a.out </li></ol>
<p>然后我们可以试验一下TASK_UNINTERRUPTIBLE状态的威力。不管<b style="color:black;background-color:#A0FFFF">kill</b>还是<b style="color:black;background-color:#A0FFFF">kill</b> -9，这个TASK_UNINTERRUPTIBLE状态的父进程依然屹立不倒。</p>
<p><strong><b style="color:black;background-color:#ffff66">Linux</b>进程状态：T (TASK_STOPPED or TASK_TRACED)，暂停状态或跟踪状态。</strong></p>
<p>向进程发送一个SIGSTOP信号，它就会因响应该信号而进入TASK_STOPPED状态（除非该进程本身处于
TASK_UNINTERRUPTIBLE状态而不响应信号）。（SIGSTOP与SIGKILL信号一样，是非常强制的。不允许用户进程通过
signal系列的系统调用重新设置对应的信号处理函数。）<br>
向进程发送一个SIGCONT信号，可以让其从TASK_STOPPED状态恢复到TASK_RUNNING状态。</p>
<p>当进程正在被跟踪时，它处于TASK_TRACED这个特殊的状态。“正在被跟踪”指的是进程暂停下来，等待跟踪它的进程对它进行操作。比如在
gdb中对被跟踪的进程下一个断点，进程在断点处停下来的时候就处于TASK_TRACED状态。而在其他时候，被跟踪的进程还是处于前面提到的那些状
态。</p>
<p>对于进程本身来说，TASK_STOPPED和TASK_TRACED状态很类似，都是表示进程暂停下来。<br>
而TASK_TRACED状态相当于在TASK_STOPPED之上多了一层保护，处于TASK_TRACED状态的进程不能响应SIGCONT信号而被
唤醒。只能等到调试进程通过ptrace系统调用执行PTRACE_CONT、PTRACE_DETACH等操作（通过ptrace系统调用的参数指定操
作），或调试进程退出，被调试的进程才能恢复TASK_RUNNING状态。</p>
<p><strong><b style="color:black;background-color:#ffff66">Linux</b>进程状态：Z (TASK_DEAD – EXIT_ZOMBIE)，退出状态，进程成为僵尸进程。</strong></p>
<p>进程在退出的过程中，处于TASK_DEAD状态。</p>
<p>在这个退出过程中，进程占有的所有资源将被回收，除了task_struct结构（以及少数资源）以外。于是进程就只剩下task_struct这么个空壳，故称为僵尸。<br>
之所以保留task_struct，是因为task_struct里面保存了进程的退出码、以及一些统计信息。而其父进程很可能会关心这些信息。比如在shell中，$?变量就保存了最后一个退出的前台进程的退出码，而这个退出码往往被作为if语句的判断条件。<br>
当然，内核也可以将这些信息保存在别的地方，而将task_struct结构释放掉，以节省一些空间。但是使用task_struct结构更为方便，因为
在内核中已经建立了从pid到task_struct查找关系，还有进程间的父子关系。释放掉task_struct，则需要建立一些新的数据结构，以便
让父进程找到它的子进程的退出信息。</p>
<p>父进程可以通过wait系列的系统调用（如wait4、waitid）来等待某个或某些子进程的退出，并获取它的退出信息。然后wait系列的系统调用会顺便将子进程的尸体（task_struct）也释放掉。<br>
子进程在退出的过程中，内核会给其父进程发送一个信号，通知父进程来“收尸”。这个信号默认是SIGCHLD，但是在通过clone系统调用创建子进程时，可以设置这个信号。</p>
<p>通过下面的代码能够制造一个EXIT_ZOMBIE状态的进程：</p>
<ol><li>#include </li><li>void&nbsp;main()&nbsp;{ </li><li>if&nbsp;(fork()) </li><li>while(1)&nbsp;sleep(100); </li><li>} </li></ol>
<p>编译运行，然后ps一下：</p>
<ol><li>kouu@kouu-one:~/test$&nbsp;ps&nbsp;-ax&nbsp;|&nbsp;grep&nbsp;a\.out </li><li>10410&nbsp;pts/0&nbsp;&nbsp;&nbsp;&nbsp;S+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0:00&nbsp;./a.out </li><li>10411&nbsp;pts/0&nbsp;&nbsp;&nbsp;&nbsp;Z+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0:00&nbsp;[a.out] </li><li>10413&nbsp;pts/1&nbsp;&nbsp;&nbsp;&nbsp;S+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0:00&nbsp;grep&nbsp;a.out </li></ol>
<p>只要父进程不退出，这个僵尸状态的子进程就一直存在。那么如果父进程退出了呢，谁又来给子进程“收尸”？<br>
当进程退出的时候，会将它的所有子进程都托管给别的进程（使之成为别的进程的子进程）。托管给谁呢？可能是退出进程所在进程组的下一个进程（如果存在的话），或者是1号进程。所以每个进程、每时每刻都有父进程存在。除非它是1号进程。</p>
<p>1号进程，pid为1的进程，又称init进程。<br>
<b style="color:black;background-color:#ffff66">linux</b>系统启动后，第一个被创建的用户态进程就是init进程。它有两项使命：<br>
1、执行系统初始化脚本，创建一系列的进程（它们都是init进程的子孙）；<br>
2、在一个死循环中等待其子进程的退出事件，并调用waitid系统调用来完成“收尸”工作；<br>
init进程不会被暂停、也不会被杀死（这是由内核来保证的）。它在等待子进程退出的过程中处于TASK_INTERRUPTIBLE状态，“收尸”过程中则处于TASK_RUNNING状态。</p>
<p><strong><b style="color:black;background-color:#ffff66">Linux</b>进程状态：X (TASK_DEAD – EXIT_DEAD)，退出状态，进程即将被销毁。</strong></p>
<p>而进程在退出过程中也可能不会保留它的task_struct。比如这个进程是多线程程序中被detach过的进程（进程？线程？参见《<b style="color:black;background-color:#ffff66">linux</b>线程浅析》）。或者父进程通过设置SIGCHLD信号的handler为SIG_IGN，显式的忽略了SIGCHLD信号。（这是posix的规定，尽管子进程的退出信号可以被设置为SIGCHLD以外的其他信号。）<br>
此时，进程将被置于EXIT_DEAD退出状态，这意味着接下来的代码立即就会将该进程彻底释放。所以EXIT_DEAD状态是非常短暂的，几乎不可能通过ps命令捕捉到。</p>
<p>进程的初始状态</p>
<p>进程是通过fork系列的系统调用（fork、clone、vfork）来创建的，内核（或内核模块）也可以通过kernel_thread函数创
建内核进程。这些创建子进程的函数本质上都完成了相同的功能——将调用进程复制一份，得到子进程。（可以通过选项参数来决定各种资源是共享、还是私有。）<br>
那么既然调用进程处于TASK_RUNNING状态（否则，它若不是正在运行，又怎么进行调用？），则子进程默认也处于TASK_RUNNING状态。<br>
另外，在系统调用调用clone和内核函数kernel_thread也接受CLONE_STOPPED选项，从而将子进程的初始状态置为 TASK_STOPPED。</p>
<p>进程状态变迁</p>
<p>进程自创建以后，状态可能发生一系列的变化，直到进程退出。而尽管进程状态有好几种，但是进程状态的变迁却只有两个方向——从TASK_RUNNING状态变为非TASK_RUNNING状态、或者从非TASK_RUNNING状态变为TASK_RUNNING状态。<br>
也就是说，如果给一个TASK_INTERRUPTIBLE状态的进程发送SIGKILL信号，这个进程将先被唤醒（进入TASK_RUNNING状
态），然后再响应SIGKILL信号而退出（变为TASK_DEAD状态）。并不会从TASK_INTERRUPTIBLE状态直接退出。</p>
<p>进程从非TASK_RUNNING状态变为TASK_RUNNING状态，是由别的进程（也可能是中断处理程序）执行唤醒操作来实现的。执行唤醒的
进程设置被唤醒进程的状态为TASK_RUNNING，然后将其task_struct结构加入到某个CPU的可执行队列中。于是被唤醒的进程将有机会被
调度执行。</p>
<p>而进程从TASK_RUNNING状态变为非TASK_RUNNING状态，则有两种途径：<br>
1、响应信号而进入TASK_STOPED状态、或TASK_DEAD状态；<br>
2、执行系统调用主动进入TASK_INTERRUPTIBLE状态（如nanosleep系统调用）、或TASK_DEAD状态（如exit系统调
用）；或由于执行系统调用需要的资源得不到满足，而进入TASK_INTERRUPTIBLE状态或TASK_UNINTERRUPTIBLE状态（如
select系统调用）。<br>
显然，这两种情况都只能发生在进程正在CPU上执行的情况下。</p>
<p>内核模块代码：<br>
—————-killd.c—————-<br>
#include #include #include //for_each_process<br>
MODULE_LICENSE(“BSD”);<br>
static int pid = -1;<br>
module_param(pid, int, S_IRUGO);<br>
static int killd_init(void)<br>
{<br>
struct task_struct * p;<br>
printk(KERN_ALERT “killd: force <b style="color:black;background-color:#ff9999">D</b> status process to death\n”);<br>
printk(KERN_ALERT “killd: pid=%<b style="color:black;background-color:#ff9999">d</b>\n”, pid);<br>
//read_lock(&amp;tasklist_lock);<br>
for_each_process(p){<br>
if(p-&gt;pid == pid){<br>
printk(“killd: found\n”);<br>
set_task_state(p, TASK_STOPPED);<br>
printk(KERN_ALERT “killd: aha, dead already\n”);<br>
return 0;<br>
}<br>
}<br>
printk(“not found”);<br>
//read_unlock(&amp;tasklist_lock);<br>
return 0;<br>
}<br>
static void killd_exit(void)<br>
{<br>
printk(KERN_ALERT “killd: bye\n”);<br>
}<br>
module_init(killd_init);<br>
module_exit(killd_exit);<br>
—–Makefile————<br>
obj-m := killd.o<br>
编译模块<br>
make -C yourkerneltree M=`pwd` modules<br>
插入模块的时候提供<b style="color:black;background-color:#ff9999">D</b>状态的进程号，就可以将其转换为stopped状态，使用普通<b style="color:black;background-color:#A0FFFF">kill</b>就可以杀死。<br>
./insmod ./killd.ko pid=1234</p>
<br class="clear-content">
</div>

</div>


<div class="article_next_prev">
    <li class="prev_article"><span>上一篇：</span><a href="http://blog.csdn.net/brucexu1978/article/details/7718308">不少android的好文</a></li>
    <li class="next_article"><span>下一篇：</span><a href="http://blog.csdn.net/brucexu1978/article/details/7721321">gdb中忽略信号处理</a></li>
</div></td></tr></tbody></table>
                                                        <div id="viewerPlaceHolder" style="width: 717px; height: 700px; display: none;">
                                                        </div>
                                                   
                                                     </span>


                                                    
                                                    <table>
                                                        <tbody><tr>
                                                            <td>
                                                            </td>
                                                        </tr>
                                                    </tbody></table>
                                                </td>
                                                </tr>
                                                <tr><td><div class="lf360 list" style=" text-align:left; font-size:14px;"><div id='lastart'></div>
                                        <div id='nextart'></div></div></td></tr>
                                        <tr><td>
                                        <br />
                                        <script type="text/javascript">
                                            google_ad_client = "ca-pub-6625678643128649";
                                            google_ad_slot = "5832576627";
                                            google_ad_width = 300;
                                            google_ad_height = 250;</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
                                        
                                        </td></tr>
                                              <tr><td style="height:29px;">
                                        <div style=" padding-top:20px;"><table style="  width:100%; " cellpadding="0" cellspacing="0">
                                        <tbody>
                                        <tr>
                                        <td width="31%"></td>    
                                        <td>
                                         <table cellpadding="0" cellspacing="0" style=" margin:0px auto; ">
                                        <tbody>
                                        <tr>
                                       <td><div class=" lf360" style='cursor:pointer'  ><a href="javascript:void(0);" onclick="wzhit(22);SaveArt();"><img src="http://pubimage.360doc.com/wz/tb11.gif" /></a></div>    

  <div class=" lf360 xianhua" id="sendFlowerToUser" style='cursor:pointer' onclick='Showflowerlayer("sendedLayer1");' >献花(<span id="articleflowernum"  >0</span>)<div id='flowernumadd' class="addtionone">+1</div></div>

                                        

                                       
                                        </td>
                                        </tr></tbody>
                                        </table>
                                        </td>
                                         <td width="31%" style=" vertical-align:bottom;font-size:12px;">
                                         <div class="rt360" id="sharediv2">
                                     


                                        </div>
                                        
                                        </td>  
                                        </tr>
                                        </tbody>
                                        </table>


                                    
                                                                               </div>
                                        </td></tr>
                                                
                                                <tr><td >
                                                <div class="xiantao" style=" padding-top:5px;">
                                        
                                        </div>
                                        </td></tr>
                                            <tr><td class="xgiambox" style=" vertical-align:top; height:30px;padding-top:10px;"><div class="rt360">(本文系<span class="name"><a target="_blank" href="http://www.360doc.com/userhome/9484405">汉江秋月夜</a></span>首藏<span id="docsource"></span>)</div></td></tr>
                                                </tbody>
                                                </table>
</td>
</tr>

</tbody>
</table>


</td>
</tr>
</tbody>
</table>
<div class="lswzbox">
<div>
<table cellpadding="0" cellspacing="0">
<tbody>
<tr>
<td width="370"><div class="titwx">类似文章</div>
 <div class="modlist lf360 list" style=" width:310px;">
   <ul >
        
                <li><span>
                    <a href=http://www.360doc.com/content/07/0910/21/7653_734135.shtml target=_blank onclick='wzhit(37)'>金融学资料和网址 - 经济管理视频 - □-...</a></span></li>
            
                <li><span>
                    <a href=http://www.360doc.com/content/10/1127/20/2498729_72959910.shtml target=_blank onclick='wzhit(37)'>人生歪理,歪的很有理【转载】</a></span></li>
            
                <li><span>
                    <a href=http://www.360doc.com/content/11/0120/10/2498729_87783865.shtml target=_blank onclick='wzhit(37)'>这些话谁写的？真好！真经典！【转载】</a></span></li>
            
                <li><span>
                    <a href=http://www.360doc.com/content/12/0114/22/156610_179445159.shtml target=_blank onclick='wzhit(37)'>网上字典收集</a></span></li>
            
                <li><span>
                    <a href=http://www.360doc.com/content/09/0716/10/88761_4290613.shtml target=_blank onclick='wzhit(37)'>虞美人  组图</a></span></li>
            
                <li><span>
                    <a href=http://www.360doc.com/content/10/0301/14/61497_17201579.shtml target=_blank onclick='wzhit(37)'>Linux PS 命令详解</a></span></li>
            
                <li><span>
                    <a href=http://www.360doc.com/content/11/1229/00/7829717_175717824.shtml target=_blank onclick='wzhit(37)'>一个转身，也许就已经一辈子错过</a></span></li>
            
                <li><span>
                    <a href=http://www.360doc.com/content/09/0326/07/47910_2920930.shtml target=_blank onclick='wzhit(37)'>存活51年的周家庄人民公社 农民无人外出...</a></span></li>
            
                <li><span>
                    <a href=http://www.360doc.com/content/11/0527/15/6564694_119784016.shtml target=_blank onclick='wzhit(37)'>【ps图文教程】遥望</a></span></li>
            
  </ul> 
  <div class=" rt360"></div>
  </div></td>
<td><iframe src="http://union.dezhi.com/template/zaopai/360doc-zonghe300-250.html" width='300' height='250' scrolling=no border=0 frameborder=0  marginwidth=0 marginheight=0></iframe></td>

</tr>
</tbody>
</table>


 <div id="hm_t_7672"></div>
 <br />
<script type="text/javascript">
    document.write('<a style="display:none!important" id="tanx-a-mm_11220363_1101997_13474142"></a>');
    tanx_s = document.createElement("script");
    tanx_s.type = "text/javascript";
    tanx_s.charset = "gbk";
    tanx_s.id = "tanx-s-mm_11220363_1101997_13474142";
    tanx_s.async = true;
    tanx_s.src = "http://p.tanx.com/ex?i=mm_11220363_1101997_13474142";
    tanx_h = document.getElementsByTagName("head")[0];
    if (tanx_h) tanx_h.insertBefore(tanx_s, tanx_h.firstChild);
</script>
<br />
   <div id="Reflction" style="padding-top:10px;">
                                    <div id="360docRefTN" >
                                    </div>
                                    <div id="360docRefCT">
                                    </div>
                                    <div id="360docRefPB" align="center">
                                    </div>
                                </div>
                                <a name="sf"></a>
                              



  <div id="ReflectionPart" >
 
  <div class="mainbottom">
  <div class=" lf360"><img src="http://pubimage.360doc.com/wz/tb22.gif"  /></div>
  <div class="plbox lf360">
  <div class="plmain">
   <div class="titwx" >发表评论：</div>
   <div>
     <textarea name="SendRefTB" class="pltxt" id="SendRefTB"   onfocus="testContent(1);"
                                                        onblur="testContent(2)"></textarea>
   </div>
   <div class="rt360"><img id="ImgSendPL" src="http://pubimage.360doc.com/wz/tb24.gif"   style="cursor: pointer;"  onclick="SubmitReflection()" width="75" height="28" /></div> 
  </div>
  </div>
   <div class=" lf360"><img src="http://pubimage.360doc.com/wz/tb23.gif"  /></div> 
  </div>


  </div>
  
  </div>
</div>





</td>
<td align="center" valign="top" width="18px">
 
</td>
<td align="left" valign="top" width="252px">


<div style='height:102px'>
<script type="text/javascript">
    /*文章页右上标签云250*90，2013-8-1*/
    var cpro_id = "u1333692";
</script>
<script src="http://cpro.baidustatic.com/cpro/ui/c.js" type="text/javascript"></script>
</div>

<div style="background-color: #f5f5f5;width:250px;" >
    <div style="padding: 11px 14px;text-align:left;">
       <table cellpadding="0" cellspacing="0">
       <tr>
       <td valign="top">
 <div class=" lf360 head">
                <a id="ArticleRight1_HyperLink2" onclick="wzhit(40);" href="http://www.360doc.com/userhome/9484405" target="_blank"><img src="http://pubimage.360doc.com/head/008.gif" alt="" style="border-width:0px;" /></a></div>
       </td>
       <td valign="top">
       <div style="padding-left: 10px; padding-top: 3px; color: #6d6d6d; text-align:left; ">
                <div class="nametit name">
                    <a id="ArticleRight1_HyperLink1" onclick="wzhit(39);" href="http://www.360doc.com/userhome/9484405" target="_blank">汉江秋月夜</a></div>
                <div style="height: 24px;">
                    馆藏：<a href="http://www.360doc.com/userhome.aspx?userid=9484405&app=1" target=_blank onclick="javascript:wzhit(41);">477</a></div>
                <div>
                    关注我：<a href="http://www.360doc.com/userhome.aspx?userid=9484405&app=2" target=_blank onclick="javascript:wzhit(42);">104</a></div>
            </div>
       </td>
       </tr></table>
           
            
       
        <div class="gxqianm both">
            </div>
        <div style="padding-top: 5px;">
            <span id="spanfollowstatus"><script>isfollow(9484405);</script></span>&nbsp;<a href="javascript:void(0);" onclick="showMsDiv();wzhit(44);"><img src="http://pubimage.360doc.com/wz/tb21.gif" /></a></div>
    </div>
</div>
<div class="pageqh">
<div class="both">
    <script type="text/javascript">
        alimama_pid = "mm_11220363_1101997_10218757";
        alimama_width = 250;
        alimama_height = 250;
    </script>
    <script src="http://a.alimama.cn/inf.js" type="text/javascript"></script>
    <div style="height:15px;"></div>
</div>
    <div id="qh" class="nav">
        <span style="margin-left: 9px" class="checked" onclick="change('qh',0)">
            最新文章</span>
        
    </div>
    <div class="mokuaicontent">
    </div>
    <div style="clear: both;">
        <div id="qh_ul_0" style="">
            <div class="modlist lf360 list rightlist">
                <ul>
                    
                            <li><span>
                                <a href=http://www.360doc.com/content/13/0723/10/9484405_301901333.shtml target=_blank onclick='wzhit(45)'>basic_string</a></span></li>
                        
                            <li><span>
                                <a href=http://www.360doc.com/content/13/0723/10/9484405_301901213.shtml target=_blank onclick='wzhit(45)'>c  中的string用法(三)</a></span></li>
                        
                            <li><span>
                                <a href=http://www.360doc.com/content/13/0718/13/9484405_300825172.shtml target=_blank onclick='wzhit(45)'>【婺源.庆源村】邂逅遗世的江南...</a></span></li>
                        
                            <li><span>
                                <a href=http://www.360doc.com/content/13/0709/14/9484405_298696811.shtml target=_blank onclick='wzhit(45)'>中医与瑜伽三脉七轮</a></span></li>
                        
                            <li><span>
                                <a href=http://www.360doc.com/content/13/0709/13/9484405_298692150.shtml target=_blank onclick='wzhit(45)'>瑜伽修炼的三脉七轮 即所谓修炼...</a></span></li>
                        
                            <li><span>
                                <a href=http://www.360doc.com/content/13/0709/13/9484405_298690458.shtml target=_blank onclick='wzhit(45)'>印度瑜珈七轮养生术</a></span></li>
                        
                            <li><span>
                                <a href=http://www.360doc.com/content/13/0629/16/9484405_296368153.shtml target=_blank onclick='wzhit(45)'>SQLITE也不在你的程序，而在GCC...</a></span></li>
                        
                            <li><span>
                                <a href=http://www.360doc.com/content/13/0628/11/9484405_296100705.shtml target=_blank onclick='wzhit(45)'>linux shell数据重定向（输入重...</a></span></li>
                        
                            <li><span>
                                <a href=http://www.360doc.com/content/13/0627/17/9484405_295948444.shtml target=_blank onclick='wzhit(45)'>二进制patch工具xdelta的使用方...</a></span></li>
                        
                            <li><span>
                                <a href=http://www.360doc.com/content/13/0627/13/9484405_295883018.shtml target=_blank onclick='wzhit(45)'>shell的if else 以及大于,小于...</a></span></li>
                        
                            <li><span>
                                <a href=http://www.360doc.com/content/13/0626/18/9484405_295709895.shtml target=_blank onclick='wzhit(45)'>shell命令重定向输入</a></span></li>
                        
                            <li><span>
                                <a href=http://www.360doc.com/content/13/0626/17/9484405_295705659.shtml target=_blank onclick='wzhit(45)'>从ftp、tftp自动获取文件的脚本</a></span></li>
                        
                </ul>
                <div class=" rt360">
                    <a href="http://www.360doc.com/userhome/9484405" target="_blank">更多>></a></div>
            </div>
        </div>
        
    </div>
</div>
<div class="both" style="padding-top: 9px;">
    <script type="text/javascript">        var cpro_id = 'u1041292';</script>
    <script src="http://cpro.baidustatic.com/cpro/ui/c.js" type="text/javascript"></script>
</div>

<div class="titwx" style="padding-top: 12px;text-align:left;">
    热门文章</div>
<div class="modlist lf360 list rightlist">
    <ul>
        
                <li><span>
                    <a href=http://www.360doc.com/content/13/0427/20/0_281374144.shtml target=_blank onclick='wzhit(47)'>人狗情未了</a></span></li>
            
                <li><span>
                    <a href=http://www.360doc.com/content/13/0606/17/0_291067356.shtml target=_blank onclick='wzhit(47)'>二十二种果汁的不同功效</a></span></li>
            
                <li><span>
                    <a href=http://www.360doc.com/content/13/0514/22/0_285476910.shtml target=_blank onclick='wzhit(47)'>给四十岁女人的16条忠告</a></span></li>
            
                <li><span>
                    <a href=http://www.360doc.com/content/13/0327/06/0_274162477.shtml target=_blank onclick='wzhit(47)'>18款封闭式阳台设计</a></span></li>
            
                <li><span>
                    <a href=http://www.360doc.com/content/13/0525/16/0_288095700.shtml target=_blank onclick='wzhit(47)'>浅谈怎样做一名合格的副职</a></span></li>
            
                <li><span>
                    <a href=http://www.360doc.com/content/13/0416/15/0_278649080.shtml target=_blank onclick='wzhit(47)'>【心善比风水更厉害】       </a></span></li>
            
                <li><span>
                    <a href=http://www.360doc.com/content/12/1026/18/0_243943260.shtml target=_blank onclick='wzhit(47)'>想当亿万富翁请看赚钱公式 解密...</a></span></li>
            
                <li><span>
                    <a href=http://www.360doc.com/content/13/0319/03/0_272373721.shtml target=_blank onclick='wzhit(47)'>【图文】中国帝王录（推荐收藏）</a></span></li>
            
                <li><span>
                    <a href=http://www.360doc.com/content/13/0427/10/0_281233600.shtml target=_blank onclick='wzhit(47)'>中华美食菜谱大全（240道）</a></span></li>
            
                <li><span>
                    <a href=http://www.360doc.com/content/13/0326/13/0_274011906.shtml target=_blank onclick='wzhit(47)'>30条做人的句子 做事可失败，做...</a></span></li>
            
                <li><span>
                    <a href=http://www.360doc.com/content/13/0609/13/0_291715928.shtml target=_blank onclick='wzhit(47)'>正宗贵州酸汤鱼做法</a></span></li>
            
                <li><span>
                    <a href=http://www.360doc.com/content/13/0205/23/0_264458710.shtml target=_blank onclick='wzhit(47)'>2013中考物理400必做题</a></span></li>
            
    </ul>
    <div class=" rt360">
        <a href="http://www.360doc.com/readroom.html" target="_blank">更多>></a></div>
</div>

<p>
    &nbsp;
</p>
<p>
    <script>
        function change(pro_name, i) {
            var pro = document.getElementById(pro_name);
            var pro_arr = pro.getElementsByTagName("span");
            for (var m = 0; m < pro_arr.length; m++) {
                pro_arr[m].className = "unclecked link_black";
                if (document.getElementById(pro_name + "_ul_" + m) != null) {
                    document.getElementById(pro_name + "_ul_" + m).style.display = "none";
                }
            }
            pro_arr[i].className = "checked link_bai";
            if (document.getElementById(pro_name + "_ul_" + i) != null) {
                document.getElementById(pro_name + "_ul_" + i).style.display = "block";
            }
        }
    </script>
</p>

<div class="both" style="position:relative;">
<div class="both" id="divad5" style="padding-top: 11px;*padding-top: 0px !important;">
    <div id="divad4" style="display: none;">
        <div>
            <script type="text/javascript">
                alimama_pid = "mm_11220363_1101997_10415986";
                alimama_width = 250;
                alimama_height = 250;
            </script>
            <script src="http://a.alimama.cn/inf.js" type="text/javascript"></script>
        </div>
        <div  class="ggwz">
            <a href="javascript:void(0);" onclick="closead(2);">关闭</a>
        </div>
        <div style="height:13px;"></div>
    </div>
    <div style="clear:both;display: none;" id="divad6">
    <div>
    <script type="text/javascript">
        /*文章页右下滚屏200*200，创建于2013-7-22*/
        var cpro_id = "u1324965";
</script>
<script src="http://cpro.baidustatic.com/cpro/ui/c.js" type="text/javascript"></script>
    </div>
    <div  class="ggwz">
            <a href="javascript:void(0);" onclick="closead(3);">关闭</a>
        </div>
    
    </div>
    
</div>
</div>
</td>
</tr>
</tbody>
</table>
 </div>


 <script language="javascript" type="text/javascript">
     var appName = navigator.appName.toLowerCase();
     if (appName.indexOf("microsoft internet explorer") > -1) {
         document.write("<scr" + "ipt type='text/javascript' src='http://www.360doc.com/js/StickySystemIENewVersion.js?t=2013080901'></sc" + "ript>");
        
      
     }
     else {
         document.write("<scr" + "ipt type='text/javascript' src='http://www.360doc.com/js/StickySystemOtherNewVersion.js?t=2013080901'></sc" + "ript>");
       
     }
         
</script>




<span id="LayerLogin"></span>
<script>GerLookingUserInfo(1,9484405,1,0,'-1',-1,10,0);OutputSource('http://cache.baiducontent.com/c?m=9d78d513d99d1af31fa7837e7c4f8c38474380127d91835368d4e21e87231b1f483ca5fd65351177ced82c395cfa5e5c9da177246b1420c0c79fce578dfbd57978c260377b198c5c41935ff49a1872dc76c71cbaf447a6a7f53793add3d0de&p=ce7f8416d9c243b302bd9b7d0d138a3e&newp=c9759a46d6c602fe40aac7710c1494345c5bc4387ebada157c97c250d4&user=baidu&fm=sc&query=linux+kill+stat+d&qid=&p1=1');OutputCategory(9484405,22,'linux');OutputLastNextArt('应用调试之使用gdb和gdbserver','http://www.360doc.com/content/13/0305/16/9484405_269464229.shtml',0);OutputLastNextArt('原制作文件系统的Cramfs镜像','http://www.360doc.com/content/13/0503/12/9484405_282640070.shtml',1);var wumiiPermaLink = "";var wumiiTitle = "Linux进程状态(ps stat)之R、S、D、T、Z、X";var wumiiTags = "";var wumiiSitePrefix = "http://www.360doc.com/";var wumiiParams = "&num=5&mode=2&pf=JAVASCRIPT";</script>


<script type="text/javascript">
    var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
    document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fd86954201130d615136257dde062a503' type='text/javascript'%3E%3C/script%3E"));
</script>
</body>
</html>
