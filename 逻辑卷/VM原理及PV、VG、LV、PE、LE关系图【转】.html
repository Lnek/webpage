<html><head><title>LVM原理及PV、VG、LV、PE、LE关系图【转】_¤飞上墙的猫¤_百度空间</title><meta http-equiv=content-type content="text/html; charset=GBK"><link rel=alternate type="application/rss+xml" title="订阅该空间的博客文章" href="http://hi.baidu.com/suofang/rss"><style type="text/css">.error{color:#F00;font-size:12px}.shareUser,.shareLastEditor{line-height:20px;color:#666;text-align:left}.shareLastEditor{margin:5px 0 8px}</style><script>
	    var g_pageTimerStart=new Date().getTime();
	</script><script src="http://hi.bdimg.com/static/cblog/js/other/global.js?v=009301b8.js"></script><script src="http://hi.bdimg.com/static/cblog/js/other/libs.js?v=48b209f9.js"></script><script src="http://img.baidu.com/js/tangram-1.1.0.js?v=1334907755.js"></script><script>
var Session = {
    isLogin: true,
    isHost: 0,
    loginStatus : 2,
    userName: "suofang",   
    userPortrait:'019d73756f66616e672e01',
    spaceURL: "\/suofang",
    spBasicURL:"http:\/\/hi.baidu.com\/suofang",
    spBasicURLEnc:"http%3A%2F%2Fhi.baidu.com%2Fsuofang",
    visitorName:    "zhu__feng001",
    visitorPortrait:'a0a27a68755f5f66656e673030314312',
    isActive: '1',   /*{cmt 访问者是否激活空间}*/
    visitorURL: "\/zhu__feng001",        // 
    pageURL: "http://hi.baidu.com\/suofang\/blog\/item\/02ce933dd837b614bba1676c.html",    
    refer: "http:\/\/blog.sina.com.cn\/s\/blog_53737d110100x8wg.html",
    spToken: '159a0de2f990e4cff4c560e7c876c5be', 
    spFriendDomain: 'http://frd.baidu.com',
    spSpaceDomain: 'http://hi.baidu.com',
    spPortraitDomain: 'http://tx.bdimg.com',
    spSpaceStaticDomain: 'http://hi.bdimg.com', /*{cmt TODO RD似乎还不有提供这个变量，记得补成呀！}*/
    spImgDomain : 'http://img.baidu.com',
    spStaticDomain : 'http://hi.bdimg.com',

    isDrag: false  /*{cmt 是否在拖动页：是为了通用，只对模块内容有作用，这里也作为一个通用属性}*/
    ,isProfile: false   /*{cmt 是否在拖动页：是为了通用，只对模块内容有作用，这里也作为一个通用属性}*/
    ,isPortraitVerify:!true
    };
</script></head><body> <script>
/*<![CDATA[*/
if(top.location != self.location){
	top.location = self.location;
}
var myref = encodeURIComponent("http://hi.baidu.com\/suofang\/blog\/item\/02ce933dd837b614bba1676c.html");
/*]]>*/
</script><!--[if (lt IE 8.0)]><link rel=stylesheet type=text/css href="http://hi.bdimg.com/static/cblog/css/ui/mods.css?v=774e31a7.css"><![endif]--><!--[if (!IE)|(gte IE 8.0)]><!--><link rel=stylesheet type=text/css href="http://hi.bdimg.com/static/cblog/css/ui/mods_datauri.css?v=a1661a70.css"><!--<![endif]--><link rel=stylesheet type=text/css href="http://hitn.bdimg.com/2402050202/css/item/984da13438d560b7d0a2d305.css"><!--[if (lt IE 8.0)]><link rel=stylesheet type=text/css href="http://hi.bdimg.com/static/cblog/css/space.css?v=674c899c.css"><![endif]--><!--[if (!IE)|(gte IE 8.0)]><!--><link rel=stylesheet type=text/css href="http://hi.bdimg.com/static/cblog/css/space_datauri.css?v=b27686c7.css"><!--<![endif]--><div class=userbar><center> <div id=nav><a class=logo href=http://hi.baidu.com/index.htm><img src=http://img.baidu.com/hi/logo/logo_93_30.gif border=0 alt="百度空间"></a> <ul class=topmenu><li><a href="/zhu__feng001/ihome">个人中心</a><li class=vline><li><a href="/zhu__feng001/home" >我的主页</a><li class=vline><li><a href="/zhu__feng001/ihome/frdme">好友</a><li class=vline><li id=topMsgLi><a href="http://hi.baidu.com/msg/index" id=topMsgTab>消息</a> </ul> <dl class=manage> <dd id=tary_space_name class=nolink>zhu__feng001<dt>|<dd id=user_disguise_link><a href="/zhu__feng001/modify/spmodules/0">装扮</a><dt id=user_disguise_l>|<dd><a href="/zhu__feng001/ihome/basicconfig">设置</a><dt>| <dd><a href="https://passport.baidu.com/?logout&bdstoken=159a0de2f990e4cff4c560e7c876c5be&u=">退出</a></dl> </div></center></div><script src="http://hi.bdimg.com/static/base/js/conf/base.js?v=1334907755.js"></script><link rel=stylesheet type=text/css href="http://hi.bdimg.com/static/base/css/base.css?v=1334907755.css"><script>			
		(function(){
			function initMessage(){
				Space.msgConfig={
					staticDomain:'http://hi.bdimg.com'
					,portraitDomain:'http://tx.bdimg.com'
					,appsDomain:'http://apps.hi.baidu.com'
					,domain:'http://hi.baidu.com'
					,userPortrait:"a0a27a68755f5f66656e673030314312"
					,userName:"zhu__feng001"
					,spToken:"159a0de2f990e4cff4c560e7c876c5be"
					,spaceUrl:"\/zhu__feng001"
					,pageType:"blog"
				};
				if(Space.msgConfig.spaceUrl.indexOf("/")==0) {
					Space.msgConfig.spaceUrl = Space.msgConfig.spaceUrl.substr(1);
				}

				var job = new Space.Libs.Jobs();
				job.add("message_tip");
				job.start();
			}
			
			if(window.addEventListener){
				window.addEventListener('load', initMessage, false );
			}else if(window.attachEvent){
				window.attachEvent('onload', initMessage);
			}
		})();
	</script><script language=javascript src="http://hi.bdimg.com/static/cblog/js/ui/dialog.js?v=f1d92f7b.js"></script><center><div id=main align=left><!--[if IE]><script>
var objmain = document.getElementById("main");
function updatesize(){ var bodyw = window.document.body.offsetWidth; if(bodyw <= 790) objmain.style.width="772px"; else if(bodyw >= 1016) objmain.style.width="996px"; else objmain.style.width="100%"; }
updatesize(); window.onresize = updatesize;
</script><![endif]--><div id=header><div class=lc><div class=rc></div></div><div class=tit><a href="/suofang" class=titlink title="suofang的空间 http://hi.baidu.com/suofang">¤飞上墙的猫¤</a></div><div class=desc>～¤～ 看庭前花开花落 ～♂～ 望碧空风卷云舒 ～～～</div><div id=tabline>&nbsp;</div><div id=tab><a href="http://hi.baidu.com/suofang/home">主页</a><a href="http://hi.baidu.com/suofang/blog" class=on>博客</a><a href="http://hi.baidu.com/suofang/album">相册</a><span>|</span><a href="http://hi.baidu.com/suofang/profile">个人档案</a><span>|</span><a href="http://hi.baidu.com/suofang/friends">好友</a><span>|</span><a href="http://tieba.baidu.com/i/sys/jump?un=suofang&fr=spacebar" onclick="BdUtil.ns_trackerLink('m_20110330_spacebar','')" target=_blank>i贴吧</a></div></div><div class=stage><div class=stagepad><div style="width:100%"><table width="100%" border=0 cellspacing=0 cellpadding=0 class=modth><tr><td class=modtl width=7>&nbsp;<td class=modtc nowrap><div class=modhead><span class=modtit>查看文章</span></div><td class=modtc nowrap align=right><td class=modtr width=7>&nbsp;</table><div id=m_blog class=modbox style="overflow-x:hidden;"><div class=tit>LVM原理及PV、VG、LV、PE、LE关系图【转】</div><div class=date>2011年02月28日 星期一 下午 10:33</div><table style="table-layout:fixed;width:100%"><tr><td><div id=blog_text class=cnt><p>LVM（逻辑分区管理）中的几个概念：<img style="MARGIN: 0px 10px 0px 0px" src="http://hiphotos.baidu.com/suofang/pic/item/7399fa03a97058243812bb3f.jpg"><br>PV(physical volume)：物理卷在逻辑卷管理系统最底层，可为整个物理硬盘或实际物理硬盘上的分区。<br>VG(volume group)：卷组建立在物理卷上，一卷组中至少要包括一物理卷，卷组建立后可动态的添加卷到卷组中，一个逻辑卷管理系统工程中可有多个卷组。<br>LV(logical volume)：逻辑卷建立在卷组基础上，卷组中未分配空间可用于建立新的逻辑卷，逻辑卷建立后可以动态扩展和缩小空间。<br>PE(physical extent)：物理区域是物理卷中可用于分配的最小存储单元，物理区域大小在建立卷组时指定，一旦确定不能更改，同一卷组所有物理卷的物理区域大小需一致，新的pv加入到vg后，pe的大小自动更改为vg中定义的pe大小。<br>LE(logical extent)：逻辑区域是逻辑卷中可用于分配的最小存储单元，逻辑区域的大小取决于逻辑卷所在卷组中的物理区域的大小。<br>卷组描述区域：卷组描述区域存在于每个物理卷中，用于描述物理卷本身、物理卷所属卷组、卷组中逻辑卷、逻辑卷中物理区域的分配等所有信息，它是在使用pvcreate建立物理卷时建立的。</p>
<p>=====================================================</p>
<p>步骤：</p>
<p>1．准备物理分区（Physical Partions） <br>　　首先，我们需要选择用于 LVM 的物理存储器。这些通常是标准分区，但也可以是已创建的 Linux Software RAID 卷。这里我利用fdisk命令，将sdb、sdc两块磁盘分了两个区sdb1、sdc1， 通过fdisk的t指令指定分区为8e类型(Linux LVM) 。如图1所示。 <br>　　图1 准备物理分区的指令执行界面 <br>　　2．创建物理卷PV（Physical Volumes） 物理卷（Physical Volumes）简称PV，是在磁盘的物理分区或与磁盘分区具有同样功能的设备（如RAID)上创建而来。它只是在物理分区中划出了一个特殊的区域，用于记载与LVM相关的管理参数。 <br>　　创建物理卷的命令是 pvcreate : <br>　　[root@li2 ~]# pvcreate /dev/sdb1 <br>　　Physical volume "/dev/sdb1" successfully created <br>　　[root@li2 ~]# pvcreate /dev/sdc1 <br>　　Physical volume "/dev/sdc1" successfully created <br>　　以上命令分别将/dev/sdc1、/dev/sdd1初始化成物理卷，使用物理卷显示命令pvdisplay查看物理卷情况如下: <br>　　[root@li2 ~]# pvdisplay <br>　　--- NEW Physical volume --- <br>　　PV Name /dev/sdb1 <br>　　VG Name <br>　　PV Size 36.00 GB <br>　　Allocatable NO <br>　　PE Size (KByte) 0 <br>　　Total PE 0 <br>　　Free PE 0 <br>　　Allocated PE 0 <br>　　PV UUID QDmnUd-tuvH-U4Hn-n5Ry-zGRT-O1yK-67Dxbb <br>　　--- NEW Physical volume --- <br>　　PV Name /dev/sdc1 <br>　　VG Name <br>　　PV Size 36.00 GB <br>　　Allocatable NO <br>　　PE Size (KByte) 0 <br>　　Total PE 0 <br>　　Free PE 0 <br>　　Allocated PE 0 <br>　　PV UUID NDBf68-6qrD-9hE6-Rotv-RdxL-Azvv-7NlC0S <br>　　3．创建卷组VG（Volume Groups） <br>　　卷组（Volume Group）简称VG，它是一个或者多个物理卷的组合。卷组将多个物理卷组合在一起，形成一个可管理的单元，它类似于非LVM系统中的物理硬盘。 <br>　　创建卷组的命令为vgcreate，下面利用它创建了一个名为“lvmdisk”的卷组，该卷组包含/dev/sdb1、/dev/sdc1两个物理卷。 <br>　　[root@li2 ~]# vgcreate lvmdisk /dev/sdb1 /dev/sdc1 <br>　　Volume group "lvmdisk" successfully created <br>　　使用卷组查看命令vgdisplay显示卷组情况: <br>　　[root@li2 ~]# vgdisplay <br>　　--- Volume group --- <br>　　VG Name lvmdisk <br>　　System ID <br>　　Format lvm2 <br>　　Metadata Areas 2 <br>　　Metadata Sequence No 1 <br>　　VG Access read/write <br>　　VG Status resizable <br>　　MAX LV 0 <br>　　Cur LV 0 <br>　　Open LV 0 <br>　　Max PV 0 <br>　　Cur PV 2 <br>　　Act PV 2 <br>　　VG Size 71.98 GB <br>　　PE Size 4.00 MB <br>　　Total PE 18428 <br>　　Alloc PE / Size 0 / 0 <br>　　Free PE / Size 18428 / 71.98 GB <br>　　VG UUID SARfuj-wAUI-od81-VWAc-A1nt-aaFN-JWaPVf <br>　　当多个物理卷组合成一个卷组后时，LVM会在所有的物理卷上做类似格式化的工作，将每个物理卷切成一块一块的空间，这一块一块的空间就称为PE（Physical Extent ），它的默认大小是4MB。 <br>　　由于受内核限制的原因，一个逻辑卷（Logic Volume）最多只能包含65536个PE（Physical Extent），所以一个PE的大小就决定了逻辑卷的最大容量，4 MB 的PE决定了单个逻辑卷最大容量为 256 GB，若希望使用大于256G的逻辑卷，则创建卷组时需要指定更大的PE。在Red Hat Enterprise Linux AS 4中PE大小范围为8 KB 到 16GB，并且必须总是 2 的倍数。 <br>　　例如，如果希望使用 64 MB 的PE创建卷组，这样逻辑卷最大容量就可以为4 TB，命令如下: <br>　　# vgcreate － 64MB lvmdisk /dev/sdb1 /dev/sdc1 <br>　　4．创建逻辑卷LV（Logical Volumes） <br>　　逻辑卷（Logical Volumes）简称LV，是在卷组中划分的一个逻辑区域，类似于非LVM系统中的硬盘分区。 <br>　　创建逻辑卷的命令为lvcreate，通过下面的命令，我们在卷组lvmdisk上创建了一个名字为pldy1的逻辑卷，大小为15GB，其设备入口为/dev/lvmdisk/pldy1。 <br>　　[root@li2 dev]# lvcreate -L 15G -n pldy1 lvmdisk <br>　　Logical volume "pldy1" created <br>　　也可以使用-l参数，通过指定PE数来设定逻辑分区大小。 <br>　　例如，希望创建一个使用全部空间的逻辑卷，需要先查清卷组中的PE总数，通过上面的vgdisplay命令查得当前卷组PE总数为18428，命令如下: <br>　　# lvcreate -l 18428 -n pldy1 lvmdisk <br>　　当逻辑卷创建成功后，可以使用lvdisplay命令查看逻辑卷情况: <br>　　[root@li2 ~]# lvdisplay <br>　　--- Logical volume --- <br>　　LV Name /dev/lvmdisk/pldy1 <br>　　VG Name lvmdisk <br>　　LV UUID FQcnm3-BMyq-NkJz-hykw-9xg1-Qy8d-8UeGCN <br>　　LV Write Access read/write <br>　　LV Status available <br>　　# open 0 <br>　　LV Size 15.00 GB <br>　　Current LE 3840 <br>　　Segments 1 <br>　　Allocation inherit <br>　　Read ahead sectors 0 <br>　　Block device 253:0 <br>　　同卷组一样，逻辑卷在创建的过程中也被分成了一块一块的空间，这些空间称为LE（Logical Extents），在同一个卷组中，LE的大小和PE是相同的，并且一一对应。 <br>　　5．创建文件系统 <br>　　在逻辑卷上创建ext3文件系统: <br>　　[root@li2 ~]# mkfs -t ext3 /dev/lvmdisk/pldy1 <br>　　创建了文件系统以后，就可以加载并使用了: <br>　　[root@li2 ~]# mkdir /opt/Oracle <br>　　[root@li2 ~]# mount /dev/lvmdisk/pldy1 /opt/Oracle <br>　　为了在系统启动时自动加载文件系统，则还需要在/etc/fstab中添加内容: <br>　　/dev/lvmdisk/pldy1 /opt/Oracle ext3 defaults 1 2 <br>　　管理LVM <br>　　LVM的最大好处就是可以动态地调整分区大小，而无须重新启动机器，下面让我们来体验一下吧！继续上面的实例，现假设逻辑卷/dev/lvmdisk/pldy1空间不足，需要增加其大小，我们分两种情况讨论： <br>　　1．卷组中有剩余的空间 <br>　　通过vgdisplay命令可以检查当前卷组空间使用情况: <br>　　[root@li2 ~]# vgdisplay <br>　　--- Volume group --- <br>　　VG Name lvmdisk <br>　　System ID <br>　　Format lvm2 <br>　　Metadata Areas 2 <br>　　Metadata Sequence No 2 <br>　　VG Access read/write <br>　　VG Status resizable <br>　　MAX LV 0 <br>　　Cur LV 1 <br>　　Open LV 0 <br>　　Max PV 0 <br>　　Cur PV 2 <br>　　Act PV 2 <br>　　VG Size 71.98 GB <br>　　PE Size 4.00 MB <br>　　Total PE 18428 <br>　　Alloc PE / Size 3840 / 15.00 GB <br>　　Free PE / Size 14588 / 56.98 GB <br>　　VG UUID SARfuj-wAUI-od81-VWAc-A1nt-aaFN-JWaPVf <br>　　确定当前卷组剩余空间56.98GB，剩余PE数量为14588个。在这里将所有的剩余空间全部增加给逻辑卷 /dev/lvmdisk/pldy1。 <br>　　[root@li2 Oracle]# lvextend -l+14588 /dev/lvmdisk/pldy1 <br>　　Extending logical volume pldy1 to 56.98 GB <br>　　Logical volume pldy1 successfully resized <br>　　上面的命令使用了-l+14588参数，它的意思是给指定的逻辑卷增加14588个PE。如果不是将全部空间都使用，还可使用其他形式的lvextend命令。 <br>　　例如将逻辑卷/dev/lvmdisk/pldy1增加5GB的空间，使其空间达到20GB，可写成: “# lvextend -L+5G /dev/lvmdisk/pldy1”或“# lvextend －L20G /dev/lvmdisk/pldy1”。增加了逻辑卷容量后，就要通过ext2online命令修改文件系统的大小了。 <br>　　[root@li2 ~]# ext2online /opt/Oracle/ <br>　　转换好后，让我们查看一下文件系统的当前状态: <br>　　[root@li2 ~]# df －lh <br>　　Filesystem 1k-blocks Used Available Use% Mounted on <br>　　/dev/sda1 7.4G 1.8G 5.3G 25% / <br>　　none 135M 0 135M 0% /dev/shm <br>　　/dev/mapper/lvmdisk-pldy1 71G 81M 68G 1% /opt/Oracle <br>　　2．卷组中空间不足 <br>　　当卷组中没有足够的空间用于扩展逻辑卷的大小时，就需要增加卷组的容量，而增加卷组容量的惟一办法就是向卷组中添加新的物理卷。 <br>　　首先是增加一块新硬盘(36GB SCSI 硬盘)，并对其完成分区、创建物理卷等工作。接下来是利用vgextend命令将新的物理卷（/dev/sdd1）加入到卷组中。 <br>　　扩展卷组的命令如下： <br>　　[root@li2 ~]# vgextend lvmdisk /dev/sdd1 <br>　　Volume group "lvmdisk" successfully extended <br>　　利用vgdisplay命令查看卷组lvmdisk的情况: <br>　　[root@li2 ~]# vgdisplay <br>　　--- Volume group --- <br>　　VG Name lvmdisk <br>　　System ID <br>　　Format lvm2 <br>　　Metadata Areas 3 <br>　　Metadata Sequence No 3 <br>　　VG Access read/write <br>　　VG Status resizable <br>　　MAX LV 0 <br>　　Cur LV 1 <br>　　Open LV 0 <br>　　Max PV 0 <br>　　Cur PV 3 <br>　　Act PV 3 <br>　　VG Size 107.97 GB <br>　　PE Size 4.00 MB <br>　　Total PE 27640 <br>　　Alloc PE / Size 3840 / 15.00 GB <br>　　Free PE / Size 23800 / 92.97 GB <br>　　VG UUID l8YPvz-uD7h-oj1A-0qS5-TFcT-mbC7-QbjzCu <br>　　完成卷组的扩容后，就可以按照第一种情况的方法完成逻辑卷的扩容，最终实现分区的动态调整。<br></p></div></table><br><div class=opt id=blogOpt><a href="http://hi.baidu.com/suofang/blog/category/Unix" title="查看该分类中所有文章">类别：Unix</a><span class=x-blog-opt-sp>|</span><a href="#" onclick="addToShare(); return false;" target=_blank><img src=http://img.baidu.com/hi/apps/share/share_btn.gif border=0 align=absbottom></a><span class=x-blog-opt-sp>|</span><a title="将此文章添加到百度搜藏" href=http://cang.baidu.com/do/add onClick="return addToFavor();" target=_blank>添加到搜藏</a> <span class=x-blog-opt-sp>|</span><a title="将此文章分享到i贴吧" href="#" onclick="addToiTieba(); return false;" target=_blank>分享到i贴吧</a><span class=x-blog-opt-sp>|</span>浏览(<span id=result>2469</span>)<span class=x-blog-opt-sp>|</span><a href="#send">评论</a>&nbsp;(<span id=blogCmtCount>0</span>)<script language=javascript>
										/*<![CDATA[*/
										var pre = [true,'LoadRunner添加自定义计数器监控oracle', 'LoadRunner添加自定义计数器监控...','\/suofang/blog/item/c4164d348dda505a251f1489.html'];
										var post = [true,'二十个关于Oracle裸设备的问答','二十个关于Oracle裸设备的问答', '\/suofang/blog/item/23455d0f72d2bf3e6059f32d.html'];
										if(pre[0] || post[0]){
											document.write('<div style="height:5px;line-height:5px;">&nbsp;</div><div id="in_nav">');
											if(pre[0]){
												document.write('上一篇：<a href="' + pre[3] + '" title="' + pre[1] + '">' +  pre[2] + '</a>&nbsp;&nbsp;&nbsp;&nbsp;');
											}
											if(post[0]){
												document.write('下一篇：<a href="' + post[3] + '" title="' + post[1] + '">' +  post[2] + '</a>');
											}
											document.write('</div>');
										}
										/*]]>*/
									</script></div><div class=line>&nbsp;</div><div id=share_user_list></div><div class=line>&nbsp;</div><style type="text/css">#in_related_doc a{text-decoration:none}</style><div id=in_related_tmp></div><div id=in_reader> <div class=tit>最近读者：</div></div><div class=line>&nbsp;</div><div id=in_comment> <a name=comment></a> <div class=tit>网友评论：</div> <span id=userCommentList></span> <div id=page></div></div><form action='/suofang/commit' id=blogCmtSubmitForm name=blogCmtSubmitForm method=post> <input type=hidden name=bdstoken value='159a0de2f990e4cff4c560e7c876c5be'> <input type=hidden name=ct value=8> <input type=hidden name=cm value=2> <input type=hidden name=spBlogID value='02ce933dd837b614bba1676c'> <input type=hidden name=spBlogCmtID value=''> <input type=hidden name=spRefURL value=''></form><div id=in_send><a name=send></a><form name=form1 id=popFormSubmit action="/suofang/commit" method=post onSubmit="return checkcmtform()"><input type=hidden name=bdstoken value="159a0de2f990e4cff4c560e7c876c5be"><input type=hidden name=ct value=8><input type=hidden name=cm value=1><input type=hidden name=spBlogID value="02ce933dd837b614bba1676c"><input type=hidden name=spRefURL id=spRefURL><script>
										    document.getElementById("spRefURL").value = window.location.href;
										</script><div class=tit>发表评论：</div><table width=620 border=0 cellspacing=5 cellpadding=0><tr><td class=f14>姓　名：<td>zhu__feng001<input name=spBlogCmtor id=spBlogCmtor style="display:none;" maxlength=50 value="zhu__feng001"><div style=display:none id=nmerror>*姓名最长为50字节</div><input type=hidden name=spBlogCmtURL id=spBlogCmtURL style=width:360px maxlength=128 onChange='checkeandu("spBlogCmtURL")' value='http://hi.baidu.com/zhu__feng001'><tr id=2_err style=display:none><td>&nbsp;<td><div class=error id=2_err_con></div><tr><td valign=top class=f14 id=reTitle>内　容：<td> <textarea name="spBlogCmtText" id="spBlogCmtText" style="width:520px;height:155px" tabindex="3" onFocus="hidErr(3);" ></textarea><tr id=3_err style=display:none><td>&nbsp;<td><div class=error id=3_err_con></div><tr id=share_blog> <td> <td valign=top><input type=checkbox id=shareBlog autocomplete=off style="vertical-align:text-bottom; margin-bottom:2px; margin-bottom:-2px\9;"><label for=shareBlog>同时将此文章分享给好友</label><input type=hidden id=shareBlogEchoback name=echoback><tr id=vercode><td valign=top class=f14>验证码：<td valign=top><input type=hidden name=spVcode value=""><input onFocus="f_focus()" id=spVerifyKey name=spVerifyKey size=6 maxlength=4 autocomplete=off tabindex=4> 请点击后输入四位验证码，字母不区分大小写<br><div id=yanzheng style=display:none><img id=verifypic width=120 height=40><wbr><a onFocus="this.blur();" href="#" onClick="return newverifypic();" title="看不清左边的字符">看不清?</a></div><tr><td valign=top class=f14>&nbsp;<td valign=top class=f14><input id=btn_ok name=btn_ok type=submit autocomplete=off value="发表评论" tabindex=5>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#" id=cancleReLink onClick="canclereply(); return false;" style="display:none; font-size:12px;color:#666;">取消回复</a></table></form></div><br></div><table width="100%" border=0 cellspacing=0 cellpadding=0 height=8><tr><td class=modbl width=7>&nbsp;<td class=modbc>&nbsp;<td class=modbr width=7>&nbsp;</table></div></div></div></div><div class=clearfix></div><div style="text-align:center;margin:30px auto 15px;font-family:Arial,simsun;font-size:12px;"><div style="margin:0 auto 6px;"><a href=http://help.baidu.com/question?prod_en=space target=_blank style="color:#00C;">帮助中心</a><span>&nbsp;|&nbsp;</span><a href="http://tieba.baidu.com/f?kw=%B0%D9%B6%C8%BF%D5%BC%E4&fr=wwwt" target=_blank style="color:#00C;">空间客服</a><span>&nbsp;|&nbsp;</span><a href=http://tousu.baidu.com/hi/ target=_blank style="color:#00C;">投诉中心</a><span>&nbsp;|&nbsp;</span><a href=http://www.baidu.com/search/hi_contract.html target=_blank style="color:#00C;">空间协议</a></div><div style="color:#7A77C8;">&copy;2012&nbsp;Baidu</div></div></center><ul id=blogCmtContentList style="display:none;"></ul><script>	var g_blogTitle = 'LVM原理及PV、VG、LV、PE、LE关系图【转】';
		var g_blogId = '02ce933dd837b614bba1676c';
		var g_isAllowCmt =  true ;
		var g_isByShared =  true ;
		var g_isAddRelate =  true ;
		var g_latestReader = [
									["http:\/\/hi.baidu.com\/sheepclothing","8e287368656570636c6f7468696e67f301","sheepclothing"],
									["http:\/\/hi.baidu.com\/lqq_qqdog","ce4e6c71715f7171646f676b07","lqq_qqdog"],
									["http:\/\/hi.baidu.com\/wjz_genius","a3f0776a7a5f67656e6975737401","wjz_genius"],
									["http:\/\/hi.baidu.com\/littleshop","36d36671667063323030388704","fqfpc2008"],
									["http:\/\/hi.baidu.com\/zhoukemu","74dc7a686f756b656d750a0c","zhoukemu"],
									["http:\/\/hi.baidu.com\/liangryjim","89836c69616e6772796a696d2422","liangryjim"],
									["http:\/\/hi.baidu.com\/无奈已太晚","2b5ccedec4ced2d1ccabcdede722","无奈已太晚"],
									["http:\/\/hi.baidu.com\/tony_zhou2008","187b746f6e795f7a686f754b00","tony_zhou"],
								{}
			];
	</script><iframe id=submitiframe name=submitiframe src="http://hi.bdimg.com/static/cblog/html/blank.html?v=20111213" style="display:none;"></iframe><script src="http://hi.bdimg.com/static/base/js/conf/comment.js?v=1334907755.js"></script><script src="http://hi.bdimg.com/static/cblog/js/job/detailpage.js?v=ee7931cf.js"></script><script>
/*<![CDATA[*/
/*{cmt
    这个相当一个代理器  
  在这里想实现一种这种加载效果：加载时注册（用一个 初始化数据.数组 记录要绑定的ID），文档ready后，按需加载js+css资源，js加载完，就初始化据执行

  有个问题，有些结构是 动态 执行这个绑定的，可能会发生资源还没有加载的情况。可以考虑给初始化数据，加一个标志位，说明加载完未，如果未，则把数据push到 初始化数据中(因为是用 dom.onxxx 的方式，所以不怕多次对同一个ID执行的问题)


  }*/
var SP = SP || {};
if(!SP.mycard){
    SP.mycard = new (function(){
        var me = this;
        var _cancleAction = Session.isDrag;  /*{cmt 标记在特殊情况下，所有的注册都被abort 如拖动页面}*/
        var _list = [];
        var _sourceLoaded = false;    /*{cmt 这里用了一种资源加载结束后，回调的机制，这个标志资源是否加载结束}*/
        me.bind = function (_id){
            if(_cancleAction){  //abort
                return;
            }
            if(!_sourceLoaded){
                _list.push(_id);
            } else {
                baidu.space.mycard.bind(_id);
            }
        }
        me.init = function (_config){
            _cancleAction = !!_config.cancle;
        }
        me.onSourceLoaded = function (){
            _sourceLoaded = true;
            baidu.space.mycard.init({portrait: Session.visitorPortrait});
            for(var i=0,len=_list.length; i<len; i++){
                baidu.space.mycard.bind(_list[i]);
            }
        }
    })();
    baidu.dom.ready(function(){
        BdAjax.loadCSS('http://hi.bdimg.com/static/cblog/css/ui/ucard/ucard.css?v=50de96ca.css');
        BdAjax.loadJS('http://hi.bdimg.com/static/cblog/js/ui/ucard/ucard.js?v=fcbffbf8.js');
    });
}
SP.mycard.bind('m_blog');  /*{cmt 只有文档加载完才真正绑定，这里只是append记录 }*/
/*]]>*/
</script>