<!doctype html public "-//W3C//DTD HTML 3.2//EN">
<html>
<head>
<title>Linux kernel - Linux Cross Reference</title>
<link rel="stylesheet" href="http://lxr.oss.org.cn/newstyle.css" type="text/css" media="screen" />
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta description="Linux Cross-Reference (LXR) service by oss.org.cn. The easiest way to study Linux kernel sources. Available for all recent releases." />
<base href="http://lxr.oss.org.cn/source">
<script type="text/javascript" src="http://lxr.oss.org.cn/prettify.js"></script>
<link href="prettify.css" type="text/css" rel="stylesheet" /> 
<link href="desert.css" type="text/css" rel="stylesheet" />
</head>

</head>

<body onload="prettyPrint()">

<div id="wrapper">

<div id="menu">
<ul>
   <li><a href="http://oss.org.cn/" title="ChinaOSS" target="_blank">开源中国首页</a></li>
   <li><a href="http://matrix.oss.org.cn/" title="Matrix Development" target="_blank">协同开发平台</a></li>
   <li><a href="http://my.oss.org.cn/" title="ChinaOSS SNS" target="_blank">社区个人空间</a></li>
   <li><a href="http://yp.oss.org.cn/" title="OSS Yellow Page" target="_blank">开源软件黄页</a></li>
   <li><a href="http://oss.org.cn/ossdocs/gnu_linux/kernel-api/" title="Kernel API" target="_blank">Linux Kernel API</a></li>
   <li><a href="http://oss.org.cn/?action-viewnews-itemid-3646" title="Manual Index" target="_blank">开源技术手册黄页</a></li>
</ul>
</div>

<div id="header">
	<div id="logo">
		<h1>Linux Kernel Cross Reference</h1>
		<h2><a href="http://lxr.oss.org.cn">Welcome to lxr.oss.org.cn</a></h2>
	</div>
</div>

<div id="topbar">
	<h3><center>&nbsp;&bull;&nbsp;<b><i>source navigation</i></b>&nbsp;&nbsp;&bull;&nbsp;<a href="diff/net/core/rtnetlink.c">diff markup</a>&nbsp;&nbsp;&bull;&nbsp;<a href="ident">identifier search</a>&nbsp;&nbsp;&bull;&nbsp;<a href="search">freetext search</a>&nbsp;&nbsp;&bull;&nbsp;<a href="find">file search</a>&nbsp;&nbsp;&bull;&nbsp;<a href="http://lxr.oss.org.cn/plain/" style="color:#3399cc;">Plain Style</a>&nbsp;&bull;&nbsp;</center></h3><br>
  	<p>Version:&nbsp;<a href="source/net/core/rtnetlink.c?v=2.6.8">2.6.8</a> &nbsp;&nbsp;<a href="source/net/core/rtnetlink.c?v=2.6.16">2.6.16</a> &nbsp;&nbsp;<a href="source/net/core/rtnetlink.c?v=2.6.25">2.6.25</a> &nbsp;&nbsp;<a href="source/net/core/rtnetlink.c?v=2.6.30">2.6.30</a> &nbsp;&nbsp;<a href="source/net/core/rtnetlink.c?v=2.6.34">2.6.34</a> &nbsp;&nbsp;<a href="source/net/core/rtnetlink.c?v=2.6.35">2.6.35</a> &nbsp;&nbsp;<a href="source/net/core/rtnetlink.c?v=2.6.39">2.6.39</a> &nbsp;&nbsp;<a href="source/net/core/rtnetlink.c?v=3.0.26">3.0.26</a> &nbsp;&nbsp;<a href="source/net/core/rtnetlink.c?v=3.1.10">3.1.10</a> &nbsp;&nbsp;<b><i>3.2.13</i></b> &nbsp;&nbsp;<a href="source/net/core/rtnetlink.c?v=3.3">3.3</a> &nbsp;</p><p>Architecture:&nbsp;<b><i>i386</i></b> &nbsp;&nbsp;<a href="source/net/core/rtnetlink.c?a=arm">arm</a> &nbsp;&nbsp;<a href="source/net/core/rtnetlink.c?a=mips">mips</a> &nbsp;&nbsp;<a href="source/net/core/rtnetlink.c?a=ppc">ppc</a> &nbsp;&nbsp;<a href="source/net/core/rtnetlink.c?a=alpha">alpha</a> &nbsp;&nbsp;<a href="source/net/core/rtnetlink.c?a=m68k">m68k</a> &nbsp;&nbsp;<a href="source/net/core/rtnetlink.c?a=sparc">sparc</a> &nbsp;&nbsp;<a href="source/net/core/rtnetlink.c?a=sparc64">sparc64</a> &nbsp;</p>
</div>

<h1><a href="source/">linux-3.2.13</a>/<a href="source/net/">net</a>/<a href="source/net/core/">core</a>/<a href="source/net/core/rtnetlink.c">rtnetlink.c</a></h1>

<hr>
<div id="lxrcode">
<pre class="prettyprint lang-c">  <a name=L1 href="source/net/core/rtnetlink.c#L1">1</a> <b><i>/*</i></b>
  <a name=L2 href="source/net/core/rtnetlink.c#L2">2</a> <b><i> * INET         An implementation of the TCP/IP protocol suite for the LINUX</i></b>
  <a name=L3 href="source/net/core/rtnetlink.c#L3">3</a> <b><i> *              operating system.  INET is implemented using the  BSD Socket</i></b>
  <a name=L4 href="source/net/core/rtnetlink.c#L4">4</a> <b><i> *              interface as the means of communication with the user level.</i></b>
  <a name=L5 href="source/net/core/rtnetlink.c#L5">5</a> <b><i> *</i></b>
  <a name=L6 href="source/net/core/rtnetlink.c#L6">6</a> <b><i> *              Routing netlink socket interface: protocol independent part.</i></b>
  <a name=L7 href="source/net/core/rtnetlink.c#L7">7</a> <b><i> *</i></b>
  <a name=L8 href="source/net/core/rtnetlink.c#L8">8</a> <b><i> * Authors:     Alexey Kuznetsov, &lt;kuznet@ms2.inr.ac.ru&gt;</i></b>
  <a name=L9 href="source/net/core/rtnetlink.c#L9">9</a> <b><i> *</i></b>
 <a name=L10 href="source/net/core/rtnetlink.c#L10">10</a> <b><i> *              This program is free software; you can redistribute it and/or</i></b>
 <a name=L11 href="source/net/core/rtnetlink.c#L11">11</a> <b><i> *              modify it under the terms of the GNU General Public License</i></b>
 <a name=L12 href="source/net/core/rtnetlink.c#L12">12</a> <b><i> *              as published by the Free Software Foundation; either version</i></b>
 <a name=L13 href="source/net/core/rtnetlink.c#L13">13</a> <b><i> *              2 of the License, or (at your option) any later version.</i></b>
 <a name=L14 href="source/net/core/rtnetlink.c#L14">14</a> <b><i> *</i></b>
 <a name=L15 href="source/net/core/rtnetlink.c#L15">15</a> <b><i> *      Fixes:</i></b>
 <a name=L16 href="source/net/core/rtnetlink.c#L16">16</a> <b><i> *      Vitaly E. Lavrov                RTA_OK arithmetics was wrong.</i></b>
 <a name=L17 href="source/net/core/rtnetlink.c#L17">17</a> <b><i> */</i></b>
 <a name=L18 href="source/net/core/rtnetlink.c#L18">18</a> 
 <a name=L19 href="source/net/core/rtnetlink.c#L19">19</a> #include &lt;<a href="source/include/linux/errno.h">linux/errno.h</a>>
 <a name=L20 href="source/net/core/rtnetlink.c#L20">20</a> #include &lt;<a href="source/include/linux/module.h">linux/module.h</a>>
 <a name=L21 href="source/net/core/rtnetlink.c#L21">21</a> #include &lt;<a href="source/include/linux/types.h">linux/types.h</a>>
 <a name=L22 href="source/net/core/rtnetlink.c#L22">22</a> #include &lt;<a href="source/include/linux/socket.h">linux/socket.h</a>>
 <a name=L23 href="source/net/core/rtnetlink.c#L23">23</a> #include &lt;<a href="source/include/linux/kernel.h">linux/kernel.h</a>>
 <a name=L24 href="source/net/core/rtnetlink.c#L24">24</a> #include &lt;<a href="source/include/linux/timer.h">linux/timer.h</a>>
 <a name=L25 href="source/net/core/rtnetlink.c#L25">25</a> #include &lt;<a href="source/include/linux/string.h">linux/string.h</a>>
 <a name=L26 href="source/net/core/rtnetlink.c#L26">26</a> #include &lt;<a href="source/include/linux/sockios.h">linux/sockios.h</a>>
 <a name=L27 href="source/net/core/rtnetlink.c#L27">27</a> #include &lt;<a href="source/include/linux/net.h">linux/net.h</a>>
 <a name=L28 href="source/net/core/rtnetlink.c#L28">28</a> #include &lt;<a href="source/include/linux/fcntl.h">linux/fcntl.h</a>>
 <a name=L29 href="source/net/core/rtnetlink.c#L29">29</a> #include &lt;<a href="source/include/linux/mm.h">linux/mm.h</a>>
 <a name=L30 href="source/net/core/rtnetlink.c#L30">30</a> #include &lt;<a href="source/include/linux/slab.h">linux/slab.h</a>>
 <a name=L31 href="source/net/core/rtnetlink.c#L31">31</a> #include &lt;<a href="source/include/linux/interrupt.h">linux/interrupt.h</a>>
 <a name=L32 href="source/net/core/rtnetlink.c#L32">32</a> #include &lt;<a href="source/include/linux/capability.h">linux/capability.h</a>>
 <a name=L33 href="source/net/core/rtnetlink.c#L33">33</a> #include &lt;<a href="source/include/linux/skbuff.h">linux/skbuff.h</a>>
 <a name=L34 href="source/net/core/rtnetlink.c#L34">34</a> #include &lt;<a href="source/include/linux/init.h">linux/init.h</a>>
 <a name=L35 href="source/net/core/rtnetlink.c#L35">35</a> #include &lt;<a href="source/include/linux/security.h">linux/security.h</a>>
 <a name=L36 href="source/net/core/rtnetlink.c#L36">36</a> #include &lt;<a href="source/include/linux/mutex.h">linux/mutex.h</a>>
 <a name=L37 href="source/net/core/rtnetlink.c#L37">37</a> #include &lt;<a href="source/include/linux/if_addr.h">linux/if_addr.h</a>>
 <a name=L38 href="source/net/core/rtnetlink.c#L38">38</a> #include &lt;<a href="source/include/linux/pci.h">linux/pci.h</a>>
 <a name=L39 href="source/net/core/rtnetlink.c#L39">39</a> 
 <a name=L40 href="source/net/core/rtnetlink.c#L40">40</a> #include &lt;<a href="source/include/asm-i386/uaccess.h">asm/uaccess.h</a>>
 <a name=L41 href="source/net/core/rtnetlink.c#L41">41</a> #include &lt;<a href="source/include/asm-i386/system.h">asm/system.h</a>>
 <a name=L42 href="source/net/core/rtnetlink.c#L42">42</a> 
 <a name=L43 href="source/net/core/rtnetlink.c#L43">43</a> #include &lt;<a href="source/include/linux/inet.h">linux/inet.h</a>>
 <a name=L44 href="source/net/core/rtnetlink.c#L44">44</a> #include &lt;<a href="source/include/linux/netdevice.h">linux/netdevice.h</a>>
 <a name=L45 href="source/net/core/rtnetlink.c#L45">45</a> #include &lt;<a href="source/include/net/ip.h">net/ip.h</a>>
 <a name=L46 href="source/net/core/rtnetlink.c#L46">46</a> #include &lt;<a href="source/include/net/protocol.h">net/protocol.h</a>>
 <a name=L47 href="source/net/core/rtnetlink.c#L47">47</a> #include &lt;<a href="source/include/net/arp.h">net/arp.h</a>>
 <a name=L48 href="source/net/core/rtnetlink.c#L48">48</a> #include &lt;<a href="source/include/net/route.h">net/route.h</a>>
 <a name=L49 href="source/net/core/rtnetlink.c#L49">49</a> #include &lt;<a href="source/include/net/udp.h">net/udp.h</a>>
 <a name=L50 href="source/net/core/rtnetlink.c#L50">50</a> #include &lt;<a href="source/include/net/sock.h">net/sock.h</a>>
 <a name=L51 href="source/net/core/rtnetlink.c#L51">51</a> #include &lt;<a href="source/include/net/pkt_sched.h">net/pkt_sched.h</a>>
 <a name=L52 href="source/net/core/rtnetlink.c#L52">52</a> #include &lt;<a href="source/include/net/fib_rules.h">net/fib_rules.h</a>>
 <a name=L53 href="source/net/core/rtnetlink.c#L53">53</a> #include &lt;<a href="source/include/net/rtnetlink.h">net/rtnetlink.h</a>>
 <a name=L54 href="source/net/core/rtnetlink.c#L54">54</a> #include &lt;<a href="source/include/net/net_namespace.h">net/net_namespace.h</a>>
 <a name=L55 href="source/net/core/rtnetlink.c#L55">55</a> 
 <a name=L56 href="source/net/core/rtnetlink.c#L56">56</a> struct <a href="ident?i=rtnl_link">rtnl_link</a> {
 <a name=L57 href="source/net/core/rtnetlink.c#L57">57</a>         <a href="ident?i=rtnl_doit_func">rtnl_doit_func</a>          doit;
 <a name=L58 href="source/net/core/rtnetlink.c#L58">58</a>         <a href="ident?i=rtnl_dumpit_func">rtnl_dumpit_func</a>        dumpit;
 <a name=L59 href="source/net/core/rtnetlink.c#L59">59</a>         <a href="ident?i=rtnl_calcit_func">rtnl_calcit_func</a>        calcit;
 <a name=L60 href="source/net/core/rtnetlink.c#L60">60</a> };
 <a name=L61 href="source/net/core/rtnetlink.c#L61">61</a> 
 <a name=L62 href="source/net/core/rtnetlink.c#L62">62</a> static <a href="ident?i=DEFINE_MUTEX">DEFINE_MUTEX</a>(rtnl_mutex);
 <a name=L63 href="source/net/core/rtnetlink.c#L63">63</a> static <a href="ident?i=u16">u16</a> <a href="ident?i=min_ifinfo_dump_size">min_ifinfo_dump_size</a>;
 <a name=L64 href="source/net/core/rtnetlink.c#L64">64</a> 
 <a name=L65 href="source/net/core/rtnetlink.c#L65">65</a> void <a href="ident?i=rtnl_lock">rtnl_lock</a>(void)
 <a name=L66 href="source/net/core/rtnetlink.c#L66">66</a> {
 <a name=L67 href="source/net/core/rtnetlink.c#L67">67</a>         <a href="ident?i=mutex_lock">mutex_lock</a>(&amp;rtnl_mutex);
 <a name=L68 href="source/net/core/rtnetlink.c#L68">68</a> }
 <a name=L69 href="source/net/core/rtnetlink.c#L69">69</a> <a href="ident?i=EXPORT_SYMBOL">EXPORT_SYMBOL</a>(<a href="ident?i=rtnl_lock">rtnl_lock</a>);
 <a name=L70 href="source/net/core/rtnetlink.c#L70">70</a> 
 <a name=L71 href="source/net/core/rtnetlink.c#L71">71</a> void <a href="ident?i=__rtnl_unlock">__rtnl_unlock</a>(void)
 <a name=L72 href="source/net/core/rtnetlink.c#L72">72</a> {
 <a name=L73 href="source/net/core/rtnetlink.c#L73">73</a>         <a href="ident?i=mutex_unlock">mutex_unlock</a>(&amp;rtnl_mutex);
 <a name=L74 href="source/net/core/rtnetlink.c#L74">74</a> }
 <a name=L75 href="source/net/core/rtnetlink.c#L75">75</a> 
 <a name=L76 href="source/net/core/rtnetlink.c#L76">76</a> void <a href="ident?i=rtnl_unlock">rtnl_unlock</a>(void)
 <a name=L77 href="source/net/core/rtnetlink.c#L77">77</a> {
 <a name=L78 href="source/net/core/rtnetlink.c#L78">78</a>         <b><i>/* This fellow will unlock it for us. */</i></b>
 <a name=L79 href="source/net/core/rtnetlink.c#L79">79</a>         <a href="ident?i=netdev_run_todo">netdev_run_todo</a>();
 <a name=L80 href="source/net/core/rtnetlink.c#L80">80</a> }
 <a name=L81 href="source/net/core/rtnetlink.c#L81">81</a> <a href="ident?i=EXPORT_SYMBOL">EXPORT_SYMBOL</a>(<a href="ident?i=rtnl_unlock">rtnl_unlock</a>);
 <a name=L82 href="source/net/core/rtnetlink.c#L82">82</a> 
 <a name=L83 href="source/net/core/rtnetlink.c#L83">83</a> int <a href="ident?i=rtnl_trylock">rtnl_trylock</a>(void)
 <a name=L84 href="source/net/core/rtnetlink.c#L84">84</a> {
 <a name=L85 href="source/net/core/rtnetlink.c#L85">85</a>         return <a href="ident?i=mutex_trylock">mutex_trylock</a>(&amp;rtnl_mutex);
 <a name=L86 href="source/net/core/rtnetlink.c#L86">86</a> }
 <a name=L87 href="source/net/core/rtnetlink.c#L87">87</a> <a href="ident?i=EXPORT_SYMBOL">EXPORT_SYMBOL</a>(<a href="ident?i=rtnl_trylock">rtnl_trylock</a>);
 <a name=L88 href="source/net/core/rtnetlink.c#L88">88</a> 
 <a name=L89 href="source/net/core/rtnetlink.c#L89">89</a> int <a href="ident?i=rtnl_is_locked">rtnl_is_locked</a>(void)
 <a name=L90 href="source/net/core/rtnetlink.c#L90">90</a> {
 <a name=L91 href="source/net/core/rtnetlink.c#L91">91</a>         return <a href="ident?i=mutex_is_locked">mutex_is_locked</a>(&amp;rtnl_mutex);
 <a name=L92 href="source/net/core/rtnetlink.c#L92">92</a> }
 <a name=L93 href="source/net/core/rtnetlink.c#L93">93</a> <a href="ident?i=EXPORT_SYMBOL">EXPORT_SYMBOL</a>(<a href="ident?i=rtnl_is_locked">rtnl_is_locked</a>);
 <a name=L94 href="source/net/core/rtnetlink.c#L94">94</a> 
 <a name=L95 href="source/net/core/rtnetlink.c#L95">95</a> #ifdef CONFIG_PROVE_LOCKING
 <a name=L96 href="source/net/core/rtnetlink.c#L96">96</a> int <a href="ident?i=lockdep_rtnl_is_held">lockdep_rtnl_is_held</a>(void)
 <a name=L97 href="source/net/core/rtnetlink.c#L97">97</a> {
 <a name=L98 href="source/net/core/rtnetlink.c#L98">98</a>         return <a href="ident?i=lockdep_is_held">lockdep_is_held</a>(&amp;rtnl_mutex);
 <a name=L99 href="source/net/core/rtnetlink.c#L99">99</a> }
<a name=L100 href="source/net/core/rtnetlink.c#L100">100</a> <a href="ident?i=EXPORT_SYMBOL">EXPORT_SYMBOL</a>(<a href="ident?i=lockdep_rtnl_is_held">lockdep_rtnl_is_held</a>);
<a name=L101 href="source/net/core/rtnetlink.c#L101">101</a> #endif <b><i>/* #ifdef CONFIG_PROVE_LOCKING */</i></b>
<a name=L102 href="source/net/core/rtnetlink.c#L102">102</a> 
<a name=L103 href="source/net/core/rtnetlink.c#L103">103</a> static struct <a href="ident?i=rtnl_link">rtnl_link</a> *<a href="ident?i=rtnl_msg_handlers">rtnl_msg_handlers</a>[<a href="ident?i=RTNL_FAMILY_MAX">RTNL_FAMILY_MAX</a> + 1];
<a name=L104 href="source/net/core/rtnetlink.c#L104">104</a> 
<a name=L105 href="source/net/core/rtnetlink.c#L105">105</a> static inline int <a href="ident?i=rtm_msgindex">rtm_msgindex</a>(int msgtype)
<a name=L106 href="source/net/core/rtnetlink.c#L106">106</a> {
<a name=L107 href="source/net/core/rtnetlink.c#L107">107</a>         int msgindex = msgtype - <a href="ident?i=RTM_BASE">RTM_BASE</a>;
<a name=L108 href="source/net/core/rtnetlink.c#L108">108</a> 
<a name=L109 href="source/net/core/rtnetlink.c#L109">109</a>         <b><i>/*</i></b>
<a name=L110 href="source/net/core/rtnetlink.c#L110">110</a> <b><i>         * msgindex &lt; 0 implies someone tried to register a netlink</i></b>
<a name=L111 href="source/net/core/rtnetlink.c#L111">111</a> <b><i>         * control code. msgindex &gt;= RTM_NR_MSGTYPES may indicate that</i></b>
<a name=L112 href="source/net/core/rtnetlink.c#L112">112</a> <b><i>         * the message type has not been added to linux/rtnetlink.h</i></b>
<a name=L113 href="source/net/core/rtnetlink.c#L113">113</a> <b><i>         */</i></b>
<a name=L114 href="source/net/core/rtnetlink.c#L114">114</a>         <a href="ident?i=BUG_ON">BUG_ON</a>(msgindex &lt; 0 || msgindex &gt;= <a href="ident?i=RTM_NR_MSGTYPES">RTM_NR_MSGTYPES</a>);
<a name=L115 href="source/net/core/rtnetlink.c#L115">115</a> 
<a name=L116 href="source/net/core/rtnetlink.c#L116">116</a>         return msgindex;
<a name=L117 href="source/net/core/rtnetlink.c#L117">117</a> }
<a name=L118 href="source/net/core/rtnetlink.c#L118">118</a> 
<a name=L119 href="source/net/core/rtnetlink.c#L119">119</a> static <a href="ident?i=rtnl_doit_func">rtnl_doit_func</a> <a href="ident?i=rtnl_get_doit">rtnl_get_doit</a>(int <a href="ident?i=protocol">protocol</a>, int msgindex)
<a name=L120 href="source/net/core/rtnetlink.c#L120">120</a> {
<a name=L121 href="source/net/core/rtnetlink.c#L121">121</a>         struct <a href="ident?i=rtnl_link">rtnl_link</a> *<a href="ident?i=tab">tab</a>;
<a name=L122 href="source/net/core/rtnetlink.c#L122">122</a> 
<a name=L123 href="source/net/core/rtnetlink.c#L123">123</a>         if (<a href="ident?i=protocol">protocol</a> &lt;= <a href="ident?i=RTNL_FAMILY_MAX">RTNL_FAMILY_MAX</a>)
<a name=L124 href="source/net/core/rtnetlink.c#L124">124</a>                 <a href="ident?i=tab">tab</a> = <a href="ident?i=rtnl_msg_handlers">rtnl_msg_handlers</a>[<a href="ident?i=protocol">protocol</a>];
<a name=L125 href="source/net/core/rtnetlink.c#L125">125</a>         else
<a name=L126 href="source/net/core/rtnetlink.c#L126">126</a>                 <a href="ident?i=tab">tab</a> = <a href="ident?i=NULL">NULL</a>;
<a name=L127 href="source/net/core/rtnetlink.c#L127">127</a> 
<a name=L128 href="source/net/core/rtnetlink.c#L128">128</a>         if (<a href="ident?i=tab">tab</a> == <a href="ident?i=NULL">NULL</a> || <a href="ident?i=tab">tab</a>[msgindex].doit == <a href="ident?i=NULL">NULL</a>)
<a name=L129 href="source/net/core/rtnetlink.c#L129">129</a>                 <a href="ident?i=tab">tab</a> = <a href="ident?i=rtnl_msg_handlers">rtnl_msg_handlers</a>[<a href="ident?i=PF_UNSPEC">PF_UNSPEC</a>];
<a name=L130 href="source/net/core/rtnetlink.c#L130">130</a> 
<a name=L131 href="source/net/core/rtnetlink.c#L131">131</a>         return <a href="ident?i=tab">tab</a> ? <a href="ident?i=tab">tab</a>[msgindex].doit : <a href="ident?i=NULL">NULL</a>;
<a name=L132 href="source/net/core/rtnetlink.c#L132">132</a> }
<a name=L133 href="source/net/core/rtnetlink.c#L133">133</a> 
<a name=L134 href="source/net/core/rtnetlink.c#L134">134</a> static <a href="ident?i=rtnl_dumpit_func">rtnl_dumpit_func</a> <a href="ident?i=rtnl_get_dumpit">rtnl_get_dumpit</a>(int <a href="ident?i=protocol">protocol</a>, int msgindex)
<a name=L135 href="source/net/core/rtnetlink.c#L135">135</a> {
<a name=L136 href="source/net/core/rtnetlink.c#L136">136</a>         struct <a href="ident?i=rtnl_link">rtnl_link</a> *<a href="ident?i=tab">tab</a>;
<a name=L137 href="source/net/core/rtnetlink.c#L137">137</a> 
<a name=L138 href="source/net/core/rtnetlink.c#L138">138</a>         if (<a href="ident?i=protocol">protocol</a> &lt;= <a href="ident?i=RTNL_FAMILY_MAX">RTNL_FAMILY_MAX</a>)
<a name=L139 href="source/net/core/rtnetlink.c#L139">139</a>                 <a href="ident?i=tab">tab</a> = <a href="ident?i=rtnl_msg_handlers">rtnl_msg_handlers</a>[<a href="ident?i=protocol">protocol</a>];
<a name=L140 href="source/net/core/rtnetlink.c#L140">140</a>         else
<a name=L141 href="source/net/core/rtnetlink.c#L141">141</a>                 <a href="ident?i=tab">tab</a> = <a href="ident?i=NULL">NULL</a>;
<a name=L142 href="source/net/core/rtnetlink.c#L142">142</a> 
<a name=L143 href="source/net/core/rtnetlink.c#L143">143</a>         if (<a href="ident?i=tab">tab</a> == <a href="ident?i=NULL">NULL</a> || <a href="ident?i=tab">tab</a>[msgindex].dumpit == <a href="ident?i=NULL">NULL</a>)
<a name=L144 href="source/net/core/rtnetlink.c#L144">144</a>                 <a href="ident?i=tab">tab</a> = <a href="ident?i=rtnl_msg_handlers">rtnl_msg_handlers</a>[<a href="ident?i=PF_UNSPEC">PF_UNSPEC</a>];
<a name=L145 href="source/net/core/rtnetlink.c#L145">145</a> 
<a name=L146 href="source/net/core/rtnetlink.c#L146">146</a>         return <a href="ident?i=tab">tab</a> ? <a href="ident?i=tab">tab</a>[msgindex].dumpit : <a href="ident?i=NULL">NULL</a>;
<a name=L147 href="source/net/core/rtnetlink.c#L147">147</a> }
<a name=L148 href="source/net/core/rtnetlink.c#L148">148</a> 
<a name=L149 href="source/net/core/rtnetlink.c#L149">149</a> static <a href="ident?i=rtnl_calcit_func">rtnl_calcit_func</a> <a href="ident?i=rtnl_get_calcit">rtnl_get_calcit</a>(int <a href="ident?i=protocol">protocol</a>, int msgindex)
<a name=L150 href="source/net/core/rtnetlink.c#L150">150</a> {
<a name=L151 href="source/net/core/rtnetlink.c#L151">151</a>         struct <a href="ident?i=rtnl_link">rtnl_link</a> *<a href="ident?i=tab">tab</a>;
<a name=L152 href="source/net/core/rtnetlink.c#L152">152</a> 
<a name=L153 href="source/net/core/rtnetlink.c#L153">153</a>         if (<a href="ident?i=protocol">protocol</a> &lt;= <a href="ident?i=RTNL_FAMILY_MAX">RTNL_FAMILY_MAX</a>)
<a name=L154 href="source/net/core/rtnetlink.c#L154">154</a>                 <a href="ident?i=tab">tab</a> = <a href="ident?i=rtnl_msg_handlers">rtnl_msg_handlers</a>[<a href="ident?i=protocol">protocol</a>];
<a name=L155 href="source/net/core/rtnetlink.c#L155">155</a>         else
<a name=L156 href="source/net/core/rtnetlink.c#L156">156</a>                 <a href="ident?i=tab">tab</a> = <a href="ident?i=NULL">NULL</a>;
<a name=L157 href="source/net/core/rtnetlink.c#L157">157</a> 
<a name=L158 href="source/net/core/rtnetlink.c#L158">158</a>         if (<a href="ident?i=tab">tab</a> == <a href="ident?i=NULL">NULL</a> || <a href="ident?i=tab">tab</a>[msgindex].calcit == <a href="ident?i=NULL">NULL</a>)
<a name=L159 href="source/net/core/rtnetlink.c#L159">159</a>                 <a href="ident?i=tab">tab</a> = <a href="ident?i=rtnl_msg_handlers">rtnl_msg_handlers</a>[<a href="ident?i=PF_UNSPEC">PF_UNSPEC</a>];
<a name=L160 href="source/net/core/rtnetlink.c#L160">160</a> 
<a name=L161 href="source/net/core/rtnetlink.c#L161">161</a>         return <a href="ident?i=tab">tab</a> ? <a href="ident?i=tab">tab</a>[msgindex].calcit : <a href="ident?i=NULL">NULL</a>;
<a name=L162 href="source/net/core/rtnetlink.c#L162">162</a> }
<a name=L163 href="source/net/core/rtnetlink.c#L163">163</a> 
<a name=L164 href="source/net/core/rtnetlink.c#L164">164</a> <b><i>/**</i></b>
<a name=L165 href="source/net/core/rtnetlink.c#L165">165</a> <b><i> * __rtnl_register - Register a rtnetlink message type</i></b>
<a name=L166 href="source/net/core/rtnetlink.c#L166">166</a> <b><i> * @protocol: Protocol family or PF_UNSPEC</i></b>
<a name=L167 href="source/net/core/rtnetlink.c#L167">167</a> <b><i> * @msgtype: rtnetlink message type</i></b>
<a name=L168 href="source/net/core/rtnetlink.c#L168">168</a> <b><i> * @doit: Function pointer called for each request message</i></b>
<a name=L169 href="source/net/core/rtnetlink.c#L169">169</a> <b><i> * @dumpit: Function pointer called for each dump request (NLM_F_DUMP) message</i></b>
<a name=L170 href="source/net/core/rtnetlink.c#L170">170</a> <b><i> * @calcit: Function pointer to calc size of dump message</i></b>
<a name=L171 href="source/net/core/rtnetlink.c#L171">171</a> <b><i> *</i></b>
<a name=L172 href="source/net/core/rtnetlink.c#L172">172</a> <b><i> * Registers the specified function pointers (at least one of them has</i></b>
<a name=L173 href="source/net/core/rtnetlink.c#L173">173</a> <b><i> * to be non-NULL) to be called whenever a request message for the</i></b>
<a name=L174 href="source/net/core/rtnetlink.c#L174">174</a> <b><i> * specified protocol family and message type is received.</i></b>
<a name=L175 href="source/net/core/rtnetlink.c#L175">175</a> <b><i> *</i></b>
<a name=L176 href="source/net/core/rtnetlink.c#L176">176</a> <b><i> * The special protocol family PF_UNSPEC may be used to define fallback</i></b>
<a name=L177 href="source/net/core/rtnetlink.c#L177">177</a> <b><i> * function pointers for the case when no entry for the specific protocol</i></b>
<a name=L178 href="source/net/core/rtnetlink.c#L178">178</a> <b><i> * family exists.</i></b>
<a name=L179 href="source/net/core/rtnetlink.c#L179">179</a> <b><i> *</i></b>
<a name=L180 href="source/net/core/rtnetlink.c#L180">180</a> <b><i> * Returns 0 on success or a negative error code.</i></b>
<a name=L181 href="source/net/core/rtnetlink.c#L181">181</a> <b><i> */</i></b>
<a name=L182 href="source/net/core/rtnetlink.c#L182">182</a> int <a href="ident?i=__rtnl_register">__rtnl_register</a>(int <a href="ident?i=protocol">protocol</a>, int msgtype,
<a name=L183 href="source/net/core/rtnetlink.c#L183">183</a>                     <a href="ident?i=rtnl_doit_func">rtnl_doit_func</a> doit, <a href="ident?i=rtnl_dumpit_func">rtnl_dumpit_func</a> dumpit,
<a name=L184 href="source/net/core/rtnetlink.c#L184">184</a>                     <a href="ident?i=rtnl_calcit_func">rtnl_calcit_func</a> calcit)
<a name=L185 href="source/net/core/rtnetlink.c#L185">185</a> {
<a name=L186 href="source/net/core/rtnetlink.c#L186">186</a>         struct <a href="ident?i=rtnl_link">rtnl_link</a> *<a href="ident?i=tab">tab</a>;
<a name=L187 href="source/net/core/rtnetlink.c#L187">187</a>         int msgindex;
<a name=L188 href="source/net/core/rtnetlink.c#L188">188</a> 
<a name=L189 href="source/net/core/rtnetlink.c#L189">189</a>         <a href="ident?i=BUG_ON">BUG_ON</a>(<a href="ident?i=protocol">protocol</a> &lt; 0 || <a href="ident?i=protocol">protocol</a> &gt; <a href="ident?i=RTNL_FAMILY_MAX">RTNL_FAMILY_MAX</a>);
<a name=L190 href="source/net/core/rtnetlink.c#L190">190</a>         msgindex = <a href="ident?i=rtm_msgindex">rtm_msgindex</a>(msgtype);
<a name=L191 href="source/net/core/rtnetlink.c#L191">191</a> 
<a name=L192 href="source/net/core/rtnetlink.c#L192">192</a>         <a href="ident?i=tab">tab</a> = <a href="ident?i=rtnl_msg_handlers">rtnl_msg_handlers</a>[<a href="ident?i=protocol">protocol</a>];
<a name=L193 href="source/net/core/rtnetlink.c#L193">193</a>         if (<a href="ident?i=tab">tab</a> == <a href="ident?i=NULL">NULL</a>) {
<a name=L194 href="source/net/core/rtnetlink.c#L194">194</a>                 <a href="ident?i=tab">tab</a> = <a href="ident?i=kcalloc">kcalloc</a>(<a href="ident?i=RTM_NR_MSGTYPES">RTM_NR_MSGTYPES</a>, sizeof(*<a href="ident?i=tab">tab</a>), <a href="ident?i=GFP_KERNEL">GFP_KERNEL</a>);
<a name=L195 href="source/net/core/rtnetlink.c#L195">195</a>                 if (<a href="ident?i=tab">tab</a> == <a href="ident?i=NULL">NULL</a>)
<a name=L196 href="source/net/core/rtnetlink.c#L196">196</a>                         return -<a href="ident?i=ENOBUFS">ENOBUFS</a>;
<a name=L197 href="source/net/core/rtnetlink.c#L197">197</a> 
<a name=L198 href="source/net/core/rtnetlink.c#L198">198</a>                 <a href="ident?i=rtnl_msg_handlers">rtnl_msg_handlers</a>[<a href="ident?i=protocol">protocol</a>] = <a href="ident?i=tab">tab</a>;
<a name=L199 href="source/net/core/rtnetlink.c#L199">199</a>         }
<a name=L200 href="source/net/core/rtnetlink.c#L200">200</a> 
<a name=L201 href="source/net/core/rtnetlink.c#L201">201</a>         if (doit)
<a name=L202 href="source/net/core/rtnetlink.c#L202">202</a>                 <a href="ident?i=tab">tab</a>[msgindex].doit = doit;
<a name=L203 href="source/net/core/rtnetlink.c#L203">203</a> 
<a name=L204 href="source/net/core/rtnetlink.c#L204">204</a>         if (dumpit)
<a name=L205 href="source/net/core/rtnetlink.c#L205">205</a>                 <a href="ident?i=tab">tab</a>[msgindex].dumpit = dumpit;
<a name=L206 href="source/net/core/rtnetlink.c#L206">206</a> 
<a name=L207 href="source/net/core/rtnetlink.c#L207">207</a>         if (calcit)
<a name=L208 href="source/net/core/rtnetlink.c#L208">208</a>                 <a href="ident?i=tab">tab</a>[msgindex].calcit = calcit;
<a name=L209 href="source/net/core/rtnetlink.c#L209">209</a> 
<a name=L210 href="source/net/core/rtnetlink.c#L210">210</a>         return 0;
<a name=L211 href="source/net/core/rtnetlink.c#L211">211</a> }
<a name=L212 href="source/net/core/rtnetlink.c#L212">212</a> <a href="ident?i=EXPORT_SYMBOL_GPL">EXPORT_SYMBOL_GPL</a>(<a href="ident?i=__rtnl_register">__rtnl_register</a>);
<a name=L213 href="source/net/core/rtnetlink.c#L213">213</a> 
<a name=L214 href="source/net/core/rtnetlink.c#L214">214</a> <b><i>/**</i></b>
<a name=L215 href="source/net/core/rtnetlink.c#L215">215</a> <b><i> * rtnl_register - Register a rtnetlink message type</i></b>
<a name=L216 href="source/net/core/rtnetlink.c#L216">216</a> <b><i> *</i></b>
<a name=L217 href="source/net/core/rtnetlink.c#L217">217</a> <b><i> * Identical to __rtnl_register() but panics on failure. This is useful</i></b>
<a name=L218 href="source/net/core/rtnetlink.c#L218">218</a> <b><i> * as failure of this function is very unlikely, it can only happen due</i></b>
<a name=L219 href="source/net/core/rtnetlink.c#L219">219</a> <b><i> * to lack of memory when allocating the chain to store all message</i></b>
<a name=L220 href="source/net/core/rtnetlink.c#L220">220</a> <b><i> * handlers for a protocol. Meant for use in init functions where lack</i></b>
<a name=L221 href="source/net/core/rtnetlink.c#L221">221</a> <b><i> * of memory implies no sense in continuing.</i></b>
<a name=L222 href="source/net/core/rtnetlink.c#L222">222</a> <b><i> */</i></b>
<a name=L223 href="source/net/core/rtnetlink.c#L223">223</a> void <a href="ident?i=rtnl_register">rtnl_register</a>(int <a href="ident?i=protocol">protocol</a>, int msgtype,
<a name=L224 href="source/net/core/rtnetlink.c#L224">224</a>                    <a href="ident?i=rtnl_doit_func">rtnl_doit_func</a> doit, <a href="ident?i=rtnl_dumpit_func">rtnl_dumpit_func</a> dumpit,
<a name=L225 href="source/net/core/rtnetlink.c#L225">225</a>                    <a href="ident?i=rtnl_calcit_func">rtnl_calcit_func</a> calcit)
<a name=L226 href="source/net/core/rtnetlink.c#L226">226</a> {
<a name=L227 href="source/net/core/rtnetlink.c#L227">227</a>         if (<a href="ident?i=__rtnl_register">__rtnl_register</a>(<a href="ident?i=protocol">protocol</a>, msgtype, doit, dumpit, calcit) &lt; 0)
<a name=L228 href="source/net/core/rtnetlink.c#L228">228</a>                 <a href="ident?i=panic">panic</a>(<i>"Unable to register rtnetlink message handler, "</i>
<a name=L229 href="source/net/core/rtnetlink.c#L229">229</a>                       <i>"protocol = %d, message type = %d\n"</i>,
<a name=L230 href="source/net/core/rtnetlink.c#L230">230</a>                       <a href="ident?i=protocol">protocol</a>, msgtype);
<a name=L231 href="source/net/core/rtnetlink.c#L231">231</a> }
<a name=L232 href="source/net/core/rtnetlink.c#L232">232</a> <a href="ident?i=EXPORT_SYMBOL_GPL">EXPORT_SYMBOL_GPL</a>(<a href="ident?i=rtnl_register">rtnl_register</a>);
<a name=L233 href="source/net/core/rtnetlink.c#L233">233</a> 
<a name=L234 href="source/net/core/rtnetlink.c#L234">234</a> <b><i>/**</i></b>
<a name=L235 href="source/net/core/rtnetlink.c#L235">235</a> <b><i> * rtnl_unregister - Unregister a rtnetlink message type</i></b>
<a name=L236 href="source/net/core/rtnetlink.c#L236">236</a> <b><i> * @protocol: Protocol family or PF_UNSPEC</i></b>
<a name=L237 href="source/net/core/rtnetlink.c#L237">237</a> <b><i> * @msgtype: rtnetlink message type</i></b>
<a name=L238 href="source/net/core/rtnetlink.c#L238">238</a> <b><i> *</i></b>
<a name=L239 href="source/net/core/rtnetlink.c#L239">239</a> <b><i> * Returns 0 on success or a negative error code.</i></b>
<a name=L240 href="source/net/core/rtnetlink.c#L240">240</a> <b><i> */</i></b>
<a name=L241 href="source/net/core/rtnetlink.c#L241">241</a> int <a href="ident?i=rtnl_unregister">rtnl_unregister</a>(int <a href="ident?i=protocol">protocol</a>, int msgtype)
<a name=L242 href="source/net/core/rtnetlink.c#L242">242</a> {
<a name=L243 href="source/net/core/rtnetlink.c#L243">243</a>         int msgindex;
<a name=L244 href="source/net/core/rtnetlink.c#L244">244</a> 
<a name=L245 href="source/net/core/rtnetlink.c#L245">245</a>         <a href="ident?i=BUG_ON">BUG_ON</a>(<a href="ident?i=protocol">protocol</a> &lt; 0 || <a href="ident?i=protocol">protocol</a> &gt; <a href="ident?i=RTNL_FAMILY_MAX">RTNL_FAMILY_MAX</a>);
<a name=L246 href="source/net/core/rtnetlink.c#L246">246</a>         msgindex = <a href="ident?i=rtm_msgindex">rtm_msgindex</a>(msgtype);
<a name=L247 href="source/net/core/rtnetlink.c#L247">247</a> 
<a name=L248 href="source/net/core/rtnetlink.c#L248">248</a>         if (<a href="ident?i=rtnl_msg_handlers">rtnl_msg_handlers</a>[<a href="ident?i=protocol">protocol</a>] == <a href="ident?i=NULL">NULL</a>)
<a name=L249 href="source/net/core/rtnetlink.c#L249">249</a>                 return -<a href="ident?i=ENOENT">ENOENT</a>;
<a name=L250 href="source/net/core/rtnetlink.c#L250">250</a> 
<a name=L251 href="source/net/core/rtnetlink.c#L251">251</a>         <a href="ident?i=rtnl_msg_handlers">rtnl_msg_handlers</a>[<a href="ident?i=protocol">protocol</a>][msgindex].doit = <a href="ident?i=NULL">NULL</a>;
<a name=L252 href="source/net/core/rtnetlink.c#L252">252</a>         <a href="ident?i=rtnl_msg_handlers">rtnl_msg_handlers</a>[<a href="ident?i=protocol">protocol</a>][msgindex].dumpit = <a href="ident?i=NULL">NULL</a>;
<a name=L253 href="source/net/core/rtnetlink.c#L253">253</a> 
<a name=L254 href="source/net/core/rtnetlink.c#L254">254</a>         return 0;
<a name=L255 href="source/net/core/rtnetlink.c#L255">255</a> }
<a name=L256 href="source/net/core/rtnetlink.c#L256">256</a> <a href="ident?i=EXPORT_SYMBOL_GPL">EXPORT_SYMBOL_GPL</a>(<a href="ident?i=rtnl_unregister">rtnl_unregister</a>);
<a name=L257 href="source/net/core/rtnetlink.c#L257">257</a> 
<a name=L258 href="source/net/core/rtnetlink.c#L258">258</a> <b><i>/**</i></b>
<a name=L259 href="source/net/core/rtnetlink.c#L259">259</a> <b><i> * rtnl_unregister_all - Unregister all rtnetlink message type of a protocol</i></b>
<a name=L260 href="source/net/core/rtnetlink.c#L260">260</a> <b><i> * @protocol : Protocol family or PF_UNSPEC</i></b>
<a name=L261 href="source/net/core/rtnetlink.c#L261">261</a> <b><i> *</i></b>
<a name=L262 href="source/net/core/rtnetlink.c#L262">262</a> <b><i> * Identical to calling rtnl_unregster() for all registered message types</i></b>
<a name=L263 href="source/net/core/rtnetlink.c#L263">263</a> <b><i> * of a certain protocol family.</i></b>
<a name=L264 href="source/net/core/rtnetlink.c#L264">264</a> <b><i> */</i></b>
<a name=L265 href="source/net/core/rtnetlink.c#L265">265</a> void <a href="ident?i=rtnl_unregister_all">rtnl_unregister_all</a>(int <a href="ident?i=protocol">protocol</a>)
<a name=L266 href="source/net/core/rtnetlink.c#L266">266</a> {
<a name=L267 href="source/net/core/rtnetlink.c#L267">267</a>         <a href="ident?i=BUG_ON">BUG_ON</a>(<a href="ident?i=protocol">protocol</a> &lt; 0 || <a href="ident?i=protocol">protocol</a> &gt; <a href="ident?i=RTNL_FAMILY_MAX">RTNL_FAMILY_MAX</a>);
<a name=L268 href="source/net/core/rtnetlink.c#L268">268</a> 
<a name=L269 href="source/net/core/rtnetlink.c#L269">269</a>         <a href="ident?i=kfree">kfree</a>(<a href="ident?i=rtnl_msg_handlers">rtnl_msg_handlers</a>[<a href="ident?i=protocol">protocol</a>]);
<a name=L270 href="source/net/core/rtnetlink.c#L270">270</a>         <a href="ident?i=rtnl_msg_handlers">rtnl_msg_handlers</a>[<a href="ident?i=protocol">protocol</a>] = <a href="ident?i=NULL">NULL</a>;
<a name=L271 href="source/net/core/rtnetlink.c#L271">271</a> }
<a name=L272 href="source/net/core/rtnetlink.c#L272">272</a> <a href="ident?i=EXPORT_SYMBOL_GPL">EXPORT_SYMBOL_GPL</a>(<a href="ident?i=rtnl_unregister_all">rtnl_unregister_all</a>);
<a name=L273 href="source/net/core/rtnetlink.c#L273">273</a> 
<a name=L274 href="source/net/core/rtnetlink.c#L274">274</a> static <a href="ident?i=LIST_HEAD">LIST_HEAD</a>(link_ops);
<a name=L275 href="source/net/core/rtnetlink.c#L275">275</a> 
<a name=L276 href="source/net/core/rtnetlink.c#L276">276</a> <b><i>/**</i></b>
<a name=L277 href="source/net/core/rtnetlink.c#L277">277</a> <b><i> * __rtnl_link_register - Register rtnl_link_ops with rtnetlink.</i></b>
<a name=L278 href="source/net/core/rtnetlink.c#L278">278</a> <b><i> * @ops: struct rtnl_link_ops * to register</i></b>
<a name=L279 href="source/net/core/rtnetlink.c#L279">279</a> <b><i> *</i></b>
<a name=L280 href="source/net/core/rtnetlink.c#L280">280</a> <b><i> * The caller must hold the rtnl_mutex. This function should be used</i></b>
<a name=L281 href="source/net/core/rtnetlink.c#L281">281</a> <b><i> * by drivers that create devices during module initialization. It</i></b>
<a name=L282 href="source/net/core/rtnetlink.c#L282">282</a> <b><i> * must be called before registering the devices.</i></b>
<a name=L283 href="source/net/core/rtnetlink.c#L283">283</a> <b><i> *</i></b>
<a name=L284 href="source/net/core/rtnetlink.c#L284">284</a> <b><i> * Returns 0 on success or a negative error code.</i></b>
<a name=L285 href="source/net/core/rtnetlink.c#L285">285</a> <b><i> */</i></b>
<a name=L286 href="source/net/core/rtnetlink.c#L286">286</a> int <a href="ident?i=__rtnl_link_register">__rtnl_link_register</a>(struct <a href="ident?i=rtnl_link_ops">rtnl_link_ops</a> *<a href="ident?i=ops">ops</a>)
<a name=L287 href="source/net/core/rtnetlink.c#L287">287</a> {
<a name=L288 href="source/net/core/rtnetlink.c#L288">288</a>         if (!<a href="ident?i=ops">ops</a>-&gt;dellink)
<a name=L289 href="source/net/core/rtnetlink.c#L289">289</a>                 <a href="ident?i=ops">ops</a>-&gt;dellink = <a href="ident?i=unregister_netdevice_queue">unregister_netdevice_queue</a>;
<a name=L290 href="source/net/core/rtnetlink.c#L290">290</a> 
<a name=L291 href="source/net/core/rtnetlink.c#L291">291</a>         <a href="ident?i=list_add_tail">list_add_tail</a>(&amp;<a href="ident?i=ops">ops</a>-&gt;<a href="ident?i=list">list</a>, &amp;link_ops);
<a name=L292 href="source/net/core/rtnetlink.c#L292">292</a>         return 0;
<a name=L293 href="source/net/core/rtnetlink.c#L293">293</a> }
<a name=L294 href="source/net/core/rtnetlink.c#L294">294</a> <a href="ident?i=EXPORT_SYMBOL_GPL">EXPORT_SYMBOL_GPL</a>(<a href="ident?i=__rtnl_link_register">__rtnl_link_register</a>);
<a name=L295 href="source/net/core/rtnetlink.c#L295">295</a> 
<a name=L296 href="source/net/core/rtnetlink.c#L296">296</a> <b><i>/**</i></b>
<a name=L297 href="source/net/core/rtnetlink.c#L297">297</a> <b><i> * rtnl_link_register - Register rtnl_link_ops with rtnetlink.</i></b>
<a name=L298 href="source/net/core/rtnetlink.c#L298">298</a> <b><i> * @ops: struct rtnl_link_ops * to register</i></b>
<a name=L299 href="source/net/core/rtnetlink.c#L299">299</a> <b><i> *</i></b>
<a name=L300 href="source/net/core/rtnetlink.c#L300">300</a> <b><i> * Returns 0 on success or a negative error code.</i></b>
<a name=L301 href="source/net/core/rtnetlink.c#L301">301</a> <b><i> */</i></b>
<a name=L302 href="source/net/core/rtnetlink.c#L302">302</a> int <a href="ident?i=rtnl_link_register">rtnl_link_register</a>(struct <a href="ident?i=rtnl_link_ops">rtnl_link_ops</a> *<a href="ident?i=ops">ops</a>)
<a name=L303 href="source/net/core/rtnetlink.c#L303">303</a> {
<a name=L304 href="source/net/core/rtnetlink.c#L304">304</a>         int <a href="ident?i=err">err</a>;
<a name=L305 href="source/net/core/rtnetlink.c#L305">305</a> 
<a name=L306 href="source/net/core/rtnetlink.c#L306">306</a>         <a href="ident?i=rtnl_lock">rtnl_lock</a>();
<a name=L307 href="source/net/core/rtnetlink.c#L307">307</a>         <a href="ident?i=err">err</a> = <a href="ident?i=__rtnl_link_register">__rtnl_link_register</a>(<a href="ident?i=ops">ops</a>);
<a name=L308 href="source/net/core/rtnetlink.c#L308">308</a>         <a href="ident?i=rtnl_unlock">rtnl_unlock</a>();
<a name=L309 href="source/net/core/rtnetlink.c#L309">309</a>         return <a href="ident?i=err">err</a>;
<a name=L310 href="source/net/core/rtnetlink.c#L310">310</a> }
<a name=L311 href="source/net/core/rtnetlink.c#L311">311</a> <a href="ident?i=EXPORT_SYMBOL_GPL">EXPORT_SYMBOL_GPL</a>(<a href="ident?i=rtnl_link_register">rtnl_link_register</a>);
<a name=L312 href="source/net/core/rtnetlink.c#L312">312</a> 
<a name=L313 href="source/net/core/rtnetlink.c#L313">313</a> static void <a href="ident?i=__rtnl_kill_links">__rtnl_kill_links</a>(struct <a href="ident?i=net">net</a> *<a href="ident?i=net">net</a>, struct <a href="ident?i=rtnl_link_ops">rtnl_link_ops</a> *<a href="ident?i=ops">ops</a>)
<a name=L314 href="source/net/core/rtnetlink.c#L314">314</a> {
<a name=L315 href="source/net/core/rtnetlink.c#L315">315</a>         struct <a href="ident?i=net_device">net_device</a> *<a href="ident?i=dev">dev</a>;
<a name=L316 href="source/net/core/rtnetlink.c#L316">316</a>         <a href="ident?i=LIST_HEAD">LIST_HEAD</a>(list_kill);
<a name=L317 href="source/net/core/rtnetlink.c#L317">317</a> 
<a name=L318 href="source/net/core/rtnetlink.c#L318">318</a>         <a href="ident?i=for_each_netdev">for_each_netdev</a>(<a href="ident?i=net">net</a>, <a href="ident?i=dev">dev</a>) {
<a name=L319 href="source/net/core/rtnetlink.c#L319">319</a>                 if (<a href="ident?i=dev">dev</a>-&gt;<a href="ident?i=rtnl_link_ops">rtnl_link_ops</a> == <a href="ident?i=ops">ops</a>)
<a name=L320 href="source/net/core/rtnetlink.c#L320">320</a>                         <a href="ident?i=ops">ops</a>-&gt;dellink(<a href="ident?i=dev">dev</a>, &amp;list_kill);
<a name=L321 href="source/net/core/rtnetlink.c#L321">321</a>         }
<a name=L322 href="source/net/core/rtnetlink.c#L322">322</a>         <a href="ident?i=unregister_netdevice_many">unregister_netdevice_many</a>(&amp;list_kill);
<a name=L323 href="source/net/core/rtnetlink.c#L323">323</a> }
<a name=L324 href="source/net/core/rtnetlink.c#L324">324</a> 
<a name=L325 href="source/net/core/rtnetlink.c#L325">325</a> <b><i>/**</i></b>
<a name=L326 href="source/net/core/rtnetlink.c#L326">326</a> <b><i> * __rtnl_link_unregister - Unregister rtnl_link_ops from rtnetlink.</i></b>
<a name=L327 href="source/net/core/rtnetlink.c#L327">327</a> <b><i> * @ops: struct rtnl_link_ops * to unregister</i></b>
<a name=L328 href="source/net/core/rtnetlink.c#L328">328</a> <b><i> *</i></b>
<a name=L329 href="source/net/core/rtnetlink.c#L329">329</a> <b><i> * The caller must hold the rtnl_mutex.</i></b>
<a name=L330 href="source/net/core/rtnetlink.c#L330">330</a> <b><i> */</i></b>
<a name=L331 href="source/net/core/rtnetlink.c#L331">331</a> void <a href="ident?i=__rtnl_link_unregister">__rtnl_link_unregister</a>(struct <a href="ident?i=rtnl_link_ops">rtnl_link_ops</a> *<a href="ident?i=ops">ops</a>)
<a name=L332 href="source/net/core/rtnetlink.c#L332">332</a> {
<a name=L333 href="source/net/core/rtnetlink.c#L333">333</a>         struct <a href="ident?i=net">net</a> *<a href="ident?i=net">net</a>;
<a name=L334 href="source/net/core/rtnetlink.c#L334">334</a> 
<a name=L335 href="source/net/core/rtnetlink.c#L335">335</a>         <a href="ident?i=for_each_net">for_each_net</a>(<a href="ident?i=net">net</a>) {
<a name=L336 href="source/net/core/rtnetlink.c#L336">336</a>                 <a href="ident?i=__rtnl_kill_links">__rtnl_kill_links</a>(<a href="ident?i=net">net</a>, <a href="ident?i=ops">ops</a>);
<a name=L337 href="source/net/core/rtnetlink.c#L337">337</a>         }
<a name=L338 href="source/net/core/rtnetlink.c#L338">338</a>         <a href="ident?i=list_del">list_del</a>(&amp;<a href="ident?i=ops">ops</a>-&gt;<a href="ident?i=list">list</a>);
<a name=L339 href="source/net/core/rtnetlink.c#L339">339</a> }
<a name=L340 href="source/net/core/rtnetlink.c#L340">340</a> <a href="ident?i=EXPORT_SYMBOL_GPL">EXPORT_SYMBOL_GPL</a>(<a href="ident?i=__rtnl_link_unregister">__rtnl_link_unregister</a>);
<a name=L341 href="source/net/core/rtnetlink.c#L341">341</a> 
<a name=L342 href="source/net/core/rtnetlink.c#L342">342</a> <b><i>/**</i></b>
<a name=L343 href="source/net/core/rtnetlink.c#L343">343</a> <b><i> * rtnl_link_unregister - Unregister rtnl_link_ops from rtnetlink.</i></b>
<a name=L344 href="source/net/core/rtnetlink.c#L344">344</a> <b><i> * @ops: struct rtnl_link_ops * to unregister</i></b>
<a name=L345 href="source/net/core/rtnetlink.c#L345">345</a> <b><i> */</i></b>
<a name=L346 href="source/net/core/rtnetlink.c#L346">346</a> void <a href="ident?i=rtnl_link_unregister">rtnl_link_unregister</a>(struct <a href="ident?i=rtnl_link_ops">rtnl_link_ops</a> *<a href="ident?i=ops">ops</a>)
<a name=L347 href="source/net/core/rtnetlink.c#L347">347</a> {
<a name=L348 href="source/net/core/rtnetlink.c#L348">348</a>         <a href="ident?i=rtnl_lock">rtnl_lock</a>();
<a name=L349 href="source/net/core/rtnetlink.c#L349">349</a>         <a href="ident?i=__rtnl_link_unregister">__rtnl_link_unregister</a>(<a href="ident?i=ops">ops</a>);
<a name=L350 href="source/net/core/rtnetlink.c#L350">350</a>         <a href="ident?i=rtnl_unlock">rtnl_unlock</a>();
<a name=L351 href="source/net/core/rtnetlink.c#L351">351</a> }
<a name=L352 href="source/net/core/rtnetlink.c#L352">352</a> <a href="ident?i=EXPORT_SYMBOL_GPL">EXPORT_SYMBOL_GPL</a>(<a href="ident?i=rtnl_link_unregister">rtnl_link_unregister</a>);
<a name=L353 href="source/net/core/rtnetlink.c#L353">353</a> 
<a name=L354 href="source/net/core/rtnetlink.c#L354">354</a> static const struct <a href="ident?i=rtnl_link_ops">rtnl_link_ops</a> *<a href="ident?i=rtnl_link_ops_get">rtnl_link_ops_get</a>(const char *kind)
<a name=L355 href="source/net/core/rtnetlink.c#L355">355</a> {
<a name=L356 href="source/net/core/rtnetlink.c#L356">356</a>         const struct <a href="ident?i=rtnl_link_ops">rtnl_link_ops</a> *<a href="ident?i=ops">ops</a>;
<a name=L357 href="source/net/core/rtnetlink.c#L357">357</a> 
<a name=L358 href="source/net/core/rtnetlink.c#L358">358</a>         <a href="ident?i=list_for_each_entry">list_for_each_entry</a>(<a href="ident?i=ops">ops</a>, &amp;link_ops, <a href="ident?i=list">list</a>) {
<a name=L359 href="source/net/core/rtnetlink.c#L359">359</a>                 if (!<a href="ident?i=strcmp">strcmp</a>(<a href="ident?i=ops">ops</a>-&gt;kind, kind))
<a name=L360 href="source/net/core/rtnetlink.c#L360">360</a>                         return <a href="ident?i=ops">ops</a>;
<a name=L361 href="source/net/core/rtnetlink.c#L361">361</a>         }
<a name=L362 href="source/net/core/rtnetlink.c#L362">362</a>         return <a href="ident?i=NULL">NULL</a>;
<a name=L363 href="source/net/core/rtnetlink.c#L363">363</a> }
<a name=L364 href="source/net/core/rtnetlink.c#L364">364</a> 
<a name=L365 href="source/net/core/rtnetlink.c#L365">365</a> static <a href="ident?i=size_t">size_t</a> <a href="ident?i=rtnl_link_get_size">rtnl_link_get_size</a>(const struct <a href="ident?i=net_device">net_device</a> *<a href="ident?i=dev">dev</a>)
<a name=L366 href="source/net/core/rtnetlink.c#L366">366</a> {
<a name=L367 href="source/net/core/rtnetlink.c#L367">367</a>         const struct <a href="ident?i=rtnl_link_ops">rtnl_link_ops</a> *<a href="ident?i=ops">ops</a> = <a href="ident?i=dev">dev</a>-&gt;<a href="ident?i=rtnl_link_ops">rtnl_link_ops</a>;
<a name=L368 href="source/net/core/rtnetlink.c#L368">368</a>         <a href="ident?i=size_t">size_t</a> <a href="ident?i=size">size</a>;
<a name=L369 href="source/net/core/rtnetlink.c#L369">369</a> 
<a name=L370 href="source/net/core/rtnetlink.c#L370">370</a>         if (!<a href="ident?i=ops">ops</a>)
<a name=L371 href="source/net/core/rtnetlink.c#L371">371</a>                 return 0;
<a name=L372 href="source/net/core/rtnetlink.c#L372">372</a> 
<a name=L373 href="source/net/core/rtnetlink.c#L373">373</a>         <a href="ident?i=size">size</a> = <a href="ident?i=nla_total_size">nla_total_size</a>(sizeof(struct <a href="ident?i=nlattr">nlattr</a>)) + <b><i>/* IFLA_LINKINFO */</i></b>
<a name=L374 href="source/net/core/rtnetlink.c#L374">374</a>                <a href="ident?i=nla_total_size">nla_total_size</a>(<a href="ident?i=strlen">strlen</a>(<a href="ident?i=ops">ops</a>-&gt;kind) + 1);  <b><i>/* IFLA_INFO_KIND */</i></b>
<a name=L375 href="source/net/core/rtnetlink.c#L375">375</a> 
<a name=L376 href="source/net/core/rtnetlink.c#L376">376</a>         if (<a href="ident?i=ops">ops</a>-&gt;<a href="ident?i=get_size">get_size</a>)
<a name=L377 href="source/net/core/rtnetlink.c#L377">377</a>                 <b><i>/* IFLA_INFO_DATA + nested data */</i></b>
<a name=L378 href="source/net/core/rtnetlink.c#L378">378</a>                 <a href="ident?i=size">size</a> += <a href="ident?i=nla_total_size">nla_total_size</a>(sizeof(struct <a href="ident?i=nlattr">nlattr</a>)) +
<a name=L379 href="source/net/core/rtnetlink.c#L379">379</a>                         <a href="ident?i=ops">ops</a>-&gt;<a href="ident?i=get_size">get_size</a>(<a href="ident?i=dev">dev</a>);
<a name=L380 href="source/net/core/rtnetlink.c#L380">380</a> 
<a name=L381 href="source/net/core/rtnetlink.c#L381">381</a>         if (<a href="ident?i=ops">ops</a>-&gt;get_xstats_size)
<a name=L382 href="source/net/core/rtnetlink.c#L382">382</a>                 <b><i>/* IFLA_INFO_XSTATS */</i></b>
<a name=L383 href="source/net/core/rtnetlink.c#L383">383</a>                 <a href="ident?i=size">size</a> += <a href="ident?i=nla_total_size">nla_total_size</a>(<a href="ident?i=ops">ops</a>-&gt;get_xstats_size(<a href="ident?i=dev">dev</a>));
<a name=L384 href="source/net/core/rtnetlink.c#L384">384</a> 
<a name=L385 href="source/net/core/rtnetlink.c#L385">385</a>         return <a href="ident?i=size">size</a>;
<a name=L386 href="source/net/core/rtnetlink.c#L386">386</a> }
<a name=L387 href="source/net/core/rtnetlink.c#L387">387</a> 
<a name=L388 href="source/net/core/rtnetlink.c#L388">388</a> static <a href="ident?i=LIST_HEAD">LIST_HEAD</a>(<a href="ident?i=rtnl_af_ops">rtnl_af_ops</a>);
<a name=L389 href="source/net/core/rtnetlink.c#L389">389</a> 
<a name=L390 href="source/net/core/rtnetlink.c#L390">390</a> static const struct <a href="ident?i=rtnl_af_ops">rtnl_af_ops</a> *<a href="ident?i=rtnl_af_lookup">rtnl_af_lookup</a>(const int <a href="ident?i=family">family</a>)
<a name=L391 href="source/net/core/rtnetlink.c#L391">391</a> {
<a name=L392 href="source/net/core/rtnetlink.c#L392">392</a>         const struct <a href="ident?i=rtnl_af_ops">rtnl_af_ops</a> *<a href="ident?i=ops">ops</a>;
<a name=L393 href="source/net/core/rtnetlink.c#L393">393</a> 
<a name=L394 href="source/net/core/rtnetlink.c#L394">394</a>         <a href="ident?i=list_for_each_entry">list_for_each_entry</a>(<a href="ident?i=ops">ops</a>, &amp;<a href="ident?i=rtnl_af_ops">rtnl_af_ops</a>, <a href="ident?i=list">list</a>) {
<a name=L395 href="source/net/core/rtnetlink.c#L395">395</a>                 if (<a href="ident?i=ops">ops</a>-&gt;<a href="ident?i=family">family</a> == <a href="ident?i=family">family</a>)
<a name=L396 href="source/net/core/rtnetlink.c#L396">396</a>                         return <a href="ident?i=ops">ops</a>;
<a name=L397 href="source/net/core/rtnetlink.c#L397">397</a>         }
<a name=L398 href="source/net/core/rtnetlink.c#L398">398</a> 
<a name=L399 href="source/net/core/rtnetlink.c#L399">399</a>         return <a href="ident?i=NULL">NULL</a>;
<a name=L400 href="source/net/core/rtnetlink.c#L400">400</a> }
<a name=L401 href="source/net/core/rtnetlink.c#L401">401</a> 
<a name=L402 href="source/net/core/rtnetlink.c#L402">402</a> <b><i>/**</i></b>
<a name=L403 href="source/net/core/rtnetlink.c#L403">403</a> <b><i> * __rtnl_af_register - Register rtnl_af_ops with rtnetlink.</i></b>
<a name=L404 href="source/net/core/rtnetlink.c#L404">404</a> <b><i> * @ops: struct rtnl_af_ops * to register</i></b>
<a name=L405 href="source/net/core/rtnetlink.c#L405">405</a> <b><i> *</i></b>
<a name=L406 href="source/net/core/rtnetlink.c#L406">406</a> <b><i> * The caller must hold the rtnl_mutex.</i></b>
<a name=L407 href="source/net/core/rtnetlink.c#L407">407</a> <b><i> *</i></b>
<a name=L408 href="source/net/core/rtnetlink.c#L408">408</a> <b><i> * Returns 0 on success or a negative error code.</i></b>
<a name=L409 href="source/net/core/rtnetlink.c#L409">409</a> <b><i> */</i></b>
<a name=L410 href="source/net/core/rtnetlink.c#L410">410</a> int <a href="ident?i=__rtnl_af_register">__rtnl_af_register</a>(struct <a href="ident?i=rtnl_af_ops">rtnl_af_ops</a> *<a href="ident?i=ops">ops</a>)
<a name=L411 href="source/net/core/rtnetlink.c#L411">411</a> {
<a name=L412 href="source/net/core/rtnetlink.c#L412">412</a>         <a href="ident?i=list_add_tail">list_add_tail</a>(&amp;<a href="ident?i=ops">ops</a>-&gt;<a href="ident?i=list">list</a>, &amp;<a href="ident?i=rtnl_af_ops">rtnl_af_ops</a>);
<a name=L413 href="source/net/core/rtnetlink.c#L413">413</a>         return 0;
<a name=L414 href="source/net/core/rtnetlink.c#L414">414</a> }
<a name=L415 href="source/net/core/rtnetlink.c#L415">415</a> <a href="ident?i=EXPORT_SYMBOL_GPL">EXPORT_SYMBOL_GPL</a>(<a href="ident?i=__rtnl_af_register">__rtnl_af_register</a>);
<a name=L416 href="source/net/core/rtnetlink.c#L416">416</a> 
<a name=L417 href="source/net/core/rtnetlink.c#L417">417</a> <b><i>/**</i></b>
<a name=L418 href="source/net/core/rtnetlink.c#L418">418</a> <b><i> * rtnl_af_register - Register rtnl_af_ops with rtnetlink.</i></b>
<a name=L419 href="source/net/core/rtnetlink.c#L419">419</a> <b><i> * @ops: struct rtnl_af_ops * to register</i></b>
<a name=L420 href="source/net/core/rtnetlink.c#L420">420</a> <b><i> *</i></b>
<a name=L421 href="source/net/core/rtnetlink.c#L421">421</a> <b><i> * Returns 0 on success or a negative error code.</i></b>
<a name=L422 href="source/net/core/rtnetlink.c#L422">422</a> <b><i> */</i></b>
<a name=L423 href="source/net/core/rtnetlink.c#L423">423</a> int <a href="ident?i=rtnl_af_register">rtnl_af_register</a>(struct <a href="ident?i=rtnl_af_ops">rtnl_af_ops</a> *<a href="ident?i=ops">ops</a>)
<a name=L424 href="source/net/core/rtnetlink.c#L424">424</a> {
<a name=L425 href="source/net/core/rtnetlink.c#L425">425</a>         int <a href="ident?i=err">err</a>;
<a name=L426 href="source/net/core/rtnetlink.c#L426">426</a> 
<a name=L427 href="source/net/core/rtnetlink.c#L427">427</a>         <a href="ident?i=rtnl_lock">rtnl_lock</a>();
<a name=L428 href="source/net/core/rtnetlink.c#L428">428</a>         <a href="ident?i=err">err</a> = <a href="ident?i=__rtnl_af_register">__rtnl_af_register</a>(<a href="ident?i=ops">ops</a>);
<a name=L429 href="source/net/core/rtnetlink.c#L429">429</a>         <a href="ident?i=rtnl_unlock">rtnl_unlock</a>();
<a name=L430 href="source/net/core/rtnetlink.c#L430">430</a>         return <a href="ident?i=err">err</a>;
<a name=L431 href="source/net/core/rtnetlink.c#L431">431</a> }
<a name=L432 href="source/net/core/rtnetlink.c#L432">432</a> <a href="ident?i=EXPORT_SYMBOL_GPL">EXPORT_SYMBOL_GPL</a>(<a href="ident?i=rtnl_af_register">rtnl_af_register</a>);
<a name=L433 href="source/net/core/rtnetlink.c#L433">433</a> 
<a name=L434 href="source/net/core/rtnetlink.c#L434">434</a> <b><i>/**</i></b>
<a name=L435 href="source/net/core/rtnetlink.c#L435">435</a> <b><i> * __rtnl_af_unregister - Unregister rtnl_af_ops from rtnetlink.</i></b>
<a name=L436 href="source/net/core/rtnetlink.c#L436">436</a> <b><i> * @ops: struct rtnl_af_ops * to unregister</i></b>
<a name=L437 href="source/net/core/rtnetlink.c#L437">437</a> <b><i> *</i></b>
<a name=L438 href="source/net/core/rtnetlink.c#L438">438</a> <b><i> * The caller must hold the rtnl_mutex.</i></b>
<a name=L439 href="source/net/core/rtnetlink.c#L439">439</a> <b><i> */</i></b>
<a name=L440 href="source/net/core/rtnetlink.c#L440">440</a> void <a href="ident?i=__rtnl_af_unregister">__rtnl_af_unregister</a>(struct <a href="ident?i=rtnl_af_ops">rtnl_af_ops</a> *<a href="ident?i=ops">ops</a>)
<a name=L441 href="source/net/core/rtnetlink.c#L441">441</a> {
<a name=L442 href="source/net/core/rtnetlink.c#L442">442</a>         <a href="ident?i=list_del">list_del</a>(&amp;<a href="ident?i=ops">ops</a>-&gt;<a href="ident?i=list">list</a>);
<a name=L443 href="source/net/core/rtnetlink.c#L443">443</a> }
<a name=L444 href="source/net/core/rtnetlink.c#L444">444</a> <a href="ident?i=EXPORT_SYMBOL_GPL">EXPORT_SYMBOL_GPL</a>(<a href="ident?i=__rtnl_af_unregister">__rtnl_af_unregister</a>);
<a name=L445 href="source/net/core/rtnetlink.c#L445">445</a> 
<a name=L446 href="source/net/core/rtnetlink.c#L446">446</a> <b><i>/**</i></b>
<a name=L447 href="source/net/core/rtnetlink.c#L447">447</a> <b><i> * rtnl_af_unregister - Unregister rtnl_af_ops from rtnetlink.</i></b>
<a name=L448 href="source/net/core/rtnetlink.c#L448">448</a> <b><i> * @ops: struct rtnl_af_ops * to unregister</i></b>
<a name=L449 href="source/net/core/rtnetlink.c#L449">449</a> <b><i> */</i></b>
<a name=L450 href="source/net/core/rtnetlink.c#L450">450</a> void <a href="ident?i=rtnl_af_unregister">rtnl_af_unregister</a>(struct <a href="ident?i=rtnl_af_ops">rtnl_af_ops</a> *<a href="ident?i=ops">ops</a>)
<a name=L451 href="source/net/core/rtnetlink.c#L451">451</a> {
<a name=L452 href="source/net/core/rtnetlink.c#L452">452</a>         <a href="ident?i=rtnl_lock">rtnl_lock</a>();
<a name=L453 href="source/net/core/rtnetlink.c#L453">453</a>         <a href="ident?i=__rtnl_af_unregister">__rtnl_af_unregister</a>(<a href="ident?i=ops">ops</a>);
<a name=L454 href="source/net/core/rtnetlink.c#L454">454</a>         <a href="ident?i=rtnl_unlock">rtnl_unlock</a>();
<a name=L455 href="source/net/core/rtnetlink.c#L455">455</a> }
<a name=L456 href="source/net/core/rtnetlink.c#L456">456</a> <a href="ident?i=EXPORT_SYMBOL_GPL">EXPORT_SYMBOL_GPL</a>(<a href="ident?i=rtnl_af_unregister">rtnl_af_unregister</a>);
<a name=L457 href="source/net/core/rtnetlink.c#L457">457</a> 
<a name=L458 href="source/net/core/rtnetlink.c#L458">458</a> static <a href="ident?i=size_t">size_t</a> <a href="ident?i=rtnl_link_get_af_size">rtnl_link_get_af_size</a>(const struct <a href="ident?i=net_device">net_device</a> *<a href="ident?i=dev">dev</a>)
<a name=L459 href="source/net/core/rtnetlink.c#L459">459</a> {
<a name=L460 href="source/net/core/rtnetlink.c#L460">460</a>         struct <a href="ident?i=rtnl_af_ops">rtnl_af_ops</a> *af_ops;
<a name=L461 href="source/net/core/rtnetlink.c#L461">461</a>         <a href="ident?i=size_t">size_t</a> <a href="ident?i=size">size</a>;
<a name=L462 href="source/net/core/rtnetlink.c#L462">462</a> 
<a name=L463 href="source/net/core/rtnetlink.c#L463">463</a>         <b><i>/* IFLA_AF_SPEC */</i></b>
<a name=L464 href="source/net/core/rtnetlink.c#L464">464</a>         <a href="ident?i=size">size</a> = <a href="ident?i=nla_total_size">nla_total_size</a>(sizeof(struct <a href="ident?i=nlattr">nlattr</a>));
<a name=L465 href="source/net/core/rtnetlink.c#L465">465</a> 
<a name=L466 href="source/net/core/rtnetlink.c#L466">466</a>         <a href="ident?i=list_for_each_entry">list_for_each_entry</a>(af_ops, &amp;<a href="ident?i=rtnl_af_ops">rtnl_af_ops</a>, <a href="ident?i=list">list</a>) {
<a name=L467 href="source/net/core/rtnetlink.c#L467">467</a>                 if (af_ops-&gt;get_link_af_size) {
<a name=L468 href="source/net/core/rtnetlink.c#L468">468</a>                         <b><i>/* AF_* + nested data */</i></b>
<a name=L469 href="source/net/core/rtnetlink.c#L469">469</a>                         <a href="ident?i=size">size</a> += <a href="ident?i=nla_total_size">nla_total_size</a>(sizeof(struct <a href="ident?i=nlattr">nlattr</a>)) +
<a name=L470 href="source/net/core/rtnetlink.c#L470">470</a>                                 af_ops-&gt;get_link_af_size(<a href="ident?i=dev">dev</a>);
<a name=L471 href="source/net/core/rtnetlink.c#L471">471</a>                 }
<a name=L472 href="source/net/core/rtnetlink.c#L472">472</a>         }
<a name=L473 href="source/net/core/rtnetlink.c#L473">473</a> 
<a name=L474 href="source/net/core/rtnetlink.c#L474">474</a>         return <a href="ident?i=size">size</a>;
<a name=L475 href="source/net/core/rtnetlink.c#L475">475</a> }
<a name=L476 href="source/net/core/rtnetlink.c#L476">476</a> 
<a name=L477 href="source/net/core/rtnetlink.c#L477">477</a> static int <a href="ident?i=rtnl_link_fill">rtnl_link_fill</a>(struct <a href="ident?i=sk_buff">sk_buff</a> *<a href="ident?i=skb">skb</a>, const struct <a href="ident?i=net_device">net_device</a> *<a href="ident?i=dev">dev</a>)
<a name=L478 href="source/net/core/rtnetlink.c#L478">478</a> {
<a name=L479 href="source/net/core/rtnetlink.c#L479">479</a>         const struct <a href="ident?i=rtnl_link_ops">rtnl_link_ops</a> *<a href="ident?i=ops">ops</a> = <a href="ident?i=dev">dev</a>-&gt;<a href="ident?i=rtnl_link_ops">rtnl_link_ops</a>;
<a name=L480 href="source/net/core/rtnetlink.c#L480">480</a>         struct <a href="ident?i=nlattr">nlattr</a> *linkinfo, *<a href="ident?i=data">data</a>;
<a name=L481 href="source/net/core/rtnetlink.c#L481">481</a>         int <a href="ident?i=err">err</a> = -<a href="ident?i=EMSGSIZE">EMSGSIZE</a>;
<a name=L482 href="source/net/core/rtnetlink.c#L482">482</a> 
<a name=L483 href="source/net/core/rtnetlink.c#L483">483</a>         linkinfo = <a href="ident?i=nla_nest_start">nla_nest_start</a>(<a href="ident?i=skb">skb</a>, <a href="ident?i=IFLA_LINKINFO">IFLA_LINKINFO</a>);
<a name=L484 href="source/net/core/rtnetlink.c#L484">484</a>         if (linkinfo == <a href="ident?i=NULL">NULL</a>)
<a name=L485 href="source/net/core/rtnetlink.c#L485">485</a>                 goto <a href="ident?i=out">out</a>;
<a name=L486 href="source/net/core/rtnetlink.c#L486">486</a> 
<a name=L487 href="source/net/core/rtnetlink.c#L487">487</a>         if (<a href="ident?i=nla_put_string">nla_put_string</a>(<a href="ident?i=skb">skb</a>, IFLA_INFO_KIND, <a href="ident?i=ops">ops</a>-&gt;kind) &lt; 0)
<a name=L488 href="source/net/core/rtnetlink.c#L488">488</a>                 goto err_cancel_link;
<a name=L489 href="source/net/core/rtnetlink.c#L489">489</a>         if (<a href="ident?i=ops">ops</a>-&gt;fill_xstats) {
<a name=L490 href="source/net/core/rtnetlink.c#L490">490</a>                 <a href="ident?i=err">err</a> = <a href="ident?i=ops">ops</a>-&gt;fill_xstats(<a href="ident?i=skb">skb</a>, <a href="ident?i=dev">dev</a>);
<a name=L491 href="source/net/core/rtnetlink.c#L491">491</a>                 if (<a href="ident?i=err">err</a> &lt; 0)
<a name=L492 href="source/net/core/rtnetlink.c#L492">492</a>                         goto err_cancel_link;
<a name=L493 href="source/net/core/rtnetlink.c#L493">493</a>         }
<a name=L494 href="source/net/core/rtnetlink.c#L494">494</a>         if (<a href="ident?i=ops">ops</a>-&gt;fill_info) {
<a name=L495 href="source/net/core/rtnetlink.c#L495">495</a>                 <a href="ident?i=data">data</a> = <a href="ident?i=nla_nest_start">nla_nest_start</a>(<a href="ident?i=skb">skb</a>, IFLA_INFO_DATA);
<a name=L496 href="source/net/core/rtnetlink.c#L496">496</a>                 if (<a href="ident?i=data">data</a> == <a href="ident?i=NULL">NULL</a>)
<a name=L497 href="source/net/core/rtnetlink.c#L497">497</a>                         goto err_cancel_link;
<a name=L498 href="source/net/core/rtnetlink.c#L498">498</a>                 <a href="ident?i=err">err</a> = <a href="ident?i=ops">ops</a>-&gt;fill_info(<a href="ident?i=skb">skb</a>, <a href="ident?i=dev">dev</a>);
<a name=L499 href="source/net/core/rtnetlink.c#L499">499</a>                 if (<a href="ident?i=err">err</a> &lt; 0)
<a name=L500 href="source/net/core/rtnetlink.c#L500">500</a>                         goto err_cancel_data;
<a name=L501 href="source/net/core/rtnetlink.c#L501">501</a>                 <a href="ident?i=nla_nest_end">nla_nest_end</a>(<a href="ident?i=skb">skb</a>, <a href="ident?i=data">data</a>);
<a name=L502 href="source/net/core/rtnetlink.c#L502">502</a>         }
<a name=L503 href="source/net/core/rtnetlink.c#L503">503</a> 
<a name=L504 href="source/net/core/rtnetlink.c#L504">504</a>         <a href="ident?i=nla_nest_end">nla_nest_end</a>(<a href="ident?i=skb">skb</a>, linkinfo);
<a name=L505 href="source/net/core/rtnetlink.c#L505">505</a>         return 0;
<a name=L506 href="source/net/core/rtnetlink.c#L506">506</a> 
<a name=L507 href="source/net/core/rtnetlink.c#L507">507</a> err_cancel_data:
<a name=L508 href="source/net/core/rtnetlink.c#L508">508</a>         <a href="ident?i=nla_nest_cancel">nla_nest_cancel</a>(<a href="ident?i=skb">skb</a>, <a href="ident?i=data">data</a>);
<a name=L509 href="source/net/core/rtnetlink.c#L509">509</a> err_cancel_link:
<a name=L510 href="source/net/core/rtnetlink.c#L510">510</a>         <a href="ident?i=nla_nest_cancel">nla_nest_cancel</a>(<a href="ident?i=skb">skb</a>, linkinfo);
<a name=L511 href="source/net/core/rtnetlink.c#L511">511</a> <a href="ident?i=out">out</a>:
<a name=L512 href="source/net/core/rtnetlink.c#L512">512</a>         return <a href="ident?i=err">err</a>;
<a name=L513 href="source/net/core/rtnetlink.c#L513">513</a> }
<a name=L514 href="source/net/core/rtnetlink.c#L514">514</a> 
<a name=L515 href="source/net/core/rtnetlink.c#L515">515</a> static const int <a href="ident?i=rtm_min">rtm_min</a>[<a href="ident?i=RTM_NR_FAMILIES">RTM_NR_FAMILIES</a>] =
<a name=L516 href="source/net/core/rtnetlink.c#L516">516</a> {
<a name=L517 href="source/net/core/rtnetlink.c#L517">517</a>         [<a href="ident?i=RTM_FAM">RTM_FAM</a>(<a href="ident?i=RTM_NEWLINK">RTM_NEWLINK</a>)]      = <a href="ident?i=NLMSG_LENGTH">NLMSG_LENGTH</a>(sizeof(struct <a href="ident?i=ifinfomsg">ifinfomsg</a>)),
<a name=L518 href="source/net/core/rtnetlink.c#L518">518</a>         [<a href="ident?i=RTM_FAM">RTM_FAM</a>(<a href="ident?i=RTM_NEWADDR">RTM_NEWADDR</a>)]      = <a href="ident?i=NLMSG_LENGTH">NLMSG_LENGTH</a>(sizeof(struct <a href="ident?i=ifaddrmsg">ifaddrmsg</a>)),
<a name=L519 href="source/net/core/rtnetlink.c#L519">519</a>         [<a href="ident?i=RTM_FAM">RTM_FAM</a>(<a href="ident?i=RTM_NEWROUTE">RTM_NEWROUTE</a>)]     = <a href="ident?i=NLMSG_LENGTH">NLMSG_LENGTH</a>(sizeof(struct <a href="ident?i=rtmsg">rtmsg</a>)),
<a name=L520 href="source/net/core/rtnetlink.c#L520">520</a>         [<a href="ident?i=RTM_FAM">RTM_FAM</a>(<a href="ident?i=RTM_NEWRULE">RTM_NEWRULE</a>)]      = <a href="ident?i=NLMSG_LENGTH">NLMSG_LENGTH</a>(sizeof(struct <a href="ident?i=fib_rule_hdr">fib_rule_hdr</a>)),
<a name=L521 href="source/net/core/rtnetlink.c#L521">521</a>         [<a href="ident?i=RTM_FAM">RTM_FAM</a>(<a href="ident?i=RTM_NEWQDISC">RTM_NEWQDISC</a>)]     = <a href="ident?i=NLMSG_LENGTH">NLMSG_LENGTH</a>(sizeof(struct <a href="ident?i=tcmsg">tcmsg</a>)),
<a name=L522 href="source/net/core/rtnetlink.c#L522">522</a>         [<a href="ident?i=RTM_FAM">RTM_FAM</a>(<a href="ident?i=RTM_NEWTCLASS">RTM_NEWTCLASS</a>)]    = <a href="ident?i=NLMSG_LENGTH">NLMSG_LENGTH</a>(sizeof(struct <a href="ident?i=tcmsg">tcmsg</a>)),
<a name=L523 href="source/net/core/rtnetlink.c#L523">523</a>         [<a href="ident?i=RTM_FAM">RTM_FAM</a>(<a href="ident?i=RTM_NEWTFILTER">RTM_NEWTFILTER</a>)]   = <a href="ident?i=NLMSG_LENGTH">NLMSG_LENGTH</a>(sizeof(struct <a href="ident?i=tcmsg">tcmsg</a>)),
<a name=L524 href="source/net/core/rtnetlink.c#L524">524</a>         [<a href="ident?i=RTM_FAM">RTM_FAM</a>(<a href="ident?i=RTM_NEWACTION">RTM_NEWACTION</a>)]    = <a href="ident?i=NLMSG_LENGTH">NLMSG_LENGTH</a>(sizeof(struct <a href="ident?i=tcamsg">tcamsg</a>)),
<a name=L525 href="source/net/core/rtnetlink.c#L525">525</a>         [<a href="ident?i=RTM_FAM">RTM_FAM</a>(<a href="ident?i=RTM_GETMULTICAST">RTM_GETMULTICAST</a>)] = <a href="ident?i=NLMSG_LENGTH">NLMSG_LENGTH</a>(sizeof(struct <a href="ident?i=rtgenmsg">rtgenmsg</a>)),
<a name=L526 href="source/net/core/rtnetlink.c#L526">526</a>         [<a href="ident?i=RTM_FAM">RTM_FAM</a>(<a href="ident?i=RTM_GETANYCAST">RTM_GETANYCAST</a>)]   = <a href="ident?i=NLMSG_LENGTH">NLMSG_LENGTH</a>(sizeof(struct <a href="ident?i=rtgenmsg">rtgenmsg</a>)),
<a name=L527 href="source/net/core/rtnetlink.c#L527">527</a> };
<a name=L528 href="source/net/core/rtnetlink.c#L528">528</a> 
<a name=L529 href="source/net/core/rtnetlink.c#L529">529</a> static const int <a href="ident?i=rta_max">rta_max</a>[<a href="ident?i=RTM_NR_FAMILIES">RTM_NR_FAMILIES</a>] =
<a name=L530 href="source/net/core/rtnetlink.c#L530">530</a> {
<a name=L531 href="source/net/core/rtnetlink.c#L531">531</a>         [<a href="ident?i=RTM_FAM">RTM_FAM</a>(<a href="ident?i=RTM_NEWLINK">RTM_NEWLINK</a>)]      = <a href="ident?i=IFLA_MAX">IFLA_MAX</a>,
<a name=L532 href="source/net/core/rtnetlink.c#L532">532</a>         [<a href="ident?i=RTM_FAM">RTM_FAM</a>(<a href="ident?i=RTM_NEWADDR">RTM_NEWADDR</a>)]      = <a href="ident?i=IFA_MAX">IFA_MAX</a>,
<a name=L533 href="source/net/core/rtnetlink.c#L533">533</a>         [<a href="ident?i=RTM_FAM">RTM_FAM</a>(<a href="ident?i=RTM_NEWROUTE">RTM_NEWROUTE</a>)]     = <a href="ident?i=RTA_MAX">RTA_MAX</a>,
<a name=L534 href="source/net/core/rtnetlink.c#L534">534</a>         [<a href="ident?i=RTM_FAM">RTM_FAM</a>(<a href="ident?i=RTM_NEWRULE">RTM_NEWRULE</a>)]      = <a href="ident?i=FRA_MAX">FRA_MAX</a>,
<a name=L535 href="source/net/core/rtnetlink.c#L535">535</a>         [<a href="ident?i=RTM_FAM">RTM_FAM</a>(<a href="ident?i=RTM_NEWQDISC">RTM_NEWQDISC</a>)]     = <a href="ident?i=TCA_MAX">TCA_MAX</a>,
<a name=L536 href="source/net/core/rtnetlink.c#L536">536</a>         [<a href="ident?i=RTM_FAM">RTM_FAM</a>(<a href="ident?i=RTM_NEWTCLASS">RTM_NEWTCLASS</a>)]    = <a href="ident?i=TCA_MAX">TCA_MAX</a>,
<a name=L537 href="source/net/core/rtnetlink.c#L537">537</a>         [<a href="ident?i=RTM_FAM">RTM_FAM</a>(<a href="ident?i=RTM_NEWTFILTER">RTM_NEWTFILTER</a>)]   = <a href="ident?i=TCA_MAX">TCA_MAX</a>,
<a name=L538 href="source/net/core/rtnetlink.c#L538">538</a>         [<a href="ident?i=RTM_FAM">RTM_FAM</a>(<a href="ident?i=RTM_NEWACTION">RTM_NEWACTION</a>)]    = <a href="ident?i=TCAA_MAX">TCAA_MAX</a>,
<a name=L539 href="source/net/core/rtnetlink.c#L539">539</a> };
<a name=L540 href="source/net/core/rtnetlink.c#L540">540</a> 
<a name=L541 href="source/net/core/rtnetlink.c#L541">541</a> void <a href="ident?i=__rta_fill">__rta_fill</a>(struct <a href="ident?i=sk_buff">sk_buff</a> *<a href="ident?i=skb">skb</a>, int attrtype, int attrlen, const void *<a href="ident?i=data">data</a>)
<a name=L542 href="source/net/core/rtnetlink.c#L542">542</a> {
<a name=L543 href="source/net/core/rtnetlink.c#L543">543</a>         struct <a href="ident?i=rtattr">rtattr</a> *rta;
<a name=L544 href="source/net/core/rtnetlink.c#L544">544</a>         int <a href="ident?i=size">size</a> = <a href="ident?i=RTA_LENGTH">RTA_LENGTH</a>(attrlen);
<a name=L545 href="source/net/core/rtnetlink.c#L545">545</a> 
<a name=L546 href="source/net/core/rtnetlink.c#L546">546</a>         rta = (struct <a href="ident?i=rtattr">rtattr</a> *)<a href="ident?i=skb_put">skb_put</a>(<a href="ident?i=skb">skb</a>, <a href="ident?i=RTA_ALIGN">RTA_ALIGN</a>(<a href="ident?i=size">size</a>));
<a name=L547 href="source/net/core/rtnetlink.c#L547">547</a>         rta-&gt;rta_type = attrtype;
<a name=L548 href="source/net/core/rtnetlink.c#L548">548</a>         rta-&gt;rta_len = <a href="ident?i=size">size</a>;
<a name=L549 href="source/net/core/rtnetlink.c#L549">549</a>         <a href="ident?i=memcpy">memcpy</a>(<a href="ident?i=RTA_DATA">RTA_DATA</a>(rta), <a href="ident?i=data">data</a>, attrlen);
<a name=L550 href="source/net/core/rtnetlink.c#L550">550</a>         <a href="ident?i=memset">memset</a>(<a href="ident?i=RTA_DATA">RTA_DATA</a>(rta) + attrlen, 0, <a href="ident?i=RTA_ALIGN">RTA_ALIGN</a>(<a href="ident?i=size">size</a>) - <a href="ident?i=size">size</a>);
<a name=L551 href="source/net/core/rtnetlink.c#L551">551</a> }
<a name=L552 href="source/net/core/rtnetlink.c#L552">552</a> <a href="ident?i=EXPORT_SYMBOL">EXPORT_SYMBOL</a>(<a href="ident?i=__rta_fill">__rta_fill</a>);
<a name=L553 href="source/net/core/rtnetlink.c#L553">553</a> 
<a name=L554 href="source/net/core/rtnetlink.c#L554">554</a> int <a href="ident?i=rtnetlink_send">rtnetlink_send</a>(struct <a href="ident?i=sk_buff">sk_buff</a> *<a href="ident?i=skb">skb</a>, struct <a href="ident?i=net">net</a> *<a href="ident?i=net">net</a>, <a href="ident?i=u32">u32</a> <a href="ident?i=pid">pid</a>, unsigned <a href="ident?i=group">group</a>, int <a href="ident?i=echo">echo</a>)
<a name=L555 href="source/net/core/rtnetlink.c#L555">555</a> {
<a name=L556 href="source/net/core/rtnetlink.c#L556">556</a>         struct <a href="ident?i=sock">sock</a> *rtnl = <a href="ident?i=net">net</a>-&gt;rtnl;
<a name=L557 href="source/net/core/rtnetlink.c#L557">557</a>         int <a href="ident?i=err">err</a> = 0;
<a name=L558 href="source/net/core/rtnetlink.c#L558">558</a> 
<a name=L559 href="source/net/core/rtnetlink.c#L559">559</a>         <a href="ident?i=NETLINK_CB">NETLINK_CB</a>(<a href="ident?i=skb">skb</a>).dst_group = <a href="ident?i=group">group</a>;
<a name=L560 href="source/net/core/rtnetlink.c#L560">560</a>         if (<a href="ident?i=echo">echo</a>)
<a name=L561 href="source/net/core/rtnetlink.c#L561">561</a>                 <a href="ident?i=atomic_inc">atomic_inc</a>(&amp;<a href="ident?i=skb">skb</a>-&gt;users);
<a name=L562 href="source/net/core/rtnetlink.c#L562">562</a>         <a href="ident?i=netlink_broadcast">netlink_broadcast</a>(rtnl, <a href="ident?i=skb">skb</a>, <a href="ident?i=pid">pid</a>, <a href="ident?i=group">group</a>, <a href="ident?i=GFP_KERNEL">GFP_KERNEL</a>);
<a name=L563 href="source/net/core/rtnetlink.c#L563">563</a>         if (<a href="ident?i=echo">echo</a>)
<a name=L564 href="source/net/core/rtnetlink.c#L564">564</a>                 <a href="ident?i=err">err</a> = <a href="ident?i=netlink_unicast">netlink_unicast</a>(rtnl, <a href="ident?i=skb">skb</a>, <a href="ident?i=pid">pid</a>, <a href="ident?i=MSG_DONTWAIT">MSG_DONTWAIT</a>);
<a name=L565 href="source/net/core/rtnetlink.c#L565">565</a>         return <a href="ident?i=err">err</a>;
<a name=L566 href="source/net/core/rtnetlink.c#L566">566</a> }
<a name=L567 href="source/net/core/rtnetlink.c#L567">567</a> 
<a name=L568 href="source/net/core/rtnetlink.c#L568">568</a> int <a href="ident?i=rtnl_unicast">rtnl_unicast</a>(struct <a href="ident?i=sk_buff">sk_buff</a> *<a href="ident?i=skb">skb</a>, struct <a href="ident?i=net">net</a> *<a href="ident?i=net">net</a>, <a href="ident?i=u32">u32</a> <a href="ident?i=pid">pid</a>)
<a name=L569 href="source/net/core/rtnetlink.c#L569">569</a> {
<a name=L570 href="source/net/core/rtnetlink.c#L570">570</a>         struct <a href="ident?i=sock">sock</a> *rtnl = <a href="ident?i=net">net</a>-&gt;rtnl;
<a name=L571 href="source/net/core/rtnetlink.c#L571">571</a> 
<a name=L572 href="source/net/core/rtnetlink.c#L572">572</a>         return <a href="ident?i=nlmsg_unicast">nlmsg_unicast</a>(rtnl, <a href="ident?i=skb">skb</a>, <a href="ident?i=pid">pid</a>);
<a name=L573 href="source/net/core/rtnetlink.c#L573">573</a> }
<a name=L574 href="source/net/core/rtnetlink.c#L574">574</a> <a href="ident?i=EXPORT_SYMBOL">EXPORT_SYMBOL</a>(<a href="ident?i=rtnl_unicast">rtnl_unicast</a>);
<a name=L575 href="source/net/core/rtnetlink.c#L575">575</a> 
<a name=L576 href="source/net/core/rtnetlink.c#L576">576</a> void <a href="ident?i=rtnl_notify">rtnl_notify</a>(struct <a href="ident?i=sk_buff">sk_buff</a> *<a href="ident?i=skb">skb</a>, struct <a href="ident?i=net">net</a> *<a href="ident?i=net">net</a>, <a href="ident?i=u32">u32</a> <a href="ident?i=pid">pid</a>, <a href="ident?i=u32">u32</a> <a href="ident?i=group">group</a>,
<a name=L577 href="source/net/core/rtnetlink.c#L577">577</a>                  struct <a href="ident?i=nlmsghdr">nlmsghdr</a> *nlh, <a href="ident?i=gfp_t">gfp_t</a> <a href="ident?i=flags">flags</a>)
<a name=L578 href="source/net/core/rtnetlink.c#L578">578</a> {
<a name=L579 href="source/net/core/rtnetlink.c#L579">579</a>         struct <a href="ident?i=sock">sock</a> *rtnl = <a href="ident?i=net">net</a>-&gt;rtnl;
<a name=L580 href="source/net/core/rtnetlink.c#L580">580</a>         int <a href="ident?i=report">report</a> = 0;
<a name=L581 href="source/net/core/rtnetlink.c#L581">581</a> 
<a name=L582 href="source/net/core/rtnetlink.c#L582">582</a>         if (nlh)
<a name=L583 href="source/net/core/rtnetlink.c#L583">583</a>                 <a href="ident?i=report">report</a> = <a href="ident?i=nlmsg_report">nlmsg_report</a>(nlh);
<a name=L584 href="source/net/core/rtnetlink.c#L584">584</a> 
<a name=L585 href="source/net/core/rtnetlink.c#L585">585</a>         <a href="ident?i=nlmsg_notify">nlmsg_notify</a>(rtnl, <a href="ident?i=skb">skb</a>, <a href="ident?i=pid">pid</a>, <a href="ident?i=group">group</a>, <a href="ident?i=report">report</a>, <a href="ident?i=flags">flags</a>);
<a name=L586 href="source/net/core/rtnetlink.c#L586">586</a> }
<a name=L587 href="source/net/core/rtnetlink.c#L587">587</a> <a href="ident?i=EXPORT_SYMBOL">EXPORT_SYMBOL</a>(<a href="ident?i=rtnl_notify">rtnl_notify</a>);
<a name=L588 href="source/net/core/rtnetlink.c#L588">588</a> 
<a name=L589 href="source/net/core/rtnetlink.c#L589">589</a> void <a href="ident?i=rtnl_set_sk_err">rtnl_set_sk_err</a>(struct <a href="ident?i=net">net</a> *<a href="ident?i=net">net</a>, <a href="ident?i=u32">u32</a> <a href="ident?i=group">group</a>, int <a href="ident?i=error">error</a>)
<a name=L590 href="source/net/core/rtnetlink.c#L590">590</a> {
<a name=L591 href="source/net/core/rtnetlink.c#L591">591</a>         struct <a href="ident?i=sock">sock</a> *rtnl = <a href="ident?i=net">net</a>-&gt;rtnl;
<a name=L592 href="source/net/core/rtnetlink.c#L592">592</a> 
<a name=L593 href="source/net/core/rtnetlink.c#L593">593</a>         <a href="ident?i=netlink_set_err">netlink_set_err</a>(rtnl, 0, <a href="ident?i=group">group</a>, <a href="ident?i=error">error</a>);
<a name=L594 href="source/net/core/rtnetlink.c#L594">594</a> }
<a name=L595 href="source/net/core/rtnetlink.c#L595">595</a> <a href="ident?i=EXPORT_SYMBOL">EXPORT_SYMBOL</a>(<a href="ident?i=rtnl_set_sk_err">rtnl_set_sk_err</a>);
<a name=L596 href="source/net/core/rtnetlink.c#L596">596</a> 
<a name=L597 href="source/net/core/rtnetlink.c#L597">597</a> int <a href="ident?i=rtnetlink_put_metrics">rtnetlink_put_metrics</a>(struct <a href="ident?i=sk_buff">sk_buff</a> *<a href="ident?i=skb">skb</a>, <a href="ident?i=u32">u32</a> *metrics)
<a name=L598 href="source/net/core/rtnetlink.c#L598">598</a> {
<a name=L599 href="source/net/core/rtnetlink.c#L599">599</a>         struct <a href="ident?i=nlattr">nlattr</a> *mx;
<a name=L600 href="source/net/core/rtnetlink.c#L600">600</a>         int <a href="ident?i=i">i</a>, <a href="ident?i=valid">valid</a> = 0;
<a name=L601 href="source/net/core/rtnetlink.c#L601">601</a> 
<a name=L602 href="source/net/core/rtnetlink.c#L602">602</a>         mx = <a href="ident?i=nla_nest_start">nla_nest_start</a>(<a href="ident?i=skb">skb</a>, RTA_METRICS);
<a name=L603 href="source/net/core/rtnetlink.c#L603">603</a>         if (mx == <a href="ident?i=NULL">NULL</a>)
<a name=L604 href="source/net/core/rtnetlink.c#L604">604</a>                 return -<a href="ident?i=ENOBUFS">ENOBUFS</a>;
<a name=L605 href="source/net/core/rtnetlink.c#L605">605</a> 
<a name=L606 href="source/net/core/rtnetlink.c#L606">606</a>         for (<a href="ident?i=i">i</a> = 0; <a href="ident?i=i">i</a> &lt; <a href="ident?i=RTAX_MAX">RTAX_MAX</a>; <a href="ident?i=i">i</a>++) {
<a name=L607 href="source/net/core/rtnetlink.c#L607">607</a>                 if (metrics[<a href="ident?i=i">i</a>]) {
<a name=L608 href="source/net/core/rtnetlink.c#L608">608</a>                         <a href="ident?i=valid">valid</a>++;
<a name=L609 href="source/net/core/rtnetlink.c#L609">609</a>                         <a href="ident?i=NLA_PUT_U32">NLA_PUT_U32</a>(<a href="ident?i=skb">skb</a>, <a href="ident?i=i">i</a>+1, metrics[<a href="ident?i=i">i</a>]);
<a name=L610 href="source/net/core/rtnetlink.c#L610">610</a>                 }
<a name=L611 href="source/net/core/rtnetlink.c#L611">611</a>         }
<a name=L612 href="source/net/core/rtnetlink.c#L612">612</a> 
<a name=L613 href="source/net/core/rtnetlink.c#L613">613</a>         if (!<a href="ident?i=valid">valid</a>) {
<a name=L614 href="source/net/core/rtnetlink.c#L614">614</a>                 <a href="ident?i=nla_nest_cancel">nla_nest_cancel</a>(<a href="ident?i=skb">skb</a>, mx);
<a name=L615 href="source/net/core/rtnetlink.c#L615">615</a>                 return 0;
<a name=L616 href="source/net/core/rtnetlink.c#L616">616</a>         }
<a name=L617 href="source/net/core/rtnetlink.c#L617">617</a> 
<a name=L618 href="source/net/core/rtnetlink.c#L618">618</a>         return <a href="ident?i=nla_nest_end">nla_nest_end</a>(<a href="ident?i=skb">skb</a>, mx);
<a name=L619 href="source/net/core/rtnetlink.c#L619">619</a> 
<a name=L620 href="source/net/core/rtnetlink.c#L620">620</a> nla_put_failure:
<a name=L621 href="source/net/core/rtnetlink.c#L621">621</a>         <a href="ident?i=nla_nest_cancel">nla_nest_cancel</a>(<a href="ident?i=skb">skb</a>, mx);
<a name=L622 href="source/net/core/rtnetlink.c#L622">622</a>         return -<a href="ident?i=EMSGSIZE">EMSGSIZE</a>;
<a name=L623 href="source/net/core/rtnetlink.c#L623">623</a> }
<a name=L624 href="source/net/core/rtnetlink.c#L624">624</a> <a href="ident?i=EXPORT_SYMBOL">EXPORT_SYMBOL</a>(<a href="ident?i=rtnetlink_put_metrics">rtnetlink_put_metrics</a>);
<a name=L625 href="source/net/core/rtnetlink.c#L625">625</a> 
<a name=L626 href="source/net/core/rtnetlink.c#L626">626</a> int <a href="ident?i=rtnl_put_cacheinfo">rtnl_put_cacheinfo</a>(struct <a href="ident?i=sk_buff">sk_buff</a> *<a href="ident?i=skb">skb</a>, struct <a href="ident?i=dst_entry">dst_entry</a> *<a href="ident?i=dst">dst</a>, <a href="ident?i=u32">u32</a> <a href="ident?i=id">id</a>,
<a name=L627 href="source/net/core/rtnetlink.c#L627">627</a>                        <a href="ident?i=u32">u32</a> <a href="ident?i=ts">ts</a>, <a href="ident?i=u32">u32</a> tsage, long <a href="ident?i=expires">expires</a>, <a href="ident?i=u32">u32</a> <a href="ident?i=error">error</a>)
<a name=L628 href="source/net/core/rtnetlink.c#L628">628</a> {
<a name=L629 href="source/net/core/rtnetlink.c#L629">629</a>         struct <a href="ident?i=rta_cacheinfo">rta_cacheinfo</a> ci = {
<a name=L630 href="source/net/core/rtnetlink.c#L630">630</a>                 .rta_lastuse = <a href="ident?i=jiffies_to_clock_t">jiffies_to_clock_t</a>(<a href="ident?i=jiffies">jiffies</a> - <a href="ident?i=dst">dst</a>-&gt;lastuse),
<a name=L631 href="source/net/core/rtnetlink.c#L631">631</a>                 .rta_used = <a href="ident?i=dst">dst</a>-&gt;__use,
<a name=L632 href="source/net/core/rtnetlink.c#L632">632</a>                 .rta_clntref = <a href="ident?i=atomic_read">atomic_read</a>(&amp;(<a href="ident?i=dst">dst</a>-&gt;__refcnt)),
<a name=L633 href="source/net/core/rtnetlink.c#L633">633</a>                 .rta_error = <a href="ident?i=error">error</a>,
<a name=L634 href="source/net/core/rtnetlink.c#L634">634</a>                 .rta_id =  <a href="ident?i=id">id</a>,
<a name=L635 href="source/net/core/rtnetlink.c#L635">635</a>                 .rta_ts = <a href="ident?i=ts">ts</a>,
<a name=L636 href="source/net/core/rtnetlink.c#L636">636</a>                 .rta_tsage = tsage,
<a name=L637 href="source/net/core/rtnetlink.c#L637">637</a>         };
<a name=L638 href="source/net/core/rtnetlink.c#L638">638</a> 
<a name=L639 href="source/net/core/rtnetlink.c#L639">639</a>         if (<a href="ident?i=expires">expires</a>)
<a name=L640 href="source/net/core/rtnetlink.c#L640">640</a>                 ci.rta_expires = <a href="ident?i=jiffies_to_clock_t">jiffies_to_clock_t</a>(<a href="ident?i=expires">expires</a>);
<a name=L641 href="source/net/core/rtnetlink.c#L641">641</a> 
<a name=L642 href="source/net/core/rtnetlink.c#L642">642</a>         return <a href="ident?i=nla_put">nla_put</a>(<a href="ident?i=skb">skb</a>, RTA_CACHEINFO, sizeof(ci), &amp;ci);
<a name=L643 href="source/net/core/rtnetlink.c#L643">643</a> }
<a name=L644 href="source/net/core/rtnetlink.c#L644">644</a> <a href="ident?i=EXPORT_SYMBOL_GPL">EXPORT_SYMBOL_GPL</a>(<a href="ident?i=rtnl_put_cacheinfo">rtnl_put_cacheinfo</a>);
<a name=L645 href="source/net/core/rtnetlink.c#L645">645</a> 
<a name=L646 href="source/net/core/rtnetlink.c#L646">646</a> static void <a href="ident?i=set_operstate">set_operstate</a>(struct <a href="ident?i=net_device">net_device</a> *<a href="ident?i=dev">dev</a>, unsigned char transition)
<a name=L647 href="source/net/core/rtnetlink.c#L647">647</a> {
<a name=L648 href="source/net/core/rtnetlink.c#L648">648</a>         unsigned char operstate = <a href="ident?i=dev">dev</a>-&gt;operstate;
<a name=L649 href="source/net/core/rtnetlink.c#L649">649</a> 
<a name=L650 href="source/net/core/rtnetlink.c#L650">650</a>         switch (transition) {
<a name=L651 href="source/net/core/rtnetlink.c#L651">651</a>         case IF_OPER_UP:
<a name=L652 href="source/net/core/rtnetlink.c#L652">652</a>                 if ((operstate == IF_OPER_DORMANT ||
<a name=L653 href="source/net/core/rtnetlink.c#L653">653</a>                      operstate == IF_OPER_UNKNOWN) &amp;&amp;
<a name=L654 href="source/net/core/rtnetlink.c#L654">654</a>                     !<a href="ident?i=netif_dormant">netif_dormant</a>(<a href="ident?i=dev">dev</a>))
<a name=L655 href="source/net/core/rtnetlink.c#L655">655</a>                         operstate = IF_OPER_UP;
<a name=L656 href="source/net/core/rtnetlink.c#L656">656</a>                 break;
<a name=L657 href="source/net/core/rtnetlink.c#L657">657</a> 
<a name=L658 href="source/net/core/rtnetlink.c#L658">658</a>         case IF_OPER_DORMANT:
<a name=L659 href="source/net/core/rtnetlink.c#L659">659</a>                 if (operstate == IF_OPER_UP ||
<a name=L660 href="source/net/core/rtnetlink.c#L660">660</a>                     operstate == IF_OPER_UNKNOWN)
<a name=L661 href="source/net/core/rtnetlink.c#L661">661</a>                         operstate = IF_OPER_DORMANT;
<a name=L662 href="source/net/core/rtnetlink.c#L662">662</a>                 break;
<a name=L663 href="source/net/core/rtnetlink.c#L663">663</a>         }
<a name=L664 href="source/net/core/rtnetlink.c#L664">664</a> 
<a name=L665 href="source/net/core/rtnetlink.c#L665">665</a>         if (<a href="ident?i=dev">dev</a>-&gt;operstate != operstate) {
<a name=L666 href="source/net/core/rtnetlink.c#L666">666</a>                 <a href="ident?i=write_lock_bh">write_lock_bh</a>(&amp;<a href="ident?i=dev_base_lock">dev_base_lock</a>);
<a name=L667 href="source/net/core/rtnetlink.c#L667">667</a>                 <a href="ident?i=dev">dev</a>-&gt;operstate = operstate;
<a name=L668 href="source/net/core/rtnetlink.c#L668">668</a>                 <a href="ident?i=write_unlock_bh">write_unlock_bh</a>(&amp;<a href="ident?i=dev_base_lock">dev_base_lock</a>);
<a name=L669 href="source/net/core/rtnetlink.c#L669">669</a>                 <a href="ident?i=netdev_state_change">netdev_state_change</a>(<a href="ident?i=dev">dev</a>);
<a name=L670 href="source/net/core/rtnetlink.c#L670">670</a>         }
<a name=L671 href="source/net/core/rtnetlink.c#L671">671</a> }
<a name=L672 href="source/net/core/rtnetlink.c#L672">672</a> 
<a name=L673 href="source/net/core/rtnetlink.c#L673">673</a> static unsigned int <a href="ident?i=rtnl_dev_combine_flags">rtnl_dev_combine_flags</a>(const struct <a href="ident?i=net_device">net_device</a> *<a href="ident?i=dev">dev</a>,
<a name=L674 href="source/net/core/rtnetlink.c#L674">674</a>                                            const struct <a href="ident?i=ifinfomsg">ifinfomsg</a> *ifm)
<a name=L675 href="source/net/core/rtnetlink.c#L675">675</a> {
<a name=L676 href="source/net/core/rtnetlink.c#L676">676</a>         unsigned int <a href="ident?i=flags">flags</a> = ifm-&gt;ifi_flags;
<a name=L677 href="source/net/core/rtnetlink.c#L677">677</a> 
<a name=L678 href="source/net/core/rtnetlink.c#L678">678</a>         <b><i>/* bugwards compatibility: ifi_change == 0 is treated as ~0 */</i></b>
<a name=L679 href="source/net/core/rtnetlink.c#L679">679</a>         if (ifm-&gt;ifi_change)
<a name=L680 href="source/net/core/rtnetlink.c#L680">680</a>                 <a href="ident?i=flags">flags</a> = (<a href="ident?i=flags">flags</a> &amp; ifm-&gt;ifi_change) |
<a name=L681 href="source/net/core/rtnetlink.c#L681">681</a>                         (<a href="ident?i=dev">dev</a>-&gt;<a href="ident?i=flags">flags</a> &amp; ~ifm-&gt;ifi_change);
<a name=L682 href="source/net/core/rtnetlink.c#L682">682</a> 
<a name=L683 href="source/net/core/rtnetlink.c#L683">683</a>         return <a href="ident?i=flags">flags</a>;
<a name=L684 href="source/net/core/rtnetlink.c#L684">684</a> }
<a name=L685 href="source/net/core/rtnetlink.c#L685">685</a> 
<a name=L686 href="source/net/core/rtnetlink.c#L686">686</a> static void <a href="ident?i=copy_rtnl_link_stats">copy_rtnl_link_stats</a>(struct <a href="ident?i=rtnl_link_stats">rtnl_link_stats</a> *<a href="ident?i=a">a</a>,
<a name=L687 href="source/net/core/rtnetlink.c#L687">687</a>                                  const struct <a href="ident?i=rtnl_link_stats64">rtnl_link_stats64</a> *<a href="ident?i=b">b</a>)
<a name=L688 href="source/net/core/rtnetlink.c#L688">688</a> {
<a name=L689 href="source/net/core/rtnetlink.c#L689">689</a>         <a href="ident?i=a">a</a>-&gt;rx_packets = <a href="ident?i=b">b</a>-&gt;rx_packets;
<a name=L690 href="source/net/core/rtnetlink.c#L690">690</a>         <a href="ident?i=a">a</a>-&gt;<a href="ident?i=tx_packets">tx_packets</a> = <a href="ident?i=b">b</a>-&gt;<a href="ident?i=tx_packets">tx_packets</a>;
<a name=L691 href="source/net/core/rtnetlink.c#L691">691</a>         <a href="ident?i=a">a</a>-&gt;<a href="ident?i=rx_bytes">rx_bytes</a> = <a href="ident?i=b">b</a>-&gt;<a href="ident?i=rx_bytes">rx_bytes</a>;
<a name=L692 href="source/net/core/rtnetlink.c#L692">692</a>         <a href="ident?i=a">a</a>-&gt;<a href="ident?i=tx_bytes">tx_bytes</a> = <a href="ident?i=b">b</a>-&gt;<a href="ident?i=tx_bytes">tx_bytes</a>;
<a name=L693 href="source/net/core/rtnetlink.c#L693">693</a>         <a href="ident?i=a">a</a>-&gt;rx_errors = <a href="ident?i=b">b</a>-&gt;rx_errors;
<a name=L694 href="source/net/core/rtnetlink.c#L694">694</a>         <a href="ident?i=a">a</a>-&gt;tx_errors = <a href="ident?i=b">b</a>-&gt;tx_errors;
<a name=L695 href="source/net/core/rtnetlink.c#L695">695</a>         <a href="ident?i=a">a</a>-&gt;rx_dropped = <a href="ident?i=b">b</a>-&gt;rx_dropped;
<a name=L696 href="source/net/core/rtnetlink.c#L696">696</a>         <a href="ident?i=a">a</a>-&gt;tx_dropped = <a href="ident?i=b">b</a>-&gt;tx_dropped;
<a name=L697 href="source/net/core/rtnetlink.c#L697">697</a> 
<a name=L698 href="source/net/core/rtnetlink.c#L698">698</a>         <a href="ident?i=a">a</a>-&gt;multicast = <a href="ident?i=b">b</a>-&gt;multicast;
<a name=L699 href="source/net/core/rtnetlink.c#L699">699</a>         <a href="ident?i=a">a</a>-&gt;collisions = <a href="ident?i=b">b</a>-&gt;collisions;
<a name=L700 href="source/net/core/rtnetlink.c#L700">700</a> 
<a name=L701 href="source/net/core/rtnetlink.c#L701">701</a>         <a href="ident?i=a">a</a>-&gt;rx_length_errors = <a href="ident?i=b">b</a>-&gt;rx_length_errors;
<a name=L702 href="source/net/core/rtnetlink.c#L702">702</a>         <a href="ident?i=a">a</a>-&gt;rx_over_errors = <a href="ident?i=b">b</a>-&gt;rx_over_errors;
<a name=L703 href="source/net/core/rtnetlink.c#L703">703</a>         <a href="ident?i=a">a</a>-&gt;rx_crc_errors = <a href="ident?i=b">b</a>-&gt;rx_crc_errors;
<a name=L704 href="source/net/core/rtnetlink.c#L704">704</a>         <a href="ident?i=a">a</a>-&gt;rx_frame_errors = <a href="ident?i=b">b</a>-&gt;rx_frame_errors;
<a name=L705 href="source/net/core/rtnetlink.c#L705">705</a>         <a href="ident?i=a">a</a>-&gt;rx_fifo_errors = <a href="ident?i=b">b</a>-&gt;rx_fifo_errors;
<a name=L706 href="source/net/core/rtnetlink.c#L706">706</a>         <a href="ident?i=a">a</a>-&gt;rx_missed_errors = <a href="ident?i=b">b</a>-&gt;rx_missed_errors;
<a name=L707 href="source/net/core/rtnetlink.c#L707">707</a> 
<a name=L708 href="source/net/core/rtnetlink.c#L708">708</a>         <a href="ident?i=a">a</a>-&gt;tx_aborted_errors = <a href="ident?i=b">b</a>-&gt;tx_aborted_errors;
<a name=L709 href="source/net/core/rtnetlink.c#L709">709</a>         <a href="ident?i=a">a</a>-&gt;tx_carrier_errors = <a href="ident?i=b">b</a>-&gt;tx_carrier_errors;
<a name=L710 href="source/net/core/rtnetlink.c#L710">710</a>         <a href="ident?i=a">a</a>-&gt;tx_fifo_errors = <a href="ident?i=b">b</a>-&gt;tx_fifo_errors;
<a name=L711 href="source/net/core/rtnetlink.c#L711">711</a>         <a href="ident?i=a">a</a>-&gt;tx_heartbeat_errors = <a href="ident?i=b">b</a>-&gt;tx_heartbeat_errors;
<a name=L712 href="source/net/core/rtnetlink.c#L712">712</a>         <a href="ident?i=a">a</a>-&gt;tx_window_errors = <a href="ident?i=b">b</a>-&gt;tx_window_errors;
<a name=L713 href="source/net/core/rtnetlink.c#L713">713</a> 
<a name=L714 href="source/net/core/rtnetlink.c#L714">714</a>         <a href="ident?i=a">a</a>-&gt;rx_compressed = <a href="ident?i=b">b</a>-&gt;rx_compressed;
<a name=L715 href="source/net/core/rtnetlink.c#L715">715</a>         <a href="ident?i=a">a</a>-&gt;tx_compressed = <a href="ident?i=b">b</a>-&gt;tx_compressed;
<a name=L716 href="source/net/core/rtnetlink.c#L716">716</a> }
<a name=L717 href="source/net/core/rtnetlink.c#L717">717</a> 
<a name=L718 href="source/net/core/rtnetlink.c#L718">718</a> static void <a href="ident?i=copy_rtnl_link_stats64">copy_rtnl_link_stats64</a>(void *<a href="ident?i=v">v</a>, const struct <a href="ident?i=rtnl_link_stats64">rtnl_link_stats64</a> *<a href="ident?i=b">b</a>)
<a name=L719 href="source/net/core/rtnetlink.c#L719">719</a> {
<a name=L720 href="source/net/core/rtnetlink.c#L720">720</a>         <a href="ident?i=memcpy">memcpy</a>(<a href="ident?i=v">v</a>, <a href="ident?i=b">b</a>, sizeof(*<a href="ident?i=b">b</a>));
<a name=L721 href="source/net/core/rtnetlink.c#L721">721</a> }
<a name=L722 href="source/net/core/rtnetlink.c#L722">722</a> 
<a name=L723 href="source/net/core/rtnetlink.c#L723">723</a> <b><i>/* All VF info */</i></b>
<a name=L724 href="source/net/core/rtnetlink.c#L724">724</a> static inline int <a href="ident?i=rtnl_vfinfo_size">rtnl_vfinfo_size</a>(const struct <a href="ident?i=net_device">net_device</a> *<a href="ident?i=dev">dev</a>)
<a name=L725 href="source/net/core/rtnetlink.c#L725">725</a> {
<a name=L726 href="source/net/core/rtnetlink.c#L726">726</a>         if (<a href="ident?i=dev">dev</a>-&gt;<a href="ident?i=dev">dev</a>.<a href="ident?i=parent">parent</a> &amp;&amp; <a href="ident?i=dev_is_pci">dev_is_pci</a>(<a href="ident?i=dev">dev</a>-&gt;<a href="ident?i=dev">dev</a>.<a href="ident?i=parent">parent</a>)) {
<a name=L727 href="source/net/core/rtnetlink.c#L727">727</a> 
<a name=L728 href="source/net/core/rtnetlink.c#L728">728</a>                 int <a href="ident?i=num_vfs">num_vfs</a> = <a href="ident?i=dev_num_vf">dev_num_vf</a>(<a href="ident?i=dev">dev</a>-&gt;<a href="ident?i=dev">dev</a>.<a href="ident?i=parent">parent</a>);
<a name=L729 href="source/net/core/rtnetlink.c#L729">729</a>                 <a href="ident?i=size_t">size_t</a> <a href="ident?i=size">size</a> = <a href="ident?i=nla_total_size">nla_total_size</a>(sizeof(struct <a href="ident?i=nlattr">nlattr</a>));
<a name=L730 href="source/net/core/rtnetlink.c#L730">730</a>                 <a href="ident?i=size">size</a> += <a href="ident?i=nla_total_size">nla_total_size</a>(<a href="ident?i=num_vfs">num_vfs</a> * sizeof(struct <a href="ident?i=nlattr">nlattr</a>));
<a name=L731 href="source/net/core/rtnetlink.c#L731">731</a>                 <a href="ident?i=size">size</a> += <a href="ident?i=num_vfs">num_vfs</a> *
<a name=L732 href="source/net/core/rtnetlink.c#L732">732</a>                         (<a href="ident?i=nla_total_size">nla_total_size</a>(sizeof(struct <a href="ident?i=ifla_vf_mac">ifla_vf_mac</a>)) +
<a name=L733 href="source/net/core/rtnetlink.c#L733">733</a>                          <a href="ident?i=nla_total_size">nla_total_size</a>(sizeof(struct <a href="ident?i=ifla_vf_vlan">ifla_vf_vlan</a>)) +
<a name=L734 href="source/net/core/rtnetlink.c#L734">734</a>                          <a href="ident?i=nla_total_size">nla_total_size</a>(sizeof(struct <a href="ident?i=ifla_vf_tx_rate">ifla_vf_tx_rate</a>)) +
<a name=L735 href="source/net/core/rtnetlink.c#L735">735</a>                          <a href="ident?i=nla_total_size">nla_total_size</a>(sizeof(struct <a href="ident?i=ifla_vf_spoofchk">ifla_vf_spoofchk</a>)));
<a name=L736 href="source/net/core/rtnetlink.c#L736">736</a>                 return <a href="ident?i=size">size</a>;
<a name=L737 href="source/net/core/rtnetlink.c#L737">737</a>         } else
<a name=L738 href="source/net/core/rtnetlink.c#L738">738</a>                 return 0;
<a name=L739 href="source/net/core/rtnetlink.c#L739">739</a> }
<a name=L740 href="source/net/core/rtnetlink.c#L740">740</a> 
<a name=L741 href="source/net/core/rtnetlink.c#L741">741</a> static <a href="ident?i=size_t">size_t</a> <a href="ident?i=rtnl_port_size">rtnl_port_size</a>(const struct <a href="ident?i=net_device">net_device</a> *<a href="ident?i=dev">dev</a>)
<a name=L742 href="source/net/core/rtnetlink.c#L742">742</a> {
<a name=L743 href="source/net/core/rtnetlink.c#L743">743</a>         <a href="ident?i=size_t">size_t</a> port_size = <a href="ident?i=nla_total_size">nla_total_size</a>(4)            <b><i>/* PORT_VF */</i></b>
<a name=L744 href="source/net/core/rtnetlink.c#L744">744</a>                 + <a href="ident?i=nla_total_size">nla_total_size</a>(<a href="ident?i=PORT_PROFILE_MAX">PORT_PROFILE_MAX</a>)      <b><i>/* PORT_PROFILE */</i></b>
<a name=L745 href="source/net/core/rtnetlink.c#L745">745</a>                 + <a href="ident?i=nla_total_size">nla_total_size</a>(sizeof(struct <a href="ident?i=ifla_port_vsi">ifla_port_vsi</a>))
<a name=L746 href="source/net/core/rtnetlink.c#L746">746</a>                                                         <b><i>/* PORT_VSI_TYPE */</i></b>
<a name=L747 href="source/net/core/rtnetlink.c#L747">747</a>                 + <a href="ident?i=nla_total_size">nla_total_size</a>(<a href="ident?i=PORT_UUID_MAX">PORT_UUID_MAX</a>)         <b><i>/* PORT_INSTANCE_UUID */</i></b>
<a name=L748 href="source/net/core/rtnetlink.c#L748">748</a>                 + <a href="ident?i=nla_total_size">nla_total_size</a>(<a href="ident?i=PORT_UUID_MAX">PORT_UUID_MAX</a>)         <b><i>/* PORT_HOST_UUID */</i></b>
<a name=L749 href="source/net/core/rtnetlink.c#L749">749</a>                 + <a href="ident?i=nla_total_size">nla_total_size</a>(1)                     <b><i>/* PROT_VDP_REQUEST */</i></b>
<a name=L750 href="source/net/core/rtnetlink.c#L750">750</a>                 + <a href="ident?i=nla_total_size">nla_total_size</a>(2);                    <b><i>/* PORT_VDP_RESPONSE */</i></b>
<a name=L751 href="source/net/core/rtnetlink.c#L751">751</a>         <a href="ident?i=size_t">size_t</a> vf_ports_size = <a href="ident?i=nla_total_size">nla_total_size</a>(sizeof(struct <a href="ident?i=nlattr">nlattr</a>));
<a name=L752 href="source/net/core/rtnetlink.c#L752">752</a>         <a href="ident?i=size_t">size_t</a> vf_port_size = <a href="ident?i=nla_total_size">nla_total_size</a>(sizeof(struct <a href="ident?i=nlattr">nlattr</a>))
<a name=L753 href="source/net/core/rtnetlink.c#L753">753</a>                 + port_size;
<a name=L754 href="source/net/core/rtnetlink.c#L754">754</a>         <a href="ident?i=size_t">size_t</a> port_self_size = <a href="ident?i=nla_total_size">nla_total_size</a>(sizeof(struct <a href="ident?i=nlattr">nlattr</a>))
<a name=L755 href="source/net/core/rtnetlink.c#L755">755</a>                 + port_size;
<a name=L756 href="source/net/core/rtnetlink.c#L756">756</a> 
<a name=L757 href="source/net/core/rtnetlink.c#L757">757</a>         if (!<a href="ident?i=dev">dev</a>-&gt;<a href="ident?i=netdev_ops">netdev_ops</a>-&gt;ndo_get_vf_port || !<a href="ident?i=dev">dev</a>-&gt;<a href="ident?i=dev">dev</a>.<a href="ident?i=parent">parent</a>)
<a name=L758 href="source/net/core/rtnetlink.c#L758">758</a>                 return 0;
<a name=L759 href="source/net/core/rtnetlink.c#L759">759</a>         if (<a href="ident?i=dev_num_vf">dev_num_vf</a>(<a href="ident?i=dev">dev</a>-&gt;<a href="ident?i=dev">dev</a>.<a href="ident?i=parent">parent</a>))
<a name=L760 href="source/net/core/rtnetlink.c#L760">760</a>                 return port_self_size + vf_ports_size +
<a name=L761 href="source/net/core/rtnetlink.c#L761">761</a>                         vf_port_size * <a href="ident?i=dev_num_vf">dev_num_vf</a>(<a href="ident?i=dev">dev</a>-&gt;<a href="ident?i=dev">dev</a>.<a href="ident?i=parent">parent</a>);
<a name=L762 href="source/net/core/rtnetlink.c#L762">762</a>         else
<a name=L763 href="source/net/core/rtnetlink.c#L763">763</a>                 return port_self_size;
<a name=L764 href="source/net/core/rtnetlink.c#L764">764</a> }
<a name=L765 href="source/net/core/rtnetlink.c#L765">765</a> 
<a name=L766 href="source/net/core/rtnetlink.c#L766">766</a> static <a href="ident?i=noinline">noinline</a> <a href="ident?i=size_t">size_t</a> <a href="ident?i=if_nlmsg_size">if_nlmsg_size</a>(const struct <a href="ident?i=net_device">net_device</a> *<a href="ident?i=dev">dev</a>)
<a name=L767 href="source/net/core/rtnetlink.c#L767">767</a> {
<a name=L768 href="source/net/core/rtnetlink.c#L768">768</a>         return <a href="ident?i=NLMSG_ALIGN">NLMSG_ALIGN</a>(sizeof(struct <a href="ident?i=ifinfomsg">ifinfomsg</a>))
<a name=L769 href="source/net/core/rtnetlink.c#L769">769</a>                + <a href="ident?i=nla_total_size">nla_total_size</a>(<a href="ident?i=IFNAMSIZ">IFNAMSIZ</a>) <b><i>/* IFLA_IFNAME */</i></b>
<a name=L770 href="source/net/core/rtnetlink.c#L770">770</a>                + <a href="ident?i=nla_total_size">nla_total_size</a>(<a href="ident?i=IFALIASZ">IFALIASZ</a>) <b><i>/* IFLA_IFALIAS */</i></b>
<a name=L771 href="source/net/core/rtnetlink.c#L771">771</a>                + <a href="ident?i=nla_total_size">nla_total_size</a>(<a href="ident?i=IFNAMSIZ">IFNAMSIZ</a>) <b><i>/* IFLA_QDISC */</i></b>
<a name=L772 href="source/net/core/rtnetlink.c#L772">772</a>                + <a href="ident?i=nla_total_size">nla_total_size</a>(sizeof(struct <a href="ident?i=rtnl_link_ifmap">rtnl_link_ifmap</a>))
<a name=L773 href="source/net/core/rtnetlink.c#L773">773</a>                + <a href="ident?i=nla_total_size">nla_total_size</a>(sizeof(struct <a href="ident?i=rtnl_link_stats">rtnl_link_stats</a>))
<a name=L774 href="source/net/core/rtnetlink.c#L774">774</a>                + <a href="ident?i=nla_total_size">nla_total_size</a>(sizeof(struct <a href="ident?i=rtnl_link_stats64">rtnl_link_stats64</a>))
<a name=L775 href="source/net/core/rtnetlink.c#L775">775</a>                + <a href="ident?i=nla_total_size">nla_total_size</a>(<a href="ident?i=MAX_ADDR_LEN">MAX_ADDR_LEN</a>) <b><i>/* IFLA_ADDRESS */</i></b>
<a name=L776 href="source/net/core/rtnetlink.c#L776">776</a>                + <a href="ident?i=nla_total_size">nla_total_size</a>(<a href="ident?i=MAX_ADDR_LEN">MAX_ADDR_LEN</a>) <b><i>/* IFLA_BROADCAST */</i></b>
<a name=L777 href="source/net/core/rtnetlink.c#L777">777</a>                + <a href="ident?i=nla_total_size">nla_total_size</a>(4) <b><i>/* IFLA_TXQLEN */</i></b>
<a name=L778 href="source/net/core/rtnetlink.c#L778">778</a>                + <a href="ident?i=nla_total_size">nla_total_size</a>(4) <b><i>/* IFLA_WEIGHT */</i></b>
<a name=L779 href="source/net/core/rtnetlink.c#L779">779</a>                + <a href="ident?i=nla_total_size">nla_total_size</a>(4) <b><i>/* IFLA_MTU */</i></b>
<a name=L780 href="source/net/core/rtnetlink.c#L780">780</a>                + <a href="ident?i=nla_total_size">nla_total_size</a>(4) <b><i>/* IFLA_LINK */</i></b>
<a name=L781 href="source/net/core/rtnetlink.c#L781">781</a>                + <a href="ident?i=nla_total_size">nla_total_size</a>(4) <b><i>/* IFLA_MASTER */</i></b>
<a name=L782 href="source/net/core/rtnetlink.c#L782">782</a>                + <a href="ident?i=nla_total_size">nla_total_size</a>(1) <b><i>/* IFLA_OPERSTATE */</i></b>
<a name=L783 href="source/net/core/rtnetlink.c#L783">783</a>                + <a href="ident?i=nla_total_size">nla_total_size</a>(1) <b><i>/* IFLA_LINKMODE */</i></b>
<a name=L784 href="source/net/core/rtnetlink.c#L784">784</a>                + <a href="ident?i=nla_total_size">nla_total_size</a>(4) <b><i>/* IFLA_NUM_VF */</i></b>
<a name=L785 href="source/net/core/rtnetlink.c#L785">785</a>                + <a href="ident?i=rtnl_vfinfo_size">rtnl_vfinfo_size</a>(<a href="ident?i=dev">dev</a>) <b><i>/* IFLA_VFINFO_LIST */</i></b>
<a name=L786 href="source/net/core/rtnetlink.c#L786">786</a>                + <a href="ident?i=rtnl_port_size">rtnl_port_size</a>(<a href="ident?i=dev">dev</a>) <b><i>/* IFLA_VF_PORTS + IFLA_PORT_SELF */</i></b>
<a name=L787 href="source/net/core/rtnetlink.c#L787">787</a>                + <a href="ident?i=rtnl_link_get_size">rtnl_link_get_size</a>(<a href="ident?i=dev">dev</a>) <b><i>/* IFLA_LINKINFO */</i></b>
<a name=L788 href="source/net/core/rtnetlink.c#L788">788</a>                + <a href="ident?i=rtnl_link_get_af_size">rtnl_link_get_af_size</a>(<a href="ident?i=dev">dev</a>); <b><i>/* IFLA_AF_SPEC */</i></b>
<a name=L789 href="source/net/core/rtnetlink.c#L789">789</a> }
<a name=L790 href="source/net/core/rtnetlink.c#L790">790</a> 
<a name=L791 href="source/net/core/rtnetlink.c#L791">791</a> static int <a href="ident?i=rtnl_vf_ports_fill">rtnl_vf_ports_fill</a>(struct <a href="ident?i=sk_buff">sk_buff</a> *<a href="ident?i=skb">skb</a>, struct <a href="ident?i=net_device">net_device</a> *<a href="ident?i=dev">dev</a>)
<a name=L792 href="source/net/core/rtnetlink.c#L792">792</a> {
<a name=L793 href="source/net/core/rtnetlink.c#L793">793</a>         struct <a href="ident?i=nlattr">nlattr</a> *vf_ports;
<a name=L794 href="source/net/core/rtnetlink.c#L794">794</a>         struct <a href="ident?i=nlattr">nlattr</a> *vf_port;
<a name=L795 href="source/net/core/rtnetlink.c#L795">795</a>         int vf;
<a name=L796 href="source/net/core/rtnetlink.c#L796">796</a>         int <a href="ident?i=err">err</a>;
<a name=L797 href="source/net/core/rtnetlink.c#L797">797</a> 
<a name=L798 href="source/net/core/rtnetlink.c#L798">798</a>         vf_ports = <a href="ident?i=nla_nest_start">nla_nest_start</a>(<a href="ident?i=skb">skb</a>, IFLA_VF_PORTS);
<a name=L799 href="source/net/core/rtnetlink.c#L799">799</a>         if (!vf_ports)
<a name=L800 href="source/net/core/rtnetlink.c#L800">800</a>                 return -<a href="ident?i=EMSGSIZE">EMSGSIZE</a>;
<a name=L801 href="source/net/core/rtnetlink.c#L801">801</a> 
<a name=L802 href="source/net/core/rtnetlink.c#L802">802</a>         for (vf = 0; vf &lt; <a href="ident?i=dev_num_vf">dev_num_vf</a>(<a href="ident?i=dev">dev</a>-&gt;<a href="ident?i=dev">dev</a>.<a href="ident?i=parent">parent</a>); vf++) {
<a name=L803 href="source/net/core/rtnetlink.c#L803">803</a>                 vf_port = <a href="ident?i=nla_nest_start">nla_nest_start</a>(<a href="ident?i=skb">skb</a>, IFLA_VF_PORT);
<a name=L804 href="source/net/core/rtnetlink.c#L804">804</a>                 if (!vf_port)
<a name=L805 href="source/net/core/rtnetlink.c#L805">805</a>                         goto nla_put_failure;
<a name=L806 href="source/net/core/rtnetlink.c#L806">806</a>                 <a href="ident?i=NLA_PUT_U32">NLA_PUT_U32</a>(<a href="ident?i=skb">skb</a>, IFLA_PORT_VF, vf);
<a name=L807 href="source/net/core/rtnetlink.c#L807">807</a>                 <a href="ident?i=err">err</a> = <a href="ident?i=dev">dev</a>-&gt;<a href="ident?i=netdev_ops">netdev_ops</a>-&gt;ndo_get_vf_port(<a href="ident?i=dev">dev</a>, vf, <a href="ident?i=skb">skb</a>);
<a name=L808 href="source/net/core/rtnetlink.c#L808">808</a>                 if (<a href="ident?i=err">err</a> == -<a href="ident?i=EMSGSIZE">EMSGSIZE</a>)
<a name=L809 href="source/net/core/rtnetlink.c#L809">809</a>                         goto nla_put_failure;
<a name=L810 href="source/net/core/rtnetlink.c#L810">810</a>                 if (<a href="ident?i=err">err</a>) {
<a name=L811 href="source/net/core/rtnetlink.c#L811">811</a>                         <a href="ident?i=nla_nest_cancel">nla_nest_cancel</a>(<a href="ident?i=skb">skb</a>, vf_port);
<a name=L812 href="source/net/core/rtnetlink.c#L812">812</a>                         continue;
<a name=L813 href="source/net/core/rtnetlink.c#L813">813</a>                 }
<a name=L814 href="source/net/core/rtnetlink.c#L814">814</a>                 <a href="ident?i=nla_nest_end">nla_nest_end</a>(<a href="ident?i=skb">skb</a>, vf_port);
<a name=L815 href="source/net/core/rtnetlink.c#L815">815</a>         }
<a name=L816 href="source/net/core/rtnetlink.c#L816">816</a> 
<a name=L817 href="source/net/core/rtnetlink.c#L817">817</a>         <a href="ident?i=nla_nest_end">nla_nest_end</a>(<a href="ident?i=skb">skb</a>, vf_ports);
<a name=L818 href="source/net/core/rtnetlink.c#L818">818</a> 
<a name=L819 href="source/net/core/rtnetlink.c#L819">819</a>         return 0;
<a name=L820 href="source/net/core/rtnetlink.c#L820">820</a> 
<a name=L821 href="source/net/core/rtnetlink.c#L821">821</a> nla_put_failure:
<a name=L822 href="source/net/core/rtnetlink.c#L822">822</a>         <a href="ident?i=nla_nest_cancel">nla_nest_cancel</a>(<a href="ident?i=skb">skb</a>, vf_ports);
<a name=L823 href="source/net/core/rtnetlink.c#L823">823</a>         return -<a href="ident?i=EMSGSIZE">EMSGSIZE</a>;
<a name=L824 href="source/net/core/rtnetlink.c#L824">824</a> }
<a name=L825 href="source/net/core/rtnetlink.c#L825">825</a> 
<a name=L826 href="source/net/core/rtnetlink.c#L826">826</a> static int <a href="ident?i=rtnl_port_self_fill">rtnl_port_self_fill</a>(struct <a href="ident?i=sk_buff">sk_buff</a> *<a href="ident?i=skb">skb</a>, struct <a href="ident?i=net_device">net_device</a> *<a href="ident?i=dev">dev</a>)
<a name=L827 href="source/net/core/rtnetlink.c#L827">827</a> {
<a name=L828 href="source/net/core/rtnetlink.c#L828">828</a>         struct <a href="ident?i=nlattr">nlattr</a> *port_self;
<a name=L829 href="source/net/core/rtnetlink.c#L829">829</a>         int <a href="ident?i=err">err</a>;
<a name=L830 href="source/net/core/rtnetlink.c#L830">830</a> 
<a name=L831 href="source/net/core/rtnetlink.c#L831">831</a>         port_self = <a href="ident?i=nla_nest_start">nla_nest_start</a>(<a href="ident?i=skb">skb</a>, IFLA_PORT_SELF);
<a name=L832 href="source/net/core/rtnetlink.c#L832">832</a>         if (!port_self)
<a name=L833 href="source/net/core/rtnetlink.c#L833">833</a>                 return -<a href="ident?i=EMSGSIZE">EMSGSIZE</a>;
<a name=L834 href="source/net/core/rtnetlink.c#L834">834</a> 
<a name=L835 href="source/net/core/rtnetlink.c#L835">835</a>         <a href="ident?i=err">err</a> = <a href="ident?i=dev">dev</a>-&gt;<a href="ident?i=netdev_ops">netdev_ops</a>-&gt;ndo_get_vf_port(<a href="ident?i=dev">dev</a>, <a href="ident?i=PORT_SELF_VF">PORT_SELF_VF</a>, <a href="ident?i=skb">skb</a>);
<a name=L836 href="source/net/core/rtnetlink.c#L836">836</a>         if (<a href="ident?i=err">err</a>) {
<a name=L837 href="source/net/core/rtnetlink.c#L837">837</a>                 <a href="ident?i=nla_nest_cancel">nla_nest_cancel</a>(<a href="ident?i=skb">skb</a>, port_self);
<a name=L838 href="source/net/core/rtnetlink.c#L838">838</a>                 return (<a href="ident?i=err">err</a> == -<a href="ident?i=EMSGSIZE">EMSGSIZE</a>) ? <a href="ident?i=err">err</a> : 0;
<a name=L839 href="source/net/core/rtnetlink.c#L839">839</a>         }
<a name=L840 href="source/net/core/rtnetlink.c#L840">840</a> 
<a name=L841 href="source/net/core/rtnetlink.c#L841">841</a>         <a href="ident?i=nla_nest_end">nla_nest_end</a>(<a href="ident?i=skb">skb</a>, port_self);
<a name=L842 href="source/net/core/rtnetlink.c#L842">842</a> 
<a name=L843 href="source/net/core/rtnetlink.c#L843">843</a>         return 0;
<a name=L844 href="source/net/core/rtnetlink.c#L844">844</a> }
<a name=L845 href="source/net/core/rtnetlink.c#L845">845</a> 
<a name=L846 href="source/net/core/rtnetlink.c#L846">846</a> static int <a href="ident?i=rtnl_port_fill">rtnl_port_fill</a>(struct <a href="ident?i=sk_buff">sk_buff</a> *<a href="ident?i=skb">skb</a>, struct <a href="ident?i=net_device">net_device</a> *<a href="ident?i=dev">dev</a>)
<a name=L847 href="source/net/core/rtnetlink.c#L847">847</a> {
<a name=L848 href="source/net/core/rtnetlink.c#L848">848</a>         int <a href="ident?i=err">err</a>;
<a name=L849 href="source/net/core/rtnetlink.c#L849">849</a> 
<a name=L850 href="source/net/core/rtnetlink.c#L850">850</a>         if (!<a href="ident?i=dev">dev</a>-&gt;<a href="ident?i=netdev_ops">netdev_ops</a>-&gt;ndo_get_vf_port || !<a href="ident?i=dev">dev</a>-&gt;<a href="ident?i=dev">dev</a>.<a href="ident?i=parent">parent</a>)
<a name=L851 href="source/net/core/rtnetlink.c#L851">851</a>                 return 0;
<a name=L852 href="source/net/core/rtnetlink.c#L852">852</a> 
<a name=L853 href="source/net/core/rtnetlink.c#L853">853</a>         <a href="ident?i=err">err</a> = <a href="ident?i=rtnl_port_self_fill">rtnl_port_self_fill</a>(<a href="ident?i=skb">skb</a>, <a href="ident?i=dev">dev</a>);
<a name=L854 href="source/net/core/rtnetlink.c#L854">854</a>         if (<a href="ident?i=err">err</a>)
<a name=L855 href="source/net/core/rtnetlink.c#L855">855</a>                 return <a href="ident?i=err">err</a>;
<a name=L856 href="source/net/core/rtnetlink.c#L856">856</a> 
<a name=L857 href="source/net/core/rtnetlink.c#L857">857</a>         if (<a href="ident?i=dev_num_vf">dev_num_vf</a>(<a href="ident?i=dev">dev</a>-&gt;<a href="ident?i=dev">dev</a>.<a href="ident?i=parent">parent</a>)) {
<a name=L858 href="source/net/core/rtnetlink.c#L858">858</a>                 <a href="ident?i=err">err</a> = <a href="ident?i=rtnl_vf_ports_fill">rtnl_vf_ports_fill</a>(<a href="ident?i=skb">skb</a>, <a href="ident?i=dev">dev</a>);
<a name=L859 href="source/net/core/rtnetlink.c#L859">859</a>                 if (<a href="ident?i=err">err</a>)
<a name=L860 href="source/net/core/rtnetlink.c#L860">860</a>                         return <a href="ident?i=err">err</a>;
<a name=L861 href="source/net/core/rtnetlink.c#L861">861</a>         }
<a name=L862 href="source/net/core/rtnetlink.c#L862">862</a> 
<a name=L863 href="source/net/core/rtnetlink.c#L863">863</a>         return 0;
<a name=L864 href="source/net/core/rtnetlink.c#L864">864</a> }
<a name=L865 href="source/net/core/rtnetlink.c#L865">865</a> 
<a name=L866 href="source/net/core/rtnetlink.c#L866">866</a> static int <a href="ident?i=rtnl_fill_ifinfo">rtnl_fill_ifinfo</a>(struct <a href="ident?i=sk_buff">sk_buff</a> *<a href="ident?i=skb">skb</a>, struct <a href="ident?i=net_device">net_device</a> *<a href="ident?i=dev">dev</a>,
<a name=L867 href="source/net/core/rtnetlink.c#L867">867</a>                             int <a href="ident?i=type">type</a>, <a href="ident?i=u32">u32</a> <a href="ident?i=pid">pid</a>, <a href="ident?i=u32">u32</a> <a href="ident?i=seq">seq</a>, <a href="ident?i=u32">u32</a> <a href="ident?i=change">change</a>,
<a name=L868 href="source/net/core/rtnetlink.c#L868">868</a>                             unsigned int <a href="ident?i=flags">flags</a>)
<a name=L869 href="source/net/core/rtnetlink.c#L869">869</a> {
<a name=L870 href="source/net/core/rtnetlink.c#L870">870</a>         struct <a href="ident?i=ifinfomsg">ifinfomsg</a> *ifm;
<a name=L871 href="source/net/core/rtnetlink.c#L871">871</a>         struct <a href="ident?i=nlmsghdr">nlmsghdr</a> *nlh;
<a name=L872 href="source/net/core/rtnetlink.c#L872">872</a>         struct <a href="ident?i=rtnl_link_stats64">rtnl_link_stats64</a> <a href="ident?i=temp">temp</a>;
<a name=L873 href="source/net/core/rtnetlink.c#L873">873</a>         const struct <a href="ident?i=rtnl_link_stats64">rtnl_link_stats64</a> *<a href="ident?i=stats">stats</a>;
<a name=L874 href="source/net/core/rtnetlink.c#L874">874</a>         struct <a href="ident?i=nlattr">nlattr</a> *<a href="ident?i=attr">attr</a>, *af_spec;
<a name=L875 href="source/net/core/rtnetlink.c#L875">875</a>         struct <a href="ident?i=rtnl_af_ops">rtnl_af_ops</a> *af_ops;
<a name=L876 href="source/net/core/rtnetlink.c#L876">876</a> 
<a name=L877 href="source/net/core/rtnetlink.c#L877">877</a>         <a href="ident?i=ASSERT_RTNL">ASSERT_RTNL</a>();
<a name=L878 href="source/net/core/rtnetlink.c#L878">878</a>         nlh = <a href="ident?i=nlmsg_put">nlmsg_put</a>(<a href="ident?i=skb">skb</a>, <a href="ident?i=pid">pid</a>, <a href="ident?i=seq">seq</a>, <a href="ident?i=type">type</a>, sizeof(*ifm), <a href="ident?i=flags">flags</a>);
<a name=L879 href="source/net/core/rtnetlink.c#L879">879</a>         if (nlh == <a href="ident?i=NULL">NULL</a>)
<a name=L880 href="source/net/core/rtnetlink.c#L880">880</a>                 return -<a href="ident?i=EMSGSIZE">EMSGSIZE</a>;
<a name=L881 href="source/net/core/rtnetlink.c#L881">881</a> 
<a name=L882 href="source/net/core/rtnetlink.c#L882">882</a>         ifm = <a href="ident?i=nlmsg_data">nlmsg_data</a>(nlh);
<a name=L883 href="source/net/core/rtnetlink.c#L883">883</a>         ifm-&gt;ifi_family = <a href="ident?i=AF_UNSPEC">AF_UNSPEC</a>;
<a name=L884 href="source/net/core/rtnetlink.c#L884">884</a>         ifm-&gt;__ifi_pad = 0;
<a name=L885 href="source/net/core/rtnetlink.c#L885">885</a>         ifm-&gt;ifi_type = <a href="ident?i=dev">dev</a>-&gt;<a href="ident?i=type">type</a>;
<a name=L886 href="source/net/core/rtnetlink.c#L886">886</a>         ifm-&gt;ifi_index = <a href="ident?i=dev">dev</a>-&gt;ifindex;
<a name=L887 href="source/net/core/rtnetlink.c#L887">887</a>         ifm-&gt;ifi_flags = <a href="ident?i=dev_get_flags">dev_get_flags</a>(<a href="ident?i=dev">dev</a>);
<a name=L888 href="source/net/core/rtnetlink.c#L888">888</a>         ifm-&gt;ifi_change = <a href="ident?i=change">change</a>;
<a name=L889 href="source/net/core/rtnetlink.c#L889">889</a> 
<a name=L890 href="source/net/core/rtnetlink.c#L890">890</a>         <a href="ident?i=NLA_PUT_STRING">NLA_PUT_STRING</a>(<a href="ident?i=skb">skb</a>, IFLA_IFNAME, <a href="ident?i=dev">dev</a>-&gt;<a href="ident?i=name">name</a>);
<a name=L891 href="source/net/core/rtnetlink.c#L891">891</a>         <a href="ident?i=NLA_PUT_U32">NLA_PUT_U32</a>(<a href="ident?i=skb">skb</a>, <a href="ident?i=IFLA_TXQLEN">IFLA_TXQLEN</a>, <a href="ident?i=dev">dev</a>-&gt;tx_queue_len);
<a name=L892 href="source/net/core/rtnetlink.c#L892">892</a>         <a href="ident?i=NLA_PUT_U8">NLA_PUT_U8</a>(<a href="ident?i=skb">skb</a>, IFLA_OPERSTATE,
<a name=L893 href="source/net/core/rtnetlink.c#L893">893</a>                    <a href="ident?i=netif_running">netif_running</a>(<a href="ident?i=dev">dev</a>) ? <a href="ident?i=dev">dev</a>-&gt;operstate : IF_OPER_DOWN);
<a name=L894 href="source/net/core/rtnetlink.c#L894">894</a>         <a href="ident?i=NLA_PUT_U8">NLA_PUT_U8</a>(<a href="ident?i=skb">skb</a>, IFLA_LINKMODE, <a href="ident?i=dev">dev</a>-&gt;<a href="ident?i=link_mode">link_mode</a>);
<a name=L895 href="source/net/core/rtnetlink.c#L895">895</a>         <a href="ident?i=NLA_PUT_U32">NLA_PUT_U32</a>(<a href="ident?i=skb">skb</a>, IFLA_MTU, <a href="ident?i=dev">dev</a>-&gt;<a href="ident?i=mtu">mtu</a>);
<a name=L896 href="source/net/core/rtnetlink.c#L896">896</a>         <a href="ident?i=NLA_PUT_U32">NLA_PUT_U32</a>(<a href="ident?i=skb">skb</a>, IFLA_GROUP, <a href="ident?i=dev">dev</a>-&gt;<a href="ident?i=group">group</a>);
<a name=L897 href="source/net/core/rtnetlink.c#L897">897</a> 
<a name=L898 href="source/net/core/rtnetlink.c#L898">898</a>         if (<a href="ident?i=dev">dev</a>-&gt;ifindex != <a href="ident?i=dev">dev</a>-&gt;iflink)
<a name=L899 href="source/net/core/rtnetlink.c#L899">899</a>                 <a href="ident?i=NLA_PUT_U32">NLA_PUT_U32</a>(<a href="ident?i=skb">skb</a>, IFLA_LINK, <a href="ident?i=dev">dev</a>-&gt;iflink);
<a name=L900 href="source/net/core/rtnetlink.c#L900">900</a> 
<a name=L901 href="source/net/core/rtnetlink.c#L901">901</a>         if (<a href="ident?i=dev">dev</a>-&gt;<a href="ident?i=master">master</a>)
<a name=L902 href="source/net/core/rtnetlink.c#L902">902</a>                 <a href="ident?i=NLA_PUT_U32">NLA_PUT_U32</a>(<a href="ident?i=skb">skb</a>, <a href="ident?i=IFLA_MASTER">IFLA_MASTER</a>, <a href="ident?i=dev">dev</a>-&gt;<a href="ident?i=master">master</a>-&gt;ifindex);
<a name=L903 href="source/net/core/rtnetlink.c#L903">903</a> 
<a name=L904 href="source/net/core/rtnetlink.c#L904">904</a>         if (<a href="ident?i=dev">dev</a>-&gt;qdisc)
<a name=L905 href="source/net/core/rtnetlink.c#L905">905</a>                 <a href="ident?i=NLA_PUT_STRING">NLA_PUT_STRING</a>(<a href="ident?i=skb">skb</a>, IFLA_QDISC, <a href="ident?i=dev">dev</a>-&gt;qdisc-&gt;<a href="ident?i=ops">ops</a>-&gt;<a href="ident?i=id">id</a>);
<a name=L906 href="source/net/core/rtnetlink.c#L906">906</a> 
<a name=L907 href="source/net/core/rtnetlink.c#L907">907</a>         if (<a href="ident?i=dev">dev</a>-&gt;ifalias)
<a name=L908 href="source/net/core/rtnetlink.c#L908">908</a>                 <a href="ident?i=NLA_PUT_STRING">NLA_PUT_STRING</a>(<a href="ident?i=skb">skb</a>, IFLA_IFALIAS, <a href="ident?i=dev">dev</a>-&gt;ifalias);
<a name=L909 href="source/net/core/rtnetlink.c#L909">909</a> 
<a name=L910 href="source/net/core/rtnetlink.c#L910">910</a>         if (1) {
<a name=L911 href="source/net/core/rtnetlink.c#L911">911</a>                 struct <a href="ident?i=rtnl_link_ifmap">rtnl_link_ifmap</a> <a href="ident?i=map">map</a> = {
<a name=L912 href="source/net/core/rtnetlink.c#L912">912</a>                         .<a href="ident?i=mem_start">mem_start</a>   = <a href="ident?i=dev">dev</a>-&gt;<a href="ident?i=mem_start">mem_start</a>,
<a name=L913 href="source/net/core/rtnetlink.c#L913">913</a>                         .<a href="ident?i=mem_end">mem_end</a>     = <a href="ident?i=dev">dev</a>-&gt;<a href="ident?i=mem_end">mem_end</a>,
<a name=L914 href="source/net/core/rtnetlink.c#L914">914</a>                         .<a href="ident?i=base_addr">base_addr</a>   = <a href="ident?i=dev">dev</a>-&gt;<a href="ident?i=base_addr">base_addr</a>,
<a name=L915 href="source/net/core/rtnetlink.c#L915">915</a>                         .<a href="ident?i=irq">irq</a>         = <a href="ident?i=dev">dev</a>-&gt;<a href="ident?i=irq">irq</a>,
<a name=L916 href="source/net/core/rtnetlink.c#L916">916</a>                         .<a href="ident?i=dma">dma</a>         = <a href="ident?i=dev">dev</a>-&gt;<a href="ident?i=dma">dma</a>,
<a name=L917 href="source/net/core/rtnetlink.c#L917">917</a>                         .<a href="ident?i=port">port</a>        = <a href="ident?i=dev">dev</a>-&gt;if_port,
<a name=L918 href="source/net/core/rtnetlink.c#L918">918</a>                 };
<a name=L919 href="source/net/core/rtnetlink.c#L919">919</a>                 <a href="ident?i=NLA_PUT">NLA_PUT</a>(<a href="ident?i=skb">skb</a>, <a href="ident?i=IFLA_MAP">IFLA_MAP</a>, sizeof(<a href="ident?i=map">map</a>), &amp;<a href="ident?i=map">map</a>);
<a name=L920 href="source/net/core/rtnetlink.c#L920">920</a>         }
<a name=L921 href="source/net/core/rtnetlink.c#L921">921</a> 
<a name=L922 href="source/net/core/rtnetlink.c#L922">922</a>         if (<a href="ident?i=dev">dev</a>-&gt;addr_len) {
<a name=L923 href="source/net/core/rtnetlink.c#L923">923</a>                 <a href="ident?i=NLA_PUT">NLA_PUT</a>(<a href="ident?i=skb">skb</a>, IFLA_ADDRESS, <a href="ident?i=dev">dev</a>-&gt;addr_len, <a href="ident?i=dev">dev</a>-&gt;<a href="ident?i=dev_addr">dev_addr</a>);
<a name=L924 href="source/net/core/rtnetlink.c#L924">924</a>                 <a href="ident?i=NLA_PUT">NLA_PUT</a>(<a href="ident?i=skb">skb</a>, IFLA_BROADCAST, <a href="ident?i=dev">dev</a>-&gt;addr_len, <a href="ident?i=dev">dev</a>-&gt;<a href="ident?i=broadcast">broadcast</a>);
<a name=L925 href="source/net/core/rtnetlink.c#L925">925</a>         }
<a name=L926 href="source/net/core/rtnetlink.c#L926">926</a> 
<a name=L927 href="source/net/core/rtnetlink.c#L927">927</a>         <a href="ident?i=attr">attr</a> = <a href="ident?i=nla_reserve">nla_reserve</a>(<a href="ident?i=skb">skb</a>, IFLA_STATS,
<a name=L928 href="source/net/core/rtnetlink.c#L928">928</a>                         sizeof(struct <a href="ident?i=rtnl_link_stats">rtnl_link_stats</a>));
<a name=L929 href="source/net/core/rtnetlink.c#L929">929</a>         if (<a href="ident?i=attr">attr</a> == <a href="ident?i=NULL">NULL</a>)
<a name=L930 href="source/net/core/rtnetlink.c#L930">930</a>                 goto nla_put_failure;
<a name=L931 href="source/net/core/rtnetlink.c#L931">931</a> 
<a name=L932 href="source/net/core/rtnetlink.c#L932">932</a>         <a href="ident?i=stats">stats</a> = <a href="ident?i=dev_get_stats">dev_get_stats</a>(<a href="ident?i=dev">dev</a>, &amp;<a href="ident?i=temp">temp</a>);
<a name=L933 href="source/net/core/rtnetlink.c#L933">933</a>         <a href="ident?i=copy_rtnl_link_stats">copy_rtnl_link_stats</a>(<a href="ident?i=nla_data">nla_data</a>(<a href="ident?i=attr">attr</a>), <a href="ident?i=stats">stats</a>);
<a name=L934 href="source/net/core/rtnetlink.c#L934">934</a> 
<a name=L935 href="source/net/core/rtnetlink.c#L935">935</a>         <a href="ident?i=attr">attr</a> = <a href="ident?i=nla_reserve">nla_reserve</a>(<a href="ident?i=skb">skb</a>, IFLA_STATS64,
<a name=L936 href="source/net/core/rtnetlink.c#L936">936</a>                         sizeof(struct <a href="ident?i=rtnl_link_stats64">rtnl_link_stats64</a>));
<a name=L937 href="source/net/core/rtnetlink.c#L937">937</a>         if (<a href="ident?i=attr">attr</a> == <a href="ident?i=NULL">NULL</a>)
<a name=L938 href="source/net/core/rtnetlink.c#L938">938</a>                 goto nla_put_failure;
<a name=L939 href="source/net/core/rtnetlink.c#L939">939</a>         <a href="ident?i=copy_rtnl_link_stats64">copy_rtnl_link_stats64</a>(<a href="ident?i=nla_data">nla_data</a>(<a href="ident?i=attr">attr</a>), <a href="ident?i=stats">stats</a>);
<a name=L940 href="source/net/core/rtnetlink.c#L940">940</a> 
<a name=L941 href="source/net/core/rtnetlink.c#L941">941</a>         if (<a href="ident?i=dev">dev</a>-&gt;<a href="ident?i=dev">dev</a>.<a href="ident?i=parent">parent</a>)
<a name=L942 href="source/net/core/rtnetlink.c#L942">942</a>                 <a href="ident?i=NLA_PUT_U32">NLA_PUT_U32</a>(<a href="ident?i=skb">skb</a>, IFLA_NUM_VF, <a href="ident?i=dev_num_vf">dev_num_vf</a>(<a href="ident?i=dev">dev</a>-&gt;<a href="ident?i=dev">dev</a>.<a href="ident?i=parent">parent</a>));
<a name=L943 href="source/net/core/rtnetlink.c#L943">943</a> 
<a name=L944 href="source/net/core/rtnetlink.c#L944">944</a>         if (<a href="ident?i=dev">dev</a>-&gt;<a href="ident?i=netdev_ops">netdev_ops</a>-&gt;ndo_get_vf_config &amp;&amp; <a href="ident?i=dev">dev</a>-&gt;<a href="ident?i=dev">dev</a>.<a href="ident?i=parent">parent</a>) {
<a name=L945 href="source/net/core/rtnetlink.c#L945">945</a>                 int <a href="ident?i=i">i</a>;
<a name=L946 href="source/net/core/rtnetlink.c#L946">946</a> 
<a name=L947 href="source/net/core/rtnetlink.c#L947">947</a>                 struct <a href="ident?i=nlattr">nlattr</a> *vfinfo, *vf;
<a name=L948 href="source/net/core/rtnetlink.c#L948">948</a>                 int <a href="ident?i=num_vfs">num_vfs</a> = <a href="ident?i=dev_num_vf">dev_num_vf</a>(<a href="ident?i=dev">dev</a>-&gt;<a href="ident?i=dev">dev</a>.<a href="ident?i=parent">parent</a>);
<a name=L949 href="source/net/core/rtnetlink.c#L949">949</a> 
<a name=L950 href="source/net/core/rtnetlink.c#L950">950</a>                 vfinfo = <a href="ident?i=nla_nest_start">nla_nest_start</a>(<a href="ident?i=skb">skb</a>, IFLA_VFINFO_LIST);
<a name=L951 href="source/net/core/rtnetlink.c#L951">951</a>                 if (!vfinfo)
<a name=L952 href="source/net/core/rtnetlink.c#L952">952</a>                         goto nla_put_failure;
<a name=L953 href="source/net/core/rtnetlink.c#L953">953</a>                 for (<a href="ident?i=i">i</a> = 0; <a href="ident?i=i">i</a> &lt; <a href="ident?i=num_vfs">num_vfs</a>; <a href="ident?i=i">i</a>++) {
<a name=L954 href="source/net/core/rtnetlink.c#L954">954</a>                         struct <a href="ident?i=ifla_vf_info">ifla_vf_info</a> ivi;
<a name=L955 href="source/net/core/rtnetlink.c#L955">955</a>                         struct <a href="ident?i=ifla_vf_mac">ifla_vf_mac</a> vf_mac;
<a name=L956 href="source/net/core/rtnetlink.c#L956">956</a>                         struct <a href="ident?i=ifla_vf_vlan">ifla_vf_vlan</a> vf_vlan;
<a name=L957 href="source/net/core/rtnetlink.c#L957">957</a>                         struct <a href="ident?i=ifla_vf_tx_rate">ifla_vf_tx_rate</a> vf_tx_rate;
<a name=L958 href="source/net/core/rtnetlink.c#L958">958</a>                         struct <a href="ident?i=ifla_vf_spoofchk">ifla_vf_spoofchk</a> vf_spoofchk;
<a name=L959 href="source/net/core/rtnetlink.c#L959">959</a> 
<a name=L960 href="source/net/core/rtnetlink.c#L960">960</a>                         <b><i>/*</i></b>
<a name=L961 href="source/net/core/rtnetlink.c#L961">961</a> <b><i>                         * Not all SR-IOV capable drivers support the</i></b>
<a name=L962 href="source/net/core/rtnetlink.c#L962">962</a> <b><i>                         * spoofcheck query.  Preset to -1 so the user</i></b>
<a name=L963 href="source/net/core/rtnetlink.c#L963">963</a> <b><i>                         * space tool can detect that the driver didn't</i></b>
<a name=L964 href="source/net/core/rtnetlink.c#L964">964</a> <b><i>                         * report anything.</i></b>
<a name=L965 href="source/net/core/rtnetlink.c#L965">965</a> <b><i>                         */</i></b>
<a name=L966 href="source/net/core/rtnetlink.c#L966">966</a>                         ivi.spoofchk = -1;
<a name=L967 href="source/net/core/rtnetlink.c#L967">967</a>                         if (<a href="ident?i=dev">dev</a>-&gt;<a href="ident?i=netdev_ops">netdev_ops</a>-&gt;ndo_get_vf_config(<a href="ident?i=dev">dev</a>, <a href="ident?i=i">i</a>, &amp;ivi))
<a name=L968 href="source/net/core/rtnetlink.c#L968">968</a>                                 break;
<a name=L969 href="source/net/core/rtnetlink.c#L969">969</a>                         vf_mac.vf =
<a name=L970 href="source/net/core/rtnetlink.c#L970">970</a>                                 vf_vlan.vf =
<a name=L971 href="source/net/core/rtnetlink.c#L971">971</a>                                 vf_tx_rate.vf =
<a name=L972 href="source/net/core/rtnetlink.c#L972">972</a>                                 vf_spoofchk.vf = ivi.vf;
<a name=L973 href="source/net/core/rtnetlink.c#L973">973</a> 
<a name=L974 href="source/net/core/rtnetlink.c#L974">974</a>                         <a href="ident?i=memcpy">memcpy</a>(vf_mac.<a href="ident?i=mac">mac</a>, ivi.<a href="ident?i=mac">mac</a>, sizeof(ivi.<a href="ident?i=mac">mac</a>));
<a name=L975 href="source/net/core/rtnetlink.c#L975">975</a>                         vf_vlan.<a href="ident?i=vlan">vlan</a> = ivi.<a href="ident?i=vlan">vlan</a>;
<a name=L976 href="source/net/core/rtnetlink.c#L976">976</a>                         vf_vlan.qos = ivi.qos;
<a name=L977 href="source/net/core/rtnetlink.c#L977">977</a>                         vf_tx_rate.<a href="ident?i=rate">rate</a> = ivi.tx_rate;
<a name=L978 href="source/net/core/rtnetlink.c#L978">978</a>                         vf_spoofchk.setting = ivi.spoofchk;
<a name=L979 href="source/net/core/rtnetlink.c#L979">979</a>                         vf = <a href="ident?i=nla_nest_start">nla_nest_start</a>(<a href="ident?i=skb">skb</a>, IFLA_VF_INFO);
<a name=L980 href="source/net/core/rtnetlink.c#L980">980</a>                         if (!vf) {
<a name=L981 href="source/net/core/rtnetlink.c#L981">981</a>                                 <a href="ident?i=nla_nest_cancel">nla_nest_cancel</a>(<a href="ident?i=skb">skb</a>, vfinfo);
<a name=L982 href="source/net/core/rtnetlink.c#L982">982</a>                                 goto nla_put_failure;
<a name=L983 href="source/net/core/rtnetlink.c#L983">983</a>                         }
<a name=L984 href="source/net/core/rtnetlink.c#L984">984</a>                         <a href="ident?i=NLA_PUT">NLA_PUT</a>(<a href="ident?i=skb">skb</a>, IFLA_VF_MAC, sizeof(vf_mac), &amp;vf_mac);
<a name=L985 href="source/net/core/rtnetlink.c#L985">985</a>                         <a href="ident?i=NLA_PUT">NLA_PUT</a>(<a href="ident?i=skb">skb</a>, IFLA_VF_VLAN, sizeof(vf_vlan), &amp;vf_vlan);
<a name=L986 href="source/net/core/rtnetlink.c#L986">986</a>                         <a href="ident?i=NLA_PUT">NLA_PUT</a>(<a href="ident?i=skb">skb</a>, IFLA_VF_TX_RATE, sizeof(vf_tx_rate),
<a name=L987 href="source/net/core/rtnetlink.c#L987">987</a>                                 &amp;vf_tx_rate);
<a name=L988 href="source/net/core/rtnetlink.c#L988">988</a>                         <a href="ident?i=NLA_PUT">NLA_PUT</a>(<a href="ident?i=skb">skb</a>, IFLA_VF_SPOOFCHK, sizeof(vf_spoofchk),
<a name=L989 href="source/net/core/rtnetlink.c#L989">989</a>                                 &amp;vf_spoofchk);
<a name=L990 href="source/net/core/rtnetlink.c#L990">990</a>                         <a href="ident?i=nla_nest_end">nla_nest_end</a>(<a href="ident?i=skb">skb</a>, vf);
<a name=L991 href="source/net/core/rtnetlink.c#L991">991</a>                 }
<a name=L992 href="source/net/core/rtnetlink.c#L992">992</a>                 <a href="ident?i=nla_nest_end">nla_nest_end</a>(<a href="ident?i=skb">skb</a>, vfinfo);
<a name=L993 href="source/net/core/rtnetlink.c#L993">993</a>         }
<a name=L994 href="source/net/core/rtnetlink.c#L994">994</a> 
<a name=L995 href="source/net/core/rtnetlink.c#L995">995</a>         if (<a href="ident?i=rtnl_port_fill">rtnl_port_fill</a>(<a href="ident?i=skb">skb</a>, <a href="ident?i=dev">dev</a>))
<a name=L996 href="source/net/core/rtnetlink.c#L996">996</a>                 goto nla_put_failure;
<a name=L997 href="source/net/core/rtnetlink.c#L997">997</a> 
<a name=L998 href="source/net/core/rtnetlink.c#L998">998</a>         if (<a href="ident?i=dev">dev</a>-&gt;<a href="ident?i=rtnl_link_ops">rtnl_link_ops</a>) {
<a name=L999 href="source/net/core/rtnetlink.c#L999">999</a>                 if (<a href="ident?i=rtnl_link_fill">rtnl_link_fill</a>(<a href="ident?i=skb">skb</a>, <a href="ident?i=dev">dev</a>) &lt; 0)
<a name=L1000 href="source/net/core/rtnetlink.c#L1000">1000</a>                         goto nla_put_failure;
<a name=L1001 href="source/net/core/rtnetlink.c#L1001">1001</a>         }
<a name=L1002 href="source/net/core/rtnetlink.c#L1002">1002</a> 
<a name=L1003 href="source/net/core/rtnetlink.c#L1003">1003</a>         if (!(af_spec = <a href="ident?i=nla_nest_start">nla_nest_start</a>(<a href="ident?i=skb">skb</a>, IFLA_AF_SPEC)))
<a name=L1004 href="source/net/core/rtnetlink.c#L1004">1004</a>                 goto nla_put_failure;
<a name=L1005 href="source/net/core/rtnetlink.c#L1005">1005</a> 
<a name=L1006 href="source/net/core/rtnetlink.c#L1006">1006</a>         <a href="ident?i=list_for_each_entry">list_for_each_entry</a>(af_ops, &amp;<a href="ident?i=rtnl_af_ops">rtnl_af_ops</a>, <a href="ident?i=list">list</a>) {
<a name=L1007 href="source/net/core/rtnetlink.c#L1007">1007</a>                 if (af_ops-&gt;fill_link_af) {
<a name=L1008 href="source/net/core/rtnetlink.c#L1008">1008</a>                         struct <a href="ident?i=nlattr">nlattr</a> *af;
<a name=L1009 href="source/net/core/rtnetlink.c#L1009">1009</a>                         int <a href="ident?i=err">err</a>;
<a name=L1010 href="source/net/core/rtnetlink.c#L1010">1010</a> 
<a name=L1011 href="source/net/core/rtnetlink.c#L1011">1011</a>                         if (!(af = <a href="ident?i=nla_nest_start">nla_nest_start</a>(<a href="ident?i=skb">skb</a>, af_ops-&gt;<a href="ident?i=family">family</a>)))
<a name=L1012 href="source/net/core/rtnetlink.c#L1012">1012</a>                                 goto nla_put_failure;
<a name=L1013 href="source/net/core/rtnetlink.c#L1013">1013</a> 
<a name=L1014 href="source/net/core/rtnetlink.c#L1014">1014</a>                         <a href="ident?i=err">err</a> = af_ops-&gt;fill_link_af(<a href="ident?i=skb">skb</a>, <a href="ident?i=dev">dev</a>);
<a name=L1015 href="source/net/core/rtnetlink.c#L1015">1015</a> 
<a name=L1016 href="source/net/core/rtnetlink.c#L1016">1016</a>                         <b><i>/*</i></b>
<a name=L1017 href="source/net/core/rtnetlink.c#L1017">1017</a> <b><i>                         * Caller may return ENODATA to indicate that there</i></b>
<a name=L1018 href="source/net/core/rtnetlink.c#L1018">1018</a> <b><i>                         * was no data to be dumped. This is not an error, it</i></b>
<a name=L1019 href="source/net/core/rtnetlink.c#L1019">1019</a> <b><i>                         * means we should trim the attribute header and</i></b>
<a name=L1020 href="source/net/core/rtnetlink.c#L1020">1020</a> <b><i>                         * continue.</i></b>
<a name=L1021 href="source/net/core/rtnetlink.c#L1021">1021</a> <b><i>                         */</i></b>
<a name=L1022 href="source/net/core/rtnetlink.c#L1022">1022</a>                         if (<a href="ident?i=err">err</a> == -<a href="ident?i=ENODATA">ENODATA</a>)
<a name=L1023 href="source/net/core/rtnetlink.c#L1023">1023</a>                                 <a href="ident?i=nla_nest_cancel">nla_nest_cancel</a>(<a href="ident?i=skb">skb</a>, af);
<a name=L1024 href="source/net/core/rtnetlink.c#L1024">1024</a>                         else if (<a href="ident?i=err">err</a> &lt; 0)
<a name=L1025 href="source/net/core/rtnetlink.c#L1025">1025</a>                                 goto nla_put_failure;
<a name=L1026 href="source/net/core/rtnetlink.c#L1026">1026</a> 
<a name=L1027 href="source/net/core/rtnetlink.c#L1027">1027</a>                         <a href="ident?i=nla_nest_end">nla_nest_end</a>(<a href="ident?i=skb">skb</a>, af);
<a name=L1028 href="source/net/core/rtnetlink.c#L1028">1028</a>                 }
<a name=L1029 href="source/net/core/rtnetlink.c#L1029">1029</a>         }
<a name=L1030 href="source/net/core/rtnetlink.c#L1030">1030</a> 
<a name=L1031 href="source/net/core/rtnetlink.c#L1031">1031</a>         <a href="ident?i=nla_nest_end">nla_nest_end</a>(<a href="ident?i=skb">skb</a>, af_spec);
<a name=L1032 href="source/net/core/rtnetlink.c#L1032">1032</a> 
<a name=L1033 href="source/net/core/rtnetlink.c#L1033">1033</a>         return <a href="ident?i=nlmsg_end">nlmsg_end</a>(<a href="ident?i=skb">skb</a>, nlh);
<a name=L1034 href="source/net/core/rtnetlink.c#L1034">1034</a> 
<a name=L1035 href="source/net/core/rtnetlink.c#L1035">1035</a> nla_put_failure:
<a name=L1036 href="source/net/core/rtnetlink.c#L1036">1036</a>         <a href="ident?i=nlmsg_cancel">nlmsg_cancel</a>(<a href="ident?i=skb">skb</a>, nlh);
<a name=L1037 href="source/net/core/rtnetlink.c#L1037">1037</a>         return -<a href="ident?i=EMSGSIZE">EMSGSIZE</a>;
<a name=L1038 href="source/net/core/rtnetlink.c#L1038">1038</a> }
<a name=L1039 href="source/net/core/rtnetlink.c#L1039">1039</a> 
<a name=L1040 href="source/net/core/rtnetlink.c#L1040">1040</a> static int <a href="ident?i=rtnl_dump_ifinfo">rtnl_dump_ifinfo</a>(struct <a href="ident?i=sk_buff">sk_buff</a> *<a href="ident?i=skb">skb</a>, struct <a href="ident?i=netlink_callback">netlink_callback</a> *<a href="ident?i=cb">cb</a>)
<a name=L1041 href="source/net/core/rtnetlink.c#L1041">1041</a> {
<a name=L1042 href="source/net/core/rtnetlink.c#L1042">1042</a>         struct <a href="ident?i=net">net</a> *<a href="ident?i=net">net</a> = <a href="ident?i=sock_net">sock_net</a>(<a href="ident?i=skb">skb</a>-&gt;sk);
<a name=L1043 href="source/net/core/rtnetlink.c#L1043">1043</a>         int <a href="ident?i=h">h</a>, s_h;
<a name=L1044 href="source/net/core/rtnetlink.c#L1044">1044</a>         int <a href="ident?i=idx">idx</a> = 0, s_idx;
<a name=L1045 href="source/net/core/rtnetlink.c#L1045">1045</a>         struct <a href="ident?i=net_device">net_device</a> *<a href="ident?i=dev">dev</a>;
<a name=L1046 href="source/net/core/rtnetlink.c#L1046">1046</a>         struct <a href="ident?i=hlist_head">hlist_head</a> *<a href="ident?i=head">head</a>;
<a name=L1047 href="source/net/core/rtnetlink.c#L1047">1047</a>         struct <a href="ident?i=hlist_node">hlist_node</a> *<a href="ident?i=node">node</a>;
<a name=L1048 href="source/net/core/rtnetlink.c#L1048">1048</a> 
<a name=L1049 href="source/net/core/rtnetlink.c#L1049">1049</a>         s_h = <a href="ident?i=cb">cb</a>-&gt;<a href="ident?i=args">args</a>[0];
<a name=L1050 href="source/net/core/rtnetlink.c#L1050">1050</a>         s_idx = <a href="ident?i=cb">cb</a>-&gt;<a href="ident?i=args">args</a>[1];
<a name=L1051 href="source/net/core/rtnetlink.c#L1051">1051</a> 
<a name=L1052 href="source/net/core/rtnetlink.c#L1052">1052</a>         <a href="ident?i=rcu_read_lock">rcu_read_lock</a>();
<a name=L1053 href="source/net/core/rtnetlink.c#L1053">1053</a>         <a href="ident?i=cb">cb</a>-&gt;<a href="ident?i=seq">seq</a> = <a href="ident?i=net">net</a>-&gt;dev_base_seq;
<a name=L1054 href="source/net/core/rtnetlink.c#L1054">1054</a> 
<a name=L1055 href="source/net/core/rtnetlink.c#L1055">1055</a>         for (<a href="ident?i=h">h</a> = s_h; <a href="ident?i=h">h</a> &lt; <a href="ident?i=NETDEV_HASHENTRIES">NETDEV_HASHENTRIES</a>; <a href="ident?i=h">h</a>++, s_idx = 0) {
<a name=L1056 href="source/net/core/rtnetlink.c#L1056">1056</a>                 <a href="ident?i=idx">idx</a> = 0;
<a name=L1057 href="source/net/core/rtnetlink.c#L1057">1057</a>                 <a href="ident?i=head">head</a> = &amp;<a href="ident?i=net">net</a>-&gt;dev_index_head[<a href="ident?i=h">h</a>];
<a name=L1058 href="source/net/core/rtnetlink.c#L1058">1058</a>                 <a href="ident?i=hlist_for_each_entry_rcu">hlist_for_each_entry_rcu</a>(<a href="ident?i=dev">dev</a>, <a href="ident?i=node">node</a>, <a href="ident?i=head">head</a>, index_hlist) {
<a name=L1059 href="source/net/core/rtnetlink.c#L1059">1059</a>                         if (<a href="ident?i=idx">idx</a> &lt; s_idx)
<a name=L1060 href="source/net/core/rtnetlink.c#L1060">1060</a>                                 goto <a href="ident?i=cont">cont</a>;
<a name=L1061 href="source/net/core/rtnetlink.c#L1061">1061</a>                         if (<a href="ident?i=rtnl_fill_ifinfo">rtnl_fill_ifinfo</a>(<a href="ident?i=skb">skb</a>, <a href="ident?i=dev">dev</a>, <a href="ident?i=RTM_NEWLINK">RTM_NEWLINK</a>,
<a name=L1062 href="source/net/core/rtnetlink.c#L1062">1062</a>                                              <a href="ident?i=NETLINK_CB">NETLINK_CB</a>(<a href="ident?i=cb">cb</a>-&gt;<a href="ident?i=skb">skb</a>).<a href="ident?i=pid">pid</a>,
<a name=L1063 href="source/net/core/rtnetlink.c#L1063">1063</a>                                              <a href="ident?i=cb">cb</a>-&gt;nlh-&gt;nlmsg_seq, 0,
<a name=L1064 href="source/net/core/rtnetlink.c#L1064">1064</a>                                              <a href="ident?i=NLM_F_MULTI">NLM_F_MULTI</a>) &lt;= 0)
<a name=L1065 href="source/net/core/rtnetlink.c#L1065">1065</a>                                 goto <a href="ident?i=out">out</a>;
<a name=L1066 href="source/net/core/rtnetlink.c#L1066">1066</a> 
<a name=L1067 href="source/net/core/rtnetlink.c#L1067">1067</a>                         <a href="ident?i=nl_dump_check_consistent">nl_dump_check_consistent</a>(<a href="ident?i=cb">cb</a>, <a href="ident?i=nlmsg_hdr">nlmsg_hdr</a>(<a href="ident?i=skb">skb</a>));
<a name=L1068 href="source/net/core/rtnetlink.c#L1068">1068</a> <a href="ident?i=cont">cont</a>:
<a name=L1069 href="source/net/core/rtnetlink.c#L1069">1069</a>                         <a href="ident?i=idx">idx</a>++;
<a name=L1070 href="source/net/core/rtnetlink.c#L1070">1070</a>                 }
<a name=L1071 href="source/net/core/rtnetlink.c#L1071">1071</a>         }
<a name=L1072 href="source/net/core/rtnetlink.c#L1072">1072</a> <a href="ident?i=out">out</a>:
<a name=L1073 href="source/net/core/rtnetlink.c#L1073">1073</a>         <a href="ident?i=rcu_read_unlock">rcu_read_unlock</a>();
<a name=L1074 href="source/net/core/rtnetlink.c#L1074">1074</a>         <a href="ident?i=cb">cb</a>-&gt;<a href="ident?i=args">args</a>[1] = <a href="ident?i=idx">idx</a>;
<a name=L1075 href="source/net/core/rtnetlink.c#L1075">1075</a>         <a href="ident?i=cb">cb</a>-&gt;<a href="ident?i=args">args</a>[0] = <a href="ident?i=h">h</a>;
<a name=L1076 href="source/net/core/rtnetlink.c#L1076">1076</a> 
<a name=L1077 href="source/net/core/rtnetlink.c#L1077">1077</a>         return <a href="ident?i=skb">skb</a>-&gt;<a href="ident?i=len">len</a>;
<a name=L1078 href="source/net/core/rtnetlink.c#L1078">1078</a> }
<a name=L1079 href="source/net/core/rtnetlink.c#L1079">1079</a> 
<a name=L1080 href="source/net/core/rtnetlink.c#L1080">1080</a> const struct <a href="ident?i=nla_policy">nla_policy</a> <a href="ident?i=ifla_policy">ifla_policy</a>[<a href="ident?i=IFLA_MAX">IFLA_MAX</a>+1] = {
<a name=L1081 href="source/net/core/rtnetlink.c#L1081">1081</a>         [IFLA_IFNAME]           = { .<a href="ident?i=type">type</a> = NLA_STRING, .<a href="ident?i=len">len</a> = <a href="ident?i=IFNAMSIZ">IFNAMSIZ</a>-1 },
<a name=L1082 href="source/net/core/rtnetlink.c#L1082">1082</a>         [IFLA_ADDRESS]          = { .<a href="ident?i=type">type</a> = NLA_BINARY, .<a href="ident?i=len">len</a> = <a href="ident?i=MAX_ADDR_LEN">MAX_ADDR_LEN</a> },
<a name=L1083 href="source/net/core/rtnetlink.c#L1083">1083</a>         [IFLA_BROADCAST]        = { .<a href="ident?i=type">type</a> = NLA_BINARY, .<a href="ident?i=len">len</a> = <a href="ident?i=MAX_ADDR_LEN">MAX_ADDR_LEN</a> },
<a name=L1084 href="source/net/core/rtnetlink.c#L1084">1084</a>         [<a href="ident?i=IFLA_MAP">IFLA_MAP</a>]              = { .<a href="ident?i=len">len</a> = sizeof(struct <a href="ident?i=rtnl_link_ifmap">rtnl_link_ifmap</a>) },
<a name=L1085 href="source/net/core/rtnetlink.c#L1085">1085</a>         [IFLA_MTU]              = { .<a href="ident?i=type">type</a> = NLA_U32 },
<a name=L1086 href="source/net/core/rtnetlink.c#L1086">1086</a>         [IFLA_LINK]             = { .<a href="ident?i=type">type</a> = NLA_U32 },
<a name=L1087 href="source/net/core/rtnetlink.c#L1087">1087</a>         [<a href="ident?i=IFLA_MASTER">IFLA_MASTER</a>]           = { .<a href="ident?i=type">type</a> = NLA_U32 },
<a name=L1088 href="source/net/core/rtnetlink.c#L1088">1088</a>         [<a href="ident?i=IFLA_TXQLEN">IFLA_TXQLEN</a>]           = { .<a href="ident?i=type">type</a> = NLA_U32 },
<a name=L1089 href="source/net/core/rtnetlink.c#L1089">1089</a>         [<a href="ident?i=IFLA_WEIGHT">IFLA_WEIGHT</a>]           = { .<a href="ident?i=type">type</a> = NLA_U32 },
<a name=L1090 href="source/net/core/rtnetlink.c#L1090">1090</a>         [IFLA_OPERSTATE]        = { .<a href="ident?i=type">type</a> = NLA_U8 },
<a name=L1091 href="source/net/core/rtnetlink.c#L1091">1091</a>         [IFLA_LINKMODE]         = { .<a href="ident?i=type">type</a> = NLA_U8 },
<a name=L1092 href="source/net/core/rtnetlink.c#L1092">1092</a>         [<a href="ident?i=IFLA_LINKINFO">IFLA_LINKINFO</a>]         = { .<a href="ident?i=type">type</a> = NLA_NESTED },
<a name=L1093 href="source/net/core/rtnetlink.c#L1093">1093</a>         [IFLA_NET_NS_PID]       = { .<a href="ident?i=type">type</a> = NLA_U32 },
<a name=L1094 href="source/net/core/rtnetlink.c#L1094">1094</a>         [IFLA_NET_NS_FD]        = { .<a href="ident?i=type">type</a> = NLA_U32 },
<a name=L1095 href="source/net/core/rtnetlink.c#L1095">1095</a>         [IFLA_IFALIAS]          = { .<a href="ident?i=type">type</a> = NLA_STRING, .<a href="ident?i=len">len</a> = <a href="ident?i=IFALIASZ">IFALIASZ</a>-1 },
<a name=L1096 href="source/net/core/rtnetlink.c#L1096">1096</a>         [IFLA_VFINFO_LIST]      = {. <a href="ident?i=type">type</a> = NLA_NESTED },
<a name=L1097 href="source/net/core/rtnetlink.c#L1097">1097</a>         [IFLA_VF_PORTS]         = { .<a href="ident?i=type">type</a> = NLA_NESTED },
<a name=L1098 href="source/net/core/rtnetlink.c#L1098">1098</a>         [IFLA_PORT_SELF]        = { .<a href="ident?i=type">type</a> = NLA_NESTED },
<a name=L1099 href="source/net/core/rtnetlink.c#L1099">1099</a>         [IFLA_AF_SPEC]          = { .<a href="ident?i=type">type</a> = NLA_NESTED },
<a name=L1100 href="source/net/core/rtnetlink.c#L1100">1100</a> };
<a name=L1101 href="source/net/core/rtnetlink.c#L1101">1101</a> <a href="ident?i=EXPORT_SYMBOL">EXPORT_SYMBOL</a>(<a href="ident?i=ifla_policy">ifla_policy</a>);
<a name=L1102 href="source/net/core/rtnetlink.c#L1102">1102</a> 
<a name=L1103 href="source/net/core/rtnetlink.c#L1103">1103</a> static const struct <a href="ident?i=nla_policy">nla_policy</a> <a href="ident?i=ifla_info_policy">ifla_info_policy</a>[<a href="ident?i=IFLA_INFO_MAX">IFLA_INFO_MAX</a>+1] = {
<a name=L1104 href="source/net/core/rtnetlink.c#L1104">1104</a>         [IFLA_INFO_KIND]        = { .<a href="ident?i=type">type</a> = NLA_STRING },
<a name=L1105 href="source/net/core/rtnetlink.c#L1105">1105</a>         [IFLA_INFO_DATA]        = { .<a href="ident?i=type">type</a> = NLA_NESTED },
<a name=L1106 href="source/net/core/rtnetlink.c#L1106">1106</a> };
<a name=L1107 href="source/net/core/rtnetlink.c#L1107">1107</a> 
<a name=L1108 href="source/net/core/rtnetlink.c#L1108">1108</a> static const struct <a href="ident?i=nla_policy">nla_policy</a> <a href="ident?i=ifla_vfinfo_policy">ifla_vfinfo_policy</a>[<a href="ident?i=IFLA_VF_INFO_MAX">IFLA_VF_INFO_MAX</a>+1] = {
<a name=L1109 href="source/net/core/rtnetlink.c#L1109">1109</a>         [IFLA_VF_INFO]          = { .<a href="ident?i=type">type</a> = NLA_NESTED },
<a name=L1110 href="source/net/core/rtnetlink.c#L1110">1110</a> };
<a name=L1111 href="source/net/core/rtnetlink.c#L1111">1111</a> 
<a name=L1112 href="source/net/core/rtnetlink.c#L1112">1112</a> static const struct <a href="ident?i=nla_policy">nla_policy</a> <a href="ident?i=ifla_vf_policy">ifla_vf_policy</a>[<a href="ident?i=IFLA_VF_MAX">IFLA_VF_MAX</a>+1] = {
<a name=L1113 href="source/net/core/rtnetlink.c#L1113">1113</a>         [IFLA_VF_MAC]           = { .<a href="ident?i=type">type</a> = NLA_BINARY,
<a name=L1114 href="source/net/core/rtnetlink.c#L1114">1114</a>                                     .<a href="ident?i=len">len</a> = sizeof(struct <a href="ident?i=ifla_vf_mac">ifla_vf_mac</a>) },
<a name=L1115 href="source/net/core/rtnetlink.c#L1115">1115</a>         [IFLA_VF_VLAN]          = { .<a href="ident?i=type">type</a> = NLA_BINARY,
<a name=L1116 href="source/net/core/rtnetlink.c#L1116">1116</a>                                     .<a href="ident?i=len">len</a> = sizeof(struct <a href="ident?i=ifla_vf_vlan">ifla_vf_vlan</a>) },
<a name=L1117 href="source/net/core/rtnetlink.c#L1117">1117</a>         [IFLA_VF_TX_RATE]       = { .<a href="ident?i=type">type</a> = NLA_BINARY,
<a name=L1118 href="source/net/core/rtnetlink.c#L1118">1118</a>                                     .<a href="ident?i=len">len</a> = sizeof(struct <a href="ident?i=ifla_vf_tx_rate">ifla_vf_tx_rate</a>) },
<a name=L1119 href="source/net/core/rtnetlink.c#L1119">1119</a> };
<a name=L1120 href="source/net/core/rtnetlink.c#L1120">1120</a> 
<a name=L1121 href="source/net/core/rtnetlink.c#L1121">1121</a> static const struct <a href="ident?i=nla_policy">nla_policy</a> <a href="ident?i=ifla_port_policy">ifla_port_policy</a>[<a href="ident?i=IFLA_PORT_MAX">IFLA_PORT_MAX</a>+1] = {
<a name=L1122 href="source/net/core/rtnetlink.c#L1122">1122</a>         [IFLA_PORT_VF]          = { .<a href="ident?i=type">type</a> = NLA_U32 },
<a name=L1123 href="source/net/core/rtnetlink.c#L1123">1123</a>         [IFLA_PORT_PROFILE]     = { .<a href="ident?i=type">type</a> = NLA_STRING,
<a name=L1124 href="source/net/core/rtnetlink.c#L1124">1124</a>                                     .<a href="ident?i=len">len</a> = <a href="ident?i=PORT_PROFILE_MAX">PORT_PROFILE_MAX</a> },
<a name=L1125 href="source/net/core/rtnetlink.c#L1125">1125</a>         [IFLA_PORT_VSI_TYPE]    = { .<a href="ident?i=type">type</a> = NLA_BINARY,
<a name=L1126 href="source/net/core/rtnetlink.c#L1126">1126</a>                                     .<a href="ident?i=len">len</a> = sizeof(struct <a href="ident?i=ifla_port_vsi">ifla_port_vsi</a>)},
<a name=L1127 href="source/net/core/rtnetlink.c#L1127">1127</a>         [IFLA_PORT_INSTANCE_UUID] = { .<a href="ident?i=type">type</a> = NLA_BINARY,
<a name=L1128 href="source/net/core/rtnetlink.c#L1128">1128</a>                                       .<a href="ident?i=len">len</a> = <a href="ident?i=PORT_UUID_MAX">PORT_UUID_MAX</a> },
<a name=L1129 href="source/net/core/rtnetlink.c#L1129">1129</a>         [IFLA_PORT_HOST_UUID]   = { .<a href="ident?i=type">type</a> = NLA_STRING,
<a name=L1130 href="source/net/core/rtnetlink.c#L1130">1130</a>                                     .<a href="ident?i=len">len</a> = <a href="ident?i=PORT_UUID_MAX">PORT_UUID_MAX</a> },
<a name=L1131 href="source/net/core/rtnetlink.c#L1131">1131</a>         [IFLA_PORT_REQUEST]     = { .<a href="ident?i=type">type</a> = NLA_U8, },
<a name=L1132 href="source/net/core/rtnetlink.c#L1132">1132</a>         [IFLA_PORT_RESPONSE]    = { .<a href="ident?i=type">type</a> = NLA_U16, },
<a name=L1133 href="source/net/core/rtnetlink.c#L1133">1133</a> };
<a name=L1134 href="source/net/core/rtnetlink.c#L1134">1134</a> 
<a name=L1135 href="source/net/core/rtnetlink.c#L1135">1135</a> struct <a href="ident?i=net">net</a> *<a href="ident?i=rtnl_link_get_net">rtnl_link_get_net</a>(struct <a href="ident?i=net">net</a> *src_net, struct <a href="ident?i=nlattr">nlattr</a> *tb[])
<a name=L1136 href="source/net/core/rtnetlink.c#L1136">1136</a> {
<a name=L1137 href="source/net/core/rtnetlink.c#L1137">1137</a>         struct <a href="ident?i=net">net</a> *<a href="ident?i=net">net</a>;
<a name=L1138 href="source/net/core/rtnetlink.c#L1138">1138</a>         <b><i>/* Examine the link attributes and figure out which</i></b>
<a name=L1139 href="source/net/core/rtnetlink.c#L1139">1139</a> <b><i>         * network namespace we are talking about.</i></b>
<a name=L1140 href="source/net/core/rtnetlink.c#L1140">1140</a> <b><i>         */</i></b>
<a name=L1141 href="source/net/core/rtnetlink.c#L1141">1141</a>         if (tb[IFLA_NET_NS_PID])
<a name=L1142 href="source/net/core/rtnetlink.c#L1142">1142</a>                 <a href="ident?i=net">net</a> = <a href="ident?i=get_net_ns_by_pid">get_net_ns_by_pid</a>(<a href="ident?i=nla_get_u32">nla_get_u32</a>(tb[IFLA_NET_NS_PID]));
<a name=L1143 href="source/net/core/rtnetlink.c#L1143">1143</a>         else if (tb[IFLA_NET_NS_FD])
<a name=L1144 href="source/net/core/rtnetlink.c#L1144">1144</a>                 <a href="ident?i=net">net</a> = <a href="ident?i=get_net_ns_by_fd">get_net_ns_by_fd</a>(<a href="ident?i=nla_get_u32">nla_get_u32</a>(tb[IFLA_NET_NS_FD]));
<a name=L1145 href="source/net/core/rtnetlink.c#L1145">1145</a>         else
<a name=L1146 href="source/net/core/rtnetlink.c#L1146">1146</a>                 <a href="ident?i=net">net</a> = <a href="ident?i=get_net">get_net</a>(src_net);
<a name=L1147 href="source/net/core/rtnetlink.c#L1147">1147</a>         return <a href="ident?i=net">net</a>;
<a name=L1148 href="source/net/core/rtnetlink.c#L1148">1148</a> }
<a name=L1149 href="source/net/core/rtnetlink.c#L1149">1149</a> <a href="ident?i=EXPORT_SYMBOL">EXPORT_SYMBOL</a>(<a href="ident?i=rtnl_link_get_net">rtnl_link_get_net</a>);
<a name=L1150 href="source/net/core/rtnetlink.c#L1150">1150</a> 
<a name=L1151 href="source/net/core/rtnetlink.c#L1151">1151</a> static int <a href="ident?i=validate_linkmsg">validate_linkmsg</a>(struct <a href="ident?i=net_device">net_device</a> *<a href="ident?i=dev">dev</a>, struct <a href="ident?i=nlattr">nlattr</a> *tb[])
<a name=L1152 href="source/net/core/rtnetlink.c#L1152">1152</a> {
<a name=L1153 href="source/net/core/rtnetlink.c#L1153">1153</a>         if (<a href="ident?i=dev">dev</a>) {
<a name=L1154 href="source/net/core/rtnetlink.c#L1154">1154</a>                 if (tb[IFLA_ADDRESS] &amp;&amp;
<a name=L1155 href="source/net/core/rtnetlink.c#L1155">1155</a>                     <a href="ident?i=nla_len">nla_len</a>(tb[IFLA_ADDRESS]) &lt; <a href="ident?i=dev">dev</a>-&gt;addr_len)
<a name=L1156 href="source/net/core/rtnetlink.c#L1156">1156</a>                         return -<a href="ident?i=EINVAL">EINVAL</a>;
<a name=L1157 href="source/net/core/rtnetlink.c#L1157">1157</a> 
<a name=L1158 href="source/net/core/rtnetlink.c#L1158">1158</a>                 if (tb[IFLA_BROADCAST] &amp;&amp;
<a name=L1159 href="source/net/core/rtnetlink.c#L1159">1159</a>                     <a href="ident?i=nla_len">nla_len</a>(tb[IFLA_BROADCAST]) &lt; <a href="ident?i=dev">dev</a>-&gt;addr_len)
<a name=L1160 href="source/net/core/rtnetlink.c#L1160">1160</a>                         return -<a href="ident?i=EINVAL">EINVAL</a>;
<a name=L1161 href="source/net/core/rtnetlink.c#L1161">1161</a>         }
<a name=L1162 href="source/net/core/rtnetlink.c#L1162">1162</a> 
<a name=L1163 href="source/net/core/rtnetlink.c#L1163">1163</a>         if (tb[IFLA_AF_SPEC]) {
<a name=L1164 href="source/net/core/rtnetlink.c#L1164">1164</a>                 struct <a href="ident?i=nlattr">nlattr</a> *af;
<a name=L1165 href="source/net/core/rtnetlink.c#L1165">1165</a>                 int rem, <a href="ident?i=err">err</a>;
<a name=L1166 href="source/net/core/rtnetlink.c#L1166">1166</a> 
<a name=L1167 href="source/net/core/rtnetlink.c#L1167">1167</a>                 <a href="ident?i=nla_for_each_nested">nla_for_each_nested</a>(af, tb[IFLA_AF_SPEC], rem) {
<a name=L1168 href="source/net/core/rtnetlink.c#L1168">1168</a>                         const struct <a href="ident?i=rtnl_af_ops">rtnl_af_ops</a> *af_ops;
<a name=L1169 href="source/net/core/rtnetlink.c#L1169">1169</a> 
<a name=L1170 href="source/net/core/rtnetlink.c#L1170">1170</a>                         if (!(af_ops = <a href="ident?i=rtnl_af_lookup">rtnl_af_lookup</a>(<a href="ident?i=nla_type">nla_type</a>(af))))
<a name=L1171 href="source/net/core/rtnetlink.c#L1171">1171</a>                                 return -<a href="ident?i=EAFNOSUPPORT">EAFNOSUPPORT</a>;
<a name=L1172 href="source/net/core/rtnetlink.c#L1172">1172</a> 
<a name=L1173 href="source/net/core/rtnetlink.c#L1173">1173</a>                         if (!af_ops-&gt;set_link_af)
<a name=L1174 href="source/net/core/rtnetlink.c#L1174">1174</a>                                 return -<a href="ident?i=EOPNOTSUPP">EOPNOTSUPP</a>;
<a name=L1175 href="source/net/core/rtnetlink.c#L1175">1175</a> 
<a name=L1176 href="source/net/core/rtnetlink.c#L1176">1176</a>                         if (af_ops-&gt;validate_link_af) {
<a name=L1177 href="source/net/core/rtnetlink.c#L1177">1177</a>                                 <a href="ident?i=err">err</a> = af_ops-&gt;validate_link_af(<a href="ident?i=dev">dev</a>, af);
<a name=L1178 href="source/net/core/rtnetlink.c#L1178">1178</a>                                 if (<a href="ident?i=err">err</a> &lt; 0)
<a name=L1179 href="source/net/core/rtnetlink.c#L1179">1179</a>                                         return <a href="ident?i=err">err</a>;
<a name=L1180 href="source/net/core/rtnetlink.c#L1180">1180</a>                         }
<a name=L1181 href="source/net/core/rtnetlink.c#L1181">1181</a>                 }
<a name=L1182 href="source/net/core/rtnetlink.c#L1182">1182</a>         }
<a name=L1183 href="source/net/core/rtnetlink.c#L1183">1183</a> 
<a name=L1184 href="source/net/core/rtnetlink.c#L1184">1184</a>         return 0;
<a name=L1185 href="source/net/core/rtnetlink.c#L1185">1185</a> }
<a name=L1186 href="source/net/core/rtnetlink.c#L1186">1186</a> 
<a name=L1187 href="source/net/core/rtnetlink.c#L1187">1187</a> static int <a href="ident?i=do_setvfinfo">do_setvfinfo</a>(struct <a href="ident?i=net_device">net_device</a> *<a href="ident?i=dev">dev</a>, struct <a href="ident?i=nlattr">nlattr</a> *<a href="ident?i=attr">attr</a>)
<a name=L1188 href="source/net/core/rtnetlink.c#L1188">1188</a> {
<a name=L1189 href="source/net/core/rtnetlink.c#L1189">1189</a>         int rem, <a href="ident?i=err">err</a> = -<a href="ident?i=EINVAL">EINVAL</a>;
<a name=L1190 href="source/net/core/rtnetlink.c#L1190">1190</a>         struct <a href="ident?i=nlattr">nlattr</a> *vf;
<a name=L1191 href="source/net/core/rtnetlink.c#L1191">1191</a>         const struct <a href="ident?i=net_device_ops">net_device_ops</a> *<a href="ident?i=ops">ops</a> = <a href="ident?i=dev">dev</a>-&gt;<a href="ident?i=netdev_ops">netdev_ops</a>;
<a name=L1192 href="source/net/core/rtnetlink.c#L1192">1192</a> 
<a name=L1193 href="source/net/core/rtnetlink.c#L1193">1193</a>         <a href="ident?i=nla_for_each_nested">nla_for_each_nested</a>(vf, <a href="ident?i=attr">attr</a>, rem) {
<a name=L1194 href="source/net/core/rtnetlink.c#L1194">1194</a>                 switch (<a href="ident?i=nla_type">nla_type</a>(vf)) {
<a name=L1195 href="source/net/core/rtnetlink.c#L1195">1195</a>                 case IFLA_VF_MAC: {
<a name=L1196 href="source/net/core/rtnetlink.c#L1196">1196</a>                         struct <a href="ident?i=ifla_vf_mac">ifla_vf_mac</a> *ivm;
<a name=L1197 href="source/net/core/rtnetlink.c#L1197">1197</a>                         ivm = <a href="ident?i=nla_data">nla_data</a>(vf);
<a name=L1198 href="source/net/core/rtnetlink.c#L1198">1198</a>                         <a href="ident?i=err">err</a> = -<a href="ident?i=EOPNOTSUPP">EOPNOTSUPP</a>;
<a name=L1199 href="source/net/core/rtnetlink.c#L1199">1199</a>                         if (<a href="ident?i=ops">ops</a>-&gt;ndo_set_vf_mac)
<a name=L1200 href="source/net/core/rtnetlink.c#L1200">1200</a>                                 <a href="ident?i=err">err</a> = <a href="ident?i=ops">ops</a>-&gt;ndo_set_vf_mac(<a href="ident?i=dev">dev</a>, ivm-&gt;vf,
<a name=L1201 href="source/net/core/rtnetlink.c#L1201">1201</a>                                                           ivm-&gt;<a href="ident?i=mac">mac</a>);
<a name=L1202 href="source/net/core/rtnetlink.c#L1202">1202</a>                         break;
<a name=L1203 href="source/net/core/rtnetlink.c#L1203">1203</a>                 }
<a name=L1204 href="source/net/core/rtnetlink.c#L1204">1204</a>                 case IFLA_VF_VLAN: {
<a name=L1205 href="source/net/core/rtnetlink.c#L1205">1205</a>                         struct <a href="ident?i=ifla_vf_vlan">ifla_vf_vlan</a> *ivv;
<a name=L1206 href="source/net/core/rtnetlink.c#L1206">1206</a>                         ivv = <a href="ident?i=nla_data">nla_data</a>(vf);
<a name=L1207 href="source/net/core/rtnetlink.c#L1207">1207</a>                         <a href="ident?i=err">err</a> = -<a href="ident?i=EOPNOTSUPP">EOPNOTSUPP</a>;
<a name=L1208 href="source/net/core/rtnetlink.c#L1208">1208</a>                         if (<a href="ident?i=ops">ops</a>-&gt;ndo_set_vf_vlan)
<a name=L1209 href="source/net/core/rtnetlink.c#L1209">1209</a>                                 <a href="ident?i=err">err</a> = <a href="ident?i=ops">ops</a>-&gt;ndo_set_vf_vlan(<a href="ident?i=dev">dev</a>, ivv-&gt;vf,
<a name=L1210 href="source/net/core/rtnetlink.c#L1210">1210</a>                                                            ivv-&gt;<a href="ident?i=vlan">vlan</a>,
<a name=L1211 href="source/net/core/rtnetlink.c#L1211">1211</a>                                                            ivv-&gt;qos);
<a name=L1212 href="source/net/core/rtnetlink.c#L1212">1212</a>                         break;
<a name=L1213 href="source/net/core/rtnetlink.c#L1213">1213</a>                 }
<a name=L1214 href="source/net/core/rtnetlink.c#L1214">1214</a>                 case IFLA_VF_TX_RATE: {
<a name=L1215 href="source/net/core/rtnetlink.c#L1215">1215</a>                         struct <a href="ident?i=ifla_vf_tx_rate">ifla_vf_tx_rate</a> *ivt;
<a name=L1216 href="source/net/core/rtnetlink.c#L1216">1216</a>                         ivt = <a href="ident?i=nla_data">nla_data</a>(vf);
<a name=L1217 href="source/net/core/rtnetlink.c#L1217">1217</a>                         <a href="ident?i=err">err</a> = -<a href="ident?i=EOPNOTSUPP">EOPNOTSUPP</a>;
<a name=L1218 href="source/net/core/rtnetlink.c#L1218">1218</a>                         if (<a href="ident?i=ops">ops</a>-&gt;ndo_set_vf_tx_rate)
<a name=L1219 href="source/net/core/rtnetlink.c#L1219">1219</a>                                 <a href="ident?i=err">err</a> = <a href="ident?i=ops">ops</a>-&gt;ndo_set_vf_tx_rate(<a href="ident?i=dev">dev</a>, ivt-&gt;vf,
<a name=L1220 href="source/net/core/rtnetlink.c#L1220">1220</a>                                                               ivt-&gt;<a href="ident?i=rate">rate</a>);
<a name=L1221 href="source/net/core/rtnetlink.c#L1221">1221</a>                         break;
<a name=L1222 href="source/net/core/rtnetlink.c#L1222">1222</a>                 }
<a name=L1223 href="source/net/core/rtnetlink.c#L1223">1223</a>                 case IFLA_VF_SPOOFCHK: {
<a name=L1224 href="source/net/core/rtnetlink.c#L1224">1224</a>                         struct <a href="ident?i=ifla_vf_spoofchk">ifla_vf_spoofchk</a> *ivs;
<a name=L1225 href="source/net/core/rtnetlink.c#L1225">1225</a>                         ivs = <a href="ident?i=nla_data">nla_data</a>(vf);
<a name=L1226 href="source/net/core/rtnetlink.c#L1226">1226</a>                         <a href="ident?i=err">err</a> = -<a href="ident?i=EOPNOTSUPP">EOPNOTSUPP</a>;
<a name=L1227 href="source/net/core/rtnetlink.c#L1227">1227</a>                         if (<a href="ident?i=ops">ops</a>-&gt;ndo_set_vf_spoofchk)
<a name=L1228 href="source/net/core/rtnetlink.c#L1228">1228</a>                                 <a href="ident?i=err">err</a> = <a href="ident?i=ops">ops</a>-&gt;ndo_set_vf_spoofchk(<a href="ident?i=dev">dev</a>, ivs-&gt;vf,
<a name=L1229 href="source/net/core/rtnetlink.c#L1229">1229</a>                                                                ivs-&gt;setting);
<a name=L1230 href="source/net/core/rtnetlink.c#L1230">1230</a>                         break;
<a name=L1231 href="source/net/core/rtnetlink.c#L1231">1231</a>                 }
<a name=L1232 href="source/net/core/rtnetlink.c#L1232">1232</a>                 default:
<a name=L1233 href="source/net/core/rtnetlink.c#L1233">1233</a>                         <a href="ident?i=err">err</a> = -<a href="ident?i=EINVAL">EINVAL</a>;
<a name=L1234 href="source/net/core/rtnetlink.c#L1234">1234</a>                         break;
<a name=L1235 href="source/net/core/rtnetlink.c#L1235">1235</a>                 }
<a name=L1236 href="source/net/core/rtnetlink.c#L1236">1236</a>                 if (<a href="ident?i=err">err</a>)
<a name=L1237 href="source/net/core/rtnetlink.c#L1237">1237</a>                         break;
<a name=L1238 href="source/net/core/rtnetlink.c#L1238">1238</a>         }
<a name=L1239 href="source/net/core/rtnetlink.c#L1239">1239</a>         return <a href="ident?i=err">err</a>;
<a name=L1240 href="source/net/core/rtnetlink.c#L1240">1240</a> }
<a name=L1241 href="source/net/core/rtnetlink.c#L1241">1241</a> 
<a name=L1242 href="source/net/core/rtnetlink.c#L1242">1242</a> static int <a href="ident?i=do_set_master">do_set_master</a>(struct <a href="ident?i=net_device">net_device</a> *<a href="ident?i=dev">dev</a>, int ifindex)
<a name=L1243 href="source/net/core/rtnetlink.c#L1243">1243</a> {
<a name=L1244 href="source/net/core/rtnetlink.c#L1244">1244</a>         struct <a href="ident?i=net_device">net_device</a> *master_dev;
<a name=L1245 href="source/net/core/rtnetlink.c#L1245">1245</a>         const struct <a href="ident?i=net_device_ops">net_device_ops</a> *<a href="ident?i=ops">ops</a>;
<a name=L1246 href="source/net/core/rtnetlink.c#L1246">1246</a>         int <a href="ident?i=err">err</a>;
<a name=L1247 href="source/net/core/rtnetlink.c#L1247">1247</a> 
<a name=L1248 href="source/net/core/rtnetlink.c#L1248">1248</a>         if (<a href="ident?i=dev">dev</a>-&gt;<a href="ident?i=master">master</a>) {
<a name=L1249 href="source/net/core/rtnetlink.c#L1249">1249</a>                 if (<a href="ident?i=dev">dev</a>-&gt;<a href="ident?i=master">master</a>-&gt;ifindex == ifindex)
<a name=L1250 href="source/net/core/rtnetlink.c#L1250">1250</a>                         return 0;
<a name=L1251 href="source/net/core/rtnetlink.c#L1251">1251</a>                 <a href="ident?i=ops">ops</a> = <a href="ident?i=dev">dev</a>-&gt;<a href="ident?i=master">master</a>-&gt;<a href="ident?i=netdev_ops">netdev_ops</a>;
<a name=L1252 href="source/net/core/rtnetlink.c#L1252">1252</a>                 if (<a href="ident?i=ops">ops</a>-&gt;ndo_del_slave) {
<a name=L1253 href="source/net/core/rtnetlink.c#L1253">1253</a>                         <a href="ident?i=err">err</a> = <a href="ident?i=ops">ops</a>-&gt;ndo_del_slave(<a href="ident?i=dev">dev</a>-&gt;<a href="ident?i=master">master</a>, <a href="ident?i=dev">dev</a>);
<a name=L1254 href="source/net/core/rtnetlink.c#L1254">1254</a>                         if (<a href="ident?i=err">err</a>)
<a name=L1255 href="source/net/core/rtnetlink.c#L1255">1255</a>                                 return <a href="ident?i=err">err</a>;
<a name=L1256 href="source/net/core/rtnetlink.c#L1256">1256</a>                 } else {
<a name=L1257 href="source/net/core/rtnetlink.c#L1257">1257</a>                         return -<a href="ident?i=EOPNOTSUPP">EOPNOTSUPP</a>;
<a name=L1258 href="source/net/core/rtnetlink.c#L1258">1258</a>                 }
<a name=L1259 href="source/net/core/rtnetlink.c#L1259">1259</a>         }
<a name=L1260 href="source/net/core/rtnetlink.c#L1260">1260</a> 
<a name=L1261 href="source/net/core/rtnetlink.c#L1261">1261</a>         if (ifindex) {
<a name=L1262 href="source/net/core/rtnetlink.c#L1262">1262</a>                 master_dev = <a href="ident?i=__dev_get_by_index">__dev_get_by_index</a>(<a href="ident?i=dev_net">dev_net</a>(<a href="ident?i=dev">dev</a>), ifindex);
<a name=L1263 href="source/net/core/rtnetlink.c#L1263">1263</a>                 if (!master_dev)
<a name=L1264 href="source/net/core/rtnetlink.c#L1264">1264</a>                         return -<a href="ident?i=EINVAL">EINVAL</a>;
<a name=L1265 href="source/net/core/rtnetlink.c#L1265">1265</a>                 <a href="ident?i=ops">ops</a> = master_dev-&gt;<a href="ident?i=netdev_ops">netdev_ops</a>;
<a name=L1266 href="source/net/core/rtnetlink.c#L1266">1266</a>                 if (<a href="ident?i=ops">ops</a>-&gt;ndo_add_slave) {
<a name=L1267 href="source/net/core/rtnetlink.c#L1267">1267</a>                         <a href="ident?i=err">err</a> = <a href="ident?i=ops">ops</a>-&gt;ndo_add_slave(master_dev, <a href="ident?i=dev">dev</a>);
<a name=L1268 href="source/net/core/rtnetlink.c#L1268">1268</a>                         if (<a href="ident?i=err">err</a>)
<a name=L1269 href="source/net/core/rtnetlink.c#L1269">1269</a>                                 return <a href="ident?i=err">err</a>;
<a name=L1270 href="source/net/core/rtnetlink.c#L1270">1270</a>                 } else {
<a name=L1271 href="source/net/core/rtnetlink.c#L1271">1271</a>                         return -<a href="ident?i=EOPNOTSUPP">EOPNOTSUPP</a>;
<a name=L1272 href="source/net/core/rtnetlink.c#L1272">1272</a>                 }
<a name=L1273 href="source/net/core/rtnetlink.c#L1273">1273</a>         }
<a name=L1274 href="source/net/core/rtnetlink.c#L1274">1274</a>         return 0;
<a name=L1275 href="source/net/core/rtnetlink.c#L1275">1275</a> }
<a name=L1276 href="source/net/core/rtnetlink.c#L1276">1276</a> 
<a name=L1277 href="source/net/core/rtnetlink.c#L1277">1277</a> static int <a href="ident?i=do_setlink">do_setlink</a>(struct <a href="ident?i=net_device">net_device</a> *<a href="ident?i=dev">dev</a>, struct <a href="ident?i=ifinfomsg">ifinfomsg</a> *ifm,
<a name=L1278 href="source/net/core/rtnetlink.c#L1278">1278</a>                       struct <a href="ident?i=nlattr">nlattr</a> **tb, char *<a href="ident?i=ifname">ifname</a>, int modified)
<a name=L1279 href="source/net/core/rtnetlink.c#L1279">1279</a> {
<a name=L1280 href="source/net/core/rtnetlink.c#L1280">1280</a>         const struct <a href="ident?i=net_device_ops">net_device_ops</a> *<a href="ident?i=ops">ops</a> = <a href="ident?i=dev">dev</a>-&gt;<a href="ident?i=netdev_ops">netdev_ops</a>;
<a name=L1281 href="source/net/core/rtnetlink.c#L1281">1281</a>         int send_addr_notify = 0;
<a name=L1282 href="source/net/core/rtnetlink.c#L1282">1282</a>         int <a href="ident?i=err">err</a>;
<a name=L1283 href="source/net/core/rtnetlink.c#L1283">1283</a> 
<a name=L1284 href="source/net/core/rtnetlink.c#L1284">1284</a>         if (tb[IFLA_NET_NS_PID] || tb[IFLA_NET_NS_FD]) {
<a name=L1285 href="source/net/core/rtnetlink.c#L1285">1285</a>                 struct <a href="ident?i=net">net</a> *<a href="ident?i=net">net</a> = <a href="ident?i=rtnl_link_get_net">rtnl_link_get_net</a>(<a href="ident?i=dev_net">dev_net</a>(<a href="ident?i=dev">dev</a>), tb);
<a name=L1286 href="source/net/core/rtnetlink.c#L1286">1286</a>                 if (<a href="ident?i=IS_ERR">IS_ERR</a>(<a href="ident?i=net">net</a>)) {
<a name=L1287 href="source/net/core/rtnetlink.c#L1287">1287</a>                         <a href="ident?i=err">err</a> = <a href="ident?i=PTR_ERR">PTR_ERR</a>(<a href="ident?i=net">net</a>);
<a name=L1288 href="source/net/core/rtnetlink.c#L1288">1288</a>                         goto errout;
<a name=L1289 href="source/net/core/rtnetlink.c#L1289">1289</a>                 }
<a name=L1290 href="source/net/core/rtnetlink.c#L1290">1290</a>                 <a href="ident?i=err">err</a> = <a href="ident?i=dev_change_net_namespace">dev_change_net_namespace</a>(<a href="ident?i=dev">dev</a>, <a href="ident?i=net">net</a>, <a href="ident?i=ifname">ifname</a>);
<a name=L1291 href="source/net/core/rtnetlink.c#L1291">1291</a>                 <a href="ident?i=put_net">put_net</a>(<a href="ident?i=net">net</a>);
<a name=L1292 href="source/net/core/rtnetlink.c#L1292">1292</a>                 if (<a href="ident?i=err">err</a>)
<a name=L1293 href="source/net/core/rtnetlink.c#L1293">1293</a>                         goto errout;
<a name=L1294 href="source/net/core/rtnetlink.c#L1294">1294</a>                 modified = 1;
<a name=L1295 href="source/net/core/rtnetlink.c#L1295">1295</a>         }
<a name=L1296 href="source/net/core/rtnetlink.c#L1296">1296</a> 
<a name=L1297 href="source/net/core/rtnetlink.c#L1297">1297</a>         if (tb[<a href="ident?i=IFLA_MAP">IFLA_MAP</a>]) {
<a name=L1298 href="source/net/core/rtnetlink.c#L1298">1298</a>                 struct <a href="ident?i=rtnl_link_ifmap">rtnl_link_ifmap</a> *u_map;
<a name=L1299 href="source/net/core/rtnetlink.c#L1299">1299</a>                 struct <a href="ident?i=ifmap">ifmap</a> k_map;
<a name=L1300 href="source/net/core/rtnetlink.c#L1300">1300</a> 
<a name=L1301 href="source/net/core/rtnetlink.c#L1301">1301</a>                 if (!<a href="ident?i=ops">ops</a>-&gt;ndo_set_config) {
<a name=L1302 href="source/net/core/rtnetlink.c#L1302">1302</a>                         <a href="ident?i=err">err</a> = -<a href="ident?i=EOPNOTSUPP">EOPNOTSUPP</a>;
<a name=L1303 href="source/net/core/rtnetlink.c#L1303">1303</a>                         goto errout;
<a name=L1304 href="source/net/core/rtnetlink.c#L1304">1304</a>                 }
<a name=L1305 href="source/net/core/rtnetlink.c#L1305">1305</a> 
<a name=L1306 href="source/net/core/rtnetlink.c#L1306">1306</a>                 if (!<a href="ident?i=netif_device_present">netif_device_present</a>(<a href="ident?i=dev">dev</a>)) {
<a name=L1307 href="source/net/core/rtnetlink.c#L1307">1307</a>                         <a href="ident?i=err">err</a> = -<a href="ident?i=ENODEV">ENODEV</a>;
<a name=L1308 href="source/net/core/rtnetlink.c#L1308">1308</a>                         goto errout;
<a name=L1309 href="source/net/core/rtnetlink.c#L1309">1309</a>                 }
<a name=L1310 href="source/net/core/rtnetlink.c#L1310">1310</a> 
<a name=L1311 href="source/net/core/rtnetlink.c#L1311">1311</a>                 u_map = <a href="ident?i=nla_data">nla_data</a>(tb[<a href="ident?i=IFLA_MAP">IFLA_MAP</a>]);
<a name=L1312 href="source/net/core/rtnetlink.c#L1312">1312</a>                 k_map.<a href="ident?i=mem_start">mem_start</a> = (unsigned long) u_map-&gt;<a href="ident?i=mem_start">mem_start</a>;
<a name=L1313 href="source/net/core/rtnetlink.c#L1313">1313</a>                 k_map.<a href="ident?i=mem_end">mem_end</a> = (unsigned long) u_map-&gt;<a href="ident?i=mem_end">mem_end</a>;
<a name=L1314 href="source/net/core/rtnetlink.c#L1314">1314</a>                 k_map.<a href="ident?i=base_addr">base_addr</a> = (unsigned short) u_map-&gt;<a href="ident?i=base_addr">base_addr</a>;
<a name=L1315 href="source/net/core/rtnetlink.c#L1315">1315</a>                 k_map.<a href="ident?i=irq">irq</a> = (unsigned char) u_map-&gt;<a href="ident?i=irq">irq</a>;
<a name=L1316 href="source/net/core/rtnetlink.c#L1316">1316</a>                 k_map.<a href="ident?i=dma">dma</a> = (unsigned char) u_map-&gt;<a href="ident?i=dma">dma</a>;
<a name=L1317 href="source/net/core/rtnetlink.c#L1317">1317</a>                 k_map.<a href="ident?i=port">port</a> = (unsigned char) u_map-&gt;<a href="ident?i=port">port</a>;
<a name=L1318 href="source/net/core/rtnetlink.c#L1318">1318</a> 
<a name=L1319 href="source/net/core/rtnetlink.c#L1319">1319</a>                 <a href="ident?i=err">err</a> = <a href="ident?i=ops">ops</a>-&gt;ndo_set_config(<a href="ident?i=dev">dev</a>, &amp;k_map);
<a name=L1320 href="source/net/core/rtnetlink.c#L1320">1320</a>                 if (<a href="ident?i=err">err</a> &lt; 0)
<a name=L1321 href="source/net/core/rtnetlink.c#L1321">1321</a>                         goto errout;
<a name=L1322 href="source/net/core/rtnetlink.c#L1322">1322</a> 
<a name=L1323 href="source/net/core/rtnetlink.c#L1323">1323</a>                 modified = 1;
<a name=L1324 href="source/net/core/rtnetlink.c#L1324">1324</a>         }
<a name=L1325 href="source/net/core/rtnetlink.c#L1325">1325</a> 
<a name=L1326 href="source/net/core/rtnetlink.c#L1326">1326</a>         if (tb[IFLA_ADDRESS]) {
<a name=L1327 href="source/net/core/rtnetlink.c#L1327">1327</a>                 struct <a href="ident?i=sockaddr">sockaddr</a> *<a href="ident?i=sa">sa</a>;
<a name=L1328 href="source/net/core/rtnetlink.c#L1328">1328</a>                 int <a href="ident?i=len">len</a>;
<a name=L1329 href="source/net/core/rtnetlink.c#L1329">1329</a> 
<a name=L1330 href="source/net/core/rtnetlink.c#L1330">1330</a>                 if (!<a href="ident?i=ops">ops</a>-&gt;ndo_set_mac_address) {
<a name=L1331 href="source/net/core/rtnetlink.c#L1331">1331</a>                         <a href="ident?i=err">err</a> = -<a href="ident?i=EOPNOTSUPP">EOPNOTSUPP</a>;
<a name=L1332 href="source/net/core/rtnetlink.c#L1332">1332</a>                         goto errout;
<a name=L1333 href="source/net/core/rtnetlink.c#L1333">1333</a>                 }
<a name=L1334 href="source/net/core/rtnetlink.c#L1334">1334</a> 
<a name=L1335 href="source/net/core/rtnetlink.c#L1335">1335</a>                 if (!<a href="ident?i=netif_device_present">netif_device_present</a>(<a href="ident?i=dev">dev</a>)) {
<a name=L1336 href="source/net/core/rtnetlink.c#L1336">1336</a>                         <a href="ident?i=err">err</a> = -<a href="ident?i=ENODEV">ENODEV</a>;
<a name=L1337 href="source/net/core/rtnetlink.c#L1337">1337</a>                         goto errout;
<a name=L1338 href="source/net/core/rtnetlink.c#L1338">1338</a>                 }
<a name=L1339 href="source/net/core/rtnetlink.c#L1339">1339</a> 
<a name=L1340 href="source/net/core/rtnetlink.c#L1340">1340</a>                 <a href="ident?i=len">len</a> = sizeof(<a href="ident?i=sa_family_t">sa_family_t</a>) + <a href="ident?i=dev">dev</a>-&gt;addr_len;
<a name=L1341 href="source/net/core/rtnetlink.c#L1341">1341</a>                 <a href="ident?i=sa">sa</a> = <a href="ident?i=kmalloc">kmalloc</a>(<a href="ident?i=len">len</a>, <a href="ident?i=GFP_KERNEL">GFP_KERNEL</a>);
<a name=L1342 href="source/net/core/rtnetlink.c#L1342">1342</a>                 if (!<a href="ident?i=sa">sa</a>) {
<a name=L1343 href="source/net/core/rtnetlink.c#L1343">1343</a>                         <a href="ident?i=err">err</a> = -<a href="ident?i=ENOMEM">ENOMEM</a>;
<a name=L1344 href="source/net/core/rtnetlink.c#L1344">1344</a>                         goto errout;
<a name=L1345 href="source/net/core/rtnetlink.c#L1345">1345</a>                 }
<a name=L1346 href="source/net/core/rtnetlink.c#L1346">1346</a>                 <a href="ident?i=sa">sa</a>-&gt;sa_family = <a href="ident?i=dev">dev</a>-&gt;<a href="ident?i=type">type</a>;
<a name=L1347 href="source/net/core/rtnetlink.c#L1347">1347</a>                 <a href="ident?i=memcpy">memcpy</a>(<a href="ident?i=sa">sa</a>-&gt;sa_data, <a href="ident?i=nla_data">nla_data</a>(tb[IFLA_ADDRESS]),
<a name=L1348 href="source/net/core/rtnetlink.c#L1348">1348</a>                        <a href="ident?i=dev">dev</a>-&gt;addr_len);
<a name=L1349 href="source/net/core/rtnetlink.c#L1349">1349</a>                 <a href="ident?i=err">err</a> = <a href="ident?i=ops">ops</a>-&gt;ndo_set_mac_address(<a href="ident?i=dev">dev</a>, <a href="ident?i=sa">sa</a>);
<a name=L1350 href="source/net/core/rtnetlink.c#L1350">1350</a>                 <a href="ident?i=kfree">kfree</a>(<a href="ident?i=sa">sa</a>);
<a name=L1351 href="source/net/core/rtnetlink.c#L1351">1351</a>                 if (<a href="ident?i=err">err</a>)
<a name=L1352 href="source/net/core/rtnetlink.c#L1352">1352</a>                         goto errout;
<a name=L1353 href="source/net/core/rtnetlink.c#L1353">1353</a>                 send_addr_notify = 1;
<a name=L1354 href="source/net/core/rtnetlink.c#L1354">1354</a>                 modified = 1;
<a name=L1355 href="source/net/core/rtnetlink.c#L1355">1355</a>         }
<a name=L1356 href="source/net/core/rtnetlink.c#L1356">1356</a> 
<a name=L1357 href="source/net/core/rtnetlink.c#L1357">1357</a>         if (tb[IFLA_MTU]) {
<a name=L1358 href="source/net/core/rtnetlink.c#L1358">1358</a>                 <a href="ident?i=err">err</a> = <a href="ident?i=dev_set_mtu">dev_set_mtu</a>(<a href="ident?i=dev">dev</a>, <a href="ident?i=nla_get_u32">nla_get_u32</a>(tb[IFLA_MTU]));
<a name=L1359 href="source/net/core/rtnetlink.c#L1359">1359</a>                 if (<a href="ident?i=err">err</a> &lt; 0)
<a name=L1360 href="source/net/core/rtnetlink.c#L1360">1360</a>                         goto errout;
<a name=L1361 href="source/net/core/rtnetlink.c#L1361">1361</a>                 modified = 1;
<a name=L1362 href="source/net/core/rtnetlink.c#L1362">1362</a>         }
<a name=L1363 href="source/net/core/rtnetlink.c#L1363">1363</a> 
<a name=L1364 href="source/net/core/rtnetlink.c#L1364">1364</a>         if (tb[IFLA_GROUP]) {
<a name=L1365 href="source/net/core/rtnetlink.c#L1365">1365</a>                 <a href="ident?i=dev_set_group">dev_set_group</a>(<a href="ident?i=dev">dev</a>, <a href="ident?i=nla_get_u32">nla_get_u32</a>(tb[IFLA_GROUP]));
<a name=L1366 href="source/net/core/rtnetlink.c#L1366">1366</a>                 modified = 1;
<a name=L1367 href="source/net/core/rtnetlink.c#L1367">1367</a>         }
<a name=L1368 href="source/net/core/rtnetlink.c#L1368">1368</a> 
<a name=L1369 href="source/net/core/rtnetlink.c#L1369">1369</a>         <b><i>/*</i></b>
<a name=L1370 href="source/net/core/rtnetlink.c#L1370">1370</a> <b><i>         * Interface selected by interface index but interface</i></b>
<a name=L1371 href="source/net/core/rtnetlink.c#L1371">1371</a> <b><i>         * name provided implies that a name change has been</i></b>
<a name=L1372 href="source/net/core/rtnetlink.c#L1372">1372</a> <b><i>         * requested.</i></b>
<a name=L1373 href="source/net/core/rtnetlink.c#L1373">1373</a> <b><i>         */</i></b>
<a name=L1374 href="source/net/core/rtnetlink.c#L1374">1374</a>         if (ifm-&gt;ifi_index &gt; 0 &amp;&amp; <a href="ident?i=ifname">ifname</a>[0]) {
<a name=L1375 href="source/net/core/rtnetlink.c#L1375">1375</a>                 <a href="ident?i=err">err</a> = <a href="ident?i=dev_change_name">dev_change_name</a>(<a href="ident?i=dev">dev</a>, <a href="ident?i=ifname">ifname</a>);
<a name=L1376 href="source/net/core/rtnetlink.c#L1376">1376</a>                 if (<a href="ident?i=err">err</a> &lt; 0)
<a name=L1377 href="source/net/core/rtnetlink.c#L1377">1377</a>                         goto errout;
<a name=L1378 href="source/net/core/rtnetlink.c#L1378">1378</a>                 modified = 1;
<a name=L1379 href="source/net/core/rtnetlink.c#L1379">1379</a>         }
<a name=L1380 href="source/net/core/rtnetlink.c#L1380">1380</a> 
<a name=L1381 href="source/net/core/rtnetlink.c#L1381">1381</a>         if (tb[IFLA_IFALIAS]) {
<a name=L1382 href="source/net/core/rtnetlink.c#L1382">1382</a>                 <a href="ident?i=err">err</a> = <a href="ident?i=dev_set_alias">dev_set_alias</a>(<a href="ident?i=dev">dev</a>, <a href="ident?i=nla_data">nla_data</a>(tb[IFLA_IFALIAS]),
<a name=L1383 href="source/net/core/rtnetlink.c#L1383">1383</a>                                     <a href="ident?i=nla_len">nla_len</a>(tb[IFLA_IFALIAS]));
<a name=L1384 href="source/net/core/rtnetlink.c#L1384">1384</a>                 if (<a href="ident?i=err">err</a> &lt; 0)
<a name=L1385 href="source/net/core/rtnetlink.c#L1385">1385</a>                         goto errout;
<a name=L1386 href="source/net/core/rtnetlink.c#L1386">1386</a>                 modified = 1;
<a name=L1387 href="source/net/core/rtnetlink.c#L1387">1387</a>         }
<a name=L1388 href="source/net/core/rtnetlink.c#L1388">1388</a> 
<a name=L1389 href="source/net/core/rtnetlink.c#L1389">1389</a>         if (tb[IFLA_BROADCAST]) {
<a name=L1390 href="source/net/core/rtnetlink.c#L1390">1390</a>                 <a href="ident?i=nla_memcpy">nla_memcpy</a>(<a href="ident?i=dev">dev</a>-&gt;<a href="ident?i=broadcast">broadcast</a>, tb[IFLA_BROADCAST], <a href="ident?i=dev">dev</a>-&gt;addr_len);
<a name=L1391 href="source/net/core/rtnetlink.c#L1391">1391</a>                 send_addr_notify = 1;
<a name=L1392 href="source/net/core/rtnetlink.c#L1392">1392</a>         }
<a name=L1393 href="source/net/core/rtnetlink.c#L1393">1393</a> 
<a name=L1394 href="source/net/core/rtnetlink.c#L1394">1394</a>         if (ifm-&gt;ifi_flags || ifm-&gt;ifi_change) {
<a name=L1395 href="source/net/core/rtnetlink.c#L1395">1395</a>                 <a href="ident?i=err">err</a> = <a href="ident?i=dev_change_flags">dev_change_flags</a>(<a href="ident?i=dev">dev</a>, <a href="ident?i=rtnl_dev_combine_flags">rtnl_dev_combine_flags</a>(<a href="ident?i=dev">dev</a>, ifm));
<a name=L1396 href="source/net/core/rtnetlink.c#L1396">1396</a>                 if (<a href="ident?i=err">err</a> &lt; 0)
<a name=L1397 href="source/net/core/rtnetlink.c#L1397">1397</a>                         goto errout;
<a name=L1398 href="source/net/core/rtnetlink.c#L1398">1398</a>         }
<a name=L1399 href="source/net/core/rtnetlink.c#L1399">1399</a> 
<a name=L1400 href="source/net/core/rtnetlink.c#L1400">1400</a>         if (tb[<a href="ident?i=IFLA_MASTER">IFLA_MASTER</a>]) {
<a name=L1401 href="source/net/core/rtnetlink.c#L1401">1401</a>                 <a href="ident?i=err">err</a> = <a href="ident?i=do_set_master">do_set_master</a>(<a href="ident?i=dev">dev</a>, <a href="ident?i=nla_get_u32">nla_get_u32</a>(tb[<a href="ident?i=IFLA_MASTER">IFLA_MASTER</a>]));
<a name=L1402 href="source/net/core/rtnetlink.c#L1402">1402</a>                 if (<a href="ident?i=err">err</a>)
<a name=L1403 href="source/net/core/rtnetlink.c#L1403">1403</a>                         goto errout;
<a name=L1404 href="source/net/core/rtnetlink.c#L1404">1404</a>                 modified = 1;
<a name=L1405 href="source/net/core/rtnetlink.c#L1405">1405</a>         }
<a name=L1406 href="source/net/core/rtnetlink.c#L1406">1406</a> 
<a name=L1407 href="source/net/core/rtnetlink.c#L1407">1407</a>         if (tb[<a href="ident?i=IFLA_TXQLEN">IFLA_TXQLEN</a>])
<a name=L1408 href="source/net/core/rtnetlink.c#L1408">1408</a>                 <a href="ident?i=dev">dev</a>-&gt;tx_queue_len = <a href="ident?i=nla_get_u32">nla_get_u32</a>(tb[<a href="ident?i=IFLA_TXQLEN">IFLA_TXQLEN</a>]);
<a name=L1409 href="source/net/core/rtnetlink.c#L1409">1409</a> 
<a name=L1410 href="source/net/core/rtnetlink.c#L1410">1410</a>         if (tb[IFLA_OPERSTATE])
<a name=L1411 href="source/net/core/rtnetlink.c#L1411">1411</a>                 <a href="ident?i=set_operstate">set_operstate</a>(<a href="ident?i=dev">dev</a>, <a href="ident?i=nla_get_u8">nla_get_u8</a>(tb[IFLA_OPERSTATE]));
<a name=L1412 href="source/net/core/rtnetlink.c#L1412">1412</a> 
<a name=L1413 href="source/net/core/rtnetlink.c#L1413">1413</a>         if (tb[IFLA_LINKMODE]) {
<a name=L1414 href="source/net/core/rtnetlink.c#L1414">1414</a>                 <a href="ident?i=write_lock_bh">write_lock_bh</a>(&amp;<a href="ident?i=dev_base_lock">dev_base_lock</a>);
<a name=L1415 href="source/net/core/rtnetlink.c#L1415">1415</a>                 <a href="ident?i=dev">dev</a>-&gt;<a href="ident?i=link_mode">link_mode</a> = <a href="ident?i=nla_get_u8">nla_get_u8</a>(tb[IFLA_LINKMODE]);
<a name=L1416 href="source/net/core/rtnetlink.c#L1416">1416</a>                 <a href="ident?i=write_unlock_bh">write_unlock_bh</a>(&amp;<a href="ident?i=dev_base_lock">dev_base_lock</a>);
<a name=L1417 href="source/net/core/rtnetlink.c#L1417">1417</a>         }
<a name=L1418 href="source/net/core/rtnetlink.c#L1418">1418</a> 
<a name=L1419 href="source/net/core/rtnetlink.c#L1419">1419</a>         if (tb[IFLA_VFINFO_LIST]) {
<a name=L1420 href="source/net/core/rtnetlink.c#L1420">1420</a>                 struct <a href="ident?i=nlattr">nlattr</a> *<a href="ident?i=attr">attr</a>;
<a name=L1421 href="source/net/core/rtnetlink.c#L1421">1421</a>                 int rem;
<a name=L1422 href="source/net/core/rtnetlink.c#L1422">1422</a>                 <a href="ident?i=nla_for_each_nested">nla_for_each_nested</a>(<a href="ident?i=attr">attr</a>, tb[IFLA_VFINFO_LIST], rem) {
<a name=L1423 href="source/net/core/rtnetlink.c#L1423">1423</a>                         if (<a href="ident?i=nla_type">nla_type</a>(<a href="ident?i=attr">attr</a>) != IFLA_VF_INFO) {
<a name=L1424 href="source/net/core/rtnetlink.c#L1424">1424</a>                                 <a href="ident?i=err">err</a> = -<a href="ident?i=EINVAL">EINVAL</a>;
<a name=L1425 href="source/net/core/rtnetlink.c#L1425">1425</a>                                 goto errout;
<a name=L1426 href="source/net/core/rtnetlink.c#L1426">1426</a>                         }
<a name=L1427 href="source/net/core/rtnetlink.c#L1427">1427</a>                         <a href="ident?i=err">err</a> = <a href="ident?i=do_setvfinfo">do_setvfinfo</a>(<a href="ident?i=dev">dev</a>, <a href="ident?i=attr">attr</a>);
<a name=L1428 href="source/net/core/rtnetlink.c#L1428">1428</a>                         if (<a href="ident?i=err">err</a> &lt; 0)
<a name=L1429 href="source/net/core/rtnetlink.c#L1429">1429</a>                                 goto errout;
<a name=L1430 href="source/net/core/rtnetlink.c#L1430">1430</a>                         modified = 1;
<a name=L1431 href="source/net/core/rtnetlink.c#L1431">1431</a>                 }
<a name=L1432 href="source/net/core/rtnetlink.c#L1432">1432</a>         }
<a name=L1433 href="source/net/core/rtnetlink.c#L1433">1433</a>         <a href="ident?i=err">err</a> = 0;
<a name=L1434 href="source/net/core/rtnetlink.c#L1434">1434</a> 
<a name=L1435 href="source/net/core/rtnetlink.c#L1435">1435</a>         if (tb[IFLA_VF_PORTS]) {
<a name=L1436 href="source/net/core/rtnetlink.c#L1436">1436</a>                 struct <a href="ident?i=nlattr">nlattr</a> *<a href="ident?i=port">port</a>[<a href="ident?i=IFLA_PORT_MAX">IFLA_PORT_MAX</a>+1];
<a name=L1437 href="source/net/core/rtnetlink.c#L1437">1437</a>                 struct <a href="ident?i=nlattr">nlattr</a> *<a href="ident?i=attr">attr</a>;
<a name=L1438 href="source/net/core/rtnetlink.c#L1438">1438</a>                 int vf;
<a name=L1439 href="source/net/core/rtnetlink.c#L1439">1439</a>                 int rem;
<a name=L1440 href="source/net/core/rtnetlink.c#L1440">1440</a> 
<a name=L1441 href="source/net/core/rtnetlink.c#L1441">1441</a>                 <a href="ident?i=err">err</a> = -<a href="ident?i=EOPNOTSUPP">EOPNOTSUPP</a>;
<a name=L1442 href="source/net/core/rtnetlink.c#L1442">1442</a>                 if (!<a href="ident?i=ops">ops</a>-&gt;ndo_set_vf_port)
<a name=L1443 href="source/net/core/rtnetlink.c#L1443">1443</a>                         goto errout;
<a name=L1444 href="source/net/core/rtnetlink.c#L1444">1444</a> 
<a name=L1445 href="source/net/core/rtnetlink.c#L1445">1445</a>                 <a href="ident?i=nla_for_each_nested">nla_for_each_nested</a>(<a href="ident?i=attr">attr</a>, tb[IFLA_VF_PORTS], rem) {
<a name=L1446 href="source/net/core/rtnetlink.c#L1446">1446</a>                         if (<a href="ident?i=nla_type">nla_type</a>(<a href="ident?i=attr">attr</a>) != IFLA_VF_PORT)
<a name=L1447 href="source/net/core/rtnetlink.c#L1447">1447</a>                                 continue;
<a name=L1448 href="source/net/core/rtnetlink.c#L1448">1448</a>                         <a href="ident?i=err">err</a> = <a href="ident?i=nla_parse_nested">nla_parse_nested</a>(<a href="ident?i=port">port</a>, <a href="ident?i=IFLA_PORT_MAX">IFLA_PORT_MAX</a>,
<a name=L1449 href="source/net/core/rtnetlink.c#L1449">1449</a>                                 <a href="ident?i=attr">attr</a>, <a href="ident?i=ifla_port_policy">ifla_port_policy</a>);
<a name=L1450 href="source/net/core/rtnetlink.c#L1450">1450</a>                         if (<a href="ident?i=err">err</a> &lt; 0)
<a name=L1451 href="source/net/core/rtnetlink.c#L1451">1451</a>                                 goto errout;
<a name=L1452 href="source/net/core/rtnetlink.c#L1452">1452</a>                         if (!<a href="ident?i=port">port</a>[IFLA_PORT_VF]) {
<a name=L1453 href="source/net/core/rtnetlink.c#L1453">1453</a>                                 <a href="ident?i=err">err</a> = -<a href="ident?i=EOPNOTSUPP">EOPNOTSUPP</a>;
<a name=L1454 href="source/net/core/rtnetlink.c#L1454">1454</a>                                 goto errout;
<a name=L1455 href="source/net/core/rtnetlink.c#L1455">1455</a>                         }
<a name=L1456 href="source/net/core/rtnetlink.c#L1456">1456</a>                         vf = <a href="ident?i=nla_get_u32">nla_get_u32</a>(<a href="ident?i=port">port</a>[IFLA_PORT_VF]);
<a name=L1457 href="source/net/core/rtnetlink.c#L1457">1457</a>                         <a href="ident?i=err">err</a> = <a href="ident?i=ops">ops</a>-&gt;ndo_set_vf_port(<a href="ident?i=dev">dev</a>, vf, <a href="ident?i=port">port</a>);
<a name=L1458 href="source/net/core/rtnetlink.c#L1458">1458</a>                         if (<a href="ident?i=err">err</a> &lt; 0)
<a name=L1459 href="source/net/core/rtnetlink.c#L1459">1459</a>                                 goto errout;
<a name=L1460 href="source/net/core/rtnetlink.c#L1460">1460</a>                         modified = 1;
<a name=L1461 href="source/net/core/rtnetlink.c#L1461">1461</a>                 }
<a name=L1462 href="source/net/core/rtnetlink.c#L1462">1462</a>         }
<a name=L1463 href="source/net/core/rtnetlink.c#L1463">1463</a>         <a href="ident?i=err">err</a> = 0;
<a name=L1464 href="source/net/core/rtnetlink.c#L1464">1464</a> 
<a name=L1465 href="source/net/core/rtnetlink.c#L1465">1465</a>         if (tb[IFLA_PORT_SELF]) {
<a name=L1466 href="source/net/core/rtnetlink.c#L1466">1466</a>                 struct <a href="ident?i=nlattr">nlattr</a> *<a href="ident?i=port">port</a>[<a href="ident?i=IFLA_PORT_MAX">IFLA_PORT_MAX</a>+1];
<a name=L1467 href="source/net/core/rtnetlink.c#L1467">1467</a> 
<a name=L1468 href="source/net/core/rtnetlink.c#L1468">1468</a>                 <a href="ident?i=err">err</a> = <a href="ident?i=nla_parse_nested">nla_parse_nested</a>(<a href="ident?i=port">port</a>, <a href="ident?i=IFLA_PORT_MAX">IFLA_PORT_MAX</a>,
<a name=L1469 href="source/net/core/rtnetlink.c#L1469">1469</a>                         tb[IFLA_PORT_SELF], <a href="ident?i=ifla_port_policy">ifla_port_policy</a>);
<a name=L1470 href="source/net/core/rtnetlink.c#L1470">1470</a>                 if (<a href="ident?i=err">err</a> &lt; 0)
<a name=L1471 href="source/net/core/rtnetlink.c#L1471">1471</a>                         goto errout;
<a name=L1472 href="source/net/core/rtnetlink.c#L1472">1472</a> 
<a name=L1473 href="source/net/core/rtnetlink.c#L1473">1473</a>                 <a href="ident?i=err">err</a> = -<a href="ident?i=EOPNOTSUPP">EOPNOTSUPP</a>;
<a name=L1474 href="source/net/core/rtnetlink.c#L1474">1474</a>                 if (<a href="ident?i=ops">ops</a>-&gt;ndo_set_vf_port)
<a name=L1475 href="source/net/core/rtnetlink.c#L1475">1475</a>                         <a href="ident?i=err">err</a> = <a href="ident?i=ops">ops</a>-&gt;ndo_set_vf_port(<a href="ident?i=dev">dev</a>, <a href="ident?i=PORT_SELF_VF">PORT_SELF_VF</a>, <a href="ident?i=port">port</a>);
<a name=L1476 href="source/net/core/rtnetlink.c#L1476">1476</a>                 if (<a href="ident?i=err">err</a> &lt; 0)
<a name=L1477 href="source/net/core/rtnetlink.c#L1477">1477</a>                         goto errout;
<a name=L1478 href="source/net/core/rtnetlink.c#L1478">1478</a>                 modified = 1;
<a name=L1479 href="source/net/core/rtnetlink.c#L1479">1479</a>         }
<a name=L1480 href="source/net/core/rtnetlink.c#L1480">1480</a> 
<a name=L1481 href="source/net/core/rtnetlink.c#L1481">1481</a>         if (tb[IFLA_AF_SPEC]) {
<a name=L1482 href="source/net/core/rtnetlink.c#L1482">1482</a>                 struct <a href="ident?i=nlattr">nlattr</a> *af;
<a name=L1483 href="source/net/core/rtnetlink.c#L1483">1483</a>                 int rem;
<a name=L1484 href="source/net/core/rtnetlink.c#L1484">1484</a> 
<a name=L1485 href="source/net/core/rtnetlink.c#L1485">1485</a>                 <a href="ident?i=nla_for_each_nested">nla_for_each_nested</a>(af, tb[IFLA_AF_SPEC], rem) {
<a name=L1486 href="source/net/core/rtnetlink.c#L1486">1486</a>                         const struct <a href="ident?i=rtnl_af_ops">rtnl_af_ops</a> *af_ops;
<a name=L1487 href="source/net/core/rtnetlink.c#L1487">1487</a> 
<a name=L1488 href="source/net/core/rtnetlink.c#L1488">1488</a>                         if (!(af_ops = <a href="ident?i=rtnl_af_lookup">rtnl_af_lookup</a>(<a href="ident?i=nla_type">nla_type</a>(af))))
<a name=L1489 href="source/net/core/rtnetlink.c#L1489">1489</a>                                 <a href="ident?i=BUG">BUG</a>();
<a name=L1490 href="source/net/core/rtnetlink.c#L1490">1490</a> 
<a name=L1491 href="source/net/core/rtnetlink.c#L1491">1491</a>                         <a href="ident?i=err">err</a> = af_ops-&gt;set_link_af(<a href="ident?i=dev">dev</a>, af);
<a name=L1492 href="source/net/core/rtnetlink.c#L1492">1492</a>                         if (<a href="ident?i=err">err</a> &lt; 0)
<a name=L1493 href="source/net/core/rtnetlink.c#L1493">1493</a>                                 goto errout;
<a name=L1494 href="source/net/core/rtnetlink.c#L1494">1494</a> 
<a name=L1495 href="source/net/core/rtnetlink.c#L1495">1495</a>                         modified = 1;
<a name=L1496 href="source/net/core/rtnetlink.c#L1496">1496</a>                 }
<a name=L1497 href="source/net/core/rtnetlink.c#L1497">1497</a>         }
<a name=L1498 href="source/net/core/rtnetlink.c#L1498">1498</a>         <a href="ident?i=err">err</a> = 0;
<a name=L1499 href="source/net/core/rtnetlink.c#L1499">1499</a> 
<a name=L1500 href="source/net/core/rtnetlink.c#L1500">1500</a> errout:
<a name=L1501 href="source/net/core/rtnetlink.c#L1501">1501</a>         if (<a href="ident?i=err">err</a> &lt; 0 &amp;&amp; modified &amp;&amp; <a href="ident?i=net_ratelimit">net_ratelimit</a>())
<a name=L1502 href="source/net/core/rtnetlink.c#L1502">1502</a>                 <a href="ident?i=printk">printk</a>(<a href="ident?i=KERN_WARNING">KERN_WARNING</a> <i>"A link change request failed with "</i>
<a name=L1503 href="source/net/core/rtnetlink.c#L1503">1503</a>                        <i>"some changes committed already. Interface %s may "</i>
<a name=L1504 href="source/net/core/rtnetlink.c#L1504">1504</a>                        <i>"have been left with an inconsistent configuration, "</i>
<a name=L1505 href="source/net/core/rtnetlink.c#L1505">1505</a>                        <i>"please check.\n"</i>, <a href="ident?i=dev">dev</a>-&gt;<a href="ident?i=name">name</a>);
<a name=L1506 href="source/net/core/rtnetlink.c#L1506">1506</a> 
<a name=L1507 href="source/net/core/rtnetlink.c#L1507">1507</a>         if (send_addr_notify)
<a name=L1508 href="source/net/core/rtnetlink.c#L1508">1508</a>                 <a href="ident?i=call_netdevice_notifiers">call_netdevice_notifiers</a>(<a href="ident?i=NETDEV_CHANGEADDR">NETDEV_CHANGEADDR</a>, <a href="ident?i=dev">dev</a>);
<a name=L1509 href="source/net/core/rtnetlink.c#L1509">1509</a>         return <a href="ident?i=err">err</a>;
<a name=L1510 href="source/net/core/rtnetlink.c#L1510">1510</a> }
<a name=L1511 href="source/net/core/rtnetlink.c#L1511">1511</a> 
<a name=L1512 href="source/net/core/rtnetlink.c#L1512">1512</a> static int <a href="ident?i=rtnl_setlink">rtnl_setlink</a>(struct <a href="ident?i=sk_buff">sk_buff</a> *<a href="ident?i=skb">skb</a>, struct <a href="ident?i=nlmsghdr">nlmsghdr</a> *nlh, void *<a href="ident?i=arg">arg</a>)
<a name=L1513 href="source/net/core/rtnetlink.c#L1513">1513</a> {
<a name=L1514 href="source/net/core/rtnetlink.c#L1514">1514</a>         struct <a href="ident?i=net">net</a> *<a href="ident?i=net">net</a> = <a href="ident?i=sock_net">sock_net</a>(<a href="ident?i=skb">skb</a>-&gt;sk);
<a name=L1515 href="source/net/core/rtnetlink.c#L1515">1515</a>         struct <a href="ident?i=ifinfomsg">ifinfomsg</a> *ifm;
<a name=L1516 href="source/net/core/rtnetlink.c#L1516">1516</a>         struct <a href="ident?i=net_device">net_device</a> *<a href="ident?i=dev">dev</a>;
<a name=L1517 href="source/net/core/rtnetlink.c#L1517">1517</a>         int <a href="ident?i=err">err</a>;
<a name=L1518 href="source/net/core/rtnetlink.c#L1518">1518</a>         struct <a href="ident?i=nlattr">nlattr</a> *tb[<a href="ident?i=IFLA_MAX">IFLA_MAX</a>+1];
<a name=L1519 href="source/net/core/rtnetlink.c#L1519">1519</a>         char <a href="ident?i=ifname">ifname</a>[<a href="ident?i=IFNAMSIZ">IFNAMSIZ</a>];
<a name=L1520 href="source/net/core/rtnetlink.c#L1520">1520</a> 
<a name=L1521 href="source/net/core/rtnetlink.c#L1521">1521</a>         <a href="ident?i=err">err</a> = <a href="ident?i=nlmsg_parse">nlmsg_parse</a>(nlh, sizeof(*ifm), tb, <a href="ident?i=IFLA_MAX">IFLA_MAX</a>, <a href="ident?i=ifla_policy">ifla_policy</a>);
<a name=L1522 href="source/net/core/rtnetlink.c#L1522">1522</a>         if (<a href="ident?i=err">err</a> &lt; 0)
<a name=L1523 href="source/net/core/rtnetlink.c#L1523">1523</a>                 goto errout;
<a name=L1524 href="source/net/core/rtnetlink.c#L1524">1524</a> 
<a name=L1525 href="source/net/core/rtnetlink.c#L1525">1525</a>         if (tb[IFLA_IFNAME])
<a name=L1526 href="source/net/core/rtnetlink.c#L1526">1526</a>                 <a href="ident?i=nla_strlcpy">nla_strlcpy</a>(<a href="ident?i=ifname">ifname</a>, tb[IFLA_IFNAME], <a href="ident?i=IFNAMSIZ">IFNAMSIZ</a>);
<a name=L1527 href="source/net/core/rtnetlink.c#L1527">1527</a>         else
<a name=L1528 href="source/net/core/rtnetlink.c#L1528">1528</a>                 <a href="ident?i=ifname">ifname</a>[0] = <i>'\0'</i>;
<a name=L1529 href="source/net/core/rtnetlink.c#L1529">1529</a> 
<a name=L1530 href="source/net/core/rtnetlink.c#L1530">1530</a>         <a href="ident?i=err">err</a> = -<a href="ident?i=EINVAL">EINVAL</a>;
<a name=L1531 href="source/net/core/rtnetlink.c#L1531">1531</a>         ifm = <a href="ident?i=nlmsg_data">nlmsg_data</a>(nlh);
<a name=L1532 href="source/net/core/rtnetlink.c#L1532">1532</a>         if (ifm-&gt;ifi_index &gt; 0)
<a name=L1533 href="source/net/core/rtnetlink.c#L1533">1533</a>                 <a href="ident?i=dev">dev</a> = <a href="ident?i=__dev_get_by_index">__dev_get_by_index</a>(<a href="ident?i=net">net</a>, ifm-&gt;ifi_index);
<a name=L1534 href="source/net/core/rtnetlink.c#L1534">1534</a>         else if (tb[IFLA_IFNAME])
<a name=L1535 href="source/net/core/rtnetlink.c#L1535">1535</a>                 <a href="ident?i=dev">dev</a> = <a href="ident?i=__dev_get_by_name">__dev_get_by_name</a>(<a href="ident?i=net">net</a>, <a href="ident?i=ifname">ifname</a>);
<a name=L1536 href="source/net/core/rtnetlink.c#L1536">1536</a>         else
<a name=L1537 href="source/net/core/rtnetlink.c#L1537">1537</a>                 goto errout;
<a name=L1538 href="source/net/core/rtnetlink.c#L1538">1538</a> 
<a name=L1539 href="source/net/core/rtnetlink.c#L1539">1539</a>         if (<a href="ident?i=dev">dev</a> == <a href="ident?i=NULL">NULL</a>) {
<a name=L1540 href="source/net/core/rtnetlink.c#L1540">1540</a>                 <a href="ident?i=err">err</a> = -<a href="ident?i=ENODEV">ENODEV</a>;
<a name=L1541 href="source/net/core/rtnetlink.c#L1541">1541</a>                 goto errout;
<a name=L1542 href="source/net/core/rtnetlink.c#L1542">1542</a>         }
<a name=L1543 href="source/net/core/rtnetlink.c#L1543">1543</a> 
<a name=L1544 href="source/net/core/rtnetlink.c#L1544">1544</a>         <a href="ident?i=err">err</a> = <a href="ident?i=validate_linkmsg">validate_linkmsg</a>(<a href="ident?i=dev">dev</a>, tb);
<a name=L1545 href="source/net/core/rtnetlink.c#L1545">1545</a>         if (<a href="ident?i=err">err</a> &lt; 0)
<a name=L1546 href="source/net/core/rtnetlink.c#L1546">1546</a>                 goto errout;
<a name=L1547 href="source/net/core/rtnetlink.c#L1547">1547</a> 
<a name=L1548 href="source/net/core/rtnetlink.c#L1548">1548</a>         <a href="ident?i=err">err</a> = <a href="ident?i=do_setlink">do_setlink</a>(<a href="ident?i=dev">dev</a>, ifm, tb, <a href="ident?i=ifname">ifname</a>, 0);
<a name=L1549 href="source/net/core/rtnetlink.c#L1549">1549</a> errout:
<a name=L1550 href="source/net/core/rtnetlink.c#L1550">1550</a>         return <a href="ident?i=err">err</a>;
<a name=L1551 href="source/net/core/rtnetlink.c#L1551">1551</a> }
<a name=L1552 href="source/net/core/rtnetlink.c#L1552">1552</a> 
<a name=L1553 href="source/net/core/rtnetlink.c#L1553">1553</a> static int <a href="ident?i=rtnl_dellink">rtnl_dellink</a>(struct <a href="ident?i=sk_buff">sk_buff</a> *<a href="ident?i=skb">skb</a>, struct <a href="ident?i=nlmsghdr">nlmsghdr</a> *nlh, void *<a href="ident?i=arg">arg</a>)
<a name=L1554 href="source/net/core/rtnetlink.c#L1554">1554</a> {
<a name=L1555 href="source/net/core/rtnetlink.c#L1555">1555</a>         struct <a href="ident?i=net">net</a> *<a href="ident?i=net">net</a> = <a href="ident?i=sock_net">sock_net</a>(<a href="ident?i=skb">skb</a>-&gt;sk);
<a name=L1556 href="source/net/core/rtnetlink.c#L1556">1556</a>         const struct <a href="ident?i=rtnl_link_ops">rtnl_link_ops</a> *<a href="ident?i=ops">ops</a>;
<a name=L1557 href="source/net/core/rtnetlink.c#L1557">1557</a>         struct <a href="ident?i=net_device">net_device</a> *<a href="ident?i=dev">dev</a>;
<a name=L1558 href="source/net/core/rtnetlink.c#L1558">1558</a>         struct <a href="ident?i=ifinfomsg">ifinfomsg</a> *ifm;
<a name=L1559 href="source/net/core/rtnetlink.c#L1559">1559</a>         char <a href="ident?i=ifname">ifname</a>[<a href="ident?i=IFNAMSIZ">IFNAMSIZ</a>];
<a name=L1560 href="source/net/core/rtnetlink.c#L1560">1560</a>         struct <a href="ident?i=nlattr">nlattr</a> *tb[<a href="ident?i=IFLA_MAX">IFLA_MAX</a>+1];
<a name=L1561 href="source/net/core/rtnetlink.c#L1561">1561</a>         int <a href="ident?i=err">err</a>;
<a name=L1562 href="source/net/core/rtnetlink.c#L1562">1562</a>         <a href="ident?i=LIST_HEAD">LIST_HEAD</a>(list_kill);
<a name=L1563 href="source/net/core/rtnetlink.c#L1563">1563</a> 
<a name=L1564 href="source/net/core/rtnetlink.c#L1564">1564</a>         <a href="ident?i=err">err</a> = <a href="ident?i=nlmsg_parse">nlmsg_parse</a>(nlh, sizeof(*ifm), tb, <a href="ident?i=IFLA_MAX">IFLA_MAX</a>, <a href="ident?i=ifla_policy">ifla_policy</a>);
<a name=L1565 href="source/net/core/rtnetlink.c#L1565">1565</a>         if (<a href="ident?i=err">err</a> &lt; 0)
<a name=L1566 href="source/net/core/rtnetlink.c#L1566">1566</a>                 return <a href="ident?i=err">err</a>;
<a name=L1567 href="source/net/core/rtnetlink.c#L1567">1567</a> 
<a name=L1568 href="source/net/core/rtnetlink.c#L1568">1568</a>         if (tb[IFLA_IFNAME])
<a name=L1569 href="source/net/core/rtnetlink.c#L1569">1569</a>                 <a href="ident?i=nla_strlcpy">nla_strlcpy</a>(<a href="ident?i=ifname">ifname</a>, tb[IFLA_IFNAME], <a href="ident?i=IFNAMSIZ">IFNAMSIZ</a>);
<a name=L1570 href="source/net/core/rtnetlink.c#L1570">1570</a> 
<a name=L1571 href="source/net/core/rtnetlink.c#L1571">1571</a>         ifm = <a href="ident?i=nlmsg_data">nlmsg_data</a>(nlh);
<a name=L1572 href="source/net/core/rtnetlink.c#L1572">1572</a>         if (ifm-&gt;ifi_index &gt; 0)
<a name=L1573 href="source/net/core/rtnetlink.c#L1573">1573</a>                 <a href="ident?i=dev">dev</a> = <a href="ident?i=__dev_get_by_index">__dev_get_by_index</a>(<a href="ident?i=net">net</a>, ifm-&gt;ifi_index);
<a name=L1574 href="source/net/core/rtnetlink.c#L1574">1574</a>         else if (tb[IFLA_IFNAME])
<a name=L1575 href="source/net/core/rtnetlink.c#L1575">1575</a>                 <a href="ident?i=dev">dev</a> = <a href="ident?i=__dev_get_by_name">__dev_get_by_name</a>(<a href="ident?i=net">net</a>, <a href="ident?i=ifname">ifname</a>);
<a name=L1576 href="source/net/core/rtnetlink.c#L1576">1576</a>         else
<a name=L1577 href="source/net/core/rtnetlink.c#L1577">1577</a>                 return -<a href="ident?i=EINVAL">EINVAL</a>;
<a name=L1578 href="source/net/core/rtnetlink.c#L1578">1578</a> 
<a name=L1579 href="source/net/core/rtnetlink.c#L1579">1579</a>         if (!<a href="ident?i=dev">dev</a>)
<a name=L1580 href="source/net/core/rtnetlink.c#L1580">1580</a>                 return -<a href="ident?i=ENODEV">ENODEV</a>;
<a name=L1581 href="source/net/core/rtnetlink.c#L1581">1581</a> 
<a name=L1582 href="source/net/core/rtnetlink.c#L1582">1582</a>         <a href="ident?i=ops">ops</a> = <a href="ident?i=dev">dev</a>-&gt;<a href="ident?i=rtnl_link_ops">rtnl_link_ops</a>;
<a name=L1583 href="source/net/core/rtnetlink.c#L1583">1583</a>         if (!<a href="ident?i=ops">ops</a>)
<a name=L1584 href="source/net/core/rtnetlink.c#L1584">1584</a>                 return -<a href="ident?i=EOPNOTSUPP">EOPNOTSUPP</a>;
<a name=L1585 href="source/net/core/rtnetlink.c#L1585">1585</a> 
<a name=L1586 href="source/net/core/rtnetlink.c#L1586">1586</a>         <a href="ident?i=ops">ops</a>-&gt;dellink(<a href="ident?i=dev">dev</a>, &amp;list_kill);
<a name=L1587 href="source/net/core/rtnetlink.c#L1587">1587</a>         <a href="ident?i=unregister_netdevice_many">unregister_netdevice_many</a>(&amp;list_kill);
<a name=L1588 href="source/net/core/rtnetlink.c#L1588">1588</a>         <a href="ident?i=list_del">list_del</a>(&amp;list_kill);
<a name=L1589 href="source/net/core/rtnetlink.c#L1589">1589</a>         return 0;
<a name=L1590 href="source/net/core/rtnetlink.c#L1590">1590</a> }
<a name=L1591 href="source/net/core/rtnetlink.c#L1591">1591</a> 
<a name=L1592 href="source/net/core/rtnetlink.c#L1592">1592</a> int <a href="ident?i=rtnl_configure_link">rtnl_configure_link</a>(struct <a href="ident?i=net_device">net_device</a> *<a href="ident?i=dev">dev</a>, const struct <a href="ident?i=ifinfomsg">ifinfomsg</a> *ifm)
<a name=L1593 href="source/net/core/rtnetlink.c#L1593">1593</a> {
<a name=L1594 href="source/net/core/rtnetlink.c#L1594">1594</a>         unsigned int old_flags;
<a name=L1595 href="source/net/core/rtnetlink.c#L1595">1595</a>         int <a href="ident?i=err">err</a>;
<a name=L1596 href="source/net/core/rtnetlink.c#L1596">1596</a> 
<a name=L1597 href="source/net/core/rtnetlink.c#L1597">1597</a>         old_flags = <a href="ident?i=dev">dev</a>-&gt;<a href="ident?i=flags">flags</a>;
<a name=L1598 href="source/net/core/rtnetlink.c#L1598">1598</a>         if (ifm &amp;&amp; (ifm-&gt;ifi_flags || ifm-&gt;ifi_change)) {
<a name=L1599 href="source/net/core/rtnetlink.c#L1599">1599</a>                 <a href="ident?i=err">err</a> = <a href="ident?i=__dev_change_flags">__dev_change_flags</a>(<a href="ident?i=dev">dev</a>, <a href="ident?i=rtnl_dev_combine_flags">rtnl_dev_combine_flags</a>(<a href="ident?i=dev">dev</a>, ifm));
<a name=L1600 href="source/net/core/rtnetlink.c#L1600">1600</a>                 if (<a href="ident?i=err">err</a> &lt; 0)
<a name=L1601 href="source/net/core/rtnetlink.c#L1601">1601</a>                         return <a href="ident?i=err">err</a>;
<a name=L1602 href="source/net/core/rtnetlink.c#L1602">1602</a>         }
<a name=L1603 href="source/net/core/rtnetlink.c#L1603">1603</a> 
<a name=L1604 href="source/net/core/rtnetlink.c#L1604">1604</a>         <a href="ident?i=dev">dev</a>-&gt;rtnl_link_state = RTNL_LINK_INITIALIZED;
<a name=L1605 href="source/net/core/rtnetlink.c#L1605">1605</a>         <a href="ident?i=rtmsg_ifinfo">rtmsg_ifinfo</a>(<a href="ident?i=RTM_NEWLINK">RTM_NEWLINK</a>, <a href="ident?i=dev">dev</a>, ~0U);
<a name=L1606 href="source/net/core/rtnetlink.c#L1606">1606</a> 
<a name=L1607 href="source/net/core/rtnetlink.c#L1607">1607</a>         <a href="ident?i=__dev_notify_flags">__dev_notify_flags</a>(<a href="ident?i=dev">dev</a>, old_flags);
<a name=L1608 href="source/net/core/rtnetlink.c#L1608">1608</a>         return 0;
<a name=L1609 href="source/net/core/rtnetlink.c#L1609">1609</a> }
<a name=L1610 href="source/net/core/rtnetlink.c#L1610">1610</a> <a href="ident?i=EXPORT_SYMBOL">EXPORT_SYMBOL</a>(<a href="ident?i=rtnl_configure_link">rtnl_configure_link</a>);
<a name=L1611 href="source/net/core/rtnetlink.c#L1611">1611</a> 
<a name=L1612 href="source/net/core/rtnetlink.c#L1612">1612</a> struct <a href="ident?i=net_device">net_device</a> *<a href="ident?i=rtnl_create_link">rtnl_create_link</a>(struct <a href="ident?i=net">net</a> *src_net, struct <a href="ident?i=net">net</a> *<a href="ident?i=net">net</a>,
<a name=L1613 href="source/net/core/rtnetlink.c#L1613">1613</a>         char *<a href="ident?i=ifname">ifname</a>, const struct <a href="ident?i=rtnl_link_ops">rtnl_link_ops</a> *<a href="ident?i=ops">ops</a>, struct <a href="ident?i=nlattr">nlattr</a> *tb[])
<a name=L1614 href="source/net/core/rtnetlink.c#L1614">1614</a> {
<a name=L1615 href="source/net/core/rtnetlink.c#L1615">1615</a>         int <a href="ident?i=err">err</a>;
<a name=L1616 href="source/net/core/rtnetlink.c#L1616">1616</a>         struct <a href="ident?i=net_device">net_device</a> *<a href="ident?i=dev">dev</a>;
<a name=L1617 href="source/net/core/rtnetlink.c#L1617">1617</a>         unsigned int <a href="ident?i=num_queues">num_queues</a> = 1;
<a name=L1618 href="source/net/core/rtnetlink.c#L1618">1618</a>         unsigned int real_num_queues = 1;
<a name=L1619 href="source/net/core/rtnetlink.c#L1619">1619</a> 
<a name=L1620 href="source/net/core/rtnetlink.c#L1620">1620</a>         if (<a href="ident?i=ops">ops</a>-&gt;get_tx_queues) {
<a name=L1621 href="source/net/core/rtnetlink.c#L1621">1621</a>                 <a href="ident?i=err">err</a> = <a href="ident?i=ops">ops</a>-&gt;get_tx_queues(src_net, tb, &amp;<a href="ident?i=num_queues">num_queues</a>,
<a name=L1622 href="source/net/core/rtnetlink.c#L1622">1622</a>                                          &amp;real_num_queues);
<a name=L1623 href="source/net/core/rtnetlink.c#L1623">1623</a>                 if (<a href="ident?i=err">err</a>)
<a name=L1624 href="source/net/core/rtnetlink.c#L1624">1624</a>                         goto <a href="ident?i=err">err</a>;
<a name=L1625 href="source/net/core/rtnetlink.c#L1625">1625</a>         }
<a name=L1626 href="source/net/core/rtnetlink.c#L1626">1626</a>         <a href="ident?i=err">err</a> = -<a href="ident?i=ENOMEM">ENOMEM</a>;
<a name=L1627 href="source/net/core/rtnetlink.c#L1627">1627</a>         <a href="ident?i=dev">dev</a> = <a href="ident?i=alloc_netdev_mq">alloc_netdev_mq</a>(<a href="ident?i=ops">ops</a>-&gt;priv_size, <a href="ident?i=ifname">ifname</a>, <a href="ident?i=ops">ops</a>-&gt;<a href="ident?i=setup">setup</a>, <a href="ident?i=num_queues">num_queues</a>);
<a name=L1628 href="source/net/core/rtnetlink.c#L1628">1628</a>         if (!<a href="ident?i=dev">dev</a>)
<a name=L1629 href="source/net/core/rtnetlink.c#L1629">1629</a>                 goto <a href="ident?i=err">err</a>;
<a name=L1630 href="source/net/core/rtnetlink.c#L1630">1630</a> 
<a name=L1631 href="source/net/core/rtnetlink.c#L1631">1631</a>         <a href="ident?i=dev_net_set">dev_net_set</a>(<a href="ident?i=dev">dev</a>, <a href="ident?i=net">net</a>);
<a name=L1632 href="source/net/core/rtnetlink.c#L1632">1632</a>         <a href="ident?i=dev">dev</a>-&gt;<a href="ident?i=rtnl_link_ops">rtnl_link_ops</a> = <a href="ident?i=ops">ops</a>;
<a name=L1633 href="source/net/core/rtnetlink.c#L1633">1633</a>         <a href="ident?i=dev">dev</a>-&gt;rtnl_link_state = RTNL_LINK_INITIALIZING;
<a name=L1634 href="source/net/core/rtnetlink.c#L1634">1634</a> 
<a name=L1635 href="source/net/core/rtnetlink.c#L1635">1635</a>         if (tb[IFLA_MTU])
<a name=L1636 href="source/net/core/rtnetlink.c#L1636">1636</a>                 <a href="ident?i=dev">dev</a>-&gt;<a href="ident?i=mtu">mtu</a> = <a href="ident?i=nla_get_u32">nla_get_u32</a>(tb[IFLA_MTU]);
<a name=L1637 href="source/net/core/rtnetlink.c#L1637">1637</a>         if (tb[IFLA_ADDRESS])
<a name=L1638 href="source/net/core/rtnetlink.c#L1638">1638</a>                 <a href="ident?i=memcpy">memcpy</a>(<a href="ident?i=dev">dev</a>-&gt;<a href="ident?i=dev_addr">dev_addr</a>, <a href="ident?i=nla_data">nla_data</a>(tb[IFLA_ADDRESS]),
<a name=L1639 href="source/net/core/rtnetlink.c#L1639">1639</a>                                 <a href="ident?i=nla_len">nla_len</a>(tb[IFLA_ADDRESS]));
<a name=L1640 href="source/net/core/rtnetlink.c#L1640">1640</a>         if (tb[IFLA_BROADCAST])
<a name=L1641 href="source/net/core/rtnetlink.c#L1641">1641</a>                 <a href="ident?i=memcpy">memcpy</a>(<a href="ident?i=dev">dev</a>-&gt;<a href="ident?i=broadcast">broadcast</a>, <a href="ident?i=nla_data">nla_data</a>(tb[IFLA_BROADCAST]),
<a name=L1642 href="source/net/core/rtnetlink.c#L1642">1642</a>                                 <a href="ident?i=nla_len">nla_len</a>(tb[IFLA_BROADCAST]));
<a name=L1643 href="source/net/core/rtnetlink.c#L1643">1643</a>         if (tb[<a href="ident?i=IFLA_TXQLEN">IFLA_TXQLEN</a>])
<a name=L1644 href="source/net/core/rtnetlink.c#L1644">1644</a>                 <a href="ident?i=dev">dev</a>-&gt;tx_queue_len = <a href="ident?i=nla_get_u32">nla_get_u32</a>(tb[<a href="ident?i=IFLA_TXQLEN">IFLA_TXQLEN</a>]);
<a name=L1645 href="source/net/core/rtnetlink.c#L1645">1645</a>         if (tb[IFLA_OPERSTATE])
<a name=L1646 href="source/net/core/rtnetlink.c#L1646">1646</a>                 <a href="ident?i=set_operstate">set_operstate</a>(<a href="ident?i=dev">dev</a>, <a href="ident?i=nla_get_u8">nla_get_u8</a>(tb[IFLA_OPERSTATE]));
<a name=L1647 href="source/net/core/rtnetlink.c#L1647">1647</a>         if (tb[IFLA_LINKMODE])
<a name=L1648 href="source/net/core/rtnetlink.c#L1648">1648</a>                 <a href="ident?i=dev">dev</a>-&gt;<a href="ident?i=link_mode">link_mode</a> = <a href="ident?i=nla_get_u8">nla_get_u8</a>(tb[IFLA_LINKMODE]);
<a name=L1649 href="source/net/core/rtnetlink.c#L1649">1649</a>         if (tb[IFLA_GROUP])
<a name=L1650 href="source/net/core/rtnetlink.c#L1650">1650</a>                 <a href="ident?i=dev_set_group">dev_set_group</a>(<a href="ident?i=dev">dev</a>, <a href="ident?i=nla_get_u32">nla_get_u32</a>(tb[IFLA_GROUP]));
<a name=L1651 href="source/net/core/rtnetlink.c#L1651">1651</a> 
<a name=L1652 href="source/net/core/rtnetlink.c#L1652">1652</a>         return <a href="ident?i=dev">dev</a>;
<a name=L1653 href="source/net/core/rtnetlink.c#L1653">1653</a> 
<a name=L1654 href="source/net/core/rtnetlink.c#L1654">1654</a> <a href="ident?i=err">err</a>:
<a name=L1655 href="source/net/core/rtnetlink.c#L1655">1655</a>         return <a href="ident?i=ERR_PTR">ERR_PTR</a>(<a href="ident?i=err">err</a>);
<a name=L1656 href="source/net/core/rtnetlink.c#L1656">1656</a> }
<a name=L1657 href="source/net/core/rtnetlink.c#L1657">1657</a> <a href="ident?i=EXPORT_SYMBOL">EXPORT_SYMBOL</a>(<a href="ident?i=rtnl_create_link">rtnl_create_link</a>);
<a name=L1658 href="source/net/core/rtnetlink.c#L1658">1658</a> 
<a name=L1659 href="source/net/core/rtnetlink.c#L1659">1659</a> static int <a href="ident?i=rtnl_group_changelink">rtnl_group_changelink</a>(struct <a href="ident?i=net">net</a> *<a href="ident?i=net">net</a>, int <a href="ident?i=group">group</a>,
<a name=L1660 href="source/net/core/rtnetlink.c#L1660">1660</a>                 struct <a href="ident?i=ifinfomsg">ifinfomsg</a> *ifm,
<a name=L1661 href="source/net/core/rtnetlink.c#L1661">1661</a>                 struct <a href="ident?i=nlattr">nlattr</a> **tb)
<a name=L1662 href="source/net/core/rtnetlink.c#L1662">1662</a> {
<a name=L1663 href="source/net/core/rtnetlink.c#L1663">1663</a>         struct <a href="ident?i=net_device">net_device</a> *<a href="ident?i=dev">dev</a>;
<a name=L1664 href="source/net/core/rtnetlink.c#L1664">1664</a>         int <a href="ident?i=err">err</a>;
<a name=L1665 href="source/net/core/rtnetlink.c#L1665">1665</a> 
<a name=L1666 href="source/net/core/rtnetlink.c#L1666">1666</a>         <a href="ident?i=for_each_netdev">for_each_netdev</a>(<a href="ident?i=net">net</a>, <a href="ident?i=dev">dev</a>) {
<a name=L1667 href="source/net/core/rtnetlink.c#L1667">1667</a>                 if (<a href="ident?i=dev">dev</a>-&gt;<a href="ident?i=group">group</a> == <a href="ident?i=group">group</a>) {
<a name=L1668 href="source/net/core/rtnetlink.c#L1668">1668</a>                         <a href="ident?i=err">err</a> = <a href="ident?i=do_setlink">do_setlink</a>(<a href="ident?i=dev">dev</a>, ifm, tb, <a href="ident?i=NULL">NULL</a>, 0);
<a name=L1669 href="source/net/core/rtnetlink.c#L1669">1669</a>                         if (<a href="ident?i=err">err</a> &lt; 0)
<a name=L1670 href="source/net/core/rtnetlink.c#L1670">1670</a>                                 return <a href="ident?i=err">err</a>;
<a name=L1671 href="source/net/core/rtnetlink.c#L1671">1671</a>                 }
<a name=L1672 href="source/net/core/rtnetlink.c#L1672">1672</a>         }
<a name=L1673 href="source/net/core/rtnetlink.c#L1673">1673</a> 
<a name=L1674 href="source/net/core/rtnetlink.c#L1674">1674</a>         return 0;
<a name=L1675 href="source/net/core/rtnetlink.c#L1675">1675</a> }
<a name=L1676 href="source/net/core/rtnetlink.c#L1676">1676</a> 
<a name=L1677 href="source/net/core/rtnetlink.c#L1677">1677</a> static int <a href="ident?i=rtnl_newlink">rtnl_newlink</a>(struct <a href="ident?i=sk_buff">sk_buff</a> *<a href="ident?i=skb">skb</a>, struct <a href="ident?i=nlmsghdr">nlmsghdr</a> *nlh, void *<a href="ident?i=arg">arg</a>)
<a name=L1678 href="source/net/core/rtnetlink.c#L1678">1678</a> {
<a name=L1679 href="source/net/core/rtnetlink.c#L1679">1679</a>         struct <a href="ident?i=net">net</a> *<a href="ident?i=net">net</a> = <a href="ident?i=sock_net">sock_net</a>(<a href="ident?i=skb">skb</a>-&gt;sk);
<a name=L1680 href="source/net/core/rtnetlink.c#L1680">1680</a>         const struct <a href="ident?i=rtnl_link_ops">rtnl_link_ops</a> *<a href="ident?i=ops">ops</a>;
<a name=L1681 href="source/net/core/rtnetlink.c#L1681">1681</a>         struct <a href="ident?i=net_device">net_device</a> *<a href="ident?i=dev">dev</a>;
<a name=L1682 href="source/net/core/rtnetlink.c#L1682">1682</a>         struct <a href="ident?i=ifinfomsg">ifinfomsg</a> *ifm;
<a name=L1683 href="source/net/core/rtnetlink.c#L1683">1683</a>         char kind[<a href="ident?i=MODULE_NAME_LEN">MODULE_NAME_LEN</a>];
<a name=L1684 href="source/net/core/rtnetlink.c#L1684">1684</a>         char <a href="ident?i=ifname">ifname</a>[<a href="ident?i=IFNAMSIZ">IFNAMSIZ</a>];
<a name=L1685 href="source/net/core/rtnetlink.c#L1685">1685</a>         struct <a href="ident?i=nlattr">nlattr</a> *tb[<a href="ident?i=IFLA_MAX">IFLA_MAX</a>+1];
<a name=L1686 href="source/net/core/rtnetlink.c#L1686">1686</a>         struct <a href="ident?i=nlattr">nlattr</a> *linkinfo[<a href="ident?i=IFLA_INFO_MAX">IFLA_INFO_MAX</a>+1];
<a name=L1687 href="source/net/core/rtnetlink.c#L1687">1687</a>         int <a href="ident?i=err">err</a>;
<a name=L1688 href="source/net/core/rtnetlink.c#L1688">1688</a> 
<a name=L1689 href="source/net/core/rtnetlink.c#L1689">1689</a> #ifdef <a href="ident?i=CONFIG_MODULES">CONFIG_MODULES</a>
<a name=L1690 href="source/net/core/rtnetlink.c#L1690">1690</a> replay:
<a name=L1691 href="source/net/core/rtnetlink.c#L1691">1691</a> #endif
<a name=L1692 href="source/net/core/rtnetlink.c#L1692">1692</a>         <a href="ident?i=err">err</a> = <a href="ident?i=nlmsg_parse">nlmsg_parse</a>(nlh, sizeof(*ifm), tb, <a href="ident?i=IFLA_MAX">IFLA_MAX</a>, <a href="ident?i=ifla_policy">ifla_policy</a>);
<a name=L1693 href="source/net/core/rtnetlink.c#L1693">1693</a>         if (<a href="ident?i=err">err</a> &lt; 0)
<a name=L1694 href="source/net/core/rtnetlink.c#L1694">1694</a>                 return <a href="ident?i=err">err</a>;
<a name=L1695 href="source/net/core/rtnetlink.c#L1695">1695</a> 
<a name=L1696 href="source/net/core/rtnetlink.c#L1696">1696</a>         if (tb[IFLA_IFNAME])
<a name=L1697 href="source/net/core/rtnetlink.c#L1697">1697</a>                 <a href="ident?i=nla_strlcpy">nla_strlcpy</a>(<a href="ident?i=ifname">ifname</a>, tb[IFLA_IFNAME], <a href="ident?i=IFNAMSIZ">IFNAMSIZ</a>);
<a name=L1698 href="source/net/core/rtnetlink.c#L1698">1698</a>         else
<a name=L1699 href="source/net/core/rtnetlink.c#L1699">1699</a>                 <a href="ident?i=ifname">ifname</a>[0] = <i>'\0'</i>;
<a name=L1700 href="source/net/core/rtnetlink.c#L1700">1700</a> 
<a name=L1701 href="source/net/core/rtnetlink.c#L1701">1701</a>         ifm = <a href="ident?i=nlmsg_data">nlmsg_data</a>(nlh);
<a name=L1702 href="source/net/core/rtnetlink.c#L1702">1702</a>         if (ifm-&gt;ifi_index &gt; 0)
<a name=L1703 href="source/net/core/rtnetlink.c#L1703">1703</a>                 <a href="ident?i=dev">dev</a> = <a href="ident?i=__dev_get_by_index">__dev_get_by_index</a>(<a href="ident?i=net">net</a>, ifm-&gt;ifi_index);
<a name=L1704 href="source/net/core/rtnetlink.c#L1704">1704</a>         else {
<a name=L1705 href="source/net/core/rtnetlink.c#L1705">1705</a>                 if (<a href="ident?i=ifname">ifname</a>[0])
<a name=L1706 href="source/net/core/rtnetlink.c#L1706">1706</a>                         <a href="ident?i=dev">dev</a> = <a href="ident?i=__dev_get_by_name">__dev_get_by_name</a>(<a href="ident?i=net">net</a>, <a href="ident?i=ifname">ifname</a>);
<a name=L1707 href="source/net/core/rtnetlink.c#L1707">1707</a>                 else
<a name=L1708 href="source/net/core/rtnetlink.c#L1708">1708</a>                         <a href="ident?i=dev">dev</a> = <a href="ident?i=NULL">NULL</a>;
<a name=L1709 href="source/net/core/rtnetlink.c#L1709">1709</a>         }
<a name=L1710 href="source/net/core/rtnetlink.c#L1710">1710</a> 
<a name=L1711 href="source/net/core/rtnetlink.c#L1711">1711</a>         <a href="ident?i=err">err</a> = <a href="ident?i=validate_linkmsg">validate_linkmsg</a>(<a href="ident?i=dev">dev</a>, tb);
<a name=L1712 href="source/net/core/rtnetlink.c#L1712">1712</a>         if (<a href="ident?i=err">err</a> &lt; 0)
<a name=L1713 href="source/net/core/rtnetlink.c#L1713">1713</a>                 return <a href="ident?i=err">err</a>;
<a name=L1714 href="source/net/core/rtnetlink.c#L1714">1714</a> 
<a name=L1715 href="source/net/core/rtnetlink.c#L1715">1715</a>         if (tb[<a href="ident?i=IFLA_LINKINFO">IFLA_LINKINFO</a>]) {
<a name=L1716 href="source/net/core/rtnetlink.c#L1716">1716</a>                 <a href="ident?i=err">err</a> = <a href="ident?i=nla_parse_nested">nla_parse_nested</a>(linkinfo, <a href="ident?i=IFLA_INFO_MAX">IFLA_INFO_MAX</a>,
<a name=L1717 href="source/net/core/rtnetlink.c#L1717">1717</a>                                        tb[<a href="ident?i=IFLA_LINKINFO">IFLA_LINKINFO</a>], <a href="ident?i=ifla_info_policy">ifla_info_policy</a>);
<a name=L1718 href="source/net/core/rtnetlink.c#L1718">1718</a>                 if (<a href="ident?i=err">err</a> &lt; 0)
<a name=L1719 href="source/net/core/rtnetlink.c#L1719">1719</a>                         return <a href="ident?i=err">err</a>;
<a name=L1720 href="source/net/core/rtnetlink.c#L1720">1720</a>         } else
<a name=L1721 href="source/net/core/rtnetlink.c#L1721">1721</a>                 <a href="ident?i=memset">memset</a>(linkinfo, 0, sizeof(linkinfo));
<a name=L1722 href="source/net/core/rtnetlink.c#L1722">1722</a> 
<a name=L1723 href="source/net/core/rtnetlink.c#L1723">1723</a>         if (linkinfo[IFLA_INFO_KIND]) {
<a name=L1724 href="source/net/core/rtnetlink.c#L1724">1724</a>                 <a href="ident?i=nla_strlcpy">nla_strlcpy</a>(kind, linkinfo[IFLA_INFO_KIND], sizeof(kind));
<a name=L1725 href="source/net/core/rtnetlink.c#L1725">1725</a>                 <a href="ident?i=ops">ops</a> = <a href="ident?i=rtnl_link_ops_get">rtnl_link_ops_get</a>(kind);
<a name=L1726 href="source/net/core/rtnetlink.c#L1726">1726</a>         } else {
<a name=L1727 href="source/net/core/rtnetlink.c#L1727">1727</a>                 kind[0] = <i>'\0'</i>;
<a name=L1728 href="source/net/core/rtnetlink.c#L1728">1728</a>                 <a href="ident?i=ops">ops</a> = <a href="ident?i=NULL">NULL</a>;
<a name=L1729 href="source/net/core/rtnetlink.c#L1729">1729</a>         }
<a name=L1730 href="source/net/core/rtnetlink.c#L1730">1730</a> 
<a name=L1731 href="source/net/core/rtnetlink.c#L1731">1731</a>         if (1) {
<a name=L1732 href="source/net/core/rtnetlink.c#L1732">1732</a>                 struct <a href="ident?i=nlattr">nlattr</a> *<a href="ident?i=attr">attr</a>[<a href="ident?i=ops">ops</a> ? <a href="ident?i=ops">ops</a>-&gt;maxtype + 1 : 0], **<a href="ident?i=data">data</a> = <a href="ident?i=NULL">NULL</a>;
<a name=L1733 href="source/net/core/rtnetlink.c#L1733">1733</a>                 struct <a href="ident?i=net">net</a> *dest_net;
<a name=L1734 href="source/net/core/rtnetlink.c#L1734">1734</a> 
<a name=L1735 href="source/net/core/rtnetlink.c#L1735">1735</a>                 if (<a href="ident?i=ops">ops</a>) {
<a name=L1736 href="source/net/core/rtnetlink.c#L1736">1736</a>                         if (<a href="ident?i=ops">ops</a>-&gt;maxtype &amp;&amp; linkinfo[IFLA_INFO_DATA]) {
<a name=L1737 href="source/net/core/rtnetlink.c#L1737">1737</a>                                 <a href="ident?i=err">err</a> = <a href="ident?i=nla_parse_nested">nla_parse_nested</a>(<a href="ident?i=attr">attr</a>, <a href="ident?i=ops">ops</a>-&gt;maxtype,
<a name=L1738 href="source/net/core/rtnetlink.c#L1738">1738</a>                                                        linkinfo[IFLA_INFO_DATA],
<a name=L1739 href="source/net/core/rtnetlink.c#L1739">1739</a>                                                        <a href="ident?i=ops">ops</a>-&gt;policy);
<a name=L1740 href="source/net/core/rtnetlink.c#L1740">1740</a>                                 if (<a href="ident?i=err">err</a> &lt; 0)
<a name=L1741 href="source/net/core/rtnetlink.c#L1741">1741</a>                                         return <a href="ident?i=err">err</a>;
<a name=L1742 href="source/net/core/rtnetlink.c#L1742">1742</a>                                 <a href="ident?i=data">data</a> = <a href="ident?i=attr">attr</a>;
<a name=L1743 href="source/net/core/rtnetlink.c#L1743">1743</a>                         }
<a name=L1744 href="source/net/core/rtnetlink.c#L1744">1744</a>                         if (<a href="ident?i=ops">ops</a>-&gt;<a href="ident?i=validate">validate</a>) {
<a name=L1745 href="source/net/core/rtnetlink.c#L1745">1745</a>                                 <a href="ident?i=err">err</a> = <a href="ident?i=ops">ops</a>-&gt;<a href="ident?i=validate">validate</a>(tb, <a href="ident?i=data">data</a>);
<a name=L1746 href="source/net/core/rtnetlink.c#L1746">1746</a>                                 if (<a href="ident?i=err">err</a> &lt; 0)
<a name=L1747 href="source/net/core/rtnetlink.c#L1747">1747</a>                                         return <a href="ident?i=err">err</a>;
<a name=L1748 href="source/net/core/rtnetlink.c#L1748">1748</a>                         }
<a name=L1749 href="source/net/core/rtnetlink.c#L1749">1749</a>                 }
<a name=L1750 href="source/net/core/rtnetlink.c#L1750">1750</a> 
<a name=L1751 href="source/net/core/rtnetlink.c#L1751">1751</a>                 if (<a href="ident?i=dev">dev</a>) {
<a name=L1752 href="source/net/core/rtnetlink.c#L1752">1752</a>                         int modified = 0;
<a name=L1753 href="source/net/core/rtnetlink.c#L1753">1753</a> 
<a name=L1754 href="source/net/core/rtnetlink.c#L1754">1754</a>                         if (nlh-&gt;nlmsg_flags &amp; <a href="ident?i=NLM_F_EXCL">NLM_F_EXCL</a>)
<a name=L1755 href="source/net/core/rtnetlink.c#L1755">1755</a>                                 return -<a href="ident?i=EEXIST">EEXIST</a>;
<a name=L1756 href="source/net/core/rtnetlink.c#L1756">1756</a>                         if (nlh-&gt;nlmsg_flags &amp; <a href="ident?i=NLM_F_REPLACE">NLM_F_REPLACE</a>)
<a name=L1757 href="source/net/core/rtnetlink.c#L1757">1757</a>                                 return -<a href="ident?i=EOPNOTSUPP">EOPNOTSUPP</a>;
<a name=L1758 href="source/net/core/rtnetlink.c#L1758">1758</a> 
<a name=L1759 href="source/net/core/rtnetlink.c#L1759">1759</a>                         if (linkinfo[IFLA_INFO_DATA]) {
<a name=L1760 href="source/net/core/rtnetlink.c#L1760">1760</a>                                 if (!<a href="ident?i=ops">ops</a> || <a href="ident?i=ops">ops</a> != <a href="ident?i=dev">dev</a>-&gt;<a href="ident?i=rtnl_link_ops">rtnl_link_ops</a> ||
<a name=L1761 href="source/net/core/rtnetlink.c#L1761">1761</a>                                     !<a href="ident?i=ops">ops</a>-&gt;changelink)
<a name=L1762 href="source/net/core/rtnetlink.c#L1762">1762</a>                                         return -<a href="ident?i=EOPNOTSUPP">EOPNOTSUPP</a>;
<a name=L1763 href="source/net/core/rtnetlink.c#L1763">1763</a> 
<a name=L1764 href="source/net/core/rtnetlink.c#L1764">1764</a>                                 <a href="ident?i=err">err</a> = <a href="ident?i=ops">ops</a>-&gt;changelink(<a href="ident?i=dev">dev</a>, tb, <a href="ident?i=data">data</a>);
<a name=L1765 href="source/net/core/rtnetlink.c#L1765">1765</a>                                 if (<a href="ident?i=err">err</a> &lt; 0)
<a name=L1766 href="source/net/core/rtnetlink.c#L1766">1766</a>                                         return <a href="ident?i=err">err</a>;
<a name=L1767 href="source/net/core/rtnetlink.c#L1767">1767</a>                                 modified = 1;
<a name=L1768 href="source/net/core/rtnetlink.c#L1768">1768</a>                         }
<a name=L1769 href="source/net/core/rtnetlink.c#L1769">1769</a> 
<a name=L1770 href="source/net/core/rtnetlink.c#L1770">1770</a>                         return <a href="ident?i=do_setlink">do_setlink</a>(<a href="ident?i=dev">dev</a>, ifm, tb, <a href="ident?i=ifname">ifname</a>, modified);
<a name=L1771 href="source/net/core/rtnetlink.c#L1771">1771</a>                 }
<a name=L1772 href="source/net/core/rtnetlink.c#L1772">1772</a> 
<a name=L1773 href="source/net/core/rtnetlink.c#L1773">1773</a>                 if (!(nlh-&gt;nlmsg_flags &amp; <a href="ident?i=NLM_F_CREATE">NLM_F_CREATE</a>)) {
<a name=L1774 href="source/net/core/rtnetlink.c#L1774">1774</a>                         if (ifm-&gt;ifi_index == 0 &amp;&amp; tb[IFLA_GROUP])
<a name=L1775 href="source/net/core/rtnetlink.c#L1775">1775</a>                                 return <a href="ident?i=rtnl_group_changelink">rtnl_group_changelink</a>(<a href="ident?i=net">net</a>,
<a name=L1776 href="source/net/core/rtnetlink.c#L1776">1776</a>                                                 <a href="ident?i=nla_get_u32">nla_get_u32</a>(tb[IFLA_GROUP]),
<a name=L1777 href="source/net/core/rtnetlink.c#L1777">1777</a>                                                 ifm, tb);
<a name=L1778 href="source/net/core/rtnetlink.c#L1778">1778</a>                         return -<a href="ident?i=ENODEV">ENODEV</a>;
<a name=L1779 href="source/net/core/rtnetlink.c#L1779">1779</a>                 }
<a name=L1780 href="source/net/core/rtnetlink.c#L1780">1780</a> 
<a name=L1781 href="source/net/core/rtnetlink.c#L1781">1781</a>                 if (ifm-&gt;ifi_index)
<a name=L1782 href="source/net/core/rtnetlink.c#L1782">1782</a>                         return -<a href="ident?i=EOPNOTSUPP">EOPNOTSUPP</a>;
<a name=L1783 href="source/net/core/rtnetlink.c#L1783">1783</a>                 if (tb[<a href="ident?i=IFLA_MAP">IFLA_MAP</a>] || tb[<a href="ident?i=IFLA_MASTER">IFLA_MASTER</a>] || tb[<a href="ident?i=IFLA_PROTINFO">IFLA_PROTINFO</a>])
<a name=L1784 href="source/net/core/rtnetlink.c#L1784">1784</a>                         return -<a href="ident?i=EOPNOTSUPP">EOPNOTSUPP</a>;
<a name=L1785 href="source/net/core/rtnetlink.c#L1785">1785</a> 
<a name=L1786 href="source/net/core/rtnetlink.c#L1786">1786</a>                 if (!<a href="ident?i=ops">ops</a>) {
<a name=L1787 href="source/net/core/rtnetlink.c#L1787">1787</a> #ifdef <a href="ident?i=CONFIG_MODULES">CONFIG_MODULES</a>
<a name=L1788 href="source/net/core/rtnetlink.c#L1788">1788</a>                         if (kind[0]) {
<a name=L1789 href="source/net/core/rtnetlink.c#L1789">1789</a>                                 <a href="ident?i=__rtnl_unlock">__rtnl_unlock</a>();
<a name=L1790 href="source/net/core/rtnetlink.c#L1790">1790</a>                                 <a href="ident?i=request_module">request_module</a>(<i>"rtnl-link-%s"</i>, kind);
<a name=L1791 href="source/net/core/rtnetlink.c#L1791">1791</a>                                 <a href="ident?i=rtnl_lock">rtnl_lock</a>();
<a name=L1792 href="source/net/core/rtnetlink.c#L1792">1792</a>                                 <a href="ident?i=ops">ops</a> = <a href="ident?i=rtnl_link_ops_get">rtnl_link_ops_get</a>(kind);
<a name=L1793 href="source/net/core/rtnetlink.c#L1793">1793</a>                                 if (<a href="ident?i=ops">ops</a>)
<a name=L1794 href="source/net/core/rtnetlink.c#L1794">1794</a>                                         goto replay;
<a name=L1795 href="source/net/core/rtnetlink.c#L1795">1795</a>                         }
<a name=L1796 href="source/net/core/rtnetlink.c#L1796">1796</a> #endif
<a name=L1797 href="source/net/core/rtnetlink.c#L1797">1797</a>                         return -<a href="ident?i=EOPNOTSUPP">EOPNOTSUPP</a>;
<a name=L1798 href="source/net/core/rtnetlink.c#L1798">1798</a>                 }
<a name=L1799 href="source/net/core/rtnetlink.c#L1799">1799</a> 
<a name=L1800 href="source/net/core/rtnetlink.c#L1800">1800</a>                 if (!<a href="ident?i=ifname">ifname</a>[0])
<a name=L1801 href="source/net/core/rtnetlink.c#L1801">1801</a>                         <a href="ident?i=snprintf">snprintf</a>(<a href="ident?i=ifname">ifname</a>, <a href="ident?i=IFNAMSIZ">IFNAMSIZ</a>, <i>"%s%%d"</i>, <a href="ident?i=ops">ops</a>-&gt;kind);
<a name=L1802 href="source/net/core/rtnetlink.c#L1802">1802</a> 
<a name=L1803 href="source/net/core/rtnetlink.c#L1803">1803</a>                 dest_net = <a href="ident?i=rtnl_link_get_net">rtnl_link_get_net</a>(<a href="ident?i=net">net</a>, tb);
<a name=L1804 href="source/net/core/rtnetlink.c#L1804">1804</a>                 if (<a href="ident?i=IS_ERR">IS_ERR</a>(dest_net))
<a name=L1805 href="source/net/core/rtnetlink.c#L1805">1805</a>                         return <a href="ident?i=PTR_ERR">PTR_ERR</a>(dest_net);
<a name=L1806 href="source/net/core/rtnetlink.c#L1806">1806</a> 
<a name=L1807 href="source/net/core/rtnetlink.c#L1807">1807</a>                 <a href="ident?i=dev">dev</a> = <a href="ident?i=rtnl_create_link">rtnl_create_link</a>(<a href="ident?i=net">net</a>, dest_net, <a href="ident?i=ifname">ifname</a>, <a href="ident?i=ops">ops</a>, tb);
<a name=L1808 href="source/net/core/rtnetlink.c#L1808">1808</a> 
<a name=L1809 href="source/net/core/rtnetlink.c#L1809">1809</a>                 if (<a href="ident?i=IS_ERR">IS_ERR</a>(<a href="ident?i=dev">dev</a>))
<a name=L1810 href="source/net/core/rtnetlink.c#L1810">1810</a>                         <a href="ident?i=err">err</a> = <a href="ident?i=PTR_ERR">PTR_ERR</a>(<a href="ident?i=dev">dev</a>);
<a name=L1811 href="source/net/core/rtnetlink.c#L1811">1811</a>                 else if (<a href="ident?i=ops">ops</a>-&gt;newlink)
<a name=L1812 href="source/net/core/rtnetlink.c#L1812">1812</a>                         <a href="ident?i=err">err</a> = <a href="ident?i=ops">ops</a>-&gt;newlink(<a href="ident?i=net">net</a>, <a href="ident?i=dev">dev</a>, tb, <a href="ident?i=data">data</a>);
<a name=L1813 href="source/net/core/rtnetlink.c#L1813">1813</a>                 else
<a name=L1814 href="source/net/core/rtnetlink.c#L1814">1814</a>                         <a href="ident?i=err">err</a> = <a href="ident?i=register_netdevice">register_netdevice</a>(<a href="ident?i=dev">dev</a>);
<a name=L1815 href="source/net/core/rtnetlink.c#L1815">1815</a> 
<a name=L1816 href="source/net/core/rtnetlink.c#L1816">1816</a>                 if (<a href="ident?i=err">err</a> &lt; 0 &amp;&amp; !<a href="ident?i=IS_ERR">IS_ERR</a>(<a href="ident?i=dev">dev</a>))
<a name=L1817 href="source/net/core/rtnetlink.c#L1817">1817</a>                         <a href="ident?i=free_netdev">free_netdev</a>(<a href="ident?i=dev">dev</a>);
<a name=L1818 href="source/net/core/rtnetlink.c#L1818">1818</a>                 if (<a href="ident?i=err">err</a> &lt; 0)
<a name=L1819 href="source/net/core/rtnetlink.c#L1819">1819</a>                         goto <a href="ident?i=out">out</a>;
<a name=L1820 href="source/net/core/rtnetlink.c#L1820">1820</a> 
<a name=L1821 href="source/net/core/rtnetlink.c#L1821">1821</a>                 <a href="ident?i=err">err</a> = <a href="ident?i=rtnl_configure_link">rtnl_configure_link</a>(<a href="ident?i=dev">dev</a>, ifm);
<a name=L1822 href="source/net/core/rtnetlink.c#L1822">1822</a>                 if (<a href="ident?i=err">err</a> &lt; 0)
<a name=L1823 href="source/net/core/rtnetlink.c#L1823">1823</a>                         <a href="ident?i=unregister_netdevice">unregister_netdevice</a>(<a href="ident?i=dev">dev</a>);
<a name=L1824 href="source/net/core/rtnetlink.c#L1824">1824</a> <a href="ident?i=out">out</a>:
<a name=L1825 href="source/net/core/rtnetlink.c#L1825">1825</a>                 <a href="ident?i=put_net">put_net</a>(dest_net);
<a name=L1826 href="source/net/core/rtnetlink.c#L1826">1826</a>                 return <a href="ident?i=err">err</a>;
<a name=L1827 href="source/net/core/rtnetlink.c#L1827">1827</a>         }
<a name=L1828 href="source/net/core/rtnetlink.c#L1828">1828</a> }
<a name=L1829 href="source/net/core/rtnetlink.c#L1829">1829</a> 
<a name=L1830 href="source/net/core/rtnetlink.c#L1830">1830</a> static int <a href="ident?i=rtnl_getlink">rtnl_getlink</a>(struct <a href="ident?i=sk_buff">sk_buff</a> *<a href="ident?i=skb">skb</a>, struct <a href="ident?i=nlmsghdr">nlmsghdr</a>* nlh, void *<a href="ident?i=arg">arg</a>)
<a name=L1831 href="source/net/core/rtnetlink.c#L1831">1831</a> {
<a name=L1832 href="source/net/core/rtnetlink.c#L1832">1832</a>         struct <a href="ident?i=net">net</a> *<a href="ident?i=net">net</a> = <a href="ident?i=sock_net">sock_net</a>(<a href="ident?i=skb">skb</a>-&gt;sk);
<a name=L1833 href="source/net/core/rtnetlink.c#L1833">1833</a>         struct <a href="ident?i=ifinfomsg">ifinfomsg</a> *ifm;
<a name=L1834 href="source/net/core/rtnetlink.c#L1834">1834</a>         char <a href="ident?i=ifname">ifname</a>[<a href="ident?i=IFNAMSIZ">IFNAMSIZ</a>];
<a name=L1835 href="source/net/core/rtnetlink.c#L1835">1835</a>         struct <a href="ident?i=nlattr">nlattr</a> *tb[<a href="ident?i=IFLA_MAX">IFLA_MAX</a>+1];
<a name=L1836 href="source/net/core/rtnetlink.c#L1836">1836</a>         struct <a href="ident?i=net_device">net_device</a> *<a href="ident?i=dev">dev</a> = <a href="ident?i=NULL">NULL</a>;
<a name=L1837 href="source/net/core/rtnetlink.c#L1837">1837</a>         struct <a href="ident?i=sk_buff">sk_buff</a> *nskb;
<a name=L1838 href="source/net/core/rtnetlink.c#L1838">1838</a>         int <a href="ident?i=err">err</a>;
<a name=L1839 href="source/net/core/rtnetlink.c#L1839">1839</a> 
<a name=L1840 href="source/net/core/rtnetlink.c#L1840">1840</a>         <a href="ident?i=err">err</a> = <a href="ident?i=nlmsg_parse">nlmsg_parse</a>(nlh, sizeof(*ifm), tb, <a href="ident?i=IFLA_MAX">IFLA_MAX</a>, <a href="ident?i=ifla_policy">ifla_policy</a>);
<a name=L1841 href="source/net/core/rtnetlink.c#L1841">1841</a>         if (<a href="ident?i=err">err</a> &lt; 0)
<a name=L1842 href="source/net/core/rtnetlink.c#L1842">1842</a>                 return <a href="ident?i=err">err</a>;
<a name=L1843 href="source/net/core/rtnetlink.c#L1843">1843</a> 
<a name=L1844 href="source/net/core/rtnetlink.c#L1844">1844</a>         if (tb[IFLA_IFNAME])
<a name=L1845 href="source/net/core/rtnetlink.c#L1845">1845</a>                 <a href="ident?i=nla_strlcpy">nla_strlcpy</a>(<a href="ident?i=ifname">ifname</a>, tb[IFLA_IFNAME], <a href="ident?i=IFNAMSIZ">IFNAMSIZ</a>);
<a name=L1846 href="source/net/core/rtnetlink.c#L1846">1846</a> 
<a name=L1847 href="source/net/core/rtnetlink.c#L1847">1847</a>         ifm = <a href="ident?i=nlmsg_data">nlmsg_data</a>(nlh);
<a name=L1848 href="source/net/core/rtnetlink.c#L1848">1848</a>         if (ifm-&gt;ifi_index &gt; 0)
<a name=L1849 href="source/net/core/rtnetlink.c#L1849">1849</a>                 <a href="ident?i=dev">dev</a> = <a href="ident?i=__dev_get_by_index">__dev_get_by_index</a>(<a href="ident?i=net">net</a>, ifm-&gt;ifi_index);
<a name=L1850 href="source/net/core/rtnetlink.c#L1850">1850</a>         else if (tb[IFLA_IFNAME])
<a name=L1851 href="source/net/core/rtnetlink.c#L1851">1851</a>                 <a href="ident?i=dev">dev</a> = <a href="ident?i=__dev_get_by_name">__dev_get_by_name</a>(<a href="ident?i=net">net</a>, <a href="ident?i=ifname">ifname</a>);
<a name=L1852 href="source/net/core/rtnetlink.c#L1852">1852</a>         else
<a name=L1853 href="source/net/core/rtnetlink.c#L1853">1853</a>                 return -<a href="ident?i=EINVAL">EINVAL</a>;
<a name=L1854 href="source/net/core/rtnetlink.c#L1854">1854</a> 
<a name=L1855 href="source/net/core/rtnetlink.c#L1855">1855</a>         if (<a href="ident?i=dev">dev</a> == <a href="ident?i=NULL">NULL</a>)
<a name=L1856 href="source/net/core/rtnetlink.c#L1856">1856</a>                 return -<a href="ident?i=ENODEV">ENODEV</a>;
<a name=L1857 href="source/net/core/rtnetlink.c#L1857">1857</a> 
<a name=L1858 href="source/net/core/rtnetlink.c#L1858">1858</a>         nskb = <a href="ident?i=nlmsg_new">nlmsg_new</a>(<a href="ident?i=if_nlmsg_size">if_nlmsg_size</a>(<a href="ident?i=dev">dev</a>), <a href="ident?i=GFP_KERNEL">GFP_KERNEL</a>);
<a name=L1859 href="source/net/core/rtnetlink.c#L1859">1859</a>         if (nskb == <a href="ident?i=NULL">NULL</a>)
<a name=L1860 href="source/net/core/rtnetlink.c#L1860">1860</a>                 return -<a href="ident?i=ENOBUFS">ENOBUFS</a>;
<a name=L1861 href="source/net/core/rtnetlink.c#L1861">1861</a> 
<a name=L1862 href="source/net/core/rtnetlink.c#L1862">1862</a>         <a href="ident?i=err">err</a> = <a href="ident?i=rtnl_fill_ifinfo">rtnl_fill_ifinfo</a>(nskb, <a href="ident?i=dev">dev</a>, <a href="ident?i=RTM_NEWLINK">RTM_NEWLINK</a>, <a href="ident?i=NETLINK_CB">NETLINK_CB</a>(<a href="ident?i=skb">skb</a>).<a href="ident?i=pid">pid</a>,
<a name=L1863 href="source/net/core/rtnetlink.c#L1863">1863</a>                                nlh-&gt;nlmsg_seq, 0, 0);
<a name=L1864 href="source/net/core/rtnetlink.c#L1864">1864</a>         if (<a href="ident?i=err">err</a> &lt; 0) {
<a name=L1865 href="source/net/core/rtnetlink.c#L1865">1865</a>                 <b><i>/* -EMSGSIZE implies BUG in if_nlmsg_size */</i></b>
<a name=L1866 href="source/net/core/rtnetlink.c#L1866">1866</a>                 <a href="ident?i=WARN_ON">WARN_ON</a>(<a href="ident?i=err">err</a> == -<a href="ident?i=EMSGSIZE">EMSGSIZE</a>);
<a name=L1867 href="source/net/core/rtnetlink.c#L1867">1867</a>                 <a href="ident?i=kfree_skb">kfree_skb</a>(nskb);
<a name=L1868 href="source/net/core/rtnetlink.c#L1868">1868</a>         } else
<a name=L1869 href="source/net/core/rtnetlink.c#L1869">1869</a>                 <a href="ident?i=err">err</a> = <a href="ident?i=rtnl_unicast">rtnl_unicast</a>(nskb, <a href="ident?i=net">net</a>, <a href="ident?i=NETLINK_CB">NETLINK_CB</a>(<a href="ident?i=skb">skb</a>).<a href="ident?i=pid">pid</a>);
<a name=L1870 href="source/net/core/rtnetlink.c#L1870">1870</a> 
<a name=L1871 href="source/net/core/rtnetlink.c#L1871">1871</a>         return <a href="ident?i=err">err</a>;
<a name=L1872 href="source/net/core/rtnetlink.c#L1872">1872</a> }
<a name=L1873 href="source/net/core/rtnetlink.c#L1873">1873</a> 
<a name=L1874 href="source/net/core/rtnetlink.c#L1874">1874</a> static <a href="ident?i=u16">u16</a> <a href="ident?i=rtnl_calcit">rtnl_calcit</a>(struct <a href="ident?i=sk_buff">sk_buff</a> *<a href="ident?i=skb">skb</a>)
<a name=L1875 href="source/net/core/rtnetlink.c#L1875">1875</a> {
<a name=L1876 href="source/net/core/rtnetlink.c#L1876">1876</a>         return <a href="ident?i=min_ifinfo_dump_size">min_ifinfo_dump_size</a>;
<a name=L1877 href="source/net/core/rtnetlink.c#L1877">1877</a> }
<a name=L1878 href="source/net/core/rtnetlink.c#L1878">1878</a> 
<a name=L1879 href="source/net/core/rtnetlink.c#L1879">1879</a> static int <a href="ident?i=rtnl_dump_all">rtnl_dump_all</a>(struct <a href="ident?i=sk_buff">sk_buff</a> *<a href="ident?i=skb">skb</a>, struct <a href="ident?i=netlink_callback">netlink_callback</a> *<a href="ident?i=cb">cb</a>)
<a name=L1880 href="source/net/core/rtnetlink.c#L1880">1880</a> {
<a name=L1881 href="source/net/core/rtnetlink.c#L1881">1881</a>         int <a href="ident?i=idx">idx</a>;
<a name=L1882 href="source/net/core/rtnetlink.c#L1882">1882</a>         int s_idx = <a href="ident?i=cb">cb</a>-&gt;<a href="ident?i=family">family</a>;
<a name=L1883 href="source/net/core/rtnetlink.c#L1883">1883</a> 
<a name=L1884 href="source/net/core/rtnetlink.c#L1884">1884</a>         if (s_idx == 0)
<a name=L1885 href="source/net/core/rtnetlink.c#L1885">1885</a>                 s_idx = 1;
<a name=L1886 href="source/net/core/rtnetlink.c#L1886">1886</a>         for (<a href="ident?i=idx">idx</a> = 1; <a href="ident?i=idx">idx</a> &lt;= <a href="ident?i=RTNL_FAMILY_MAX">RTNL_FAMILY_MAX</a>; <a href="ident?i=idx">idx</a>++) {
<a name=L1887 href="source/net/core/rtnetlink.c#L1887">1887</a>                 int <a href="ident?i=type">type</a> = <a href="ident?i=cb">cb</a>-&gt;nlh-&gt;nlmsg_type-<a href="ident?i=RTM_BASE">RTM_BASE</a>;
<a name=L1888 href="source/net/core/rtnetlink.c#L1888">1888</a>                 if (<a href="ident?i=idx">idx</a> &lt; s_idx || <a href="ident?i=idx">idx</a> == <a href="ident?i=PF_PACKET">PF_PACKET</a>)
<a name=L1889 href="source/net/core/rtnetlink.c#L1889">1889</a>                         continue;
<a name=L1890 href="source/net/core/rtnetlink.c#L1890">1890</a>                 if (<a href="ident?i=rtnl_msg_handlers">rtnl_msg_handlers</a>[<a href="ident?i=idx">idx</a>] == <a href="ident?i=NULL">NULL</a> ||
<a name=L1891 href="source/net/core/rtnetlink.c#L1891">1891</a>                     <a href="ident?i=rtnl_msg_handlers">rtnl_msg_handlers</a>[<a href="ident?i=idx">idx</a>][<a href="ident?i=type">type</a>].dumpit == <a href="ident?i=NULL">NULL</a>)
<a name=L1892 href="source/net/core/rtnetlink.c#L1892">1892</a>                         continue;
<a name=L1893 href="source/net/core/rtnetlink.c#L1893">1893</a>                 if (<a href="ident?i=idx">idx</a> &gt; s_idx)
<a name=L1894 href="source/net/core/rtnetlink.c#L1894">1894</a>                         <a href="ident?i=memset">memset</a>(&amp;<a href="ident?i=cb">cb</a>-&gt;<a href="ident?i=args">args</a>[0], 0, sizeof(<a href="ident?i=cb">cb</a>-&gt;<a href="ident?i=args">args</a>));
<a name=L1895 href="source/net/core/rtnetlink.c#L1895">1895</a>                 if (<a href="ident?i=rtnl_msg_handlers">rtnl_msg_handlers</a>[<a href="ident?i=idx">idx</a>][<a href="ident?i=type">type</a>].dumpit(<a href="ident?i=skb">skb</a>, <a href="ident?i=cb">cb</a>))
<a name=L1896 href="source/net/core/rtnetlink.c#L1896">1896</a>                         break;
<a name=L1897 href="source/net/core/rtnetlink.c#L1897">1897</a>         }
<a name=L1898 href="source/net/core/rtnetlink.c#L1898">1898</a>         <a href="ident?i=cb">cb</a>-&gt;<a href="ident?i=family">family</a> = <a href="ident?i=idx">idx</a>;
<a name=L1899 href="source/net/core/rtnetlink.c#L1899">1899</a> 
<a name=L1900 href="source/net/core/rtnetlink.c#L1900">1900</a>         return <a href="ident?i=skb">skb</a>-&gt;<a href="ident?i=len">len</a>;
<a name=L1901 href="source/net/core/rtnetlink.c#L1901">1901</a> }
<a name=L1902 href="source/net/core/rtnetlink.c#L1902">1902</a> 
<a name=L1903 href="source/net/core/rtnetlink.c#L1903">1903</a> void <a href="ident?i=rtmsg_ifinfo">rtmsg_ifinfo</a>(int <a href="ident?i=type">type</a>, struct <a href="ident?i=net_device">net_device</a> *<a href="ident?i=dev">dev</a>, unsigned <a href="ident?i=change">change</a>)
<a name=L1904 href="source/net/core/rtnetlink.c#L1904">1904</a> {
<a name=L1905 href="source/net/core/rtnetlink.c#L1905">1905</a>         struct <a href="ident?i=net">net</a> *<a href="ident?i=net">net</a> = <a href="ident?i=dev_net">dev_net</a>(<a href="ident?i=dev">dev</a>);
<a name=L1906 href="source/net/core/rtnetlink.c#L1906">1906</a>         struct <a href="ident?i=sk_buff">sk_buff</a> *<a href="ident?i=skb">skb</a>;
<a name=L1907 href="source/net/core/rtnetlink.c#L1907">1907</a>         int <a href="ident?i=err">err</a> = -<a href="ident?i=ENOBUFS">ENOBUFS</a>;
<a name=L1908 href="source/net/core/rtnetlink.c#L1908">1908</a>         <a href="ident?i=size_t">size_t</a> if_info_size;
<a name=L1909 href="source/net/core/rtnetlink.c#L1909">1909</a> 
<a name=L1910 href="source/net/core/rtnetlink.c#L1910">1910</a>         <a href="ident?i=skb">skb</a> = <a href="ident?i=nlmsg_new">nlmsg_new</a>((if_info_size = <a href="ident?i=if_nlmsg_size">if_nlmsg_size</a>(<a href="ident?i=dev">dev</a>)), <a href="ident?i=GFP_KERNEL">GFP_KERNEL</a>);
<a name=L1911 href="source/net/core/rtnetlink.c#L1911">1911</a>         if (<a href="ident?i=skb">skb</a> == <a href="ident?i=NULL">NULL</a>)
<a name=L1912 href="source/net/core/rtnetlink.c#L1912">1912</a>                 goto errout;
<a name=L1913 href="source/net/core/rtnetlink.c#L1913">1913</a> 
<a name=L1914 href="source/net/core/rtnetlink.c#L1914">1914</a>         <a href="ident?i=min_ifinfo_dump_size">min_ifinfo_dump_size</a> = <a href="ident?i=max_t">max_t</a>(<a href="ident?i=u16">u16</a>, if_info_size, <a href="ident?i=min_ifinfo_dump_size">min_ifinfo_dump_size</a>);
<a name=L1915 href="source/net/core/rtnetlink.c#L1915">1915</a> 
<a name=L1916 href="source/net/core/rtnetlink.c#L1916">1916</a>         <a href="ident?i=err">err</a> = <a href="ident?i=rtnl_fill_ifinfo">rtnl_fill_ifinfo</a>(<a href="ident?i=skb">skb</a>, <a href="ident?i=dev">dev</a>, <a href="ident?i=type">type</a>, 0, 0, <a href="ident?i=change">change</a>, 0);
<a name=L1917 href="source/net/core/rtnetlink.c#L1917">1917</a>         if (<a href="ident?i=err">err</a> &lt; 0) {
<a name=L1918 href="source/net/core/rtnetlink.c#L1918">1918</a>                 <b><i>/* -EMSGSIZE implies BUG in if_nlmsg_size() */</i></b>
<a name=L1919 href="source/net/core/rtnetlink.c#L1919">1919</a>                 <a href="ident?i=WARN_ON">WARN_ON</a>(<a href="ident?i=err">err</a> == -<a href="ident?i=EMSGSIZE">EMSGSIZE</a>);
<a name=L1920 href="source/net/core/rtnetlink.c#L1920">1920</a>                 <a href="ident?i=kfree_skb">kfree_skb</a>(<a href="ident?i=skb">skb</a>);
<a name=L1921 href="source/net/core/rtnetlink.c#L1921">1921</a>                 goto errout;
<a name=L1922 href="source/net/core/rtnetlink.c#L1922">1922</a>         }
<a name=L1923 href="source/net/core/rtnetlink.c#L1923">1923</a>         <a href="ident?i=rtnl_notify">rtnl_notify</a>(<a href="ident?i=skb">skb</a>, <a href="ident?i=net">net</a>, 0, <a href="ident?i=RTNLGRP_LINK">RTNLGRP_LINK</a>, <a href="ident?i=NULL">NULL</a>, <a href="ident?i=GFP_KERNEL">GFP_KERNEL</a>);
<a name=L1924 href="source/net/core/rtnetlink.c#L1924">1924</a>         return;
<a name=L1925 href="source/net/core/rtnetlink.c#L1925">1925</a> errout:
<a name=L1926 href="source/net/core/rtnetlink.c#L1926">1926</a>         if (<a href="ident?i=err">err</a> &lt; 0)
<a name=L1927 href="source/net/core/rtnetlink.c#L1927">1927</a>                 <a href="ident?i=rtnl_set_sk_err">rtnl_set_sk_err</a>(<a href="ident?i=net">net</a>, <a href="ident?i=RTNLGRP_LINK">RTNLGRP_LINK</a>, <a href="ident?i=err">err</a>);
<a name=L1928 href="source/net/core/rtnetlink.c#L1928">1928</a> }
<a name=L1929 href="source/net/core/rtnetlink.c#L1929">1929</a> 
<a name=L1930 href="source/net/core/rtnetlink.c#L1930">1930</a> <b><i>/* Protected by RTNL sempahore.  */</i></b>
<a name=L1931 href="source/net/core/rtnetlink.c#L1931">1931</a> static struct <a href="ident?i=rtattr">rtattr</a> **<a href="ident?i=rta_buf">rta_buf</a>;
<a name=L1932 href="source/net/core/rtnetlink.c#L1932">1932</a> static int <a href="ident?i=rtattr_max">rtattr_max</a>;
<a name=L1933 href="source/net/core/rtnetlink.c#L1933">1933</a> 
<a name=L1934 href="source/net/core/rtnetlink.c#L1934">1934</a> <b><i>/* Process one rtnetlink message. */</i></b>
<a name=L1935 href="source/net/core/rtnetlink.c#L1935">1935</a> 
<a name=L1936 href="source/net/core/rtnetlink.c#L1936">1936</a> static int <a href="ident?i=rtnetlink_rcv_msg">rtnetlink_rcv_msg</a>(struct <a href="ident?i=sk_buff">sk_buff</a> *<a href="ident?i=skb">skb</a>, struct <a href="ident?i=nlmsghdr">nlmsghdr</a> *nlh)
<a name=L1937 href="source/net/core/rtnetlink.c#L1937">1937</a> {
<a name=L1938 href="source/net/core/rtnetlink.c#L1938">1938</a>         struct <a href="ident?i=net">net</a> *<a href="ident?i=net">net</a> = <a href="ident?i=sock_net">sock_net</a>(<a href="ident?i=skb">skb</a>-&gt;sk);
<a name=L1939 href="source/net/core/rtnetlink.c#L1939">1939</a>         <a href="ident?i=rtnl_doit_func">rtnl_doit_func</a> doit;
<a name=L1940 href="source/net/core/rtnetlink.c#L1940">1940</a>         int sz_idx, kind;
<a name=L1941 href="source/net/core/rtnetlink.c#L1941">1941</a>         int min_len;
<a name=L1942 href="source/net/core/rtnetlink.c#L1942">1942</a>         int <a href="ident?i=family">family</a>;
<a name=L1943 href="source/net/core/rtnetlink.c#L1943">1943</a>         int <a href="ident?i=type">type</a>;
<a name=L1944 href="source/net/core/rtnetlink.c#L1944">1944</a>         int <a href="ident?i=err">err</a>;
<a name=L1945 href="source/net/core/rtnetlink.c#L1945">1945</a> 
<a name=L1946 href="source/net/core/rtnetlink.c#L1946">1946</a>         <a href="ident?i=type">type</a> = nlh-&gt;nlmsg_type;
<a name=L1947 href="source/net/core/rtnetlink.c#L1947">1947</a>         if (<a href="ident?i=type">type</a> &gt; <a href="ident?i=RTM_MAX">RTM_MAX</a>)
<a name=L1948 href="source/net/core/rtnetlink.c#L1948">1948</a>                 return -<a href="ident?i=EOPNOTSUPP">EOPNOTSUPP</a>;
<a name=L1949 href="source/net/core/rtnetlink.c#L1949">1949</a> 
<a name=L1950 href="source/net/core/rtnetlink.c#L1950">1950</a>         <a href="ident?i=type">type</a> -= <a href="ident?i=RTM_BASE">RTM_BASE</a>;
<a name=L1951 href="source/net/core/rtnetlink.c#L1951">1951</a> 
<a name=L1952 href="source/net/core/rtnetlink.c#L1952">1952</a>         <b><i>/* All the messages must have at least 1 byte length */</i></b>
<a name=L1953 href="source/net/core/rtnetlink.c#L1953">1953</a>         if (nlh-&gt;<a href="ident?i=nlmsg_len">nlmsg_len</a> &lt; <a href="ident?i=NLMSG_LENGTH">NLMSG_LENGTH</a>(sizeof(struct <a href="ident?i=rtgenmsg">rtgenmsg</a>)))
<a name=L1954 href="source/net/core/rtnetlink.c#L1954">1954</a>                 return 0;
<a name=L1955 href="source/net/core/rtnetlink.c#L1955">1955</a> 
<a name=L1956 href="source/net/core/rtnetlink.c#L1956">1956</a>         <a href="ident?i=family">family</a> = ((struct <a href="ident?i=rtgenmsg">rtgenmsg</a> *)<a href="ident?i=NLMSG_DATA">NLMSG_DATA</a>(nlh))-&gt;rtgen_family;
<a name=L1957 href="source/net/core/rtnetlink.c#L1957">1957</a>         sz_idx = <a href="ident?i=type">type</a>&gt;&gt;2;
<a name=L1958 href="source/net/core/rtnetlink.c#L1958">1958</a>         kind = <a href="ident?i=type">type</a>&amp;3;
<a name=L1959 href="source/net/core/rtnetlink.c#L1959">1959</a> 
<a name=L1960 href="source/net/core/rtnetlink.c#L1960">1960</a>         if (kind != 2 &amp;&amp; <a href="ident?i=security_netlink_recv">security_netlink_recv</a>(<a href="ident?i=skb">skb</a>, <a href="ident?i=CAP_NET_ADMIN">CAP_NET_ADMIN</a>))
<a name=L1961 href="source/net/core/rtnetlink.c#L1961">1961</a>                 return -<a href="ident?i=EPERM">EPERM</a>;
<a name=L1962 href="source/net/core/rtnetlink.c#L1962">1962</a> 
<a name=L1963 href="source/net/core/rtnetlink.c#L1963">1963</a>         if (kind == 2 &amp;&amp; nlh-&gt;nlmsg_flags&amp;<a href="ident?i=NLM_F_DUMP">NLM_F_DUMP</a>) {
<a name=L1964 href="source/net/core/rtnetlink.c#L1964">1964</a>                 struct <a href="ident?i=sock">sock</a> *rtnl;
<a name=L1965 href="source/net/core/rtnetlink.c#L1965">1965</a>                 <a href="ident?i=rtnl_dumpit_func">rtnl_dumpit_func</a> dumpit;
<a name=L1966 href="source/net/core/rtnetlink.c#L1966">1966</a>                 <a href="ident?i=rtnl_calcit_func">rtnl_calcit_func</a> calcit;
<a name=L1967 href="source/net/core/rtnetlink.c#L1967">1967</a>                 <a href="ident?i=u16">u16</a> min_dump_alloc = 0;
<a name=L1968 href="source/net/core/rtnetlink.c#L1968">1968</a> 
<a name=L1969 href="source/net/core/rtnetlink.c#L1969">1969</a>                 dumpit = <a href="ident?i=rtnl_get_dumpit">rtnl_get_dumpit</a>(<a href="ident?i=family">family</a>, <a href="ident?i=type">type</a>);
<a name=L1970 href="source/net/core/rtnetlink.c#L1970">1970</a>                 if (dumpit == <a href="ident?i=NULL">NULL</a>)
<a name=L1971 href="source/net/core/rtnetlink.c#L1971">1971</a>                         return -<a href="ident?i=EOPNOTSUPP">EOPNOTSUPP</a>;
<a name=L1972 href="source/net/core/rtnetlink.c#L1972">1972</a>                 calcit = <a href="ident?i=rtnl_get_calcit">rtnl_get_calcit</a>(<a href="ident?i=family">family</a>, <a href="ident?i=type">type</a>);
<a name=L1973 href="source/net/core/rtnetlink.c#L1973">1973</a>                 if (calcit)
<a name=L1974 href="source/net/core/rtnetlink.c#L1974">1974</a>                         min_dump_alloc = calcit(<a href="ident?i=skb">skb</a>);
<a name=L1975 href="source/net/core/rtnetlink.c#L1975">1975</a> 
<a name=L1976 href="source/net/core/rtnetlink.c#L1976">1976</a>                 <a href="ident?i=__rtnl_unlock">__rtnl_unlock</a>();
<a name=L1977 href="source/net/core/rtnetlink.c#L1977">1977</a>                 rtnl = <a href="ident?i=net">net</a>-&gt;rtnl;
<a name=L1978 href="source/net/core/rtnetlink.c#L1978">1978</a>                 <a href="ident?i=err">err</a> = <a href="ident?i=netlink_dump_start">netlink_dump_start</a>(rtnl, <a href="ident?i=skb">skb</a>, nlh, dumpit,
<a name=L1979 href="source/net/core/rtnetlink.c#L1979">1979</a>                                          <a href="ident?i=NULL">NULL</a>, min_dump_alloc);
<a name=L1980 href="source/net/core/rtnetlink.c#L1980">1980</a>                 <a href="ident?i=rtnl_lock">rtnl_lock</a>();
<a name=L1981 href="source/net/core/rtnetlink.c#L1981">1981</a>                 return <a href="ident?i=err">err</a>;
<a name=L1982 href="source/net/core/rtnetlink.c#L1982">1982</a>         }
<a name=L1983 href="source/net/core/rtnetlink.c#L1983">1983</a> 
<a name=L1984 href="source/net/core/rtnetlink.c#L1984">1984</a>         <a href="ident?i=memset">memset</a>(<a href="ident?i=rta_buf">rta_buf</a>, 0, (<a href="ident?i=rtattr_max">rtattr_max</a> * sizeof(struct <a href="ident?i=rtattr">rtattr</a> *)));
<a name=L1985 href="source/net/core/rtnetlink.c#L1985">1985</a> 
<a name=L1986 href="source/net/core/rtnetlink.c#L1986">1986</a>         min_len = <a href="ident?i=rtm_min">rtm_min</a>[sz_idx];
<a name=L1987 href="source/net/core/rtnetlink.c#L1987">1987</a>         if (nlh-&gt;<a href="ident?i=nlmsg_len">nlmsg_len</a> &lt; min_len)
<a name=L1988 href="source/net/core/rtnetlink.c#L1988">1988</a>                 return -<a href="ident?i=EINVAL">EINVAL</a>;
<a name=L1989 href="source/net/core/rtnetlink.c#L1989">1989</a> 
<a name=L1990 href="source/net/core/rtnetlink.c#L1990">1990</a>         if (nlh-&gt;<a href="ident?i=nlmsg_len">nlmsg_len</a> &gt; min_len) {
<a name=L1991 href="source/net/core/rtnetlink.c#L1991">1991</a>                 int attrlen = nlh-&gt;<a href="ident?i=nlmsg_len">nlmsg_len</a> - <a href="ident?i=NLMSG_ALIGN">NLMSG_ALIGN</a>(min_len);
<a name=L1992 href="source/net/core/rtnetlink.c#L1992">1992</a>                 struct <a href="ident?i=rtattr">rtattr</a> *<a href="ident?i=attr">attr</a> = (void *)nlh + <a href="ident?i=NLMSG_ALIGN">NLMSG_ALIGN</a>(min_len);
<a name=L1993 href="source/net/core/rtnetlink.c#L1993">1993</a> 
<a name=L1994 href="source/net/core/rtnetlink.c#L1994">1994</a>                 while (<a href="ident?i=RTA_OK">RTA_OK</a>(<a href="ident?i=attr">attr</a>, attrlen)) {
<a name=L1995 href="source/net/core/rtnetlink.c#L1995">1995</a>                         unsigned flavor = <a href="ident?i=attr">attr</a>-&gt;rta_type;
<a name=L1996 href="source/net/core/rtnetlink.c#L1996">1996</a>                         if (flavor) {
<a name=L1997 href="source/net/core/rtnetlink.c#L1997">1997</a>                                 if (flavor &gt; <a href="ident?i=rta_max">rta_max</a>[sz_idx])
<a name=L1998 href="source/net/core/rtnetlink.c#L1998">1998</a>                                         return -<a href="ident?i=EINVAL">EINVAL</a>;
<a name=L1999 href="source/net/core/rtnetlink.c#L1999">1999</a>                                 <a href="ident?i=rta_buf">rta_buf</a>[flavor-1] = <a href="ident?i=attr">attr</a>;
<a name=L2000 href="source/net/core/rtnetlink.c#L2000">2000</a>                         }
<a name=L2001 href="source/net/core/rtnetlink.c#L2001">2001</a>                         <a href="ident?i=attr">attr</a> = <a href="ident?i=RTA_NEXT">RTA_NEXT</a>(<a href="ident?i=attr">attr</a>, attrlen);
<a name=L2002 href="source/net/core/rtnetlink.c#L2002">2002</a>                 }
<a name=L2003 href="source/net/core/rtnetlink.c#L2003">2003</a>         }
<a name=L2004 href="source/net/core/rtnetlink.c#L2004">2004</a> 
<a name=L2005 href="source/net/core/rtnetlink.c#L2005">2005</a>         doit = <a href="ident?i=rtnl_get_doit">rtnl_get_doit</a>(<a href="ident?i=family">family</a>, <a href="ident?i=type">type</a>);
<a name=L2006 href="source/net/core/rtnetlink.c#L2006">2006</a>         if (doit == <a href="ident?i=NULL">NULL</a>)
<a name=L2007 href="source/net/core/rtnetlink.c#L2007">2007</a>                 return -<a href="ident?i=EOPNOTSUPP">EOPNOTSUPP</a>;
<a name=L2008 href="source/net/core/rtnetlink.c#L2008">2008</a> 
<a name=L2009 href="source/net/core/rtnetlink.c#L2009">2009</a>         return doit(<a href="ident?i=skb">skb</a>, nlh, (void *)&amp;<a href="ident?i=rta_buf">rta_buf</a>[0]);
<a name=L2010 href="source/net/core/rtnetlink.c#L2010">2010</a> }
<a name=L2011 href="source/net/core/rtnetlink.c#L2011">2011</a> 
<a name=L2012 href="source/net/core/rtnetlink.c#L2012">2012</a> static void <a href="ident?i=rtnetlink_rcv">rtnetlink_rcv</a>(struct <a href="ident?i=sk_buff">sk_buff</a> *<a href="ident?i=skb">skb</a>)
<a name=L2013 href="source/net/core/rtnetlink.c#L2013">2013</a> {
<a name=L2014 href="source/net/core/rtnetlink.c#L2014">2014</a>         <a href="ident?i=rtnl_lock">rtnl_lock</a>();
<a name=L2015 href="source/net/core/rtnetlink.c#L2015">2015</a>         <a href="ident?i=netlink_rcv_skb">netlink_rcv_skb</a>(<a href="ident?i=skb">skb</a>, &amp;<a href="ident?i=rtnetlink_rcv_msg">rtnetlink_rcv_msg</a>);
<a name=L2016 href="source/net/core/rtnetlink.c#L2016">2016</a>         <a href="ident?i=rtnl_unlock">rtnl_unlock</a>();
<a name=L2017 href="source/net/core/rtnetlink.c#L2017">2017</a> }
<a name=L2018 href="source/net/core/rtnetlink.c#L2018">2018</a> 
<a name=L2019 href="source/net/core/rtnetlink.c#L2019">2019</a> static int <a href="ident?i=rtnetlink_event">rtnetlink_event</a>(struct <a href="ident?i=notifier_block">notifier_block</a> *<a href="ident?i=this">this</a>, unsigned long <a href="ident?i=event">event</a>, void *<a href="ident?i=ptr">ptr</a>)
<a name=L2020 href="source/net/core/rtnetlink.c#L2020">2020</a> {
<a name=L2021 href="source/net/core/rtnetlink.c#L2021">2021</a>         struct <a href="ident?i=net_device">net_device</a> *<a href="ident?i=dev">dev</a> = <a href="ident?i=ptr">ptr</a>;
<a name=L2022 href="source/net/core/rtnetlink.c#L2022">2022</a> 
<a name=L2023 href="source/net/core/rtnetlink.c#L2023">2023</a>         switch (<a href="ident?i=event">event</a>) {
<a name=L2024 href="source/net/core/rtnetlink.c#L2024">2024</a>         case <a href="ident?i=NETDEV_UP">NETDEV_UP</a>:
<a name=L2025 href="source/net/core/rtnetlink.c#L2025">2025</a>         case <a href="ident?i=NETDEV_DOWN">NETDEV_DOWN</a>:
<a name=L2026 href="source/net/core/rtnetlink.c#L2026">2026</a>         case <a href="ident?i=NETDEV_PRE_UP">NETDEV_PRE_UP</a>:
<a name=L2027 href="source/net/core/rtnetlink.c#L2027">2027</a>         case <a href="ident?i=NETDEV_POST_INIT">NETDEV_POST_INIT</a>:
<a name=L2028 href="source/net/core/rtnetlink.c#L2028">2028</a>         case <a href="ident?i=NETDEV_REGISTER">NETDEV_REGISTER</a>:
<a name=L2029 href="source/net/core/rtnetlink.c#L2029">2029</a>         case <a href="ident?i=NETDEV_CHANGE">NETDEV_CHANGE</a>:
<a name=L2030 href="source/net/core/rtnetlink.c#L2030">2030</a>         case <a href="ident?i=NETDEV_PRE_TYPE_CHANGE">NETDEV_PRE_TYPE_CHANGE</a>:
<a name=L2031 href="source/net/core/rtnetlink.c#L2031">2031</a>         case <a href="ident?i=NETDEV_GOING_DOWN">NETDEV_GOING_DOWN</a>:
<a name=L2032 href="source/net/core/rtnetlink.c#L2032">2032</a>         case <a href="ident?i=NETDEV_UNREGISTER">NETDEV_UNREGISTER</a>:
<a name=L2033 href="source/net/core/rtnetlink.c#L2033">2033</a>         case <a href="ident?i=NETDEV_UNREGISTER_BATCH">NETDEV_UNREGISTER_BATCH</a>:
<a name=L2034 href="source/net/core/rtnetlink.c#L2034">2034</a>         case <a href="ident?i=NETDEV_RELEASE">NETDEV_RELEASE</a>:
<a name=L2035 href="source/net/core/rtnetlink.c#L2035">2035</a>         case <a href="ident?i=NETDEV_JOIN">NETDEV_JOIN</a>:
<a name=L2036 href="source/net/core/rtnetlink.c#L2036">2036</a>                 break;
<a name=L2037 href="source/net/core/rtnetlink.c#L2037">2037</a>         default:
<a name=L2038 href="source/net/core/rtnetlink.c#L2038">2038</a>                 <a href="ident?i=rtmsg_ifinfo">rtmsg_ifinfo</a>(<a href="ident?i=RTM_NEWLINK">RTM_NEWLINK</a>, <a href="ident?i=dev">dev</a>, 0);
<a name=L2039 href="source/net/core/rtnetlink.c#L2039">2039</a>                 break;
<a name=L2040 href="source/net/core/rtnetlink.c#L2040">2040</a>         }
<a name=L2041 href="source/net/core/rtnetlink.c#L2041">2041</a>         return <a href="ident?i=NOTIFY_DONE">NOTIFY_DONE</a>;
<a name=L2042 href="source/net/core/rtnetlink.c#L2042">2042</a> }
<a name=L2043 href="source/net/core/rtnetlink.c#L2043">2043</a> 
<a name=L2044 href="source/net/core/rtnetlink.c#L2044">2044</a> static struct <a href="ident?i=notifier_block">notifier_block</a> <a href="ident?i=rtnetlink_dev_notifier">rtnetlink_dev_notifier</a> = {
<a name=L2045 href="source/net/core/rtnetlink.c#L2045">2045</a>         .notifier_call  = <a href="ident?i=rtnetlink_event">rtnetlink_event</a>,
<a name=L2046 href="source/net/core/rtnetlink.c#L2046">2046</a> };
<a name=L2047 href="source/net/core/rtnetlink.c#L2047">2047</a> 
<a name=L2048 href="source/net/core/rtnetlink.c#L2048">2048</a> 
<a name=L2049 href="source/net/core/rtnetlink.c#L2049">2049</a> static int <a href="ident?i=__net_init">__net_init</a> <a href="ident?i=rtnetlink_net_init">rtnetlink_net_init</a>(struct <a href="ident?i=net">net</a> *<a href="ident?i=net">net</a>)
<a name=L2050 href="source/net/core/rtnetlink.c#L2050">2050</a> {
<a name=L2051 href="source/net/core/rtnetlink.c#L2051">2051</a>         struct <a href="ident?i=sock">sock</a> *sk;
<a name=L2052 href="source/net/core/rtnetlink.c#L2052">2052</a>         sk = <a href="ident?i=netlink_kernel_create">netlink_kernel_create</a>(<a href="ident?i=net">net</a>, <a href="ident?i=NETLINK_ROUTE">NETLINK_ROUTE</a>, <a href="ident?i=RTNLGRP_MAX">RTNLGRP_MAX</a>,
<a name=L2053 href="source/net/core/rtnetlink.c#L2053">2053</a>                                    <a href="ident?i=rtnetlink_rcv">rtnetlink_rcv</a>, &amp;rtnl_mutex, <a href="ident?i=THIS_MODULE">THIS_MODULE</a>);
<a name=L2054 href="source/net/core/rtnetlink.c#L2054">2054</a>         if (!sk)
<a name=L2055 href="source/net/core/rtnetlink.c#L2055">2055</a>                 return -<a href="ident?i=ENOMEM">ENOMEM</a>;
<a name=L2056 href="source/net/core/rtnetlink.c#L2056">2056</a>         <a href="ident?i=net">net</a>-&gt;rtnl = sk;
<a name=L2057 href="source/net/core/rtnetlink.c#L2057">2057</a>         return 0;
<a name=L2058 href="source/net/core/rtnetlink.c#L2058">2058</a> }
<a name=L2059 href="source/net/core/rtnetlink.c#L2059">2059</a> 
<a name=L2060 href="source/net/core/rtnetlink.c#L2060">2060</a> static void <a href="ident?i=__net_exit">__net_exit</a> <a href="ident?i=rtnetlink_net_exit">rtnetlink_net_exit</a>(struct <a href="ident?i=net">net</a> *<a href="ident?i=net">net</a>)
<a name=L2061 href="source/net/core/rtnetlink.c#L2061">2061</a> {
<a name=L2062 href="source/net/core/rtnetlink.c#L2062">2062</a>         <a href="ident?i=netlink_kernel_release">netlink_kernel_release</a>(<a href="ident?i=net">net</a>-&gt;rtnl);
<a name=L2063 href="source/net/core/rtnetlink.c#L2063">2063</a>         <a href="ident?i=net">net</a>-&gt;rtnl = <a href="ident?i=NULL">NULL</a>;
<a name=L2064 href="source/net/core/rtnetlink.c#L2064">2064</a> }
<a name=L2065 href="source/net/core/rtnetlink.c#L2065">2065</a> 
<a name=L2066 href="source/net/core/rtnetlink.c#L2066">2066</a> static struct <a href="ident?i=pernet_operations">pernet_operations</a> <a href="ident?i=rtnetlink_net_ops">rtnetlink_net_ops</a> = {
<a name=L2067 href="source/net/core/rtnetlink.c#L2067">2067</a>         .<a href="ident?i=init">init</a> = <a href="ident?i=rtnetlink_net_init">rtnetlink_net_init</a>,
<a name=L2068 href="source/net/core/rtnetlink.c#L2068">2068</a>         .<a href="ident?i=exit">exit</a> = <a href="ident?i=rtnetlink_net_exit">rtnetlink_net_exit</a>,
<a name=L2069 href="source/net/core/rtnetlink.c#L2069">2069</a> };
<a name=L2070 href="source/net/core/rtnetlink.c#L2070">2070</a> 
<a name=L2071 href="source/net/core/rtnetlink.c#L2071">2071</a> void <a href="ident?i=__init">__init</a> <a href="ident?i=rtnetlink_init">rtnetlink_init</a>(void)
<a name=L2072 href="source/net/core/rtnetlink.c#L2072">2072</a> {
<a name=L2073 href="source/net/core/rtnetlink.c#L2073">2073</a>         int <a href="ident?i=i">i</a>;
<a name=L2074 href="source/net/core/rtnetlink.c#L2074">2074</a> 
<a name=L2075 href="source/net/core/rtnetlink.c#L2075">2075</a>         <a href="ident?i=rtattr_max">rtattr_max</a> = 0;
<a name=L2076 href="source/net/core/rtnetlink.c#L2076">2076</a>         for (<a href="ident?i=i">i</a> = 0; <a href="ident?i=i">i</a> &lt; <a href="ident?i=ARRAY_SIZE">ARRAY_SIZE</a>(<a href="ident?i=rta_max">rta_max</a>); <a href="ident?i=i">i</a>++)
<a name=L2077 href="source/net/core/rtnetlink.c#L2077">2077</a>                 if (<a href="ident?i=rta_max">rta_max</a>[<a href="ident?i=i">i</a>] &gt; <a href="ident?i=rtattr_max">rtattr_max</a>)
<a name=L2078 href="source/net/core/rtnetlink.c#L2078">2078</a>                         <a href="ident?i=rtattr_max">rtattr_max</a> = <a href="ident?i=rta_max">rta_max</a>[<a href="ident?i=i">i</a>];
<a name=L2079 href="source/net/core/rtnetlink.c#L2079">2079</a>         <a href="ident?i=rta_buf">rta_buf</a> = <a href="ident?i=kmalloc">kmalloc</a>(<a href="ident?i=rtattr_max">rtattr_max</a> * sizeof(struct <a href="ident?i=rtattr">rtattr</a> *), <a href="ident?i=GFP_KERNEL">GFP_KERNEL</a>);
<a name=L2080 href="source/net/core/rtnetlink.c#L2080">2080</a>         if (!<a href="ident?i=rta_buf">rta_buf</a>)
<a name=L2081 href="source/net/core/rtnetlink.c#L2081">2081</a>                 <a href="ident?i=panic">panic</a>(<i>"rtnetlink_init: cannot allocate rta_buf\n"</i>);
<a name=L2082 href="source/net/core/rtnetlink.c#L2082">2082</a> 
<a name=L2083 href="source/net/core/rtnetlink.c#L2083">2083</a>         if (<a href="ident?i=register_pernet_subsys">register_pernet_subsys</a>(&amp;<a href="ident?i=rtnetlink_net_ops">rtnetlink_net_ops</a>))
<a name=L2084 href="source/net/core/rtnetlink.c#L2084">2084</a>                 <a href="ident?i=panic">panic</a>(<i>"rtnetlink_init: cannot initialize rtnetlink\n"</i>);
<a name=L2085 href="source/net/core/rtnetlink.c#L2085">2085</a> 
<a name=L2086 href="source/net/core/rtnetlink.c#L2086">2086</a>         <a href="ident?i=netlink_set_nonroot">netlink_set_nonroot</a>(<a href="ident?i=NETLINK_ROUTE">NETLINK_ROUTE</a>, <a href="ident?i=NL_NONROOT_RECV">NL_NONROOT_RECV</a>);
<a name=L2087 href="source/net/core/rtnetlink.c#L2087">2087</a>         <a href="ident?i=register_netdevice_notifier">register_netdevice_notifier</a>(&amp;<a href="ident?i=rtnetlink_dev_notifier">rtnetlink_dev_notifier</a>);
<a name=L2088 href="source/net/core/rtnetlink.c#L2088">2088</a> 
<a name=L2089 href="source/net/core/rtnetlink.c#L2089">2089</a>         <a href="ident?i=rtnl_register">rtnl_register</a>(<a href="ident?i=PF_UNSPEC">PF_UNSPEC</a>, <a href="ident?i=RTM_GETLINK">RTM_GETLINK</a>, <a href="ident?i=rtnl_getlink">rtnl_getlink</a>,
<a name=L2090 href="source/net/core/rtnetlink.c#L2090">2090</a>                       <a href="ident?i=rtnl_dump_ifinfo">rtnl_dump_ifinfo</a>, <a href="ident?i=rtnl_calcit">rtnl_calcit</a>);
<a name=L2091 href="source/net/core/rtnetlink.c#L2091">2091</a>         <a href="ident?i=rtnl_register">rtnl_register</a>(<a href="ident?i=PF_UNSPEC">PF_UNSPEC</a>, <a href="ident?i=RTM_SETLINK">RTM_SETLINK</a>, <a href="ident?i=rtnl_setlink">rtnl_setlink</a>, <a href="ident?i=NULL">NULL</a>, <a href="ident?i=NULL">NULL</a>);
<a name=L2092 href="source/net/core/rtnetlink.c#L2092">2092</a>         <a href="ident?i=rtnl_register">rtnl_register</a>(<a href="ident?i=PF_UNSPEC">PF_UNSPEC</a>, <a href="ident?i=RTM_NEWLINK">RTM_NEWLINK</a>, <a href="ident?i=rtnl_newlink">rtnl_newlink</a>, <a href="ident?i=NULL">NULL</a>, <a href="ident?i=NULL">NULL</a>);
<a name=L2093 href="source/net/core/rtnetlink.c#L2093">2093</a>         <a href="ident?i=rtnl_register">rtnl_register</a>(<a href="ident?i=PF_UNSPEC">PF_UNSPEC</a>, <a href="ident?i=RTM_DELLINK">RTM_DELLINK</a>, <a href="ident?i=rtnl_dellink">rtnl_dellink</a>, <a href="ident?i=NULL">NULL</a>, <a href="ident?i=NULL">NULL</a>);
<a name=L2094 href="source/net/core/rtnetlink.c#L2094">2094</a> 
<a name=L2095 href="source/net/core/rtnetlink.c#L2095">2095</a>         <a href="ident?i=rtnl_register">rtnl_register</a>(<a href="ident?i=PF_UNSPEC">PF_UNSPEC</a>, <a href="ident?i=RTM_GETADDR">RTM_GETADDR</a>, <a href="ident?i=NULL">NULL</a>, <a href="ident?i=rtnl_dump_all">rtnl_dump_all</a>, <a href="ident?i=NULL">NULL</a>);
<a name=L2096 href="source/net/core/rtnetlink.c#L2096">2096</a>         <a href="ident?i=rtnl_register">rtnl_register</a>(<a href="ident?i=PF_UNSPEC">PF_UNSPEC</a>, <a href="ident?i=RTM_GETROUTE">RTM_GETROUTE</a>, <a href="ident?i=NULL">NULL</a>, <a href="ident?i=rtnl_dump_all">rtnl_dump_all</a>, <a href="ident?i=NULL">NULL</a>);
<a name=L2097 href="source/net/core/rtnetlink.c#L2097">2097</a> }
<a name=L2098 href="source/net/core/rtnetlink.c#L2098">2098</a> 
<a name=L2099 href="source/net/core/rtnetlink.c#L2099">2099</a> </pre>
</div>

<hr>
<p style="color:#3399cc;">
• Source Navigation（导航页）  • Identifier Search（变量、结构、函数搜索）  • Freetext Search（任意字符串搜索）  • File Search（文件搜索）  • Plain Style（无高亮,速度快）
</p>
<p>
This page was automatically generated by LXR. <!--0.3.1-->&nbsp;&bull;&nbsp;
Linux is a registered trademark of Linus Torvalds
</p>

<div id="menu">
<ul>
   <li><a href="http://oss.org.cn/" target="_blank">开源中国首页</a></li>
   <li><a href="http://matrix.oss.org.cn/" title="Development" target="_blank">协同开发平台</a></li>
   <li><a href="http://my.oss.org.cn/" title="SNS" target="_blank">开源中国个人空间</a></li>
   <li><a href="http://yp.oss.org.cn/" title="yellowpage" target="_blank">开源软件黄页</a></li>
   <li><a href="http://oss.org.cn/ossdocs/gnu_linux/kernel-api/" title="Kernel API" target="_blank">Linux Kernel API</a></li>
   <li><a href="http://oss.org.cn/?action-viewnews-itemid-3646" title="Manual YelloPage" target="_blank">开源技术手册黄页</a></li>
</ul>
</div>

</div>

<!-- Piwik -->
<script type="text/javascript">
var pkBaseURL = (("https:" == document.location.protocol) ? "https://yp.oss.org.cn/piwik/" : "http://yp.oss.org.cn/piwik/");
document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E"));
</script><script type="text/javascript">
try {
var piwikTracker = Piwik.getTracker(pkBaseURL + "piwik.php", 2);
piwikTracker.trackPageView();
piwikTracker.enableLinkTracking();
} catch( err ) {}
</script><noscript><p><img src="http://yp.oss.org.cn/piwik/piwik.php?idsite=2" style="border:0" alt="" /></p></noscript>
<!-- End Piwik Tracking Code -->

</body>

</html>
