<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh" lang="zh" dir="ltr">
<head>
               <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta name="verify-v1" content="tQmdIA0A40oxMSeeRiXDaxmk+ZMoOvRptLxa4dt7C+w=" />
                <meta http-equiv="Content-Style-Type" content="text/css" />
		<meta name="generator" content="MediaWiki 1.15.3" />
		<meta name="keywords" content="Vsftpd虚拟用户设置" />
		<link rel="alternate" type="application/x-wiki" title="编辑" href="/index.php?title=Vsftpd%E8%99%9A%E6%8B%9F%E7%94%A8%E6%88%B7%E8%AE%BE%E7%BD%AE&amp;action=edit" />
		<link rel="edit" title="编辑" href="/index.php?title=Vsftpd%E8%99%9A%E6%8B%9F%E7%94%A8%E6%88%B7%E8%AE%BE%E7%BD%AE&amp;action=edit" />
		<link rel="shortcut icon" href="/favicon.ico" />
		<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="Ubuntu中文 (zh)" />
		<link rel="alternate" type="application/rss+xml" title="Ubuntu中文的RSS订阅" href="/index.php?title=Special:%E6%9C%80%E8%BF%91%E6%9B%B4%E6%94%B9&amp;feed=rss" />
		<link rel="alternate" type="application/atom+xml" title="Ubuntu中文的Atom订阅" href="/index.php?title=Special:%E6%9C%80%E8%BF%91%E6%9B%B4%E6%94%B9&amp;feed=atom" />
                <title>Vsftpd虚拟用户设置 - Ubuntu中文</title>
                <link rel="stylesheet" href="/skins/common/shared.css?207" type="text/css" media="screen" />
		<link rel="stylesheet" href="/skins/common/commonPrint.css?207" type="text/css" media="print" />
		<link rel="stylesheet" href="/skins/ubuntuchina/main.css?207" type="text/css" media="screen" />
		<!--[if lt IE 5.5000]><link rel="stylesheet" href="/skins/monobook/IE50Fixes.css?207" type="text/css" media="screen" /><![endif]-->
		<!--[if IE 5.5000]><link rel="stylesheet" href="/skins/monobook/IE55Fixes.css?207" type="text/css" media="screen" /><![endif]-->
		<!--[if IE 6]><link rel="stylesheet" href="/skins/monobook/IE60Fixes.css?207" type="text/css" media="screen" /><![endif]-->
		<!--[if IE 7]><link rel="stylesheet" href="/skins/monobook/IE70Fixes.css?207" type="text/css" media="screen" /><![endif]-->
		<link rel="stylesheet" href="/index.php?title=MediaWiki:Common.css&amp;usemsgcache=yes&amp;ctype=text%2Fcss&amp;smaxage=18000&amp;action=raw&amp;maxage=18000" type="text/css" />
		<link rel="stylesheet" href="/index.php?title=MediaWiki:Print.css&amp;usemsgcache=yes&amp;ctype=text%2Fcss&amp;smaxage=18000&amp;action=raw&amp;maxage=18000" type="text/css" media="print" />
		<link rel="stylesheet" href="/index.php?title=MediaWiki:Ubuntuchina.css&amp;usemsgcache=yes&amp;ctype=text%2Fcss&amp;smaxage=18000&amp;action=raw&amp;maxage=18000" type="text/css" />
		<link rel="stylesheet" href="/index.php?title=-&amp;action=raw&amp;maxage=18000&amp;gen=css" type="text/css" />
                <!--[if lt IE 7]><script type="text/javascript" src="/skins/common/IEFixes.js?207"></script>
                <meta http-equiv="imagetoolbar" content="no" /><![endif]-->

                <script type= "text/javascript">/*<![CDATA[*/
		var skin = "ubuntuchina";
		var stylepath = "/skins";
		var wgArticlePath = "/$1";
		var wgScriptPath = "";
		var wgScript = "/index.php";
		var wgVariantArticlePath = false;
		var wgActionPaths = {};
		var wgServer = "http://wiki.ubuntu.org.cn";
		var wgCanonicalNamespace = "";
		var wgCanonicalSpecialPageName = false;
		var wgNamespaceNumber = 0;
		var wgPageName = "Vsftpd虚拟用户设置";
		var wgTitle = "Vsftpd虚拟用户设置";
		var wgAction = "view";
		var wgArticleId = "11653";
		var wgIsArticle = true;
		var wgUserName = null;
		var wgUserGroups = null;
		var wgUserLanguage = "zh-cn";
		var wgContentLanguage = "zh";
		var wgBreakFrames = false;
		var wgCurRevisionId = 148420;
		var wgVersion = "1.15.3";
		var wgEnableAPI = true;
		var wgEnableWriteAPI = true;
		var wgSeparatorTransformTable = ["", ""];
		var wgDigitTransformTable = ["", ""];
		var wgRestrictionEdit = [];
		var wgRestrictionMove = [];
		/*]]>*/</script>
                
                <script type="text/javascript" src="/skins/common/wikibits.js?207"><!-- wikibits js --></script>
                <script type="text/javascript" src="/index.php?title=-&amp;action=raw&amp;gen=js&amp;useskin=ubuntuchina"><!-- site js --></script>
                <!-- Head Scripts -->
		<script type="text/javascript" src="/skins/common/ajax.js?207"></script>
</head>

<body >
<div id="container">
	<div id="mastWrapper">
        <div id="masthead">
            <div id="nav1">
                <ul>

				         <li><a href="http://www.ubuntu.org.cn/">Ubuntu</a></li>
                                         <li><a href="http://forum.ubuntu.org.cn">Forum</a></li>
                                         <li id="current"><a href="http://wiki.ubuntu.org.cn">Wiki</a></li>
                                         <li><a href="http://linux.ubuntu.org.cn">Linux</a></li>
                                         <li><a href="http://blog.ubuntu.org.cn/">Blog</a></li>
                                         <li><a href="http://paste.ubuntu.org.cn">Paste</a></li>
                                         <li><a href="http://webchat.freenode.net/?channels=ubuntu-cn">Chat</a></li>

                </ul>
            </div>
        		<form name="searchform" action="/index.php?title=Special:%E6%90%9C%E7%B4%A2&amp;amp;variant=zh-cn" id="search">
    			<div style="text-align:right">
    			<label for="q">搜索</label>
    			<input id="q" name="search" type="text"
    			accesskey="f" value="" />
    			<input type="submit" name="go" class="searchButton" id="searchGoButton"
    	        value="进入"
    	        />&nbsp;<input type="submit" name="fulltext"
    	        class="searchButton"
    	        value="搜索" />
    	       </div>
    		</form>
    	</div>
    	<div id="bar">
    		<ul>
    		   	<li
    		       class="selected"    		       ><a href="/index.php?title=Vsftpd%E8%99%9A%E6%8B%9F%E7%94%A8%E6%88%B7%E8%AE%BE%E7%BD%AE&amp;variant=zh-cn">页面</a></li><li
    		       class="new"    		       ><a href="/index.php?title=Talk:Vsftpd%E8%99%9A%E6%8B%9F%E7%94%A8%E6%88%B7%E8%AE%BE%E7%BD%AE&amp;action=edit&amp;redlink=1">讨论</a></li><li
    		           		       ><a href="/index.php?title=Vsftpd%E8%99%9A%E6%8B%9F%E7%94%A8%E6%88%B7%E8%AE%BE%E7%BD%AE&amp;action=edit">编辑</a></li><li
    		           		       ><a href="/index.php?title=Vsftpd%E8%99%9A%E6%8B%9F%E7%94%A8%E6%88%B7%E8%AE%BE%E7%BD%AE&amp;action=history">历史</a></li><li
    		           		       ><a href="/index.php?title=Vsftpd%E8%99%9A%E6%8B%9F%E7%94%A8%E6%88%B7%E8%AE%BE%E7%BD%AE&amp;variant=zh-hans">简体</a></li><li
    		           		       ><a href="/index.php?title=Vsftpd%E8%99%9A%E6%8B%9F%E7%94%A8%E6%88%B7%E8%AE%BE%E7%BD%AE&amp;variant=zh-hant">繁体</a></li>    		</ul>
        </div>
    </div>
    <p>&nbsp;</p>
	<div id="mBody">
	
		<div id="side">
			<ul id="nav">
								<li><span>导航</span>
						<ul>
										<li id="n-mainpage-description"><a href="/index.php?title=%E9%A6%96%E9%A1%B5&amp;variant=zh-cn">首页</a></li>
										<li id="n-recentchanges"><a href="/index.php?title=Special:%E6%9C%80%E8%BF%91%E6%9B%B4%E6%94%B9&amp;variant=zh-cn">最近更改</a></li>
										<li id="n-randompage"><a href="/index.php?title=Special:%E9%9A%8F%E6%9C%BA%E9%A1%B5%E9%9D%A2&amp;variant=zh-cn">随机页面</a></li>
										<li id="n-页面分类"><a href="/index.php?title=Category:%E9%A1%B5%E9%9D%A2%E5%88%86%E7%B1%BB&amp;variant=zh-cn">页面分类</a></li>
										<li id="n-help"><a href="/index.php?title=Help:%E7%9B%AE%E5%BD%95&amp;variant=zh-cn">帮助</a></li>
									</ul>
					</li>
								<li><span>编辑</span>
						<ul>
										<li id="n-编辑指南"><a href="/index.php?title=Category:%E8%B4%A1%E7%8C%AE&amp;variant=zh-cn">编辑指南</a></li>
										<li id="n-沙盒"><a href="/index.php?title=%E6%B2%99%E7%9B%92&amp;variant=zh-cn">沙盒</a></li>
										<li id="n-currentevents"><a href="/index.php?title=Ubuntu%E4%B8%AD%E6%96%87:%E5%BD%93%E5%89%8D%E4%BA%8B%E4%BB%B6&amp;variant=zh-cn">当前事件</a></li>
										<li id="n-字词处理"><a href="/index.php?title=MediaWiki:Conversiontable/zh-hant&amp;variant=zh-cn">字词处理</a></li>
									</ul>
					</li>
								<li><span>工具箱</span>
					<ul>
					  					  <li id="t-whatlinkshere"><a href="/index.php?title=Special:%E9%93%BE%E5%85%A5%E9%A1%B5%E9%9D%A2/Vsftpd%E8%99%9A%E6%8B%9F%E7%94%A8%E6%88%B7%E8%AE%BE%E7%BD%AE&amp;variant=zh-cn">链入页面</a></li>
					  					  <li id="t-recentchangeslinked"><a href="/index.php?title=Special:%E9%93%BE%E5%87%BA%E6%9B%B4%E6%94%B9/Vsftpd%E8%99%9A%E6%8B%9F%E7%94%A8%E6%88%B7%E8%AE%BE%E7%BD%AE&amp;variant=zh-cn">链出更改</a></li>
					  				      				      				      				      				      				      				      				      				      <li id="t-specialpages"><a href="/index.php?title=Special:%E7%89%B9%E6%AE%8A%E9%A1%B5%E9%9D%A2&amp;variant=zh-cn">所有特殊页面</a></li>				      					</ul>
				</li>
				<li><span>个人工具</span>
					<ul>
					<li id="pt-login"><a href="/index.php?title=Special:%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95&amp;returnto=Vsftpd%E8%99%9A%E6%8B%9F%E7%94%A8%E6%88%B7%E8%AE%BE%E7%BD%AE">登录</a></li>					</ul>
				</li>
							</ul>
		</div><!-- end of SIDE div -->
		
		<div id="mainContent">
			
			<h1>Vsftpd虚拟用户设置</h1>
			<h3 id="siteSub">出自Ubuntu中文</h3>
			<div id="contentSub"></div>
									<!-- start content -->
			<table id="toc" class="toc" summary="目录"><tr><td><div id="toctitle"><h2>目录</h2></div>
<ul>
<li class="toclevel-1"><a href="#.E7.9B.AE.E6.A0.87"><span class="tocnumber">1</span> <span class="toctext">目标</span></a></li>
<li class="toclevel-1"><a href="#.E5.88.9B.E5.BB.BA.E8.99.9A.E6.8B.9F.E7.94.A8.E6.88.B7.E6.95.B0.E6.8D.AE.E5.BA.93"><span class="tocnumber">2</span> <span class="toctext">创建虚拟用户数据库</span></a>
<ul>
<li class="toclevel-2"><a href="#.E5.88.9B.E5.BB.BA.E6.96.87.E6.9C.AC.E6.96.87.E4.BB.B6loguser.txt"><span class="tocnumber">2.1</span> <span class="toctext">创建文本文件loguser.txt</span></a></li>
<li class="toclevel-2"><a href="#.E7.94.9F.E6.88.90.E6.95.B0.E6.8D.AE.E5.BA.93"><span class="tocnumber">2.2</span> <span class="toctext">生成数据库</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#.E9.85.8D.E7.BD.AEPAM.E6.96.87.E4.BB.B6"><span class="tocnumber">3</span> <span class="toctext">配置PAM文件</span></a></li>
<li class="toclevel-1"><a href="#.E4.B8.BA.E8.99.9A.E6.8B.9F.E7.94.A8.E6.88.B7.E5.88.9B.E5.BB.BA.E6.9C.AC.E5.9C.B0.E7.B3.BB.E7.BB.9F.E7.94.A8.E6.88.B7"><span class="tocnumber">4</span> <span class="toctext">为虚拟用户创建本地系统用户</span></a></li>
<li class="toclevel-1"><a href="#.2Fetc.2Fvsftpd.conf"><span class="tocnumber">5</span> <span class="toctext">/etc/vsftpd.conf</span></a></li>
<li class="toclevel-1"><a href="#.2Fetc.2Fvsftpd_user_conf"><span class="tocnumber">6</span> <span class="toctext">/etc/vsftpd_user_conf</span></a></li>
<li class="toclevel-1"><a href="#.E8.83.BD.E6.88.90.EF.BC.9F"><span class="tocnumber">7</span> <span class="toctext">能成？</span></a></li>
</ul>
</td></tr></table><script type="text/javascript"> if (window.showTocToggle) { var tocShowText = "显示"; var tocHideText = "隐藏"; showTocToggle(); } </script>
<a name=".E7.9B.AE.E6.A0.87" id=".E7.9B.AE.E6.A0.87"></a><h2><span class="editsection">[<a href="/index.php?title=Vsftpd%E8%99%9A%E6%8B%9F%E7%94%A8%E6%88%B7%E8%AE%BE%E7%BD%AE&amp;action=edit&amp;section=1" title="编辑段落：目标">编辑</a>]</span> <span class="mw-headline"> 目标 </span></h2>
<p>首先我们假定你已经安装了vsftpd，并在/home/vsftpd 目录下建立了以下3个子目录
</p>
<ul><li> dbzh1
</li><li> dbzh2
</li><li> dbzh3
</li></ul>
<p>下面，我们要建3个虚拟用户，密码分别是用户名后加"00"
</p>
<ul><li> db1
</li><li> db2
</li><li> db3
</li></ul>
<p><b>使得</b>
</p>
<ul><li> 用户db1 的主目录为 dbzh1 ，在该目录下只有只读权限
</li><li> 用户db2 的主目录为 dbzh2，在该目录下只有只读权限
</li><li> 用户db3 的主目录为 dbzh3 ，在该目录下拥有所有权限
</li></ul>
<a name=".E5.88.9B.E5.BB.BA.E8.99.9A.E6.8B.9F.E7.94.A8.E6.88.B7.E6.95.B0.E6.8D.AE.E5.BA.93" id=".E5.88.9B.E5.BB.BA.E8.99.9A.E6.8B.9F.E7.94.A8.E6.88.B7.E6.95.B0.E6.8D.AE.E5.BA.93"></a><h2><span class="editsection">[<a href="/index.php?title=Vsftpd%E8%99%9A%E6%8B%9F%E7%94%A8%E6%88%B7%E8%AE%BE%E7%BD%AE&amp;action=edit&amp;section=2" title="编辑段落：创建虚拟用户数据库">编辑</a>]</span> <span class="mw-headline"> 创建虚拟用户数据库 </span></h2>
<a name=".E5.88.9B.E5.BB.BA.E6.96.87.E6.9C.AC.E6.96.87.E4.BB.B6loguser.txt" id=".E5.88.9B.E5.BB.BA.E6.96.87.E6.9C.AC.E6.96.87.E4.BB.B6loguser.txt"></a><h3><span class="editsection">[<a href="/index.php?title=Vsftpd%E8%99%9A%E6%8B%9F%E7%94%A8%E6%88%B7%E8%AE%BE%E7%BD%AE&amp;action=edit&amp;section=3" title="编辑段落：创建文本文件loguser.txt">编辑</a>]</span> <span class="mw-headline"> 创建文本文件loguser.txt  </span></h3>
<p>格式如下： 
</p>
<pre>user_id
password</pre> 
<p>&nbsp; 
</p><p>于是，我们/home/loguser.txt文件的内容为
</p>
<pre>cd  /home                     切换到/home目录
sudo  touch  /home/loguser.txt         创建账户和密码文件
sudo  gedit   /home/loguser.txt
然后将下面的账户文件字符粘帖入loguser.txt中，注意一行一行输入。
</pre>
<pre>注意：奇数行为账户名，偶数行为密码。也就是1.3.5.等行为用户名，2.4.6行为密码</pre>
<p><br /> 
</p>
<pre>db1
db100 
db2 
db200 
db3 
db300</pre>
<a name=".E7.94.9F.E6.88.90.E6.95.B0.E6.8D.AE.E5.BA.93" id=".E7.94.9F.E6.88.90.E6.95.B0.E6.8D.AE.E5.BA.93"></a><h3><span class="editsection">[<a href="/index.php?title=Vsftpd%E8%99%9A%E6%8B%9F%E7%94%A8%E6%88%B7%E8%AE%BE%E7%BD%AE&amp;action=edit&amp;section=4" title="编辑段落：生成数据库">编辑</a>]</span> <span class="mw-headline"> 生成数据库  </span></h3>
<p>如果你以前没装过db4.8-util 或者你不清楚装没装，需先执行下面的命令 
</p>
<pre>sudo apt-get install db4.8-util</pre> 
<p>然后，我们执行 
</p>
<pre>sudo db4.8_load -T -t hash -f /home/loguser.txt /etc/vsftpd_login.db</pre> 
<p><br />最后设置一下数据库文件的访问权限 
</p>
<pre>sudo chmod 600 /etc/vsftpd_login.db</pre>
<a name=".E9.85.8D.E7.BD.AEPAM.E6.96.87.E4.BB.B6" id=".E9.85.8D.E7.BD.AEPAM.E6.96.87.E4.BB.B6"></a><h2><span class="editsection">[<a href="/index.php?title=Vsftpd%E8%99%9A%E6%8B%9F%E7%94%A8%E6%88%B7%E8%AE%BE%E7%BD%AE&amp;action=edit&amp;section=5" title="编辑段落：配置PAM文件">编辑</a>]</span> <span class="mw-headline"> 配置PAM文件 </span></h2>
<p>编辑文件/etc/pam.d/vsftpd.vu 将以下内容增加的原文件前面两行：
</p>
<pre>auth required pam_userdb.so db=/etc/vsftpd_login
account required pam_userdb.so db=/etc/vsftpd_login</pre>
<ul><li> 我们上一步建立的数据库 vsftpd_login 在此处被使用
</li><li> 我们建立的虚拟用户将采用PAM进行验证，这是通过/etc/vsftpd.conf文件中的 语句pam_service_name=vsftpd.vu来启用的，稍后你将发现。
</li></ul>
<a name=".E4.B8.BA.E8.99.9A.E6.8B.9F.E7.94.A8.E6.88.B7.E5.88.9B.E5.BB.BA.E6.9C.AC.E5.9C.B0.E7.B3.BB.E7.BB.9F.E7.94.A8.E6.88.B7" id=".E4.B8.BA.E8.99.9A.E6.8B.9F.E7.94.A8.E6.88.B7.E5.88.9B.E5.BB.BA.E6.9C.AC.E5.9C.B0.E7.B3.BB.E7.BB.9F.E7.94.A8.E6.88.B7"></a><h2><span class="editsection">[<a href="/index.php?title=Vsftpd%E8%99%9A%E6%8B%9F%E7%94%A8%E6%88%B7%E8%AE%BE%E7%BD%AE&amp;action=edit&amp;section=6" title="编辑段落：为虚拟用户创建本地系统用户">编辑</a>]</span> <span class="mw-headline"> 为虚拟用户创建本地系统用户 </span></h2>
<p>新建一个系统用户vsftpd，用户家目录为/home/vsftpd, 用户登录终端设为/bin/false(即使之不能登录系统)
</p><p><br />
</p>
<pre>sudo useradd vsftpd -d /home/vsftpd -s /bin/false
sudo chown vsftpd:vsftpd /home/vsftpd</pre>
<a name=".2Fetc.2Fvsftpd.conf" id=".2Fetc.2Fvsftpd.conf"></a><h2> <span class="mw-headline"> /etc/vsftpd.conf </span></h2>
<p>根据需要创建/etc/vsftpd.conf，一般要确保含有以下设置：
</p><p><br />
</p>
<pre>listen=YES
anonymous_enable=NO 
dirmessage_enable=YES 
xferlog_enable=YES 
xferlog_file=/var/log/vsftpd.log 
xferlog_std_format=YES 
chroot_local_user=YES 
guest_enable=YES 
guest_username=vsftpd
user_config_dir=/etc/vsftpd_user_conf 
pam_service_name=vsftpd.vu 
local_enable=YES 
secure_chroot_dir=/var/run/vsftpd</pre>
<p><br />
</p><p>现在为止，我们的3个用户都可以工作了，可是它们的根目录现在都是/home/vsftpd，权限也都一样。 那么怎么才能完成我们预定的目标呢？
</p>
<a name=".2Fetc.2Fvsftpd_user_conf" id=".2Fetc.2Fvsftpd_user_conf"></a><h2><span class="editsection">[<a href="/index.php?title=Vsftpd%E8%99%9A%E6%8B%9F%E7%94%A8%E6%88%B7%E8%AE%BE%E7%BD%AE&amp;action=edit&amp;section=7" title="编辑段落：/etc/vsftpd_user_conf">编辑</a>]</span> <span class="mw-headline"> /etc/vsftpd_user_conf </span></h2>
<p>在上面的配置中，有这么一行
</p>
<pre>user_config_dir=/etc/vsftpd_user_conf</pre>
<p>现在，我们要把各个用户的配置文件放到目录/etc/vsftpd_user_conf中
</p><p><br />
</p>
<pre>sudo mkdir /etc/vsftpd_user_conf
cd /etc/vsftpd_user_conf 
sudo touch db1 db2 db3</pre>
<p>db1文件中的内容如下
</p>
<pre>local_root=/home/vsftpd/dbzh1</pre>
<p>同样，db2文件中的内容
</p>
<pre>local_root=/home/vsftpd/dbzh2</pre>
<p>那么，db3的内容呢？ 其实也很简单
</p><p><br />
</p>
<pre>write_enable=YES
anon_world_readable_only=NO 
anon_upload_enable=YES 
anon_mkdir_write_enable=YES 
anon_other_write_enable=YES 
local_root=/home/vsftpd/dbzh3</pre>
<pre>这里要注意不能有空格，不然登录的时候会提示出错。</pre>
<pre>如果有空格，在登录时，终端会提示：</pre>
<pre>500 OOPS: bad bool value in config file for: guest_enable Login failed.</pre>
<pre>或者</pre>
<pre>500 OOPS: bad bool value in config file for: anon_upload_enable Login failed.</pre>
<pre>等等之类的错误的布尔值提示</pre>
<pre>因为你的那个YES/NO 布尔值（bool value)后边加了一个空格，即：</pre>
<pre>anon_world_readable_only=NO空格</pre>
<pre>正确的格式应该是：</pre>
<pre>anon_world_readable_only=NO(无空格）！！！！！！</pre>
<pre>注意，NO后边的空格，要用退格键将其删除。</pre>
<a name=".E8.83.BD.E6.88.90.EF.BC.9F" id=".E8.83.BD.E6.88.90.EF.BC.9F"></a><h2><span class="editsection">[<a href="/index.php?title=Vsftpd%E8%99%9A%E6%8B%9F%E7%94%A8%E6%88%B7%E8%AE%BE%E7%BD%AE&amp;action=edit&amp;section=8" title="编辑段落：能成？">编辑</a>]</span> <span class="mw-headline"> 能成？ </span></h2>
<p>重启vsftpd我们就可以看到效果了^_^
</p>
<pre>/etc/init.d/vsftpd start|restart</pre>
<p><br />
</p><p>500 OOPS: cannot change directory:
</p><p>linux打开ftp遇到的问题 500 OOPS: cannot change directory:
</p><p>google好多都是 执行这个就OK
setsebool ftpd_disable_trans 1
service vsftpd restart
</p>
<pre>但是执行的时候遇到这个问题  Could not change active booleans: Invalid boolean
</pre>
<p>搜了好久终于解决
</p>
<pre>   setsebool -P ftp_home_dir=1
</pre>
<!-- 
NewPP limit report
Preprocessor node count: 92/1000000
Post-expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key ubuntuwiki:pcache:idhash:11653-0!1!0!!zh-cn!2!zh-cn and timestamp 20120829154808 -->
<div class="printfooter">
取自“<a href="http://wiki.ubuntu.org.cn/index.php?title=Vsftpd%E8%99%9A%E6%8B%9F%E7%94%A8%E6%88%B7%E8%AE%BE%E7%BD%AE&amp;variant=zh-cn">http://wiki.ubuntu.org.cn/index.php?title=Vsftpd%E8%99%9A%E6%8B%9F%E7%94%A8%E6%88%B7%E8%AE%BE%E7%BD%AE&amp;variant=zh-cn</a>”</div>
			<div id='catlinks' class='catlinks'><div id="mw-normal-catlinks"><a href="/index.php?title=Special:%E9%A1%B5%E9%9D%A2%E5%88%86%E7%B1%BB&amp;variant=zh-cn" title="Special:页面分类">1个分类</a>:&#32;<span dir='ltr'><a href="/index.php?title=Category:%E6%9C%8D%E5%8A%A1%E5%99%A8&amp;variant=zh-cn" title="Category:服务器">服务器</a></span></div></div>			<!-- end content -->

		</div><!-- end of MAINCONTENT div -->	
	
	</div><!-- end of MBODY div -->

	<div id="footer"><table><tr><td align="left" width="1%" nowrap="nowrap">
		</td><td align="center">
		<span id="f-viewcount">此页面已被浏览过38,301次。 </span>		<ul id="f-list">
			<li id="f-credits">此页由Ubuntu中文的匿名用户于2012年8月24日 (星期五) 13:59的最后更改。 在<a href="/index.php?title=User:Duanyexuanmu&amp;action=edit&amp;redlink=1" class="new" title="User:Duanyexuanmu（尚未撰写）">duanyexuanmu</a>、<a href="/index.php?title=User:Suwill&amp;action=edit&amp;redlink=1" class="new" title="User:Suwill（尚未撰写）">suwill</a>、<a href="/index.php?title=User:Qiii2006&amp;variant=zh-cn" title="User:Qiii2006">qiii2006</a>和<a href="/index.php?title=User:Tttccchhh&amp;action=edit&amp;redlink=1" class="new" title="User:Tttccchhh（尚未撰写）">QQ:9222204</a>和<a href="/index.php?title=Vsftpd%E8%99%9A%E6%8B%9F%E7%94%A8%E6%88%B7%E8%AE%BE%E7%BD%AE&amp;action=credits" title="Vsftpd虚拟用户设置">其他</a>的工作基础上。</li>						<li id="f-about"><a href="/index.php?title=Ubuntu%E4%B8%AD%E6%96%87:%E5%85%B3%E4%BA%8E&amp;variant=zh-cn" title="Ubuntu中文:关于">关于Ubuntu中文</a></li>			<li id="f-disclaimer"><a href="/index.php?title=Ubuntu%E4%B8%AD%E6%96%87:%E5%85%8D%E8%B4%A3%E5%A3%B0%E6%98%8E&amp;variant=zh-cn" title="Ubuntu中文:免责声明">免责声明</a></li>		</ul></td><td align="right" width="1%" nowrap="nowrap"><div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="/skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" /></a></div></td></tr></table>

	</div><!-- end of the FOOTER div -->
</div><!-- end of the CONTAINER div -->

<!-- Served in 0.287 secs. -->
</body>
</html>
