<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<link rel="shortcut icon" href="http://www.islascruz.org/favicon.ico"  />
  <title>Image as background in a Gtk Application.  Marco Islas</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="keywords" content="marco islas blog gtk gnome christine python development" />
  <meta http-equiv="X-UA-Compatible" content="chrome=1" />
  <base href="http://islascruz.org/html/" />
  <link rel="stylesheet" type="text/css" href="http://islascruz.org/html/data/themes/2009/style.css" />
<link rel="alternate" media="screen" type="application/atom+xml" href="http://feeds2.feedburner.com/islascruz/general?format=xml" title="Atom - FeedBurner" />


  <meta  property="og:url" content="http://www.islascruz.org/html/index.php/blog/show/Image-as-background-in-a-Gtk-Application..html" />
<meta  property="og:site_name" content="Marco Islas Blog" />
<meta  itemprop="name" content="Marco Islas Blog" />
<meta  itemprop="description" content="&lt;p&gt;" />
<meta  property="og:type" content="blog" />
<meta  property="og:description" content="&lt;p&gt;" />
<meta  property="og:image" content="http://farm3.static.flickr.com/2698/4113718671_d310f973d0.jpg" />
<meta  property="og:image" content="http://farm3.static.flickr.com/2698/4113718671_d310f973d0.jpg" />
<meta  property="og:image" content="http://img.youtube.com/vi//0.jpg" />
<meta  property="og:image" content="http://img.youtube.com/vi//1.jpg" />
<meta  property="og:image" content="http://img.youtube.com/vi//2.jpg" />
<meta  property="og:image" content="http://img.youtube.com/vi//3.jpg" />
<link rel="pingback" media="screen" />
<link rel="alternate" media="screen" type="application/atom+xml" href="index.php/blog/atom.html" title="Atom - All" />
<link rel="alternate" media="screen" type="application/rss+xml" href="index.php/blog/rss.html" title="RSS 2.0 - All" />
<SCRIPT LANGUAGE="JAVASCRIPT">
var  idnumber = 0;
function chance_numbers(){
	for (c = 1; c < 3; c++){
		var e = document.getElementById('anuncio-smowtion')
		e.id = 'anuncio-smowion'+c;
	}
}

function put_content(){
        var e = document.getElementById('anuncio-smowtion0');
        var t = '';
        t = e.innerHTML;
        e.innerHTML = '<B>Refrescando</b>';
        e.innerHTML = t;
        var e = document.getElementById('anuncio-smowtion1');
        t = e.innerHTML;
        e.innerHTML = '<B>Refrescando</b>';
        e.innerHTML = t;

        var e = document.getElementById('anuncio-smowtion2');
        t = e.innerHTML;
        e.innerHTML = '<B>Refrescando</b>';
        e.innerHTML = t;

        setTimeout(put_content, 60000);
}
</SCRIPT>
</head>
<body>
<div id="container">
	<span id="header">
		<span class="title"><a href="http://islascruz.org/html/">Marco Islas</a></span>
		<span class="desc"></span>
	</span>
	<div class=social_container>
	<div class=social_media>
		<a href="http://feeds.feedburner.com/islascruz/general" title="Subscribe to my feed" rel="alternate" type="application/rss+xml"><img src="http://la-uno.com/html/data/files/rss.png" alt="RSS Icon" style="border:0"/></a>
	<a href='http://twitter.com/markuzmx'><img src='http://www.la-uno.com/html/data/files/twitter.png' alt='twitter icon' style='border: 0; ' /></a>
	<a href='http://www.facebook.com/markuzmx'><img src='http://www.la-uno.com/html/data/files/facebook.png' alt='twitter icon' style='border: 0; ' /></a>
	</div>
	</div>
    <table class=maintable>
		<tr>
			<td colspan=3>
				<div class="gadget blocks" id="block_32">
    <div class="content">
    <table   cellpadding=0 cellspacing=0 border=0 >
      <tr>
          <td class=menu-left width=10px>
              <!--<img src='data/themes/2009/images/bgleft.png'>-->
          </td>
<td class=menu-middle width=*><span class=menu-link> <a href='http://islascruz.org/'>Home</a></span>
          </td>
          <td class=menu-middle width=*><span class=menu-link> <a href='http://islascruz.org/html/index.php?gadget=StaticPage&amp;id=2'>About me</a></span>
          </td>
          <td class=menu-middle width=*><span class=menu-link> <a href='http://www.flickr.com/photos/markuz'>Flickr</a></span>
          </td>
          <td class=menu-middle width=*><span class=menu-link> <a href='http://del.icio.us/markuz'>Del.icio.us</a></span>
          </td>
          <td class=menu-middle width=*><span class=menu-link> <a href='http://www.amazon.com/gp/registry/registry.html/ref=wlem-si-ht_gotowl/104-9135579-5106309?%5Fencoding=UTF8&amp;id=337P57EC8P3ZN'>Amazon wish list</a></span>
          </td>
          <td class=menu-middle width=*><span class=menu-link> <a href='http://islascruz.org/html/index.php?gadget=StaticPage&amp;id=2'>Contact</a></span>
          </td>
          <td class=menu-middle width=*><span class=menu-link> <a href='http://www.christine-project.org/'>Christine</a></span>
          </td>
<td class=menu-right width=10px>
     <!-- <img src='data/themes/2009/images/bgright.png'> -->
</td>
</tr>
</table>
  </div>
</div>



			</td>
		</tr>

    <tr>
	<td id='main' valign=top>
    <div class="hfeed">
<div class="gadget blog_container">
<div class="gadget blog_entry">
  <h2><a href="index.php/blog/show/Image-as-background-in-a-Gtk-Application..html" title="Image as background in a Gtk Application." rel="bookmark">Image as background in a Gtk Application.</a></h2>
  <div class="content_blog">
<table width=100% border=0>
	<tr>
		<td width=* class=blog-entry>
<!-- Place this tag where you want the +1 button to render --><g:plusone size="small" href="http://www.islascruz.org/html/index.php/blog/show/Image-as-background-in-a-Gtk-Application..html"></g:plusone>

<!-- Place this render call where appropriate --><script type="text/javascript">
  window.___gcfg = {lang: 'es'};

  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script>
<!--<span class='entry_date'>
	<div class='entry_date_month'>November</div>	
	<span class='entry_date_day'>17</span>	
</span>-->
<p>
This time I'm going to talk about putting an <span class="google_highlight">image</span> as the application <span class="google_highlight">background</span> in Gtk. In <span class="google_highlight">Gtk</span> we are used to leave the colors of the application to the theme, but sometimes we will need to use an <span class="google_highlight">image</span> as <span class="google_highlight">background</span>. I already wrote <a href='http://www.islascruz.org/html/index.php/blog/show/Como-dibujar-un-imagen-jpg-png-gif-etc-en-Cairo.html' title='Como dibujar un imagen (jpg, png, gif, etc..) en Cairo (ESP)'>how to draw a pixbuf in a <span class="google_highlight">gtk</span>.DrawingArea (Esp)</a>, we could use that, but we will "draw" directly on the widget window instead.
</p><p>
Yes, I said the widget's window instead the widget itself. You should know that every widget that has been packed in a <span class="google_highlight">container</span> has a <a href='http://www.pygtk.org/docs/pygtk/class-gdkwindow.html'><span class="google_highlight">gtk</span>.gdk.window</a> object and is the responsible for containing your widget. Well, we can draw on that object.
</p><p>
What we need is to create a simple <a href='http://www.pygtk.org/docs/pygtk/class-gdkpixbuf.html'><span class="google_highlight">gtk</span>.gdk.Pixbuf</a> and call the <span class="google_highlight">gtk</span>.gdk.window.draw_pixbuf method using your widget.window object on the <a href='http://www.pygtk.org/docs/pygtk/class-gtkwidget.html#signal-gtkwidget--expose-event'>expose-event</a>.
</p><p>
The code should look like this:
</p>
<div class="code"><div class="python python" style="font-family:monospace;">&nbsp;<br />
&nbsp;<br />
<span style="color: #808080; font-style: italic;">#!/usr/bin/env python</span><br />
<span style="color: #ff7700;font-weight:bold;">import</span> <span class="google_highlight">gtk</span><br />
&nbsp;<br />
<span style="color: #ff7700;font-weight:bold;">def</span> draw_pixbuf<span style="color: black;">&#40;</span>widget, event<span style="color: black;">&#41;</span>:<br />
&nbsp; &nbsp; &nbsp; &nbsp; path = <span style="color: #483d8b;">'/home/markuz/wallpapers/WMwall1024x768.gif'</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; pixbuf = <span class="google_highlight">gtk</span>.<span style="color: black;">gdk</span>.<span style="color: black;">pixbuf_new_from_file</span><span style="color: black;">&#40;</span>path<span style="color: black;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; widget.<span style="color: black;">window</span>.<span style="color: black;">draw_pixbuf</span><span style="color: black;">&#40;</span>widget.<span style="color: black;">style</span>.<span style="color: black;">bg_gc</span><span style="color: black;">&#91;</span><span class="google_highlight">gtk</span>.<span style="color: black;">STATE_NORMAL</span><span style="color: black;">&#93;</span>, pixbuf, 0, 0, 0,0<span style="color: black;">&#41;</span><br />
&nbsp;<br />
window = <span class="google_highlight">gtk</span>.<span style="color: black;">Window</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span><br />
window.<span style="color: black;">set_title</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'Drawing Test'</span><span style="color: black;">&#41;</span><br />
window.<span style="color: black;">set_size_request</span><span style="color: black;">&#40;</span><span style="color: #ff4500;">640</span>,<span style="color: #ff4500;">480</span><span style="color: black;">&#41;</span><br />
window.<span style="color: black;">connect</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'destroy'</span>,<span class="google_highlight">gtk</span>.<span style="color: black;">main_quit</span><span style="color: black;">&#41;</span><br />
hbbox = <span class="google_highlight">gtk</span>.<span style="color: black;">HButtonBox</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span><br />
window.<span style="color: black;">add</span><span style="color: black;">&#40;</span>hbbox<span style="color: black;">&#41;</span><br />
hbbox.<span style="color: black;">connect</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'expose-event'</span>, draw_pixbuf<span style="color: black;">&#41;</span><br />
button = <span class="google_highlight">gtk</span>.<span style="color: black;">Button</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'Press Me!'</span><span style="color: black;">&#41;</span><br />
hbbox.<span style="color: black;">pack_start</span><span style="color: black;">&#40;</span>button, <span style="color: #008000;">True</span>, <span style="color: #008000;">False</span>, <span style="color: #ff4500;">10</span><span style="color: black;">&#41;</span><br />
window.<span style="color: black;">show_all</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span><br />
&nbsp;<br />
<span class="google_highlight">gtk</span>.<span style="color: black;">main</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span><br />
&nbsp;</div></div>

And the result should be like this:<br />
<br />
<center><br />
<a href="http://www.flickr.com/photos/markuz/4113718671/" title="Putting an image as background in Gtk by markuz, on Flickr"><img src="http://farm3.static.flickr.com/2698/4113718671_d310f973d0.jpg" width="500" height="390" alt="Putting an image as background in Gtk" id='image' /></a><br />
</center><br />
<br />
<br />
It is just a window with an HBoxButton as <span class="google_highlight">container</span> and a Button in the middle. The button draws normal, but the HButtonBox is drawing its <span class="google_highlight">gtk</span>.gdk.window with a pixbuf.

  </td></tr></table>
</div>
  <div class="entry-meta">
    <span class="entry-author vcard author"><a href="index.php/blog/author/markuz.html" class="fn url"></a></span>
    <span class="separator">|</span>
    <span class="entry-date"><abbr class="published" title="2009-11-18T01:16:02+00:00">Tuesday 17 November 2009 7:16pm</abbr></span>
    <span class="separator">|</span>
	<span class="entry-category"><a href="index.php/blog/category/general.html" rel="category tag">general</a>, <a href="index.php/blog/category/Software_Development.html" rel="category tag">Software_Development</a>, <a href="index.php/blog/category/Python.html" rel="category tag">Python</a>, <a href="index.php/blog/category/gtk.html" rel="category tag">gtk</a>, <a href="index.php/blog/category/FLOSS.html" rel="category tag">FLOSS</a>, <a href="index.php/blog/category/Flickr.html" rel="category tag">Flickr</a>, <a href="index.php/blog/category/tips-and-tricks.html" rel="category tag">tips and tricks</a> </span>

            <span class="separator">|</span>
    <span class="entry-comments-statistic"><a>0 comments</a></span>
      </div>
</div>
</div>


</div>
<div class="blog-entry-nav">
    <div class="float-left"><a href="index.php/blog/show/Nokia-Internet-Stick-CS-10-on-Linux.html">&laquo; Nokia Internet Stick CS-10 on Linux</a></div>
    <div class="float-right"><a href="index.php/blog/show/Christine-0.6.0-pre1%3A-first-win32-build.html">Christine 0.6.0-pre1: first win32 build &raquo;</a></div>
</div>




<div id="disqus_thread"></div>
<script type="text/javascript">
	  /**
	      * var disqus_identifier; [Optional but recommended: Define a unique identifier (e.g. post id or slug) for this thread] 
		      */
			    (function() {
					   var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
					      dsq.src = 'http://islascruz.disqus.com/embed.js';
						     (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
							   })();
						   </script>
						   <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript=islascruz">comments powered by Disqus.</a></noscript>
						   <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>




	</td>
	<td id='bar1' valign=top>
    <div class="gadget blocks" id="block_42">
    <div class="content">
    <center><script charset="utf-8" src="http://widgets.twimg.com/j/2/widget.js"></script><br />
<script>
new TWTR.Widget({
  version: 2,
  type: 'profile',
  rpp: 10,
  interval: 30000,
  width: 'auto',
  height: 300,
  theme: {
    shell: {
      background: '#000000',
      color: '#858585'
    },
    tweets: {
      <span class="google_highlight">background</span>: '#ffffff',
      color: '#424242',
      links: '#2f3491'
    }
  },
  features: {
    scrollbar: true,
    loop: false,
    live: true,
    behavior: 'all'
  }
}).render().setUser('markuzmx').start();
</script><br />
</center>
  </div>
</div>



<div class="gadget blocks" id="block_4">
    <div class="content">
    <div align="center">
<a href='http://www.pledgie.com/campaigns/12059'><img alt='Click here to lend your support to: Christine and make a donation at www.pledgie.com !' src='http://www.pledgie.com/campaigns/12059.png?skin_name=chrome' border='0' /><br />
Donate to Christine Media Player<br />
</a><br />

</div>
  </div>
</div>



<div class="gadget blocks" id="block_17">
    <div class="content">
    <center><a href='http://www.mkzhost.com'><br />
<img src='http://mkzhost.com/data/banners/sitioHospedaen.png' border=0><br />
</a><br />
</center>
  </div>
</div>



<div class="gadget friends">
  <h2>Friends</h2>
  <div class="content">
          <div><a href="http://gnu.org.mx/" alt="GNU Mexico" target="_blank" rel="external">GNU Mexico</a></div>
          <div><a href="http://www.gwolf.org" alt="Gunnar" target="_blank" rel="external">Gunnar</a></div>
          <div><a href="http://linuxmanr4.com/" alt="Linuxman R4" target="_blank" rel="external">Linuxman R4</a></div>
          <div><a href="http://www.alobbs.com" alt="alo" target="_blank" rel="external">alo</a></div>
      </div>
</div>



	</td>

	<td id='bar2' valign=top>
    	</td>
    </tr>
	<tr>
		<td colspan=3>
		<div class="gadget blocks" id="block_20">
    <div class="content">
    <script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script><br />
<script type="text/javascript">
_uacct = "UA-955861-1";
urchinTracker();
</script>
  </div>
</div>



<div class="gadget blocks" id="block_30">
    <div class="content">
    <center><br />
<script type="text/javascript" src="http://widgets.amung.us/small.js"></script><script type="text/javascript">WAU_small('85vfqjukydnz')</script>&nbsp;&nbsp;&nbsp;<!-- Inicio codigo Mi PageRank --><script language="JavaScript" src="http://www.mipagerank.com/mipagerank.php/http://islascruz.org/html/index.php?d="></script><br />
<noscript><a target="_blank" href="http://www.mipagerank.com/"><img src="http://www.mipagerank.com/mipagerank.php/http://islascruz.org/html/index.php?img=1&amp;d=" border="0" alt="Mi PageRank"></a><br />
</noscript><br />
<!-- Fin codigo Mi PageRank --><br />
<br />
</center>
  </div>
</div>



	</td>
	</tr>
    </table>

    <!-- <div id='table'>
    <div id='row'>
    <div id="bar1" class="narrow">
    </div>
    <div id="main" class="wide">
    </div>
    <div id="bar2" class="narrow">
    </div>
    </div>
    </div> -->
	<div id="footer">
		<br /><br /><br />
        Powered by <a href="http://www.jaws-project.com">Jaws</a><br />
        <a href="http://www.cherokee-project.org/">
        <img src='http://islascruz.org/powered_by_cherokee_2.png' border=0/>
        </a>
		<br>
		Copyright (2005-2011) Marco Antonio Islas Cruz<br>
        This is a personal web page. Things said here do not represent the position of my employer.<br />
		Everything in this blog is available under the 
		<a href="http://www.gnu.org/copyleft/fdl.html" title="Go to GNU/FDL Home Page">
		GNU/Free Documentation License</a> unless it explicitly says something else.<br />
		Code is under the <a href='http://www.gnu.org/licenses/gpl.txt'>GPL v.3</a> unlest it 
		explicitly says something else.<br />
		Trademarks, brands, logos, slogans are property of their respective owners.

		<br /><br /><br />
	</div>
</div>
<!-- <script type="text/javascript"> 
	var _tbdef = {user: 'markuzmx'}; 
	(function(){ 
	var d = document;var tbjs = d.createElement('script'); tbjs.type = 'text/javascript'; 
	tbjs.async = true; tbjs.src = 'http://tweetboard.com/tb.js'; var tbel = d.getElementsByTagName('head')[0]; 
	if(!tbel) tbel = d.getElementsByTagName('head')[0]; tbel.appendChild(tbjs);
	})(); 
</script>--><script type="text/javascript">
//<![CDATA[
(function() {
var links = document.getElementsByTagName('a');
var query = '?';
for(var i = 0; i < links.length; i++) {
if(links[i].href.indexOf('#disqus_thread') >= 0) {
query += 'url' + i + '=' + encodeURIComponent(links[i].href) + '&';
}
}
document.write('<script charset="utf-8" type="text/javascript" src="http://disqus.com/forums/islascruz/get_num_replies.js' + query + '"></' + 'script>');
})();
//]]>
</script>
</body>
</html>

