<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8" /><title>Power saving - ArchWiki</title>
<meta name="generator" content="MediaWiki 1.22.6" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)" />
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd" />
<link rel="copyright" href="http://www.gnu.org/copyleft/fdl.html" />
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom" />
<link rel="stylesheet" href="https://wiki.archlinux.org/load.php?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cskins.archlinux&amp;only=styles&amp;skin=archlinux&amp;*" />
<!--[if IE 6]><link rel="stylesheet" href="/skins/archlinux/IE60Fixes.css?303" media="screen" /><![endif]-->
<!--[if IE 7]><link rel="stylesheet" href="/skins/archlinux/IE70Fixes.css?303" media="screen" /><![endif]--><meta name="ResourceLoaderDynamicStyles" content="" />

<script src="https://wiki.archlinux.org/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=archlinux&amp;*"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Power_saving","wgTitle":"Power saving","wgCurRevisionId":311896,"wgRevisionId":311896,"wgArticleId":15437,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Power management"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Power_saving","wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[]});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function(){mw.user.options.set({"ccmeonemails":0,"cols":80,"date":"default","diffonly":0,"disablemail":0,"disablesuggest":0,"editfont":"default","editondblclick":0,"editsection":1,"editsectiononrightclick":0,"enotifminoredits":0,"enotifrevealaddr":0,"enotifusertalkpages":1,"enotifwatchlistpages":0,"extendwatchlist":0,"fancysig":0,"forceeditsummary":0,"gender":"unknown","hideminor":0,"hidepatrolled":0,"imagesize":2,"justify":0,"math":1,"minordefault":0,"newpageshidepatrolled":0,"nocache":0,"noconvertlink":0,"norollbackdiff":0,"numberheadings":0,"previewonfirst":0,"previewontop":1,"rcdays":7,"rclimit":50,"rememberpassword":0,"rows":25,"searchlimit":20,"showhiddencats":0,"shownumberswatching":1,"showtoc":1,"showtoolbar":1,"skin":"archlinux","stubthreshold":0,"thumbsize":2,"underline":2,"uselivepreview":0,"usenewrc":0,"vector-simplesearch":1,"watchcreations":0,"watchdefault":0,"watchdeletion":0,"watchlistdays":3,"watchlisthideanons":0,"watchlisthidebots":
0,"watchlisthideliu":0,"watchlisthideminor":0,"watchlisthideown":0,"watchlisthidepatrolled":0,"watchmoves":0,"wllimit":250,"useeditwarning":1,"prefershttps":1,"language":"en","variant-gan":"gan","variant-iu":"iu","variant-kk":"kk","variant-ku":"ku","variant-shi":"shi","variant-sr":"sr","variant-tg":"tg","variant-uz":"uz","variant-zh":"zh","searchNs0":true,"searchNs1":false,"searchNs2":false,"searchNs3":false,"searchNs4":false,"searchNs5":false,"searchNs6":false,"searchNs7":false,"searchNs8":false,"searchNs9":false,"searchNs10":false,"searchNs11":false,"searchNs12":false,"searchNs13":false,"searchNs14":false,"searchNs15":false,"variant":"en"});},{},{});mw.loader.implement("user.tokens",function(){mw.user.tokens.set({"editToken":"+\\","patrolToken":false,"watchToken":false});},{},{});
/* cache key: archwiki:resourceloader:filter:minify-js:7:85c90aa16eaeef41f8c16fb94950cfbf */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax"]);
}</script>
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Power_saving skin-archlinux action-view">

<div id="archnavbar"><!-- Arch Linux global navigation bar -->
	<div id="archnavbarlogo">
		<p><a id="logo" href="http://www.archlinux.org/"></a></p>
	</div>
	<div id="archnavbarmenu">
		<ul id="archnavbarlist">
			<li id="anb-home"><a href="http://www.archlinux.org/">Home</a></li><li id="anb-packages"><a href="http://www.archlinux.org/packages/">Packages</a></li><li id="anb-forums"><a href="https://bbs.archlinux.org/">Forums</a></li><li id="anb-wiki" class="anb-selected"><a href="https://wiki.archlinux.org/">Wiki</a></li><li id="anb-bugs"><a href="https://bugs.archlinux.org/">Bugs</a></li><li id="anb-aur"><a href="https://aur.archlinux.org/">AUR</a></li><li id="anb-download"><a href="http://www.archlinux.org/download/">Download</a></li>		</ul>
	</div>
</div><!-- #archnavbar -->

<div id="globalWrapper">
<div id="column-content"><div id="content" class="mw-body-primary" role="main">
	<a id="top"></a>
	
	<h1 id="firstHeading" class="firstHeading" lang="en"><span dir="auto">Power saving</span></h1>
	<div id="bodyContent" class="mw-body">
		<div id="siteSub">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="jump-to-nav" class="mw-jump">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>

		<!-- start content -->
<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div style="float:right; clear:right; width:25%; margin: 0 0 0.5em 0.5em;"><p style="background:#333; color:white; padding:0.2em; border-bottom:5px #08c solid; margin:0; text-align:center; font-weight:bold;">Related articles</p><ul style="list-style-type:none; margin:0; padding:0.3em;">
<li style="padding:0.4em 0; line-height:1;"><a href="/index.php/Power_management" title="Power management">Power management</a></li>
<li style="padding:0.4em 0; line-height:1;"><a href="/index.php/CPU_frequency_scaling" title="CPU frequency scaling">CPU frequency scaling</a></li>
<li style="padding:0.4em 0; line-height:1;"><a href="/index.php/Hybrid_graphics" title="Hybrid graphics">Hybrid graphics</a></li>
<li style="padding:0.4em 0; line-height:1;"><a href="/index.php/Kernel_modules" title="Kernel modules">Kernel modules</a></li>
<li style="padding:0.4em 0; line-height:1;"><a href="/index.php/Sysctl" title="Sysctl">sysctl</a></li>
<li style="padding:0.4em 0; line-height:1;"><a href="/index.php/Udev" title="Udev">udev</a></li>
</ul></div>
<p>This article covers the configuration needed to turn on power saving features. Almost all of the features listed here are worth using whether or not the computer is on AC or battery power. Most have negligible performance impact and are just not enabled by default because of commonly broken hardware/drivers. Reducing power usage means reducing heat, which can even lead to higher performance on a modern Intel or AMD CPU, thanks to <a href="http://en.wikipedia.org/wiki/Intel_Turbo_Boost" class="extiw" title="wikipedia:Intel Turbo Boost">dynamic overclocking</a>.
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Configuration"><span class="tocnumber">1</span> <span class="toctext">Configuration</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Audio"><span class="tocnumber">1.1</span> <span class="toctext">Audio</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#Active_state_power_management"><span class="tocnumber">1.2</span> <span class="toctext">Active state power management</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Backlight"><span class="tocnumber">1.3</span> <span class="toctext">Backlight</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Bluetooth"><span class="tocnumber">1.4</span> <span class="toctext">Bluetooth</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Web-Camera"><span class="tocnumber">1.5</span> <span class="toctext">Web-Camera</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#Kernel_parameters"><span class="tocnumber">1.6</span> <span class="toctext">Kernel parameters</span></a>
<ul>
<li class="toclevel-3 tocsection-8"><a href="#Disabling_NMI_watchdog"><span class="tocnumber">1.6.1</span> <span class="toctext">Disabling NMI watchdog</span></a></li>
<li class="toclevel-3 tocsection-9"><a href="#Writeback_Time"><span class="tocnumber">1.6.2</span> <span class="toctext">Writeback Time</span></a></li>
<li class="toclevel-3 tocsection-10"><a href="#Laptop_Mode"><span class="tocnumber">1.6.3</span> <span class="toctext">Laptop Mode</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-11"><a href="#Network_interfaces"><span class="tocnumber">1.7</span> <span class="toctext">Network interfaces</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#PCI_Runtime_Power_Management"><span class="tocnumber">1.8</span> <span class="toctext">PCI Runtime Power Management</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#SATA_Active_Link_Power_Management"><span class="tocnumber">1.9</span> <span class="toctext">SATA Active Link Power Management</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#USB_Autosuspend"><span class="tocnumber">1.10</span> <span class="toctext">USB Autosuspend</span></a></li>
<li class="toclevel-2 tocsection-15"><a href="#Device_Power_Management"><span class="tocnumber">1.11</span> <span class="toctext">Device Power Management</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="#Mount_options"><span class="tocnumber">1.12</span> <span class="toctext">Mount options</span></a></li>
<li class="toclevel-2 tocsection-17"><a href="#CD.2FDVD_spin_down"><span class="tocnumber">1.13</span> <span class="toctext">CD/DVD spin down</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-18"><a href="#Tools_and_scripts"><span class="tocnumber">2</span> <span class="toctext">Tools and scripts</span></a>
<ul>
<li class="toclevel-2 tocsection-19"><a href="#Packages"><span class="tocnumber">2.1</span> <span class="toctext">Packages</span></a></li>
<li class="toclevel-2 tocsection-20"><a href="#Using_a_script_and_an_udev_rule"><span class="tocnumber">2.2</span> <span class="toctext">Using a script and an udev rule</span></a></li>
<li class="toclevel-2 tocsection-21"><a href="#Print_power_settings"><span class="tocnumber">2.3</span> <span class="toctext">Print power settings</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-22"><a href="#See_also"><span class="tocnumber">3</span> <span class="toctext">See also</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Configuration">Configuration</span></h2>
<p>If you would like to create your own scripts and power saving settings such as by udev rules you can take the following settings as a reference.
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;"><strong> Note: </strong>Most rules described below are also managed by tools like <a href="/index.php/TLP" title="TLP">TLP</a> and it is unwise to use multigoverning.</div>
<h3><span class="mw-headline" id="Audio">Audio</span></h3>
<p>By default, audio power saving is turned off by most drivers.  It can be enabled by setting the <code style="display:inline-block; padding: 0.1em 0.3em;">power_save</code> parameter; a time (in seconds) to go into idle mode.  To idle the audio card after one second, create
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modprobe.d/audio_powersave.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">options snd_hda_intel power_save=1</pre>
<p>for Intel, or use
</p>
<pre>options snd_ac97_codec power_save=1
</pre>
<p>for ac97.
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;"><strong> Note: </strong>Toggling the audio card's power state can cause a popping sound or noticeable latency on some broken hardware.</div>
<h3><span class="mw-headline" id="Active_state_power_management">Active state power management</span></h3>
<p>To verify that <a href="http://en.wikipedia.org/wiki/Active_State_Power_Management" class="extiw" title="wikipedia:Active State Power Management">ASPM</a> is enabled:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ cat /sys/module/pcie_aspm/parameters/policy</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[default] performance powersave</pre>
<p>Either <code style="display:inline-block; padding: 0.1em 0.3em;">[default]</code> or <code style="display:inline-block; padding: 0.1em 0.3em;">[powersave]</code> means you do not need to force it on. Otherwise, it's either unsupported or broken on your hardware, or has to be forced on with <code style="display:inline-block; padding: 0.1em 0.3em;">pcie_aspm=force</code> on the <a href="/index.php/Kernel_line" title="Kernel line" class="mw-redirect">kernel line</a>.
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #FFDDDD; border: thin solid #DDBBBB; overflow: hidden;"><strong> Warning: </strong>
<ul>
<li> Forcing on ASPM can cause a freeze/panic, so make sure you have a way to undo the option if it doesn't work.
</li>
<li> On systems that don't support it forcing on ASPM can even increase power consumption.</div>
</li>
</ul>
<h3><span class="mw-headline" id="Backlight">Backlight</span></h3>
<p>When system starts, screen backlight is set to maximum by default. This can be fixed by specifying backlight level in the following udev rule:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/backlight.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
## SET BACKLIGHT
SUBSYSTEM==&quot;backlight&quot;, ACTION==&quot;add&quot;, KERNEL==&quot;acpi_video0&quot;, ATTR{brightness}=&quot;1&quot;
</pre>
<p>See <a href="/index.php/Backlight" title="Backlight">Backlight</a> for more information.
</p>
<h3><span class="mw-headline" id="Bluetooth">Bluetooth</span></h3>
<div style="text-align: center; margin-bottom: 1em; overflow:hidden;">
<table class="notice noprint toc" id="translateme" style="background: &#123;&#123;&#123;backgroundcolor}}}; border-color: &#123;&#123;&#123;bordercolor}}}; width: 100%">
<tr>
<td style="background-color: &#123;&#123;&#123;signalcolor}}}; width: 100px"> <a href="/index.php/File:Tango-view-fullscreen.png" class="image"><img alt="Tango-view-fullscreen.png" src="/images/3/38/Tango-view-fullscreen.png" width="48" height="48" /></a>
</td>
<td>  <b>This article or section needs expansion.</b> <div style="font-size: 90%"><b>Reason:</b> The device should likely be disabled with hciconfig first. (<a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:Power_saving">Discuss</a>)</div>
</td>
<td style="background-color: &#123;&#123;&#123;signalcolor}}}; width: 100px"> <a href="/index.php/File:Tango-view-fullscreen.png" class="image"><img alt="Tango-view-fullscreen.png" src="/images/3/38/Tango-view-fullscreen.png" width="48" height="48" /></a>
</td></tr></table>
</div>
<p><a href="/index.php/Kernel_modules#Blacklisting" title="Kernel modules">Blacklist</a> the <code style="display:inline-block; padding: 0.1em 0.3em;">hci_usb</code> module if the driver is loaded automatically.
</p><p>Alternatively, <a href="/index.php/Kernel_modules#Blacklisting" title="Kernel modules">blacklist</a> the <code style="display:inline-block; padding: 0.1em 0.3em;">btusb</code> and <code style="display:inline-block; padding: 0.1em 0.3em;">bluetooth</code> modules.
</p><p>Another variant is to <span style="font-family: monospace"><a rel="nofollow" class="external text" href="https://www.archlinux.org/packages/?name=rfkill">rfkill</a></span> it:
</p>
<pre># rfkill block bluetooth
</pre>
<p>Or with udev rule:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/bt.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
## DISABLE BLUETOOTH
SUBSYSTEM==&quot;rfkill&quot;, ATTR{type}==&quot;bluetooth&quot;, ATTR{state}=&quot;0&quot;
</pre>
<h3><span class="mw-headline" id="Web-Camera">Web-Camera</span></h3>
<p>If you won't use integrated web camera then <a href="/index.php/Kernel_modules#Blacklisting" title="Kernel modules">blacklist</a> the <code style="display:inline-block; padding: 0.1em 0.3em;">uvcvideo</code> module.
</p>
<h3><span class="mw-headline" id="Kernel_parameters">Kernel parameters</span></h3>
<p>This section uses configs in <code style="display:inline-block; padding: 0.1em 0.3em;">/etc/sysctl.d/</code>, which is <i>"a drop-in directory for kernel sysctl parameters."</i>  See <a rel="nofollow" class="external text" href="http://0pointer.de/blog/projects/the-new-configuration-files">The New Configuration Files</a> and more specifically <a rel="nofollow" class="external text" href="http://0pointer.de/public/systemd-man/sysctl.d.html">systemd's sysctl.d man page</a> for more information.
</p>
<h4><span class="mw-headline" id="Disabling_NMI_watchdog">Disabling NMI watchdog</span></h4>
<p>The <a href="http://en.wikipedia.org/wiki/Non-maskable_interrupt" class="extiw" title="wikipedia:Non-maskable interrupt">NMI</a> watchdog is a debugging feature to catch hardware hangs and cause a kernel panic. On some systems it can generate a lot of interrupts, causing a noticeable increase in power usage.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/sysctl.d/disable_watchdog.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">kernel.nmi_watchdog = 0</pre>
<p>or add <code style="display:inline-block; padding: 0.1em 0.3em;">nmi_watchdog=0</code> to the <a href="/index.php/Kernel_parameter" title="Kernel parameter" class="mw-redirect">kernel line</a> to disable it completely from early boot.
</p>
<h4><span class="mw-headline" id="Writeback_Time">Writeback Time</span></h4>
<p>Increasing the VM dirty writeback time can help to aggregate I/O together - reducing disk writes, and decreasing power usage:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/sysctl.d/dirty.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">vm.dirty_writeback_centisecs = 1500</pre>
<p>To do the same for journal commits with ext4 and some other filesystems, use <code style="display:inline-block; padding: 0.1em 0.3em;">commit=15</code> as a parameter in <a href="/index.php/Fstab" title="Fstab">fstab</a> or with the <code style="display:inline-block; padding: 0.1em 0.3em;">rootflags</code> <a href="/index.php/Kernel_parameter" title="Kernel parameter" class="mw-redirect">kernel parameter</a>.
</p>
<h4><span class="mw-headline" id="Laptop_Mode">Laptop Mode</span></h4>
<p>See the <a rel="nofollow" class="external text" href="https://www.kernel.org/doc/Documentation/laptops/laptop-mode.txt">kernel documentation</a> on the laptop mode 'knob.' <i>"A sensible value for the knob is 5 seconds."</i>
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/sysctl.d/laptop.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">vm.laptop_mode = 5</pre>
<h3><span class="mw-headline" id="Network_interfaces">Network interfaces</span></h3>
<p><a href="http://en.wikipedia.org/wiki/Wake-on-LAN" class="extiw" title="wikipedia:Wake-on-LAN">Wake-on-LAN</a> can be a useful feature, but if you're not making use of it then it's simply draining extra power waiting for a magic packet while in suspend. Disabling for all Ethernet interfaces:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/70-disable_wol.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">ACTION=="add", SUBSYSTEM=="net", KERNEL=="eth*", RUN+="/usr/bin/ethtool -s&#160;%k wol d"</pre>
<p>To enable powersaving on all wireless interfaces:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/70-wifi-powersave.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">ACTION=="add", SUBSYSTEM=="net", KERNEL=="wlan*", RUN+="/usr/bin/iw dev&#160;%k set power_save on"</pre>
<p>In these examples, <code style="display:inline-block; padding: 0.1em 0.3em;">%k</code> is a specifier for the kernel name of the matched device.  For example, if it finds that the rule is applicable to <code style="display:inline-block; padding: 0.1em 0.3em;">wlan0</code>, the <code style="display:inline-block; padding: 0.1em 0.3em;">%k</code> specifier will be replaced with <code style="display:inline-block; padding: 0.1em 0.3em;">wlan0</code>. To apply the rules to only a particular interface, just replace the pattern <code style="display:inline-block; padding: 0.1em 0.3em;">eth*</code> and specifier <code style="display:inline-block; padding: 0.1em 0.3em;">%k</code> with the desired interface name. For more information, see <a rel="nofollow" class="external text" href="http://www.reactivated.net/writing_udev_rules.html">Writing udev rules</a>.
</p><p>In this case, the name of the configuration file is important. Due to the introduction of <a href="/index.php/Network_configuration#Device_names" title="Network configuration">persistent device names</a> via <code style="display:inline-block; padding: 0.1em 0.3em;">80-net-name-slot.rules</code> in systemd v197, it is important that the network powersave rules are named lexicographically before <code style="display:inline-block; padding: 0.1em 0.3em;">80-net-name-slot.rules</code>, so that they are applied before the devices are named e.g. <code style="display:inline-block; padding: 0.1em 0.3em;">enp2s0</code>.
</p>
<h3><span class="mw-headline" id="PCI_Runtime_Power_Management">PCI Runtime Power Management</span></h3>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/pci_pm.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">ACTION=="add", SUBSYSTEM=="pci", ATTR{power/control}="auto"</pre>
<h3><span class="mw-headline" id="SATA_Active_Link_Power_Management">SATA Active Link Power Management</span></h3>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;"><strong> Note: </strong>This adds latency when accessing a drive that has been idle, so it's one of the few settings that may be worth toggling based on whether you're on AC power.</div>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/hd_power_save.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">ACTION=="add", SUBSYSTEM=="scsi_host", KERNEL=="host*", ATTR{link_power_management_policy}="min_power"</pre>
<div style="padding: 5px; margin: 0.50em 0; background-color: #FFDDDD; border: thin solid #DDBBBB; overflow: hidden;"><strong> Warning: </strong>SATA Active Link Power Management can lead to data loss on some devices (e.g. Lenovo T440s <a rel="nofollow" class="external text" href="http://lkml.indiana.edu/hypermail/linux/kernel/1401.2/02171.html">is known to suffer</a> this problem)</div>
<h3><span class="mw-headline" id="USB_Autosuspend">USB Autosuspend</span></h3>
<p>The linux kernel can automatically suspend usb devices when they are not in use. This can sometimes save quite a bit of power, however some usb devies are not compatible with usb power saving and start to misbehave (very common for usb mice/keyboards). To mitigate the problem, you can pick one of the following udev rules based on your willingness to experience and solve problems that occur during everyday work. They are sorted in order of safety (safest, but least powersaving first):
</p><p>The first option is to use a whitelist of devices, which <b>you</b> know are working:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/usb_power_save.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
SUBSYSTEM!=&quot;usb&quot;, GOTO=&quot;power_usb_rules_end&quot;
ACTION!=&quot;add&quot;, GOTO=&quot;power_usb_rules_end&quot;
TEST!=&quot;power/control&quot;, GOTO=&quot;power_usb_rules_end&quot;

## Whitelist. Duplicate the following line with varying usbids
ATTR{idVendor}==&quot;05c6&quot;, ATTR{idProduct}==&quot;9205&quot;, ATTR{power/control}=&quot;auto&quot;     # example: Qualcomm Gobi 2000

LABEL=&quot;power_usb_rules_end&quot;
</pre>
<p>The second option is to blacklist devices that are not working with usb power management and enable it for all other devices:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/usb_power_save.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
SUBSYSTEM!=&quot;usb&quot;, GOTO=&quot;power_usb_rules_end&quot;
ACTION!=&quot;add&quot;, GOTO=&quot;power_usb_rules_end&quot;
TEST!=&quot;power/control&quot;, GOTO=&quot;power_usb_rules_end&quot;

## Blacklist. Duplicate the following line with varying usbids
ATTR{idVendor}==&quot;05c6&quot;, ATTR{idProduct}==&quot;9205&quot;, GOTO=&quot;power_usb_rules_end&quot;    # example: Qualcomm Gobi 2000

ATTR{power/control}=&quot;auto&quot;

LABEL=&quot;power_usb_rules_end&quot;
</pre>
<p>or to just enable usb power saving for all usb devices (not recommended):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/usb_power_save.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
ACTION==&quot;add&quot;, SUBSYSTEM==&quot;usb&quot;, TEST==&quot;power/control&quot;, ATTR{power/control}=&quot;auto&quot;
</pre>
<p>alternatively to the last udev rule you can add the following to <i>/etc/modprobe.d/usb-autosuspend.conf</i>
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modprobe.d/usb-autosuspend.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
options usbcore autosuspend=2
</pre>
<h3><span class="mw-headline" id="Device_Power_Management">Device Power Management</span></h3>
<div style="text-align: center; margin-bottom: 1em; overflow:hidden;">
<table class="notice noprint toc" id="disputed" style="background: &#123;&#123;&#123;backgroundcolor}}}; border-color: &#123;&#123;&#123;bordercolor}}}; width: 100%">
<tr>
<td style="background-color: &#123;&#123;&#123;signalcolor}}}; width: 100px"> <a href="/index.php/File:Tango-emblem-important.png" class="image"><img alt="Tango-emblem-important.png" src="/images/c/c8/Tango-emblem-important.png" width="48" height="48" /></a>
</td>
<td>  <b>The factual accuracy of this article or section is disputed.</b> <div style="font-size: 90%"><b>Reason:</b> Should be done with a udev rule. (<a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:Power_saving">Discuss</a>)</div>
</td>
<td style="background-color: &#123;&#123;&#123;signalcolor}}}; width: 100px"> <a href="/index.php/File:Tango-emblem-important.png" class="image"><img alt="Tango-emblem-important.png" src="/images/c/c8/Tango-emblem-important.png" width="48" height="48" /></a>
</td></tr></table>
</div>
<pre># echo auto | tee /sys/bus/i2c/devices/*/power/control &gt; /dev/null
# echo auto | tee /sys/bus/spi/devices/*/power/control &gt; /dev/null
</pre>
<h3><span class="mw-headline" id="Mount_options">Mount options</span></h3>
<p>You might want to use the <code style="display:inline-block; padding: 0.1em 0.3em;">noatime</code> option, see <a href="/index.php/Fstab#atime_options" title="Fstab">Fstab#atime options</a> for more information.
</p>
<h3><span class="mw-headline" id="CD.2FDVD_spin_down">CD/DVD spin down</span></h3>
<div style="text-align: center; margin-bottom: 1em; overflow:hidden;">
<table class="notice noprint toc" id="translateme" style="background: &#123;&#123;&#123;backgroundcolor}}}; border-color: &#123;&#123;&#123;bordercolor}}}; width: 100%">
<tr>
<td style="background-color: &#123;&#123;&#123;signalcolor}}}; width: 100px"> <a href="/index.php/File:Tango-view-fullscreen.png" class="image"><img alt="Tango-view-fullscreen.png" src="/images/3/38/Tango-view-fullscreen.png" width="48" height="48" /></a>
</td>
<td>  <b>This article or section needs expansion.</b> <div style="font-size: 90%"><b>Reason:</b> something similar without using udisks? (<a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php/Talk:Power_saving">Discuss</a>)</div>
</td>
<td style="background-color: &#123;&#123;&#123;signalcolor}}}; width: 100px"> <a href="/index.php/File:Tango-view-fullscreen.png" class="image"><img alt="Tango-view-fullscreen.png" src="/images/3/38/Tango-view-fullscreen.png" width="48" height="48" /></a>
</td></tr></table>
</div>
<p>To allow the CD/DVD rom to spin down after a while using <a href="/index.php/Udisks" title="Udisks" class="mw-redirect">udisks</a>:
</p>
<pre># udisks --inhibit-polling /dev/sr0
</pre>
<h2><span class="mw-headline" id="Tools_and_scripts">Tools and scripts</span></h2>
<h3><span class="mw-headline" id="Packages">Packages</span></h3>
<p>There are many scripts and tools which make use of the various settings described in the previous sections. These are notably:
</p>
<ul>
<li> <a href="/index.php/Powertop" title="Powertop">Powertop</a> is a handy utility from Intel that displays which hardware/processes are using the most power on your system, and provides instructions on how to stop or remove power-wasting services. It's report functionality can also be used to identify the relevant parameters for the system.   
</li>
<li> <a href="/index.php/TLP" title="TLP">TLP</a>
</li>
<li> <a href="/index.php/Powerdown" title="Powerdown">Powerdown</a>
</li>
<li> <span style="font-family: monospace"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/powerconf/">powerconf</a></span>
</li>
<li> <span style="font-family: monospace"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/ftw-git/">ftw-git</a></span>
</li>
<li> <a href="/index.php/Laptop_Mode_Tools" title="Laptop Mode Tools">Laptop Mode Tools</a>
</li>
<li> <a href="/index.php/Pm-utils" title="Pm-utils">pm-utils</a>
</li>
</ul>
<p>If you do not want to take care of the settings by yourself it is recommended to use these tools. But be aware of running only <b>one</b> of these tools to avoid possible conflicts as they all work more or less similar.
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDFFDD; border: thin solid #BBDDBB; overflow: hidden;"><strong> Tip: </strong>Have a look at the <a href="/index.php/Category:Power_management" title="Category:Power management">power management category</a> to get an overview on what power management options exists in Archlinux.</div>
<h3><span class="mw-headline" id="Using_a_script_and_an_udev_rule">Using a script and an udev rule</span></h3>
<p>Since systemd users can suspend and hibernate through <code style="display:inline-block; padding: 0.1em 0.3em;">systemctl suspend</code> or <code style="display:inline-block; padding: 0.1em 0.3em;">systemctl hibernate</code> and handle acpi events with <code style="display:inline-block; padding: 0.1em 0.3em;">/etc/systemd/logind.conf</code>, it might be interesting to remove <a href="/index.php/Pm-utils" title="Pm-utils">pm-utils</a> and <a href="/index.php/Acpid" title="Acpid">acpid</a>. There's just one thing systemd can't do (as of systemd-204): power management depending on whether the system is running on AC or battery. To fill this gap, you can create a single <a href="/index.php/Udev" title="Udev">udev</a> rule that runs a script when the AC adapter is plugged and unplugged:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/powersave</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
SUBSYSTEM==&quot;power_supply&quot;, ATTR{online}==&quot;0&quot;, RUN+=&quot;/path/to/your/script true&quot;
SUBSYSTEM==&quot;power_supply&quot;, ATTR{online}==&quot;1&quot;, RUN+=&quot;/path/to/your/script false&quot;
</pre>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;"><strong> Note: </strong>You can use the same script that <i>pm-powersave</i> uses. You just have to make it executable and place it somewhere else (for example <code style="display:inline-block; padding: 0.1em 0.3em;">/usr/local/bin/</code>).</div>
<p>Examples of powersave scripts can be found here: <a href="/index.php/Powerdown" title="Powerdown">powerdown</a>, <span style="font-family: monospace"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/powerconf/">powerconf</a></span>, <a rel="nofollow" class="external text" href="https://github.com/Unia/powersave">powersave</a>.
</p><p>The above udev rule should work as expected, but if your power settings aren't updated after a suspend or hibernate cycle, you should add a script in <code style="display:inline-block; padding: 0.1em 0.3em;">/usr/lib/systemd/system-sleep/</code> with the following contents:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/usr/lib/systemd/system-sleep/00powersave</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">
#!/bin/sh

case $1 in
    pre) /path/to/your/script false ;;
    post)       
	if cat /sys/class/power_supply/AC0/online | grep 0 &gt; /dev/null 2&gt;&amp;1
	then
    		/path/to/your/script true	
	else
    		/path/to/your/script false
	fi
    ;;
esac
exit 0
</pre>
<p>Don't forget to make it executable!
</p>
<div style="padding: 5px; margin: 0.50em 0; background-color: #DDDDFF; border: thin solid #BBBBDD; overflow: hidden;"><strong> Note: </strong>Be aware that AC0 may be different for your laptop, change it if that is the case.</div>
<p>Now you don't need pm-utils anymore. Depending on your configuration, it may be a dependency of some other package. If you wish to remove it anyway, run <code style="display:inline-block; padding: 0.1em 0.3em;">pacman -Rdd pm-utils</code>.
</p>
<h3><span class="mw-headline" id="Print_power_settings">Print power settings</span></h3>
<p>This script prints power settings and a variety of other properties for USB and PCI devices.  Note that root permissions are needed to see all settings.
</p>
<pre>
#!/bin/bash

for i in $(find /sys/devices -name &quot;bMaxPower&quot;)
do
	busdir=${i%/*}
	busnum=$(&lt;$busdir/busnum)
	devnum=$(&lt;$busdir/devnum)
	title=$(lsusb -s $busnum:$devnum)

	printf &quot;\n\n+++ %s\n  -%s\n&quot; &quot;$title&quot; &quot;$busdir&quot;

	for ff in $(find $busdir/power -type f ! -empty 2&gt;/dev/null)
	do
		v=$(cat $ff 2&gt;/dev/null|tr -d &quot;\n&quot;)
		[[ ${#v} -gt 0 ]] &amp;&amp; echo -e &quot; ${ff##*/}=$v&quot;;
		v=;
	done | sort -g;
done;

printf &quot;\n\n\n+++ %s\n&quot; &quot;Kernel Modules&quot;
for mod in $(lspci -k | sed -n '/in use:/s,^.*: ,,p' | sort -u)
do
	echo &quot;+ $mod&quot;;
	systool -v -m $mod 2&gt; /dev/null | sed -n &quot;/Parameters:/,/^$/p&quot;;
done
</pre>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li> <a rel="nofollow" class="external free" href="http://forum.manjaro.org/index.php?topic=1166.0">http://forum.manjaro.org/index.php?topic=1166.0</a>
</li>
<li> <a rel="nofollow" class="external text" href="https://wiki.ubuntu.com/Kernel/PowerManagement/PowerSavingTweaks">Ubuntu Wiki's Power Saving Tweaks</a>
</li>
</ul>

<!-- 
NewPP limit report
CPU time usage: 0.167 seconds
Real time usage: 0.183 seconds
Preprocessor visited node count: 999/1000000
Preprocessor generated node count: 2577/1000000
Post‐expand include size: 18884/2097152 bytes
Template argument size: 6630/2097152 bytes
Highest expansion depth: 7/40
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key archwiki:pcache:idhash:15437-0!*!0!!en!2!* and timestamp 20140426141931
 -->
</div><div class="printfooter">
Retrieved from "<a href="https://wiki.archlinux.org/index.php?title=Power_saving&amp;oldid=311896">https://wiki.archlinux.org/index.php?title=Power_saving&amp;oldid=311896</a>"</div>
		<div id='catlinks' class='catlinks'><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="/index.php/Special:Categories" title="Special:Categories">Category</a>: <ul><li><a href="/index.php/Category:Power_management" title="Category:Power management">Power management</a></li></ul></div></div>		<!-- end content -->
				<div class="visualClear"></div>
	</div>
</div></div>
<div id="column-one">
	<h2>Navigation menu</h2>
	<div id="p-cactions" class="portlet" role="navigation">
		<h3>Views</h3>
		<div class="pBody">
			<ul>
				<li id="ca-nstab-main" class="selected"><a href="/index.php/Power_saving" title="View the content page [c]" accesskey="c">Page</a></li>
				<li id="ca-talk" class="new"><a href="/index.php?title=Talk:Power_saving&amp;action=edit&amp;redlink=1" title="Discussion about the content page [t]" accesskey="t">Discussion</a></li>
				<li id="ca-viewsource"><a href="/index.php?title=Power_saving&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></li>
				<li id="ca-history"><a href="/index.php?title=Power_saving&amp;action=history" rel="archives" title="Past revisions of this page [h]" accesskey="h">History</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-personal" role="navigation">
		<h3>Personal tools</h3>
		<div class="pBody">
			<ul>
				<li id="pt-createaccount"><a href="/index.php?title=Special:UserLogin&amp;returnto=Power+saving&amp;type=signup">Create account</a></li>
				<li id="pt-login"><a href="/index.php?title=Special:UserLogin&amp;returnto=Power+saving" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-logo" role="banner">
<a href="/index.php/Main_page" style="background-image: url(/skins/archlinux/archlogo.png);" title="Visit the main page"></a>
	</div>
	<div class="generated-sidebar portlet" id="p-navigation" role="navigation">
		<h3>Navigation</h3>
		<div class='pBody'>
			<ul>
				<li id="n-mainpage-description"><a href="/index.php/Main_page" title="Visit the main page [z]" accesskey="z">Main page</a></li>
				<li id="n-categories"><a href="/index.php/Table_of_contents">Categories</a></li>
				<li id="n-portal"><a href="/index.php/Getting_involved" title="Various ways Archers can contribute to the community">Getting involved</a></li>
				<li id="n-currentevents"><a href="/index.php/ArchWiki:News" title="The latest lowdown on the wiki">Wiki news</a></li>
				<li id="n-randompage"><a href="/index.php/Special:Random" title="Load a random page [x]" accesskey="x">Random page</a></li>
			</ul>
		</div>
	</div>
	<div id="p-search" class="portlet" role="search">
		<h3><label for="searchInput">Search</label></h3>
		<div id="searchBody" class="pBody">
			<form action="/index.php" id="searchform">
				<input type='hidden' name="title" value="Special:Search"/>
				<input type="search" name="search" placeholder="Search" title="Search ArchWiki [f]" accesskey="f" id="searchInput" />
				<input type="submit" name="go" value="Go" title="Go to a page with this exact name if exists" id="searchGoButton" class="searchButton" />&#160;
				<input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton" />
			</form>
		</div>
	</div>
	<div class="generated-sidebar portlet" id="p-interaction" role="navigation">
		<h3>interaction</h3>
		<div class='pBody'>
			<ul>
				<li id="n-help"><a href="/index.php/Category:Help" title="Wiki navigation, reading, and editing help">Help</a></li>
				<li id="n-Contributing"><a href="/index.php/ArchWiki:Contributing">Contributing</a></li>
				<li id="n-recentchanges"><a href="/index.php/Special:RecentChanges" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
				<li id="n-Recent-talks"><a href="https://wiki.archlinux.org/index.php/Special:RecentChanges?namespace=0&amp;invert=1" rel="nofollow">Recent talks</a></li>
				<li id="n-newpages"><a href="/index.php/Special:NewPages">New pages</a></li>
				<li id="n-Reports"><a href="/index.php/ArchWiki:Reports">Reports</a></li>
				<li id="n-Requests"><a href="/index.php/ArchWiki:Requests">Requests</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-tb" role="navigation">
		<h3>Tools</h3>
		<div class="pBody">
			<ul>
				<li id="t-whatlinkshere"><a href="/index.php/Special:WhatLinksHere/Power_saving" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
				<li id="t-recentchangeslinked"><a href="/index.php/Special:RecentChangesLinked/Power_saving" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
				<li id="t-specialpages"><a href="/index.php/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
				<li id="t-print"><a href="/index.php?title=Power_saving&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>
				<li id="t-permalink"><a href="/index.php?title=Power_saving&amp;oldid=311896" title="Permanent link to this revision of the page">Permanent link</a></li>
				<li id="t-info"><a href="/index.php?title=Power_saving&amp;action=info">Page information</a></li>
			</ul>
		</div>
	</div>
</div><!-- end of the left (by default at least) column -->
<div class="visualClear"></div>
<div id="footer" role="contentinfo">
	<ul id="f-list">
		<li id="lastmod"> This page was last modified on 26 April 2014, at 14:19.</li>
		<li id="copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
		<li id="privacy"><a href="/index.php/ArchWiki:Privacy_policy" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="about"><a href="/index.php/ArchWiki:About" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="disclaimer"><a href="/index.php/ArchWiki:General_disclaimer" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
</div>
</div>
<script>/*<![CDATA[*/window.jQuery && jQuery.ready();/*]]>*/</script><script>if(window.mw){
mw.loader.state({"site":"loading","user":"ready","user.groups":"ready"});
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.action.view.postEdit","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest"],null,true);
}</script>
<script>if(window.mw){
mw.loader.state({"site":"ready"});
}</script>
<!-- Served in 0.040 secs. --></body><!-- Cached/compressed 20140426141938 -->
</html>