<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
<title>LINUX启动进入SINGLE模式-ChinaUnix操作系统频道</title> 
<meta name="description" content="LINUX启动进入SINGLE模式" /> 
<meta name="keywords" content="Linux安装启动,Linux"/>
 
<link rel="StyleSheet" href="/include/style.css" type="text/css" media="screen" />
<script src="/include/ForcePic.js" type="text/javascript"></script>
</head>
<body>
<div class="login" id="LoginFalse">
<span><a href="http://www.chinaunix.net/">ChinaUnix首页</a> |  <a href="http://bbs.chinaunix.net/">论坛</a> |  <a href="http://blog.chinaunix.net/">博客</a> |  <a href="http://my.chinaunix.net/">微博</a> |  <a href="http://job.chinaunix.net/">求职</a> |  <a href="http://book.chinaunix.net/">读书</a> |  <a href="http://peixun.chinaunix.net/">培训</a> |  <a href="http://download.chinaunix.net/">下载</a> |  <a href="http://product.it168.com/">IT采购</a> |  <a href="http://search.chinaunix.net/">搜索</a> </span>
<a href="http://www.chinaunix.net/">ChinaUnix.net</a>  请   <script type="text/javascript">document.write('<a href=\'http://sso.chinaunix.net/Login?return_url='+escape(top.document.URL)+'\'>登录</a>');</script>  或   <a href="http://sso.chinaunix.net/Register?return_url=http%3A%2F%2Fbbs.chinaunix.net%2Flogging.php%3Faction%3Dlogin%26loginsubmit%3D1%26referer%3Dhttp%3A%2F%2Fwww.chinaunix.net%2F">注册</a>	
</div>

<div id="LoginTrue" style="display:none;" class="login">
<span><a href="http://www.chinaunix.net/">ChinaUnix首页</a> |  <a href="http://bbs.chinaunix.net/">论坛</a> |  <a href="http://blog.chinaunix.net/">博客</a> |  <a href="http://my.chinaunix.net/">微博</a> |  <a href="http://job.chinaunix.net/">求职</a> |  <a href="http://book.chinaunix.net/">读书</a> |  <a href="http://peixun.chinaunix.net/">培训</a> |  <a href="http://download.chinaunix.net/">下载</a> |  <a href="http://product.it168.com/">IT采购</a> |  <a href="http://search.chinaunix.net/">搜索</a> </span>
<a href="http://www.chinaunix.net/">ChinaUnix.net</a>&nbsp;&nbsp;&nbsp;<script type="text/javascript">document.write('<scr'+'ipt type="text/javascript" src="http://sso.chinaunix.net/ti.js?site=cu&amp;print=yes"></scr'+'ipt>');</script>
<script type="text/javascript">
     function geid(aID)
     {
      	return (document.getElementById) ? document.getElementById(aID): document.all[aID];
     }
     if(typeof(sso_username) == 'undefined'){		  
    	 geid('LoginTrue').style.display='none';
    	 geid('LoginFalse').style.display='';
     }else{
    	 geid('LoginFalse').style.display='none';
    	 geid('LoginTrue').style.display='';	
     }	  	  
</script> 
</div><div class="posi">当前位置：<a href="http://www.chinaunix.net">ChinaUnix 首页</a> &gt; <a href="/">操作系统频道</a> &gt; <b>LINUX启动进入SINGLE模式</a></b></div>
<div class="Content">
<div class="l6">
<div class="bor18">
<div class="tit19">LINUX启动进入SINGLE模式</div>
<div class="tit20">2006年10月26日 10:52 来源：ChinaUnix博客 作者：新华网   编辑：周荣茂 </div>
<div class="word">
<p>&nbsp;&nbsp;&nbsp;&nbsp;自：http://cache.baidu.com/c?word=linux%3B%BD%F8%3Bsingle%3B%C4%A3%CA%BD&url=http%3A//linux%2Echinaitlab%2Ecom/administer/38993%2Ehtml&b=0&a=2&user=baidu</p><p>&nbsp;&nbsp;&nbsp;&nbsp;<strong>一、单用户模式；</strong></p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;单用户模式要求我们输入root用户的密码，否则您无法登录单用户模式；如果您丢失了root用户的密码，并不能用单用户模式来重设您的root密码；</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;另外单用户模式还有一个前提是您的grub 或者lilo 是能正常工作的；并且您知道您的系统问题发生在哪里，当以单用户模式登录时，您能打开文件系统的写操作，然后进行您想要进行的系统修复；</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;可能有的弟兄会说“我真的不知道系统哪块出了问题”，呵，如果真的不知道，那我也无能为力了，因为本文档主要讲述登录模式，并不是讲述如何修复系统的；</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;1、以grub 系统引导管理器，单用户登录方法；</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;在grub 启动后，移动键盘到<strong>Linux</strong>的启动项；按e键；然后再移动键盘到类似下面的一行，也就是kernel的那行：</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;kernel /boot/vmlinuz-2.6.11-1.1369_FC4 ro root=LABEL=/1 </p><p>&nbsp;&nbsp;&nbsp;&nbsp;rhgb quiet</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;把光标移动这行后，再按一下e键，进入编辑这行；在行尾条一个空格 ，然后输入 linux single，也就是类似如下的：</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;kernel /boot/vmlinuz-2.6.11-1.1369_FC4 ro root=LABEL=/1 </p><p>&nbsp;&nbsp;&nbsp;&nbsp;rhgb quiet linux single</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;结束编辑，按回车返回；</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;接着我们要启动系统，按一下b键启动；</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;当进入单用户模式运行后，系统提示我们输入root密码；输入正确后会进入系统；您可以用df -h 来查看文件系统挂载位置等，也可以用fdisk -l 来查看分区等；但对文件系统的写操作，可能还要看下面的；</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;单用户进入系统后，可能系统是只读的；要运行下面的命令；</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;#mount -o remount,rw /</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;2、lilo 引导管理器单用户模式；</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;在boot:处输入</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;linux single</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;当进入单用户模式运行后，系统提示我们输入root密码；输入正确后会进入系统；您可以用df -h 来查看文件系统挂载位置等，也可以用fdisk -l 来查看分区等；但对文件系统的写操作，可能还要看下面的；</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;单用户进入系统后，可能系统是只读的；要运行下面的命令；</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;#mount -o remount,rw /</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;<strong>二、<strong>linux</strong> rescue </p><p>&nbsp;&nbsp;&nbsp;&nbsp;修复<strong>模式</strong>；</strong></p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;Linux的修复模式就是 </p><p>&nbsp;&nbsp;&nbsp;&nbsp;linux rescue；修复模式并不需要系统密码，当进入修复模式后，系统会提示我们要挂载哪个分区上的文件系统，我们根据自己的系统情况来选择就就是了。登录完成后，系统也会提示所在分区的文件系统会被挂载到哪个目录；如果您不知道挂载在哪里，请通过 df -h 来查看；</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;修复模式需要安装盘的第一张或独立的修复盘；比如 Fedora 就有专门的修复盘；其实修复盘在一定意义上来说类似livecd，是不需要安装到硬盘也能运行系统；然后通过mount 来挂载文件系统；其实当我们执行linux rescue </p><p>&nbsp;&nbsp;&nbsp;&nbsp;时，象Fedora 这类的系统，会有一些提示，比如他提示他要mount 哪个分区，我们选择一下就行了；</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;执行修复模式时，需要以下几个步骤；</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;其一：在BIOS中，设置首个启动驱动器为CDROM；</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;其二；找出系统安装盘的第一张；放入CDROM ；当光盘运行时，会提示安装的界面；</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;在boot:后面输入 linux rescue </p><p>&nbsp;&nbsp;&nbsp;&nbsp;，然后按回车；</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;boot:linux </p><p>&nbsp;&nbsp;&nbsp;&nbsp;rescue</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;进入修复模式，我们能做些什么呢？？什么都可以做，比如挂载usb盘进行数据备份；修改系统中的配置文件... ... 重新设置root密码、挂载文件系统 ... ... 只要能想到，大多都可以完成；</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;<strong>三、跨越控制台登录；</strong></p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;真正的跨越控制台登录是不需要输入root密码的，如果您把root密码丢失，就要想到跨越控制台登录；我们前面所说的linux rescue </p><p>&nbsp;&nbsp;&nbsp;&nbsp;从本质上来说，就是跨越控制台登录，因为无需要密码验证就能登录系统；</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;跨越控制台登录主要包括：借grub和lilo 跨越控制台登录； linux rescue </p><p>&nbsp;&nbsp;&nbsp;&nbsp;模式；第三方livecd 系统和第三方Linux系统；</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;1、通过grub和lilo 引导，跨越控制台登录；</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;1）如果您用的是grub进行系统引导；</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;在grub 启动后，移动键盘到Linux的启动项；按e键；然后再移动键盘到类似下面的一行，也就是kernel的那行：</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;kernel /boot/vmlinuz-2.6.11-1.1369_FC4 ro root=LABEL=/1 </p><p>&nbsp;&nbsp;&nbsp;&nbsp;rhgb quiet</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;把光标移动这行后，再按一下e键，进入编辑这行；在行尾条一个空格 ，然后输入 linux single，也就是类似如下的：</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;kernel /boot/vmlinuz-2.6.11-1.1369_FC4 ro root=LABEL=/1 </p><p>&nbsp;&nbsp;&nbsp;&nbsp;rhgb quiet linux </p><p>&nbsp;&nbsp;&nbsp;&nbsp;init=/bin/bash</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;结束编辑，按回车返回；</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;接着我们要启动系统，按一下b键启动；</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;可能系统是只读的；要运行下面的命令；</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;#mount -o remount,rw /</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;然后我们可以通过 df -h 来查看文件系统的加载情况；既然都把文件系统挂载了，有什么活干不了的呢？重设root密码，备份文件... ...</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;比如重设root密码；</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;#passwd</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;2）如果您用lilo 进行系统引导；</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;在boot:处输入</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;boot:linux </p><p>&nbsp;&nbsp;&nbsp;&nbsp;init=/bin/bash</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;当进入系统后，您可以用df -h 来查看文件系统挂载位置等，也可以用fdisk -l 来查看分区等；但对文件系统的写操作，可能还要看下面的；</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;可能系统是只读的；要运行下面的命令；</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;#mount -o remount,rw /</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;2、linux rescue </p><p>&nbsp;&nbsp;&nbsp;&nbsp;；</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;请参考前面第二点所说的修复模式；</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;3、借linux的livecd光盘 </p><p>&nbsp;&nbsp;&nbsp;&nbsp;或第三方linux系统；</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;linux的livecd版本是无需安装的linux </p><p>&nbsp;&nbsp;&nbsp;&nbsp;系统，在光盘上就可以运行的linux </p><p>&nbsp;&nbsp;&nbsp;&nbsp;系统； livecd 大多是用来修复之用，livecd 集成了常用的系统操作工具；</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;第三方Linux系统是指你的机器上安装一个以上的Linux系统，如果其中一个发生问题，我们就可以用另一个来修复；</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;livecd 和第三方linux系统来修复已经被破坏的Linux </p><p>&nbsp;&nbsp;&nbsp;&nbsp;，常用的工具有mount 和chroot等等 </p><p>&nbsp;&nbsp;&nbsp;&nbsp;；如果您只是简单的更改存在问题的系统文件，用mount 就足够了。chroot 工具可以改变/，进而进入另一个系统，这个工具的确有用。</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;我们还是举个例子来说明如何通过用mount和chroot；</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;至于机器中第三方Linux和Livecd的使用比较简单，这里就不多说了；</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;livecd就是在光盘上运行的linux </p><p>&nbsp;&nbsp;&nbsp;&nbsp;，您可以找一个livecd的发行版本刻录一下就能用了，使用简单方便；</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;下载地址：</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;http://www.frozentech.com/content/livecd.php</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;常用的有 SLAX，Knoppix，Damn Small Linux，Ubuntu ... ...</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;大体都差不多，下载一个小的备用也行，就看您怎么用了；</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;通过livecd linux </p><p>&nbsp;&nbsp;&nbsp;&nbsp;或其它linux </p><p>&nbsp;&nbsp;&nbsp;&nbsp;来修复已经破坏的Linux步骤如下：</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;1）mount 挂载文件系统；</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;注：执行mount 及chroot时，要以root权限运行，以下同；</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;比如存在问题的系统位于 /dev/hda5 ，如果您不知道哪个分区是linux的，您可以通过fdsik -l 来查看；</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;[root@localhost ~]# fdisk -l 注：查看分区情况；</p><p>&nbsp;&nbsp;&nbsp;&nbsp;[root@localhost ~]# pwd 注：确定当前工作目录；</p><p>&nbsp;&nbsp;&nbsp;&nbsp;/root 注：当前工作目录为/root</p><p>&nbsp;&nbsp;&nbsp;&nbsp;[root@localhost ~]# mkdir systmp 注：在当前工作目录下创建一个临时目录；</p><p>&nbsp;&nbsp;&nbsp;&nbsp;[root@localhost ~]# mount /dev/hda5 systmp/ 注：挂载hda5到tmpsys目录中；</p><p>&nbsp;&nbsp;&nbsp;&nbsp;[root@localhost ~]# df -h 注：查看是否已经挂载；</p><p>&nbsp;&nbsp;&nbsp;&nbsp;Filesystem 容量 </p><p>&nbsp;&nbsp;&nbsp;&nbsp;已用 </p><p>&nbsp;&nbsp;&nbsp;&nbsp;可用 </p><p>&nbsp;&nbsp;&nbsp;&nbsp;已用% 挂载点</p><p>&nbsp;&nbsp;&nbsp;&nbsp;/dev/hda8 11G 9.8G 581M 95% </p><p>&nbsp;&nbsp;&nbsp;&nbsp;/</p><p>&nbsp;&nbsp;&nbsp;&nbsp;/dev/shm 236M 0 236M 0% </p><p>&nbsp;&nbsp;&nbsp;&nbsp;/dev/shm</p><p>&nbsp;&nbsp;&nbsp;&nbsp;/dev/hda5 7.9G 5.9G 2.0G 76% /root/systmp 注：看好了，是挂载到了/root/systmp目录中；</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;既然把/dev/hda5分区的文件系统已经挂载了，我们就能对已经挂载的文件系统进行写操作；如果是简单的备份和文件修改，是完全能行的；</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;注意：在写操作的过程中，要倍加不心，在操作某个文件的时候，要先备份；当出现不能mount的情况，可能是您的当前所用的内核不支持相应的文件系统；如果系统要求指定文件系统的时候，请看如下的例子；</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;mount -t 文件系统类型 </p><p>&nbsp;&nbsp;&nbsp;&nbsp;磁盘分区 </p><p>&nbsp;&nbsp;&nbsp;&nbsp;挂载目的目录</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;对于linux的文件系统类型主要有：reiserfs，ext3，ext2；具体用什么文件系统类型，你最明白；如果您还是不知道，就一个一个的尝试；比如我的hda5是reiserfs的，可以用下面的命令来挂载；</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;[root@localhost ~]# mount -t reiserfs /dev/hda5 </p><p>&nbsp;&nbsp;&nbsp;&nbsp;systmp/</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;2）chroot 到已经挂载的文件系统；</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;chroot这个工具很有用，很多Linux都支持chroot切换到另一个文件系统中，然后进行一系列系统包的安装和系统配置；这并不是说任何文件系统都能chroot切入 </p><p>&nbsp;&nbsp;&nbsp;&nbsp;，首先这个文件系统中得具备系统运行的一定的工具和环境，比如/bin和/sbin 目录是拥有等....</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;用中文表达不清楚，还是举例来说明；</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;比如我的机器中有两个Linux系统，一个运行正常，另一个有点问题（比如是root密码忘记了），我想通过正常的系统来修复另一个；首先我们进行的是mount ，也就是前面所说的，然后下一步就是chroot ；通过chroot 切换到要修复的文件系统中；</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;比如存在问题的系统位于 /dev/hda5</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;[root@localhost ~]# fdisk </p><p>&nbsp;&nbsp;&nbsp;&nbsp;-l</p><p>&nbsp;&nbsp;&nbsp;&nbsp;[root@localhost ~]# pwd</p><p>&nbsp;&nbsp;&nbsp;&nbsp;/root</p><p>&nbsp;&nbsp;&nbsp;&nbsp;[root@localhost ~]# mkdir </p><p>&nbsp;&nbsp;&nbsp;&nbsp;systmp</p><p>&nbsp;&nbsp;&nbsp;&nbsp;[root@localhost ~]# mount /dev/hda5 </p><p>&nbsp;&nbsp;&nbsp;&nbsp;systmp/</p><p>&nbsp;&nbsp;&nbsp;&nbsp;[root@localhost ~]# df -h</p><p>&nbsp;&nbsp;&nbsp;&nbsp;Filesystem 容量 </p><p>&nbsp;&nbsp;&nbsp;&nbsp;已用 </p><p>&nbsp;&nbsp;&nbsp;&nbsp;可用 </p><p>&nbsp;&nbsp;&nbsp;&nbsp;已用% 挂载点</p><p>&nbsp;&nbsp;&nbsp;&nbsp;/dev/hda8 11G 9.8G 581M 95% </p><p>&nbsp;&nbsp;&nbsp;&nbsp;/</p><p>&nbsp;&nbsp;&nbsp;&nbsp;/dev/shm 236M 0 236M 0% </p><p>&nbsp;&nbsp;&nbsp;&nbsp;/dev/shm</p><p>&nbsp;&nbsp;&nbsp;&nbsp;/dev/hda5 7.9G 5.9G 2.0G 76% </p><p>&nbsp;&nbsp;&nbsp;&nbsp;/root/systmp</p><p>&nbsp;&nbsp;&nbsp;&nbsp;[root@localhost ~]# chroot systmp 注：chroot到hda5分区的系统中；</p><p>&nbsp;&nbsp;&nbsp;&nbsp;bash-3.00# 注：已经登录；</p><p>&nbsp;&nbsp;&nbsp;&nbsp;bash-3.00# df -lh 注：查看文件系统挂载情况；</p><p>&nbsp;&nbsp;&nbsp;&nbsp;Filesystem 容量 </p><p>&nbsp;&nbsp;&nbsp;&nbsp;已用 </p><p>&nbsp;&nbsp;&nbsp;&nbsp;可用 </p><p>&nbsp;&nbsp;&nbsp;&nbsp;已用% 挂载点</p><p>&nbsp;&nbsp;&nbsp;&nbsp;/dev/hda5 7.9G 5.9G 2.0G 76% </p><p>&nbsp;&nbsp;&nbsp;&nbsp;/</p><p>&nbsp;&nbsp;&nbsp;&nbsp;proc 7.9G 5.9G 2.0G 76% </p><p>&nbsp;&nbsp;&nbsp;&nbsp;/proc</p><p>&nbsp;&nbsp;&nbsp;&nbsp;sysfs 7.9G 5.9G 2.0G 76% </p><p>&nbsp;&nbsp;&nbsp;&nbsp;/sys</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;上面我们就通过chroot 命令完成了通过一个系统到另一个系统的跨控制台登录；Livecd 如果要完成此任务，也是通过这样过程完成的。</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;我们既然已经登录到有问题的系统了，可以进行相应的修复工作，比如对root密码的恢复，软件包的安装，相应文件的修改... ... 我想您应该知道怎么做，对不对？？？</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;有些发行版的安装盘类似livecd ，比如slackware 的安装盘的第一张，当他启动到让你输入用户名和密码进行安装时，我们不必输入什么，或者直接输入root ，就能进入cdrom 虚拟环境了；这时我们就用前面所说mount加载文件系统，然后chroot挂载的文件系统；</p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;<strong>四、后记； </p><p>&nbsp;&nbsp;&nbsp;&nbsp;正在写文件系统的管理，可能要花几天时间；努力之中；</strong></p><p>&nbsp;&nbsp;&nbsp;&nbsp;<strong> </strong></p><p>&nbsp;&nbsp;&nbsp;&nbsp;<strong>五、关于本文；</strong></p><p>&nbsp;&nbsp;&nbsp;&nbsp; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;看到论坛的弟兄还在大呼丢了root密码怎么恢复，虽然坛里也有不少文档，但大多没有形成系统，为了解决问题而重写此文，可能有的弟兄需要这样的文档；既然有“市场”，我就写，没有什么大不了的；有的弟兄认为是小题大作，就当我锻炼身体好了；这样的文档谁都会写，没有什么难的；</p><p>&nbsp;&nbsp;&nbsp;&nbsp;		</p><p>&nbsp;&nbsp;&nbsp;&nbsp;		</p><p>&nbsp;&nbsp;&nbsp;&nbsp;		</p><p>&nbsp;&nbsp;&nbsp;&nbsp;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;<strong>本文来自ChinaUnix博客，如果查看原文请点：</strong><a href="http://blog.chinaunix.net/u/19540/showart_191098.html" target="_blank">http://blog.chinaunix.net/u/19540/showart_191098.html</a></p></div>
</div>
</div> 
<div class="r4">
<div class="tit18">技术热点索引</div>
<div class="bor16 auto padd10">
	<div class="w50" style="height:200px;">
		<div class="tit7">Linux</div>
		<ul class="list4">
        <li><a href="http://list.chinaunix.net/id-7/chanel-211/page-1">Redhat</a></li>
        <li><a href="http://list.chinaunix.net/id-8/chanel-211/page-1">Centos</a></li>
        <li><a href="http://list.chinaunix.net/id-9/chanel-211/page-1">Ubuntu</a></li>
        <li><a href="http://list.chinaunix.net/id-10/chanel-211/page-1">SUSE Linux</a></li>
        <li><a href="http://list.chinaunix.net/id-11/chanel-211/page-1">Fedora</a></li>
        <li><a href="http://list.chinaunix.net/id-12/chanel-211/page-1">Debian</a></li>
        <li><a href="http://list.chinaunix.net/id-13/chanel-211/page-1">国产Linux</a></li>
		</ul>
	</div> 
	<div class="w50" style="height:200px;">
		<div class="tit7">Unix</div>
		<ul class="list4">
    	<li><a href="http://list.chinaunix.net/id-14/chanel-211/page-1">BSD</a></li>
        <li><a href="http://list.chinaunix.net/id-15/chanel-211/page-1">Solaris</a></li>
        <li><a href="http://list.chinaunix.net/id-16/chanel-211/page-1">AIX</a></li>
        <li><a href="http://list.chinaunix.net/id-17/chanel-211/page-1">HP-UNIX</a></li>
        <li><a href="http://list.chinaunix.net/id-18/chanel-211/page-1">Mac OS X</a></li>
		</ul>
	</div>
	<div class="w50">
		<div class="tit7">Windows</div>
		<ul class="list4">
	    <li><a href="http://list.chinaunix.net/id-19/chanel-211/page-1">Windows7</a></li>
        <li><a href="http://list.chinaunix.net/id-20/chanel-211/page-1">Windows Server</a></li>
		</ul>
	</div>
	<div class="w50">
		<div class="tit7">其它OS</div>
		<ul class="list4">
		<li><a href="http://list.chinaunix.net/id-21/chanel-211/page-1">Android</a></li>
        <li><a href="http://list.chinaunix.net/id-22/chanel-211/page-1">MeeGo</a></li>
		</ul>
	</div>
   <div class="clear"></div>
</div>
<div class="ad"><div id="ADV_16474"></div></div>
<div class="tit18 mt8">操作系统频道热议话题</div>
<div class="bor16">
<ul class="list1 list11">
<li><a href="http://linux.chinaunix.net/bbs/thread-3729814-1-1.html" target="_blank" title="fedora 17的root不能图形界面登陆">fedora 17的root不能图形界面登陆</a></li><li><a href="http://linux.chinaunix.net/bbs/thread-3729767-1-1.html" target="_blank" title="Ubuntu 12.04 配置指南">Ubuntu 12.04 配置指南</a></li><li><a href="http://linux.chinaunix.net/bbs/thread-3729743-1-1.html" target="_blank" title="真的很感谢三国杀游戏">真的很感谢三国杀游戏</a></li><li><a href="http://linux.chinaunix.net/bbs/thread-3729742-1-1.html" target="_blank" title="Ubuntu 12.04 LTS发布">Ubuntu 12.04 LTS发布</a></li>
</ul>
</div>
<div class="tit18 mt8">热门博客</div>
<div class="bor16">
<ul class="list1 list11">
<script src="http://blog.chinaunix.net/interface.php?sys=6,16,43&limit=9&orderby=2" type="text/javascript"></script>
</ul>
</div>
</div>
<div class="clear"></div>
</div>
<!-- footer -->
<!-- 统计 begin -->
<script type='text/javascript' src='http://www.chinaunix.net/ssi/cu_footer.ssi'></script>
<!--广告文件-->
<script type='text/javascript' src='http://168.it168.com/js/791.js'></script>
<script type='text/javascript' src='http://168.it168.com/js/792.js'></script>
<script language="javascript" src="http://stat.it168.com/pv.js"></script>
<script type="text/javascript">
    function sendPV(){
        var pvTrack = new PvTrack();
        pvTrack.type = 10; // 频道类别ID
        pvTrack.channel = 180; // 频道ID
        pvTrack.pageType = 0;
        pvTrack.track();
    }
    window.setTimeout("sendPV()", 0); 
</script>
<script type="text/javascript"  src="http://bbs.chinaunix.net/googlepv/pv.js" ></script> 
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-20237423-2']);
  _gaq.push(['_setDomainName', '.chinaunix.net']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<div style='display:none'>
<script type="text/javascript"> 
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F0ee5e8cdc4d43389b3d1bfd76e83216b' type='text/javascript'%3E%3C/script%3E"));
</script>
</div>
</body>
</html>
