<html><head><title>学习 Linux，101: RPM 和 YUM 包管理（续）_science09的空间_百度空间</title><meta http-equiv=content-type content="text/html; charset=GBK"><link rel=alternate type="application/rss+xml" title="订阅该空间的博客文章" href="http://hi.baidu.com/science09/rss"><style type="text/css">.error{color:#F00;font-size:12px}.shareUser,.shareLastEditor{line-height:20px;color:#666;text-align:left}.shareLastEditor{margin:5px 0 8px}</style><script>
	    var g_pageTimerStart=new Date().getTime();
	</script><script src="http://hi.bdimg.com/static/cblog/js/other/global.js?v=009301b8.js"></script><script src="http://hi.bdimg.com/static/cblog/js/other/libs.js?v=48b209f9.js"></script><script src="http://img.baidu.com/js/tangram-1.1.0.js?v=1334907755.js"></script><script>
var Session = {
    isLogin: true,
    isHost: 0,
    loginStatus : 2,
    userName: "science09",   
    userPortrait:'7441736369656e636530399509',
    spaceURL: "\/science09",
    spBasicURL:"http:\/\/hi.baidu.com\/science09",
    spBasicURLEnc:"http%3A%2F%2Fhi.baidu.com%2Fscience09",
    visitorName:    "zhu__feng001",
    visitorPortrait:'a0a27a68755f5f66656e673030314312',
    isActive: '1',   /*{cmt 访问者是否激活空间}*/
    visitorURL: "\/zhu__feng001",        // 
    pageURL: "http://hi.baidu.com\/science09\/blog\/item\/62687b24ef515e0e908f9d6a.html",    
    refer: "http:\/\/www.baidu.com\/s?tn=baiduhome_pg&ie=utf-8&bs=yum+deplist&f=8&rsv_bp=1&rsv_spt=1&wd=yum+deplist&inputT=0",
    spToken: 'c4293139abfbbd0a2dcab6ca450b2683', 
    spFriendDomain: 'http://frd.baidu.com',
    spSpaceDomain: 'http://hi.baidu.com',
    spPortraitDomain: 'http://tx.bdimg.com',
    spSpaceStaticDomain: 'http://hi.bdimg.com', /*{cmt TODO RD似乎还不有提供这个变量，记得补成呀！}*/
    spImgDomain : 'http://img.baidu.com',
    spStaticDomain : 'http://hi.bdimg.com',

    isDrag: false  /*{cmt 是否在拖动页：是为了通用，只对模块内容有作用，这里也作为一个通用属性}*/
    ,isProfile: false   /*{cmt 是否在拖动页：是为了通用，只对模块内容有作用，这里也作为一个通用属性}*/
    ,isPortraitVerify:!true
    };
</script></head><body> <script>
/*<![CDATA[*/
if(top.location != self.location){
	top.location = self.location;
}
var myref = encodeURIComponent("http://hi.baidu.com\/science09\/blog\/item\/62687b24ef515e0e908f9d6a.html");
/*]]>*/
</script><!--[if (lt IE 8.0)]><link rel=stylesheet type=text/css href="http://hi.bdimg.com/static/cblog/css/ui/mods.css?v=774e31a7.css"><![endif]--><!--[if (!IE)|(gte IE 8.0)]><!--><link rel=stylesheet type=text/css href="http://hi.bdimg.com/static/cblog/css/ui/mods_datauri.css?v=a1661a70.css"><!--<![endif]--><link rel=stylesheet type=text/css href="http://hitn.bdimg.com/2402050202/css/item/76541f0b1faaf330e8248876.css"><!--[if (lt IE 8.0)]><link rel=stylesheet type=text/css href="http://hi.bdimg.com/static/cblog/css/space.css?v=674c899c.css"><![endif]--><!--[if (!IE)|(gte IE 8.0)]><!--><link rel=stylesheet type=text/css href="http://hi.bdimg.com/static/cblog/css/space_datauri.css?v=b27686c7.css"><!--<![endif]--><div class=userbar><center> <div id=nav><a class=logo href=http://hi.baidu.com/index.htm><img src=http://img.baidu.com/hi/logo/logo_93_30.gif border=0 alt="百度空间"></a> <ul class=topmenu><li><a href="/zhu__feng001/ihome">个人中心</a><li class=vline><li><a href="/zhu__feng001/home" >我的主页</a><li class=vline><li><a href="/zhu__feng001/ihome/frdme">好友</a><li class=vline><li id=topMsgLi><a href="http://hi.baidu.com/msg/index" id=topMsgTab>消息</a> </ul> <dl class=manage> <dd id=tary_space_name class=nolink>zhu__feng001<dt>|<dd id=user_disguise_link><a href="/zhu__feng001/modify/spmodules/0">装扮</a><dt id=user_disguise_l>|<dd><a href="/zhu__feng001/ihome/basicconfig">设置</a><dt>| <dd><a href="https://passport.baidu.com/?logout&bdstoken=c4293139abfbbd0a2dcab6ca450b2683&u=">退出</a></dl> </div></center></div><script src="http://hi.bdimg.com/static/base/js/conf/base.js?v=1334907755.js"></script><link rel=stylesheet type=text/css href="http://hi.bdimg.com/static/base/css/base.css?v=1334907755.css"><script>			
		(function(){
			function initMessage(){
				Space.msgConfig={
					staticDomain:'http://hi.bdimg.com'
					,portraitDomain:'http://tx.bdimg.com'
					,appsDomain:'http://apps.hi.baidu.com'
					,domain:'http://hi.baidu.com'
					,userPortrait:"a0a27a68755f5f66656e673030314312"
					,userName:"zhu__feng001"
					,spToken:"c4293139abfbbd0a2dcab6ca450b2683"
					,spaceUrl:"\/zhu__feng001"
					,pageType:"blog"
				};
				if(Space.msgConfig.spaceUrl.indexOf("/")==0) {
					Space.msgConfig.spaceUrl = Space.msgConfig.spaceUrl.substr(1);
				}

				var job = new Space.Libs.Jobs();
				job.add("message_tip");
				job.start();
			}
			
			if(window.addEventListener){
				window.addEventListener('load', initMessage, false );
			}else if(window.attachEvent){
				window.attachEvent('onload', initMessage);
			}
		})();
	</script><script language=javascript src="http://hi.bdimg.com/static/cblog/js/ui/dialog.js?v=f1d92f7b.js"></script><center><div id=main align=left><!--[if IE]><script>
var objmain = document.getElementById("main");
function updatesize(){ var bodyw = window.document.body.offsetWidth; if(bodyw <= 790) objmain.style.width="772px"; else if(bodyw >= 1016) objmain.style.width="996px"; else objmain.style.width="100%"; }
updatesize(); window.onresize = updatesize;
</script><![endif]--><div id=header><div class=lc><div class=rc></div></div><div class=tit><a href="/science09" class=titlink title="science09的空间 http://hi.baidu.com/science09">science09的空间</a></div><div class=desc>顶顶顶顶顶顶</div><div id=tabline>&nbsp;</div><div id=tab><a href="http://hi.baidu.com/science09/home">主页</a><a href="http://hi.baidu.com/science09/blog" class=on>博客</a><a href="http://hi.baidu.com/science09/album">相册</a><span>|</span><a href="http://hi.baidu.com/science09/profile">个人档案</a><span>|</span><a href="http://hi.baidu.com/science09/friends">好友</a><span>|</span><a href="http://tieba.baidu.com/i/sys/jump?un=science09&fr=spacebar" onclick="BdUtil.ns_trackerLink('m_20110330_spacebar','')" target=_blank>i贴吧</a></div></div><div class=stage><div class=stagepad><div style="width:100%"><table width="100%" border=0 cellspacing=0 cellpadding=0 class=modth><tr><td class=modtl width=7>&nbsp;<td class=modtc nowrap><div class=modhead><span class=modtit>查看文章</span></div><td class=modtc nowrap align=right><td class=modtr width=7>&nbsp;</table><div id=m_blog class=modbox style="overflow-x:hidden;"><div class=tit>学习 Linux，101: RPM 和 YUM 包管理（续）</div><div class=date>2010-07-22 16:05</div><table style="table-layout:fixed;width:100%"><tr><td><div id=blog_text class=cnt><p><font size="3"><a name="N103FC"><span class="smalltitle">RPM 依赖关系</span></a></font></p>
<p><font size="3">在前面看到删除 gcl-selinux 包的操作失败了，这是因为存在<em>依赖关系</em>。除了文件之外，RPM  包可能包含其他包所依赖的任意<em>功能</em>。</font></p>
<p><font size="3">如您所见，依赖关系通常会正常发挥作用。如果需要同时安装几个包，其中一些依赖于其他包，那么只需使用 <code>yum</code>， 或者向 <code>rpm -Uvh</code> 命令提供完整的列表，它会分析依赖关系并按正确的次序执行安装。</font></p>
<p><font size="3">除了在安装或删除包时产生的错误消息之外，还可以通过几种方法查明包需要或依赖的文件或功能。</font></p>
<p><font size="3"><code>rpm</code> 命令提供的一个选项可以查询安装的包或包文件，从而查明它们依赖或<em>需要</em>  什么功能。这个选项是 <code>--requires</code>，它可以简写为 <code>-R</code>。清单 16 显示 gcl  需要的功能。如果要查询包文件而不是 RPM 数据库，那么添加 <code>-p</code> 选项并使用完整的 RPM 文件名。</font></p>
<font size="3"><br>
<a name="N10430"><strong>清单 16. gcl 需要什么</strong></a></font> <font size="3"><br>
</font>
<table width="100%" cellspacing="0" cellpadding="0" border="0">
    <tbody>
        <tr>
            <td class="code-outline">
            <pre class="displaycode"><font size="3"><br>[ian@echidna ~]$ <strong>rpm -qR gcl</strong><br>/bin/sh  <br>/bin/sh  <br>/bin/sh  <br>/sbin/install-info  <br>/sbin/install-info  <br>gcl-selinux  <br>libX11.so.6()(64bit)  <br>libc.so.6()(64bit)  <br>libc.so.6(GLIBC_2.11)(64bit)  <br>libc.so.6(GLIBC_2.2.5)(64bit)  <br>libc.so.6(GLIBC_2.3)(64bit)  <br>libc.so.6(GLIBC_2.3.4)(64bit)  <br>libc.so.6(GLIBC_2.4)(64bit)  <br>libc.so.6(GLIBC_2.7)(64bit)  <br>libc.so.6(GLIBC_2.8)(64bit)  <br>libdl.so.2()(64bit)  <br>libgmp.so.3()(64bit)  <br>libm.so.6()(64bit)  <br>libm.so.6(GLIBC_2.2.5)(64bit)  <br>libreadline.so.6()(64bit)  <br>libtcl8.5.so()(64bit)  <br>libtk8.5.so()(64bit)  <br>libz.so.1()(64bit)  <br>rpmlib(CompressedFileNames) &lt;= 3.0.4-1<br>rpmlib(FileDigests) &lt;= 4.6.0-1<br>rpmlib(PayloadFilesHavePrefix) &lt;= 4.0-1<br>rtld(GNU_HASH)  <br>rpmlib(PayloadIsXz) &lt;= 5.2-1</font></pre>
            </td>
        </tr>
    </tbody>
</table>
<font size="3"><br>
</font>
<p><font size="3">把功能与提供它们的包联系起来不太容易。带 <code>deplist</code> 选项的 <code>yum</code>  命令可以提供帮助。如果只指定包名，没有版本号，可能会得到其他已知版本的列表。清单 17 说明如何获得安装的 gcl 版本的依赖列表。</font></p>
<font size="3"><br>
<a name="N10447"><strong>清单 17. 使用 yum deplist 查明 gcl 需要什么</strong></a></font> <font size="3"><br>
</font>
<table width="100%" cellspacing="0" cellpadding="0" border="0">
    <tbody>
        <tr>
            <td class="code-outline">
            <pre class="displaycode"><font size="3"><br>[ian@echidna ~]$ <strong>yum deplist $(rpm -q gcl)</strong><br>Loaded plugins: presto, refresh-packagekit<br>Finding dependencies: <br>package: gcl.x86_64 2.6.8-0.7.20100201cvs.fc12<br>  dependency: libc.so.6(GLIBC_2.3.4)(64bit)<br>   provider: glibc.x86_64 2.11-2<br>   provider: glibc.x86_64 2.11.1-6<br>  dependency: gcl-selinux<br>   provider: gcl-selinux.x86_64 2.6.8-0.6.20090701cvs.fc12<br>   provider: gcl-selinux.x86_64 2.6.8-0.7.20100201cvs.fc12<br>  dependency: libgmp.so.3()(64bit)<br>   provider: gmp.x86_64 4.3.1-5.fc12<br>  dependency: libc.so.6(GLIBC_2.8)(64bit)<br>   provider: glibc.x86_64 2.11-2<br>   provider: glibc.x86_64 2.11.1-6<br>  dependency: libc.so.6(GLIBC_2.4)(64bit)<br>   provider: glibc.x86_64 2.11-2<br>   provider: glibc.x86_64 2.11.1-6<br>  dependency: libc.so.6()(64bit)<br>   provider: glibc.x86_64 2.11-2<br>   provider: glibc.x86_64 2.11.1-6<br>  dependency: /sbin/install-info<br>   provider: info.x86_64 4.13a-7.fc12<br>   provider: info.x86_64 4.13a-9.fc12<br>  dependency: libX11.so.6()(64bit)<br>   provider: libX11.x86_64 1.3-1.fc12<br>  dependency: libc.so.6(GLIBC_2.7)(64bit)<br>   provider: glibc.x86_64 2.11-2<br>   provider: glibc.x86_64 2.11.1-6<br>  dependency: libtcl8.5.so()(64bit)<br>   provider: tcl.x86_64 1:8.5.7-4.fc12<br>   provider: tcl.x86_64 1:8.5.7-5.fc12<br>  dependency: libc.so.6(GLIBC_2.11)(64bit)<br>   provider: glibc.x86_64 2.11-2<br>   provider: glibc.x86_64 2.11.1-6<br>  dependency: libtk8.5.so()(64bit)<br>   provider: tk.x86_64 1:8.5.7-2.fc12<br>   provider: tk.x86_64 1:8.5.7-3.fc12<br>  dependency: libc.so.6(GLIBC_2.3)(64bit)<br>   provider: glibc.x86_64 2.11-2<br>   provider: glibc.x86_64 2.11.1-6<br>  dependency: libm.so.6()(64bit)<br>   provider: glibc.x86_64 2.11-2<br>   provider: glibc.x86_64 2.11.1-6<br>  dependency: libz.so.1()(64bit)<br>   provider: zlib.x86_64 1.2.3-23.fc12<br>  dependency: rtld(GNU_HASH)<br>   provider: glibc.i686 2.11-2<br>   provider: glibc.x86_64 2.11-2<br>   provider: glibc.x86_64 2.11.1-6<br>   provider: glibc.i686 2.11.1-6<br>  dependency: libdl.so.2()(64bit)<br>   provider: glibc.x86_64 2.11-2<br>   provider: glibc.x86_64 2.11.1-6<br>  dependency: libreadline.so.6()(64bit)<br>   provider: readline.x86_64 6.0-3.fc12<br>  dependency: /bin/sh<br>   provider: bash.x86_64 4.0.33-1.fc12<br>   provider: bash.x86_64 4.0.35-3.fc12<br>  dependency: libc.so.6(GLIBC_2.2.5)(64bit)<br>   provider: glibc.x86_64 2.11-2<br>   provider: glibc.x86_64 2.11.1-6<br>  dependency: libm.so.6(GLIBC_2.2.5)(64bit)<br>   provider: glibc.x86_64 2.11-2<br>   provider: glibc.x86_64 2.11.1-6</font></pre>
            </td>
        </tr>
    </tbody>
</table>
<font size="3"><br>
</font>
<p><font size="3">这个列表还显示每个功能可能的提供者。可以看到大多数依赖功能可以由多个包级别提供。例如，/bin/sh 可以来自 bash  的两个级别之一。通过使用创造性的筛选，可以把输出缩减为清单 18 所示的包名列表。</font></p>
<font size="3"><br>
<a name="N10456"><strong>清单 18. 把 yum deplist 的输出缩减为只列出包名 </strong></a></font> <font size="3"><br>
</font>
<table width="100%" cellspacing="0" cellpadding="0" border="0">
    <tbody>
        <tr>
            <td class="code-outline">
            <pre class="displaycode"><font size="3"><br>[ian@echidna ~]$ <strong>yum deplist $(rpm -q gcl) | grep &quot;provider:&quot; | \</strong><br>&gt; <strong>awk '{ print $2 }'|sort|uniq</strong><br>bash.x86_64<br>gcl-selinux.x86_64<br>glibc.i686<br>glibc.x86_64<br>gmp.x86_64<br>info.x86_64<br>libX11.x86_64<br>readline.x86_64<br>tcl.x86_64<br>tk.x86_64<br>zlib.x86_64</font></pre>
            </td>
        </tr>
    </tbody>
</table>
<font size="3"><br>
</font>
<p><font size="3">如果只想知道需要安装哪些包，可以运行 <code>yum&#160;install</code>，查看在提示接受安装提议之前显示的列表。</font></p>
<p><font size="3">除了查明包需要的功能之外，还可能需要了解哪个包提供某一功能。前面演示了如何查明哪个包包含某一文件。清单 19 说明如何使用 <code>rpm</code>  或 <code>yum</code> 查明哪个包提供 gcl-selinux(x86-64)  功能。除了显示提供此功能的已安装包的信息之外，YUM 还显示存储库中可用的包或版本。可以看到，原来的 2.6.8-0.6 版来自 fedora  存储库，而 updates 存储库中有更新的 2.6.8-0.7 版。</font></p>
<font size="3"><br>
<a name="N10479"><strong>清单 19. 哪个包提供 gcl-selinux(x86-64) 功能</strong></a></font> <font size="3"><br>
</font>
<table width="100%" cellspacing="0" cellpadding="0" border="0">
    <tbody>
        <tr>
            <td class="code-outline">
            <pre class="displaycode"><font size="3"><br>[ian@echidna ~]$ rpm -q --whatprovides 'gcl-selinux(x86-64)'<br>gcl-selinux-2.6.8-0.7.20100201cvs.fc12.x86_64<br>[ian@echidna ~]$ yum whatprovides 'gcl-selinux(x86-64)'<br>Loaded plugins: presto, refresh-packagekit<br>gcl-selinux-2.6.8-0.6.20090701cvs.fc12.x86_64 : SELinux policy for GCL images<br>Repo        : fedora<br>Matched from:<br>Other       : gcl-selinux(x86-64)<br><br><br><br>gcl-selinux-2.6.8-0.7.20100201cvs.fc12.x86_64 : SELinux policy for GCL images<br>Repo        : updates<br>Matched from:<br>Other       : gcl-selinux(x86-64)<br><br><br><br>gcl-selinux-2.6.8-0.7.20100201cvs.fc12.x86_64 : SELinux policy for GCL images<br>Repo        : installed<br>Matched from:<br>Other       : Provides-match: gcl-selinux(x86-64)</font></pre>
            </td>
        </tr>
    </tbody>
</table>
<font size="3"><br>
</font>
<div class="ibm-alternate-rule"><hr>
</div>
<p class="ibm-ind-linkibm-back-to-top"><font size="3"><a class="ibm-anchor-up-link" href="http://www.ibm.com/developerworks/cn/linux/l-lpic1-v3-102-5/#ibm-pcon">回页首</a></font></p>
<p><font size="3"><a name="N1047F"><span class="atitle">RPM 包文件完整性</span></a></font></p>
<p><font size="3">为了确保完整性，RPM 包包含一个摘要（比如 MD5 或 SHA1），常常经过数字签名。数字签名的包需要用公共密钥进行检验。使用 <code>rpm</code>  的 <code>--checksig</code>（简写为 <code>-K</code>）选项检查 RPM 包文件的完整性。添加 <code>-v</code>  选项以生成更详细的输出常常有帮助。清单 20 给出的示例检查 vim-enhanced RPM 的完整性。</font></p>
<font size="3"><br>
<a name="N1049A"><strong>清单 20. 检查 vim-enhanced 包文件的完整性</strong></a></font> <font size="3"><br>
</font>
<table width="100%" cellspacing="0" cellpadding="0" border="0">
    <tbody>
        <tr>
            <td class="code-outline">
            <pre class="displaycode"><font size="3"><br>[root@echidna ~]# rpm -vK vim-enhanced-7.2.411-1.fc12.x86_64.rpm<br>vim-enhanced-7.2.411-1.fc12.x86_64.rpm:<br>    Header V3 RSA/SHA256 signature: OK, key ID 57bbccba<br>    Header SHA1 digest: OK (f9a199545a515f7ff0716729768b41eb68fe29a8)<br>    V3 RSA/SHA256 signature: OK, key ID 57bbccba<br>    MD5 digest: OK (d4045f1f72d48073e3f401ee9d1f71cf)</font></pre>
            </td>
        </tr>
    </tbody>
</table>
<font size="3"><br>
</font>
<p><font size="3">可能会产生下面的输出：</font></p>
<blockquote>     <font size="3"><code>V3 DSA signature: NOKEY, key ID 16a61572</code></font>    </blockquote>
<p><font size="3">这意味着这个包是经过签名的，但是您的 RPM 数据库中没有所需的公共密钥。注意，以前版本的 RPM 可能以不同的方式提供检验。</font></p>
<p><font size="3">如果包是经过签名的，您希望根据签名检验它，就需要找到适当的签名文件并把它导入 RPM  数据库。应该首先下载密钥，然后检查它的指纹，最后使用 <code>rpm                     --import</code> 命令导入它。更多信息参见 RPM 手册页。还可以在 RPM  主页上找到关于签名的二进制代码的更多信息（见 <a href="http://www.ibm.com/developerworks/cn/linux/l-lpic1-v3-102-5/#resources">参 考资料</a> 中的链接）。</font></p>
<div class="ibm-alternate-rule"><hr>
</div>
<p class="ibm-ind-linkibm-back-to-top"><font size="3"><a class="ibm-anchor-up-link" href="http://www.ibm.com/developerworks/cn/linux/l-lpic1-v3-102-5/#ibm-pcon">回页首</a></font></p>
<p><font size="3"><a name="N104B8"><span class="atitle">检验安装的包</span></a></font></p>
<p><font size="3">与检查 rpm 的完整性一样，还可以使用 <code>rpm -V</code> 检查已安装的文件的完整性。这个步骤确保从 rpm  安装文件之后文件没有修改过。如清单 21 所示，如果包仍然良好，这个命令没有输出；但是，可以添加 <code>-v</code>  选项以产生更详细的输出。</font></p>
<font size="3"><br>
<a name="N104CB"><strong>清单 21. 检验已安装的 vim-common 包</strong></a></font> <font size="3"><br>
</font>
<table width="100%" cellspacing="0" cellpadding="0" border="0">
    <tbody>
        <tr>
            <td class="code-outline">
            <pre class="displaycode"><font size="3"><br>[ian@echidna ~]$ <strong>rpm -V vim-common</strong></font></pre>
            </td>
        </tr>
    </tbody>
</table>
<font size="3"><br>
</font>
<p><font size="3">现在，我们作为根用户删除 /usr/bin/xxd 并把  /usr/share/vim/vim72/syntax/bindzone.vim 替换为 /bin/bash。然后再次检查。结果见清单 22。</font></p>
<font size="3"><br>
<a name="N104D9"><strong>清单 22. 篡改 vim-common 包</strong></a></font> <font size="3"><br>
</font>
<table width="100%" cellspacing="0" cellpadding="0" border="0">
    <tbody>
        <tr>
            <td class="code-outline">
            <pre class="displaycode"><font size="3"><br>[root@echidna ~]# <strong>rpm -qf /usr/bin/xxd /usr/share/vim/vim72/syntax/bindzone.vim</strong><br>vim-common-7.2.411-1.fc12.x86_64<br>vim-common-7.2.411-1.fc12.x86_64<br>[root@echidna ~]# <strong>rm /usr/bin/xxd</strong><br>rm: remove regular file `/usr/bin/xxd'? <strong>y</strong><br>[root@echidna ~]# <strong>cp /bin/bash /usr/share/vim/vim72/syntax/bindzone.vim</strong><br>cp: overwrite `/usr/share/vim/vim72/syntax/bindzone.vim'? <strong>y</strong><br>[root@echidna ~]# <strong>rpm -V vim-common</strong><br>missing     /usr/bin/xxd<br>S.5....T.    /usr/share/vim/vim72/syntax/bindzone.vim</font></pre>
            </td>
        </tr>
    </tbody>
</table>
<font size="3"><br>
</font>
<p><font size="3">输出表明对 /usr/share/vim/vim72/syntax/bindzone.vim 文件的 MD5 和、文件大小和  mtime 检查失败了。解决这个问题的一种方法是删除这个包，然后重新安装，依赖于 vim-common  的其他已安装包仍然可以正常运行。这个解决方案使用 <code>rpm</code> 的 <code>--force</code> 选项或 <code>yum</code>  的 <code>reinstall</code> 功能强制重新安装。清单 23 演示如何用 <code>yum</code>  重新安装，然后检查包现在是否良好，检查删除的文件是否已经恢复了。</font></p>
<font size="3"><br>
<a name="N1050B"><strong>清单 23. 重新安装 vim-common 包</strong></a></font> <font size="3"><br>
</font>
<table width="100%" cellspacing="0" cellpadding="0" border="0">
    <tbody>
        <tr>
            <td class="code-outline">
            <pre class="displaycode"><font size="3"><br>[root@echidna ~]# <strong>yum reinstall vim-common</strong><br>Loaded plugins: presto, refresh-packagekit<br>Setting up Reinstall Process<br>Resolving Dependencies<br>--&gt; Running transaction check<br>---&gt; Package vim-common.x86_64 2:7.2.411-1.fc12 set to be updated<br>--&gt; Finished Dependency Resolution<br><br>Dependencies Resolved<br><br>=====================================================================================<br> Package            Arch           Version                     Repository       Size<br>=====================================================================================<br>Reinstalling:<br> vim-common         x86_64         2:7.2.411-1.fc12            updates         6.0 M<br><br>Transaction Summary<br>=====================================================================================<br>Remove        0 Package(s)<br>Reinstall     1 Package(s)<br>Downgrade     0 Package(s)<br><br>Total download size: 6.0 M<br>Installed size: 17 M<br>Is this ok [y/N]: <strong>y</strong><br>Downloading Packages:<br>Setting up and reading Presto delta metadata<br>updates/prestodelta                                           | 969 kB     00:00     <br>Processing delta metadata<br>Package(s) data still to download: 6.0 M<br>vim-common-7.2.411-1.fc12.x86_64.rpm                          | 6.0 MB     00:01     <br>Running rpm_check_debug<br>Running Transaction Test<br>Transaction Test Succeeded<br>Running Transaction<br>Warning: RPMDB altered outside of yum.<br>  Installing     : 2:vim-common-7.2.411-1.fc12.x86_64                            1/1 <br><br>Installed:<br>  vim-common.x86_64 2:7.2.411-1.fc12                                                 <br><br>Complete!<br>[root@echidna ~]# <strong>rpm -V vim-common</strong><br>[root@echidna ~]# <strong>ls /usr/bin/xxd</strong><br>/usr/bin/xxd</font></pre>
            </td>
        </tr>
    </tbody>
</table>
<font size="3"><br>
</font>
<p><font size="3"><a name="N1051D"><span class="smalltitle">如果需要更有力的措施</span></a></font></p>
<p><font size="3">包管理系统通常可以恢复包。但是，如果删除了包中的重要文件，重新安装包但不删除无法解决问题，那么可能需要在重新安装之前删除包。对于这种 情况，可能希望删除现有的拷贝并重新安装，但是不希望卸载和重新安装依赖它的所有包。为此，在删除包时，可以使用 <code>rpm</code>  命令的 <code>--nodeps</code> 选项绕过依赖关系检查。在清单 24 中，删除了 vim-common 中的  /usr/bin/xxd 文件，然后演示如何恢复这个包。</font></p>
<font size="3"><br>
<a name="N10530"><strong>清单 24. 用 rpm 更新包</strong></a></font> <font size="3"><br>
</font>
<table width="100%" cellspacing="0" cellpadding="0" border="0">
    <tbody>
        <tr>
            <td class="code-outline">
            <pre class="displaycode"><font size="3"><br>[root@echidna ~]# <strong>rm /usr/bin/xxd</strong><br>rm: remove regular file `/usr/bin/xxd'? <strong>y</strong><br>[root@echidna ~]# <strong># Oops! we needed that file</strong><br>[root@echidna ~]# <strong>rpm -Fvh vim-common-7.2.411-1.fc12.x86_64.rpm </strong><br>[root@echidna ~]# <strong>ls /usr/bin/xxd</strong><br>ls: cannot access /usr/bin/xxd: No such file or directory<br>[root@echidna ~]# <strong># Oh! Freshening the package didn't replace the missing file</strong><br>[root@echidna ~]# <strong>rpm -e vim-common</strong><br>error: Failed dependencies:<br> vim-common = 2:7.2.411-1.fc12 is needed by (installed) vim-enhanced-2:7.2.411-1.f<br>c12.x86_64<br>[root@echidna ~]# <strong># Can't remove vim-common because vim-enhanced needs it</strong><br>[root@echidna ~]# <strong>rpm -e --nodeps vim-common</strong><br>[root@echidna ~]# <strong># Bypassing the dependency check allowed removal</strong><br>[root@echidna ~]# <strong>rpm -Uvh vim-common-7.2.411-1.fc12.x86_64.rpm </strong><br>Preparing...                ########################################### [100%]<br>   1:vim-common             ########################################### [100%]<br>[root@echidna ~]# <strong># Update (or install) vim-common again</strong><br>[root@echidna ~]# <strong>ls /usr/bin/xxd</strong><br>/usr/bin/xxd<br>[root@echidna ~]# <strong># And /usr/bin/xxd is back</strong></font></pre>
            </td>
        </tr>
    </tbody>
</table>
<font size="3"><br>
</font>
<p><font size="3">现在，如果发生意外或一般的更新失败，您可以以几种方法更新或修复。注意，在安装 RPM  时也可以绕过依赖关系检查，但是这通常不是好做法。</font></p>
<div class="ibm-alternate-rule"><hr>
</div>
<p class="ibm-ind-linkibm-back-to-top"><font size="3"><a class="ibm-anchor-up-link" href="http://www.ibm.com/developerworks/cn/linux/l-lpic1-v3-102-5/#ibm-pcon">回页首</a></font></p>
<p><font size="3"><a name="N10563"><span class="atitle">从存储库下载 RPM</span></a></font></p>
<p><font size="3">尽管 <code>yum</code> 会自动地从存储库获取包，但是您可能希望下载并保存  RPM，比如为了在不连网的系统上安装它们、为了检查它们的内容或有其他原因。可以使用清单 25 所示的 <code>yumdownloader</code>  命令。对于我们的示例，这个包已经安装了，所以没有要下载的包。如果有这样的包，可以使用 <code>--resolve</code>  选项再次下载它们。</font></p>
<font size="3"><br>
<a name="N1057B"><strong>清单 25. 下载 gcl 包 </strong></a></font> <font size="3"><br>
</font>
<table width="100%" cellspacing="0" cellpadding="0" border="0">
    <tbody>
        <tr>
            <td class="code-outline">
            <pre class="displaycode"><font size="3"><br>[ian@echidna ~]$ yumdownloader --resolve gcl<br>Loaded plugins: presto, refresh-packagekit<br>adobe-linux-i386                                                               17/17<br>--&gt; Running transaction check<br>---&gt; Package gcl.x86_64 0:2.6.8-0.7.20100201cvs.fc12 set to be updated<br>--&gt; Finished Dependency Resolution<br>gcl-2.6.8-0.7.20100201cvs.fc12.x86_64.rpm                     | 6.3 MB     00:01</font></pre>
            </td>
        </tr>
    </tbody>
</table>
<font size="3"><br>
</font>
<div class="ibm-alternate-rule"><hr>
</div>
<p class="ibm-ind-linkibm-back-to-top"><font size="3"><a class="ibm-anchor-up-link" href="http://www.ibm.com/developerworks/cn/linux/l-lpic1-v3-102-5/#ibm-pcon">回页首</a></font></p>
<p><font size="3"><a name="N10581"><span class="atitle">使用 rpm2cpio</span></a></font></p>
<p><font size="3">如果下载一个 RPM，需要检查它的内容而不是安装它，可以使用 <code>rpm2cpio</code> 命令把内容转换为 <code>cpio</code>  存档，然后通过 <code>cpio</code> 命令提取出包中的某些或所有文件。清单 26 对 gcl-selinux  包执行转换，然后显示提取出的文件（和目录）。关于 <code>rpm2cpio</code> 和 <code>cpio</code>  命令的更多信息参见它们的手册页。</font></p>
<font size="3"><br>
<a name="N105A1"><strong>清单 26. 用 rpm2cpio 提取 gcl-selinux 包 </strong></a></font> <font size="3"><br>
</font>
<table width="100%" cellspacing="0" cellpadding="0" border="0">
    <tbody>
        <tr>
            <td class="code-outline">
            <pre class="displaycode"><font size="3"><br>[ian@echidna ~]$ <strong>yumdownloader gcl-selinux</strong><br>Loaded plugins: presto, refresh-packagekit<br>gcl-selinux-2.6.8-0.7.20100201cvs.fc12.x86_64.rpm        |  17 kB     00:00     <br>[ian@echidna ~]$ <strong>mkdir gcl-selinux</strong><br>[ian@echidna ~]$ <strong>cd gcl-selinux</strong><br>[ian@echidna gcl-selinux]$ <strong>rpm2cpio ../gcl-selinux*.rpm | cpio -idv</strong><br>./usr/share/selinux/packages/gcl<br>./usr/share/selinux/packages/gcl/gcl.pp<br>182 blocks<br>[ian@echidna gcl-selinux]$ <strong>find .</strong><br>.<br>./usr<br>./usr/share<br>./usr/share/selinux<br>./usr/share/selinux/packages<br>./usr/share/selinux/packages/gcl<br>./usr/share/selinux/packages/gcl/gcl.pp</font></pre>
            </td>
        </tr>
    </tbody>
</table>
<font size="3"><br>
</font>
<div class="ibm-alternate-rule"><hr>
</div>
<p class="ibm-ind-linkibm-back-to-top"><font size="3"><a class="ibm-anchor-up-link" href="http://www.ibm.com/developerworks/cn/linux/l-lpic1-v3-102-5/#ibm-pcon">回页首</a></font></p>
<p><font size="3"><a name="N105B6"><span class="atitle">寻找 RPM</span></a></font></p>
<p><font size="3">我们在前面看到 YUM 提供了搜索功能，可以搜索包描述和包名。如果需要查明哪个包包含某个还没有安装的程序，还有几种方法：</font></p>
<ul>
    <li><font size="3">可以猜测可能包含它的包，下载这个包，但是不安装。得到这个包之后，就可以查询它。</font></li>
    <li><font size="3">可以搜索 Internet。</font></li>
    <li><font size="3">可以试试下面介绍的 command-not-found 功能。</font></li>
</ul>
<p><font size="3">如果通过系统工具无法找到某个 RPM，可以通过 Rpmfind.Net 服务器寻找 RPM（见 <a href="http://www.ibm.com/developerworks/cn/linux/l-lpic1-v3-102-5/#resources">参 考资料</a> 中的链接）。</font></p>
<p><font size="3"><a name="N105D1"><span class="smalltitle">命令未找到</span></a></font></p>
<p><font size="3">如果 Bash shell 搜索一个命令，但是没有找到，那么 shell 就搜索 shell 函数 <code>command_not_found_handle</code>。 如果 <code>command_not_found_handle</code> 函数存在，shell  以原来的命令和参数作为参数调用它，函数的退出状态成为 shell 的退出状态。如果没有定义此函数，shell 输出错误消息并返回退出状态  127。常常在系统 /etc/bash.bashrc 文件中设置此函数。清单 27 说明如何搜索 command-not-found  功能并安装它。</font></p>
<font size="3"><br>
<a name="N105E4"><strong>清单 27. 寻找并安装 command-not-found 功能</strong></a></font> <font size="3"><br>
</font>
<table width="100%" cellspacing="0" cellpadding="0" border="0">
    <tbody>
        <tr>
            <td class="code-outline">
            <pre class="displaycode"><font size="3"><br>[root@echidna ~]# <strong>yum search command-not-found</strong><br>Loaded plugins: presto, refresh-packagekit<br>========================== Matched: command-not-found ==========================<br>PackageKit-command-not-found.x86_64 : Ask the user to install command line<br>                                    : programs automatically<br>You have new mail in /var/spool/mail/root<br>[root@echidna ~]# <strong>yum install PackageKit-command-not-found.x86_64</strong><br>Loaded plugins: presto, refresh-packagekit<br>Setting up Install Process<br>Resolving Dependencies<br>--&gt; Running transaction check<br>---&gt; Package PackageKit-command-not-found.x86_64 0:0.5.7-2.fc12 set to be updated<br>--&gt; Finished Dependency Resolution<br><br>Dependencies Resolved<br><br>================================================================================<br> Package                          Arch       Version          Repository   Size<br>================================================================================<br>Installing:<br> PackageKit-command-not-found     x86_64     0.5.7-2.fc12     updates     102 k<br><br>Transaction Summary<br>================================================================================<br>Install       1 Package(s)<br>Upgrade       0 Package(s)<br><br>Total download size: 102 k<br>Installed size: 262 k<br>Is this ok [y/N]: y<br>Downloading Packages:<br>Setting up and reading Presto delta metadata<br>Processing delta metadata<br>Package(s) data still to download: 102 k<br>PackageKit-command-not-found-0.5.7-2.fc12.x86_64.rpm     | 102 kB     00:00     <br>Running rpm_check_debug<br>Running Transaction Test<br>Transaction Test Succeeded<br>Running Transaction<br>  Installing     : PackageKit-command-not-found-0.5.7-2.fc12.x86_64         1/1 <br><br>Installed:<br>  PackageKit-command-not-found.x86_64 0:0.5.7-2.fc12                            <br><br>Complete!</font></pre>
            </td>
        </tr>
    </tbody>
</table>
<font size="3"><br>
</font>
<p><font size="3">清单 28 说明在安装 PackageKit-command-not-found  之后如何定义这个函数。如果函数无法执行搜索，那么它模拟标准的系统行为，返回 127。</font></p>
<font size="3"><br>
<a name="N105F6"><strong>清单 28. command_not_found_handle</strong></a></font> <font size="3"><br>
</font>
<table width="100%" cellspacing="0" cellpadding="0" border="0">
    <tbody>
        <tr>
            <td class="code-outline">
            <pre class="displaycode"><font size="3"><br>[ian@echidna ~]$ <strong>type command_not_found_handle</strong><br>command_not_found_handle is a function<br>command_not_found_handle () <br>{ <br>    runcnf=1;<br>    retval=127;<br>    [ ! -S /var/run/dbus/system_bus_socket ] &amp;&amp; runcnf=0;<br>    [ ! -x /usr/sbin/packagekitd ] &amp;&amp; runcnf=0;<br>    if [ $runcnf -eq 1 ]; then<br>        /usr/libexec/pk-command-not-found $1;<br>        retval=$?;<br>    else<br>        echo &quot;bash: $1: command not found&quot;;<br>    fi;<br>    return $retval<br>}</font></pre>
            </td>
        </tr>
    </tbody>
</table>
<font size="3"><br>
</font>
<p><font size="3">如果在 <a href="http://www.ibm.com/developerworks/cn/linux/l-lpic1-v3-102-5/#list1">清 单 1</a> 中运行 gcl 之前安装了这个功能，可能会看到清单 29 所示的输出。</font></p>
<font size="3"><br>
<a name="N10609"><strong>清单 29. 安装 command_not_found_handle 之后尝试运行 gcl  </strong></a></font> <font size="3"><br>
</font>
<table width="100%" cellspacing="0" cellpadding="0" border="0">
    <tbody>
        <tr>
            <td class="code-outline">
            <pre class="displaycode"><font size="3"><br>[ian@echidna ~]$ <strong>gcl</strong><br>Command not found. Install package 'gcl' to provide command 'gcl'? [N/y]</font></pre>
            </td>
        </tr>
    </tbody>
</table>
<font size="3"><br>
</font>
<div class="ibm-alternate-rule"><hr>
</div>
<p class="ibm-ind-linkibm-back-to-top"><font size="3"><a class="ibm-anchor-up-link" href="http://www.ibm.com/developerworks/cn/linux/l-lpic1-v3-102-5/#ibm-pcon">回页首</a></font></p>
<p><font size="3"><a name="7-other"><span class="atitle">其他工具</span></a></font></p>
<p><font size="3">除了 <code>yum</code> 和 <code>rpm</code>  之外，发行商可能提供了用于从存储库安装包或更新整个系统的其他工具。这些工具可能是图形化工具或命令行工具，或者同时提供这两种界面。例如：</font></p>
<ul>
    <li><font size="3">YaST (SUSE)</font></li>
    <li><font size="3">up2date (Red Hat)</font></li>
    <li><font size="3">Mandrake Software Management (Mandriva)</font></li>
</ul>
<p><font size="3">通常，这些工具以自动或半自动方式处理多个包更新。它们还可能提供显示存储库内容或搜索包的功能。更多信息参见发行版的文档。</font></p>
<div class="ibm-alternate-rule"><hr>
</div>
<p class="ibm-ind-linkibm-back-to-top"><font size="3"><a class="ibm-anchor-up-link" href="http://www.ibm.com/developerworks/cn/linux/l-lpic1-v3-102-5/#ibm-pcon">回页首</a></font></p>
<p><font size="3"><a name="pkgkit"><span class="atitle">PackageKit</span></a></font></p>
<p><font size="3">讨论包安装就不能不提到  PackageKit，这是一个为更方便地安装和更新软件而设计的系统。它的意图是把不同发行版中使用的所有软件图形化工具统一起来。 PackageKit 使用一个由系统激活的守护进程，这意味着这个守护进程只在需要时激活。Packagekit 有适用于 Gnome  (gnome-packagekit) 和 KDE (KPackageKit) 的版本。上面介绍的 command-not-found 功能也是  PackageKit 的组成部分。它包括命令 <code>pkcon</code>（从控制台执行包管理功能）和 <code>pkmon</code>（监 视包集活动）。它还包含用于添加软件包或更新系统的图形化工具。图 1 给出 Software Update 图形界面的示例。</font></p>
<font size="3"><br>
<a name="N10643"><strong>图 1. Fedora 12 (Gnome) 上的 Software Update  图形界面</strong></a></font> <font size="3"><br>
<img width="425" height="377" src="http://hiphotos.baidu.com/science09/pic/item/472aebdd1a22621495ee3709.jpg" alt="Fedora 12 (Gnome) 上 Software Update 图形界面的屏幕图"></font>     <font size="3"><br>
</font>
<p><font size="3">除了这里讨论的内容，RPM 和 YUM 包管理系统还有许多特性。更多信息参见 <a href="http://www.ibm.com/developerworks/cn/linux/l-lpic1-v3-102-5/#resources">参 考资料</a> 中的链接。</font></p>
<font size="3"><br>
</font>
<p><font size="3"><a name="resources"><span class="atitle">参考资料 </span></a></font></p>
<p><font size="3"><strong>学习</strong></font></p>
<ul>
    <li><font size="3">使用 <a href="http://www.ibm.com/developerworks/cn/linux/l-lpic1-v3-map/">学 习 Linux，101：LPIC-1 路线图</a> 找到帮助您准备基于 2009 年 4 月目标的 LPIC-1 认证的  developerWorks 文章。</font></li>
    <li><font size="3">在 <a href="http://www.lpi.org/eng/certification/the_lpic_program">LPIC  Program</a> 站点中，可以找到 Linux Professional Institute 的三个 Linux  系统管理认证级别的具体目标、任务列表、样例问题。具体请参见 2009 年 4 月的 <a href="http://www.lpi.org/eng/certification/the_lpic_program/lpic_1/exam_101_detailed_objectives">LPI  考试 101</a> 和 <a href="http://www.lpi.org/eng/certification/the_lpic_program/lpic_1/exam_102_detailed_objectives">LPI  考试 102</a> 目标。请随时关注 LPIC Program 站点，以便了解最新目标。</font></li>
    <li><font size="3">回顾 developerWorks 上的整个 <a onxxxxxxxxx="linkQueryAppend(this)" href="http://www.ibm.com/developerworks/linux/lpi/index.html">LPI 考试准备系列</a>，学习 Linux 基础知识，并为参加基于  2009 年 4 月之前的早期 LPI 考试目标的系统管理员认证考试做准备。</font></li>
    <li><font size="3">在 <a href="http://www.rpm.org/">RPM 主页</a> 上寻找关于 RPM 软件打包工具的最新信息和更多 RPM  信息的链接。</font></li>
    <li><font size="3"><em>      <a href="http://www.rpm.org/max-rpm/">Maximum RPM</a>     </em> 这本书全面系统地讨论了 RPM 的所有方面。可以获取它的硬拷贝和软拷贝。</font></li>
    <li><font size="3">在 <a href="http://www.linuxbase.org/">LSB Home</a> 上了解 Linux Standard  Base (LSB)，这个 Free Standards Group (FSG) 项目致力于开发标准的二进制操作环境。</font></li>
    <li><font size="3">访问 <a href="http://www.packagekit.org/">PackageKit</a> 主页，了解关于  PackageKit 的更多信息。</font></li>
    <li><font size="3"><a href="http://www.tldp.org/">Linux 文档项目</a> 提供了大量有用的文档，特别是 HOWTO  文档。</font></li>
    <li><font size="3">在 <a href="http://www.ibm.com/developerworks/cn/linux/"> developerWorks Linux  专区</a> 寻找为 Linux 开发人员（包括 <a href="http://www.ibm.com/developerworks/cn/linux/newto/">Linux 新手入门</a>） 准备的更多参考资料，查阅我们 <a href="http://www.ibm.com/developerworks/cn/linux/best2009/index.html">最受 欢迎的文章和教程</a>。</font></li>
    <li><font size="3">在 developerWorks 上查阅所有 <a href="http://www.ibm.com/developerworks/cn/views/linux/libraryview.jsp?search_by=Linux+%E6%8A%80%E5%B7%A7">  Linux 技巧</a> 和 <a href="http://www.ibm.com/developerworks/cn/views/linux/libraryview.jsp?type_by=%E6%95%99%E7%A8%8B">  Linux 教程</a>。</font></li>
    <li><font size="3">随时关注 developerWorks <a href="http://www.ibm.com/developerworks/cn/offers/techbriefings/">技术活动</a>和<a href="http://www.ibm.com/developerworks/cn/swi/">网络广播</a>。</font></li>
    <li><font size="3">观 看 <a href="http://www.ibm.com/developerworks/cn/offers/lp/demos/i%20ndex.html">developerWorks  演示中心</a>，包括面向初学者的产品 安装和设置演示，以及为经验丰富的开发人员提供的高级功能。</font></li>
</ul>
<p><font size="3"><strong>获得产品和技术</strong></font></p>
<ul>
    <li><font size="3">在发行商的镜像站点上寻找包，比如 <a href="http://mirrors.fedoraproject.org/publiclist/Fedora/12/">Fedora/12  Public Active Mirrors</a>。</font></li>
    <li><font size="3">在 <a href="http://rpmfind.net/">Rpmfind.Net</a> 和 <a href="http://rpm.pbone.net/">RPM Search</a> 上搜索适用于您的发行版的 RPM。</font></li>
    <li><font size="3">以最适合您的方式 <a href="http://www.ibm.com/developerworks/cn/downloads/">IBM 产品评估试用版软件</a>： 下载产品试用版，在线试用产品，在云环境下试用产品， 或者在 <a href="http://www.ibm.com/developerworks/cn/downloads/soasandbox/people/">IBM  SOA Sandbox for People</a> 中花费几个小时来学习如何高效实现 Service  Oriented Architecture。</font></li>
</ul>
<p><font size="3"><strong>讨论</strong></font></p>
<ul>
    <li><font size="3"><a href="http://www.ibm.com/developerworks/forums/dw_forum.jsp?forum=160&amp;cat=5">参 与论坛讨论</a>。</font></li>
    <li><font size="3">加入 <a onxxxxxxxxx="linkQueryAppend(this)" href="http://www.ibm.com/developerworks/community">My developerWorks 社 区</a>。查看开发人员参与的博客、论坛、组和 wikis，并与其他 developerWorks 用户交流。</font></li>
</ul>
<p><font size="3"><a name="author"><span class="atitle">关于作者</span></a></font></p>
<div class="ibm-container ibm-portrait-module ibm-alternate-two">
<div class="ibm-container-body"><font size="3"><img width="64" height="80" alt="Ian Shields" class="dw-author-img" src="http://hiphotos.baidu.com/science09/pic/item/e158c557e9e37c18d0090609.jpg"></font>
<p><font size="3"><a name="author1"></a>Ian Shields 参与 developerWorks Linux 专区的许多 Linux 项目。他是  IBM 北卡罗来纳州 Research Triangle Park 的一名高级程序员。他于 1973 年作为一名系统工程师加入 IBM  位于澳大利亚堪培拉的子公司。此后，在加拿大蒙特利尔和北卡罗来纳州 RTP 从事通信系统和普适计算。他拥有多项专利并发表了许多论文。他毕业于  Australian National  University，取得纯数学和哲学学位。他拥有北卡罗来纳州州立大学的计算机硕士和博士学位。更多信息参见 <a onxxxxxxxxx="linkQueryAppend(this)" href="https://www.ibm.com/developerworks/mydeveloperworks/profiles/user/ishields">My developerWorks 上 Ian 的个人信息</a>。</font></p>
</div>
</div></div></table><br><div class=opt id=blogOpt><a href="http://hi.baidu.com/science09/blog/category/Linux" title="查看该分类中所有文章">类别：Linux</a><span class=x-blog-opt-sp>|</span><a href="#" onclick="addToShare(); return false;" target=_blank><img src=http://img.baidu.com/hi/apps/share/share_btn.gif border=0 align=absbottom></a><span class=x-blog-opt-sp>|</span><a title="将此文章添加到百度搜藏" href=http://cang.baidu.com/do/add onClick="return addToFavor();" target=_blank>添加到搜藏</a> <span class=x-blog-opt-sp>|</span><a title="将此文章分享到i贴吧" href="#" onclick="addToiTieba(); return false;" target=_blank>分享到i贴吧</a><span class=x-blog-opt-sp>|</span>浏览(<span id=result>980</span>)<span class=x-blog-opt-sp>|</span><a href="#send">评论</a>&nbsp;(<span id=blogCmtCount>0</span>)<script language=javascript>
										/*<![CDATA[*/
										var pre = [true,'学习 Linux，101: RPM 和 YUM 包管理', '学习 Linux，101: RPM 和 YUM 包...','\/science09/blog/item/938f12d2e4595bde562c8469.html'];
										var post = [true,'用Python小程序建立命令行的实际应用方案','用Python小程序建立命令行的实际...', '\/science09/blog/item/10629e1b5bc570b94bedbc28.html'];
										if(pre[0] || post[0]){
											document.write('<div style="height:5px;line-height:5px;">&nbsp;</div><div id="in_nav">');
											if(pre[0]){
												document.write('上一篇：<a href="' + pre[3] + '" title="' + pre[1] + '">' +  pre[2] + '</a>&nbsp;&nbsp;&nbsp;&nbsp;');
											}
											if(post[0]){
												document.write('下一篇：<a href="' + post[3] + '" title="' + post[1] + '">' +  post[2] + '</a>');
											}
											document.write('</div>');
										}
										/*]]>*/
									</script></div><div class=line>&nbsp;</div><div id=share_user_list></div><div class=line>&nbsp;</div><style type="text/css">#in_related_doc a{text-decoration:none}</style><div id=in_related_tmp></div><div id=in_reader> <div class=tit>最近读者：</div></div><div class=line>&nbsp;</div><div id=in_comment> <a name=comment></a> <div class=tit>网友评论：</div> <span id=userCommentList></span> <div id=page></div></div><form action='/science09/commit' id=blogCmtSubmitForm name=blogCmtSubmitForm method=post> <input type=hidden name=bdstoken value='c4293139abfbbd0a2dcab6ca450b2683'> <input type=hidden name=ct value=8> <input type=hidden name=cm value=2> <input type=hidden name=spBlogID value='62687b24ef515e0e908f9d6a'> <input type=hidden name=spBlogCmtID value=''> <input type=hidden name=spRefURL value=''></form><div id=in_send><a name=send></a><form name=form1 id=popFormSubmit action="/science09/commit" method=post onSubmit="return checkcmtform()"><input type=hidden name=bdstoken value="c4293139abfbbd0a2dcab6ca450b2683"><input type=hidden name=ct value=8><input type=hidden name=cm value=1><input type=hidden name=spBlogID value="62687b24ef515e0e908f9d6a"><input type=hidden name=spRefURL id=spRefURL><script>
										    document.getElementById("spRefURL").value = window.location.href;
										</script><div class=tit>发表评论：</div><table width=620 border=0 cellspacing=5 cellpadding=0><tr><td class=f14>姓　名：<td>zhu__feng001<input name=spBlogCmtor id=spBlogCmtor style="display:none;" maxlength=50 value="zhu__feng001"><div style=display:none id=nmerror>*姓名最长为50字节</div><input type=hidden name=spBlogCmtURL id=spBlogCmtURL style=width:360px maxlength=128 onChange='checkeandu("spBlogCmtURL")' value='http://hi.baidu.com/zhu__feng001'><tr id=2_err style=display:none><td>&nbsp;<td><div class=error id=2_err_con></div><tr><td valign=top class=f14 id=reTitle>内　容：<td> <textarea name="spBlogCmtText" id="spBlogCmtText" style="width:520px;height:155px" tabindex="3" onFocus="hidErr(3);" ></textarea><tr id=3_err style=display:none><td>&nbsp;<td><div class=error id=3_err_con></div><tr id=share_blog> <td> <td valign=top><input type=checkbox id=shareBlog autocomplete=off style="vertical-align:text-bottom; margin-bottom:2px; margin-bottom:-2px\9;"><label for=shareBlog>同时将此文章分享给好友</label><input type=hidden id=shareBlogEchoback name=echoback><tr id=vercode><td valign=top class=f14>验证码：<td valign=top><input type=hidden name=spVcode value=""><input onFocus="f_focus()" id=spVerifyKey name=spVerifyKey size=6 maxlength=4 autocomplete=off tabindex=4> 请点击后输入四位验证码，字母不区分大小写<br><div id=yanzheng style=display:none><img id=verifypic width=120 height=40><wbr><a onFocus="this.blur();" href="#" onClick="return newverifypic();" title="看不清左边的字符">看不清?</a></div><tr><td valign=top class=f14>&nbsp;<td valign=top class=f14><input id=btn_ok name=btn_ok type=submit autocomplete=off value="发表评论" tabindex=5>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#" id=cancleReLink onClick="canclereply(); return false;" style="display:none; font-size:12px;color:#666;">取消回复</a></table></form></div><br></div><table width="100%" border=0 cellspacing=0 cellpadding=0 height=8><tr><td class=modbl width=7>&nbsp;<td class=modbc>&nbsp;<td class=modbr width=7>&nbsp;</table></div></div></div></div><div class=clearfix></div><div style="text-align:center;margin:30px auto 15px;font-family:Arial,simsun;font-size:12px;"><div style="margin:0 auto 6px;"><a href=http://help.baidu.com/question?prod_en=space target=_blank style="color:#00C;">帮助中心</a><span>&nbsp;|&nbsp;</span><a href="http://tieba.baidu.com/f?kw=%B0%D9%B6%C8%BF%D5%BC%E4&fr=wwwt" target=_blank style="color:#00C;">空间客服</a><span>&nbsp;|&nbsp;</span><a href=http://tousu.baidu.com/hi/ target=_blank style="color:#00C;">投诉中心</a><span>&nbsp;|&nbsp;</span><a href=http://www.baidu.com/search/hi_contract.html target=_blank style="color:#00C;">空间协议</a></div><div style="color:#7A77C8;">&copy;2012&nbsp;Baidu</div></div></center><ul id=blogCmtContentList style="display:none;"></ul><script>	var g_blogTitle = '学习 Linux，101: RPM 和 YUM 包管理（续）';
		var g_blogId = '62687b24ef515e0e908f9d6a';
		var g_isAllowCmt =  true ;
		var g_isByShared =  true ;
		var g_isAddRelate =  true ;
		var g_latestReader = [
									["http:\/\/hi.baidu.com\/liioer","87486c69696f6572540b","liioer"],
									["http:\/\/hi.baidu.com\/452123035","d963343532313233303335561b","452123035"],
									["http:\/\/hi.baidu.com\/wang1988ming","98fd77616e67313938386d696e670b18","wang1988ming"],
									["http:\/\/hi.baidu.com\/songhaohao30","7fa4736f6e6768616f68616f3330d90e","songhaohao30"],
									["http:\/\/hi.baidu.com\/kangyinju","27336b616e6779696e6a75a203","kangyinju"],
									["http:\/\/hi.baidu.com\/sunny_devil170","8ea573756e6e795f646576696c313730781c","sunny_devil170"],
									["http:\/\/hi.baidu.com\/jyking1000","1e686a796b696e67313030309201","jyking1000"],
									["http:\/\/hi.baidu.com\/hhdxwss","51af686864787773738a00","hhdxwss"],
								{}
			];
	</script><iframe id=submitiframe name=submitiframe src="http://hi.bdimg.com/static/cblog/html/blank.html?v=20111213" style="display:none;"></iframe><script src="http://hi.bdimg.com/static/base/js/conf/comment.js?v=1334907755.js"></script><script src="http://hi.bdimg.com/static/cblog/js/job/detailpage.js?v=ee7931cf.js"></script><script>
/*<![CDATA[*/
/*{cmt
    这个相当一个代理器  
  在这里想实现一种这种加载效果：加载时注册（用一个 初始化数据.数组 记录要绑定的ID），文档ready后，按需加载js+css资源，js加载完，就初始化据执行

  有个问题，有些结构是 动态 执行这个绑定的，可能会发生资源还没有加载的情况。可以考虑给初始化数据，加一个标志位，说明加载完未，如果未，则把数据push到 初始化数据中(因为是用 dom.onxxx 的方式，所以不怕多次对同一个ID执行的问题)


  }*/
var SP = SP || {};
if(!SP.mycard){
    SP.mycard = new (function(){
        var me = this;
        var _cancleAction = Session.isDrag;  /*{cmt 标记在特殊情况下，所有的注册都被abort 如拖动页面}*/
        var _list = [];
        var _sourceLoaded = false;    /*{cmt 这里用了一种资源加载结束后，回调的机制，这个标志资源是否加载结束}*/
        me.bind = function (_id){
            if(_cancleAction){  //abort
                return;
            }
            if(!_sourceLoaded){
                _list.push(_id);
            } else {
                baidu.space.mycard.bind(_id);
            }
        }
        me.init = function (_config){
            _cancleAction = !!_config.cancle;
        }
        me.onSourceLoaded = function (){
            _sourceLoaded = true;
            baidu.space.mycard.init({portrait: Session.visitorPortrait});
            for(var i=0,len=_list.length; i<len; i++){
                baidu.space.mycard.bind(_list[i]);
            }
        }
    })();
    baidu.dom.ready(function(){
        BdAjax.loadCSS('http://hi.bdimg.com/static/cblog/css/ui/ucard/ucard.css?v=50de96ca.css');
        BdAjax.loadJS('http://hi.bdimg.com/static/cblog/js/ui/ucard/ucard.js?v=fcbffbf8.js');
    });
}
SP.mycard.bind('m_blog');  /*{cmt 只有文档加载完才真正绑定，这里只是append记录 }*/
/*]]>*/
</script>