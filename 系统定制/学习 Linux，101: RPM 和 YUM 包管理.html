<html><head><title>学习 Linux，101: RPM 和 YUM 包管理_science09的空间_百度空间</title><meta http-equiv=content-type content="text/html; charset=GBK"><link rel=alternate type="application/rss+xml" title="订阅该空间的博客文章" href="http://hi.baidu.com/science09/rss"><style type="text/css">.error{color:#F00;font-size:12px}.shareUser,.shareLastEditor{line-height:20px;color:#666;text-align:left}.shareLastEditor{margin:5px 0 8px}</style><script>
	    var g_pageTimerStart=new Date().getTime();
	</script><script src="http://hi.bdimg.com/static/cblog/js/other/global.js?v=009301b8.js"></script><script src="http://hi.bdimg.com/static/cblog/js/other/libs.js?v=48b209f9.js"></script><script src="http://img.baidu.com/js/tangram-1.1.0.js?v=1334907755.js"></script><script>
var Session = {
    isLogin: true,
    isHost: 0,
    loginStatus : 2,
    userName: "science09",   
    userPortrait:'7441736369656e636530399509',
    spaceURL: "\/science09",
    spBasicURL:"http:\/\/hi.baidu.com\/science09",
    spBasicURLEnc:"http%3A%2F%2Fhi.baidu.com%2Fscience09",
    visitorName:    "zhu__feng001",
    visitorPortrait:'a0a27a68755f5f66656e673030314312',
    isActive: '1',   /*{cmt 访问者是否激活空间}*/
    visitorURL: "\/zhu__feng001",        // 
    pageURL: "http://hi.baidu.com\/science09\/blog\/item\/938f12d2e4595bde562c8469.html",    
    refer: "http:\/\/hi.baidu.com\/science09\/blog\/category\/Linux",
    spToken: 'c4293139abfbbd0a2dcab6ca450b2683', 
    spFriendDomain: 'http://frd.baidu.com',
    spSpaceDomain: 'http://hi.baidu.com',
    spPortraitDomain: 'http://tx.bdimg.com',
    spSpaceStaticDomain: 'http://hi.bdimg.com', /*{cmt TODO RD似乎还不有提供这个变量，记得补成呀！}*/
    spImgDomain : 'http://img.baidu.com',
    spStaticDomain : 'http://hi.bdimg.com',

    isDrag: false  /*{cmt 是否在拖动页：是为了通用，只对模块内容有作用，这里也作为一个通用属性}*/
    ,isProfile: false   /*{cmt 是否在拖动页：是为了通用，只对模块内容有作用，这里也作为一个通用属性}*/
    ,isPortraitVerify:!true
    };
</script></head><body> <script>
/*<![CDATA[*/
if(top.location != self.location){
	top.location = self.location;
}
var myref = encodeURIComponent("http://hi.baidu.com\/science09\/blog\/item\/938f12d2e4595bde562c8469.html");
/*]]>*/
</script><!--[if (lt IE 8.0)]><link rel=stylesheet type=text/css href="http://hi.bdimg.com/static/cblog/css/ui/mods.css?v=774e31a7.css"><![endif]--><!--[if (!IE)|(gte IE 8.0)]><!--><link rel=stylesheet type=text/css href="http://hi.bdimg.com/static/cblog/css/ui/mods_datauri.css?v=a1661a70.css"><!--<![endif]--><link rel=stylesheet type=text/css href="http://hitn.bdimg.com/2402050202/css/item/76541f0b1faaf330e8248876.css"><!--[if (lt IE 8.0)]><link rel=stylesheet type=text/css href="http://hi.bdimg.com/static/cblog/css/space.css?v=674c899c.css"><![endif]--><!--[if (!IE)|(gte IE 8.0)]><!--><link rel=stylesheet type=text/css href="http://hi.bdimg.com/static/cblog/css/space_datauri.css?v=b27686c7.css"><!--<![endif]--><div class=userbar><center> <div id=nav><a class=logo href=http://hi.baidu.com/index.htm><img src=http://img.baidu.com/hi/logo/logo_93_30.gif border=0 alt="百度空间"></a> <ul class=topmenu><li><a href="/zhu__feng001/ihome">个人中心</a><li class=vline><li><a href="/zhu__feng001/home" >我的主页</a><li class=vline><li><a href="/zhu__feng001/ihome/frdme">好友</a><li class=vline><li id=topMsgLi><a href="http://hi.baidu.com/msg/index" id=topMsgTab>消息</a> </ul> <dl class=manage> <dd id=tary_space_name class=nolink>zhu__feng001<dt>|<dd id=user_disguise_link><a href="/zhu__feng001/modify/spmodules/0">装扮</a><dt id=user_disguise_l>|<dd><a href="/zhu__feng001/ihome/basicconfig">设置</a><dt>| <dd><a href="https://passport.baidu.com/?logout&bdstoken=c4293139abfbbd0a2dcab6ca450b2683&u=">退出</a></dl> </div></center></div><script src="http://hi.bdimg.com/static/base/js/conf/base.js?v=1334907755.js"></script><link rel=stylesheet type=text/css href="http://hi.bdimg.com/static/base/css/base.css?v=1334907755.css"><script>			
		(function(){
			function initMessage(){
				Space.msgConfig={
					staticDomain:'http://hi.bdimg.com'
					,portraitDomain:'http://tx.bdimg.com'
					,appsDomain:'http://apps.hi.baidu.com'
					,domain:'http://hi.baidu.com'
					,userPortrait:"a0a27a68755f5f66656e673030314312"
					,userName:"zhu__feng001"
					,spToken:"c4293139abfbbd0a2dcab6ca450b2683"
					,spaceUrl:"\/zhu__feng001"
					,pageType:"blog"
				};
				if(Space.msgConfig.spaceUrl.indexOf("/")==0) {
					Space.msgConfig.spaceUrl = Space.msgConfig.spaceUrl.substr(1);
				}

				var job = new Space.Libs.Jobs();
				job.add("message_tip");
				job.start();
			}
			
			if(window.addEventListener){
				window.addEventListener('load', initMessage, false );
			}else if(window.attachEvent){
				window.attachEvent('onload', initMessage);
			}
		})();
	</script><script language=javascript src="http://hi.bdimg.com/static/cblog/js/ui/dialog.js?v=f1d92f7b.js"></script><center><div id=main align=left><!--[if IE]><script>
var objmain = document.getElementById("main");
function updatesize(){ var bodyw = window.document.body.offsetWidth; if(bodyw <= 790) objmain.style.width="772px"; else if(bodyw >= 1016) objmain.style.width="996px"; else objmain.style.width="100%"; }
updatesize(); window.onresize = updatesize;
</script><![endif]--><div id=header><div class=lc><div class=rc></div></div><div class=tit><a href="/science09" class=titlink title="science09的空间 http://hi.baidu.com/science09">science09的空间</a></div><div class=desc>顶顶顶顶顶顶</div><div id=tabline>&nbsp;</div><div id=tab><a href="http://hi.baidu.com/science09/home">主页</a><a href="http://hi.baidu.com/science09/blog" class=on>博客</a><a href="http://hi.baidu.com/science09/album">相册</a><span>|</span><a href="http://hi.baidu.com/science09/profile">个人档案</a><span>|</span><a href="http://hi.baidu.com/science09/friends">好友</a><span>|</span><a href="http://tieba.baidu.com/i/sys/jump?un=science09&fr=spacebar" onclick="BdUtil.ns_trackerLink('m_20110330_spacebar','')" target=_blank>i贴吧</a></div></div><div class=stage><div class=stagepad><div style="width:100%"><table width="100%" border=0 cellspacing=0 cellpadding=0 class=modth><tr><td class=modtl width=7>&nbsp;<td class=modtc nowrap><div class=modhead><span class=modtit>查看文章</span></div><td class=modtc nowrap align=right><td class=modtr width=7>&nbsp;</table><div id=m_blog class=modbox style="overflow-x:hidden;"><div class=tit>学习 Linux，101: RPM 和 YUM 包管理</div><div class=date>2010-07-22 16:04</div><table style="table-layout:fixed;width:100%"><tr><td><div id=blog_text class=cnt><font size="3"><strong>简介：</strong>&#160;学习如何在 Linux&#174; 系统上安装、升级和管理包。本文主要关注由 Red Hat 开发的 Red Hat Package  Manager (RPM)，以及 Duke University 物理系最初为管理 Red Hat Linux 系统开发的 Yellowdog  Updater Modified (YUM)。可以使用本文中的资料来准备 Linux 系统管理员认证的 LPI 101  考试，或者只是为了了解添加新软件并及时更新系统的最佳方法。<br>
</font>
<p><font size="3"><a name="N10098"><span class="atitle">概述</span></a></font></p>
<p><font size="3">在本文中，学习如何在 Linux 系统上使用 RPM 和 YUM 包管理工具管理包。学习：</font></p>
<ul>
    <li><font size="3">使用 RPM 和 YUM 安装、卸载、升级和删除包</font></li>
    <li><font size="3">获取版本、状态、依赖关系、完整性和签名等 RPM 包相关信息</font></li>
    <li><font size="3">判断一个包提供哪些文件，查明某个文件来自哪个包</font></li>
</ul>
<p><font size="3">本文帮助您准备 Linux Professional Institute's Junior Level Administration  (LPIC-1) 考试 101 中主题 102 下的目标 102.5。该目标的权值为 3。</font></p>
<p><font size="3"><a name="N100AF"><span class="smalltitle">先决条件</span></a></font></p>
<p><font size="3">为了最有效地利用本系列中的文章，您应该具有基本的 Linux 知识，并需要准备一个 Linux  系统，用于练习本文介绍的命令。有时候不同版本的程序输出格式不同，因此您所得到的结果未必总是与这里所示的清单和图相同。特别是，许多输出高度依赖于系 统上已经安装的包。您自己的输出可能很不一样，但是应该能够看出重要的共同点。</font></p>
<div class="ibm-alternate-rule"><hr>
</div>
<p class="ibm-ind-linkibm-back-to-top"><font size="3"><a class="ibm-anchor-up-link" href="http://www.ibm.com/developerworks/cn/linux/l-lpic1-v3-102-5/#ibm-pcon">回页首</a></font></p>
<p><font size="3"><a name="N100B7"><span class="atitle">包管理简介</span></a></font></p>
<div class="ibm-container ibm-alt-header dw-container-sidebar">
<h2><font size="3">联系  Ian</font></h2>
<div class="ibm-container-body"><font size="3">Ian 是我们最受欢迎、最高产的作者之一。阅读 <a href="http://www.ibm.com/developerworks/cn/views/global/libraryview.jsp?site_id=1&amp;contentarea_by=global&amp;sort_by=Date&amp;sort_order=2&amp;start=1&amp;end=48&amp;topic_by=-1&amp;product_by=-1&amp;type_by=All%20Types&amp;show_abstract=true&amp;search_by=ian%20shields">Ian  在 developerWorks 上发表的所有文章</a>。查看 <a onxxxxxxxxx="linkQueryAppend(this)" href="https://www.ibm.com/developerworks/mydeveloperworks/profiles/user/ishields">Ian 的个人信息</a>，与 Ian、其他作者和 My  developerWorks 的其他读者联系。</font></div>
</div>
<p><font size="3">过去，许多 Linux  程序以源代码的形式发行，用户把源代码构建为所需的程序或程序集；源代码还附带必需的手册页、配置文件等等。现在，大多数 Linux 发行商使用称为<em>包</em>  的预构建的程序或程序集，包便于在发行版上安装。在本文中，学习帮助安装、更新和删除包的<em>包管理</em> 工具。本文主要关注 Red  Hat 开发的 <strong>Red Hat Package Manager (RPM)</strong>，以及 Duke  University 物理系最初为管理 Red Hat Linux 系统开发的 <strong>Yellowdog Updater  Modified (YUM)</strong>。本系列中的另一篇文章 “<a href="http://www.ibm.com/developerworks/cn/linux/l-lpic1-v3-102-4/">学习  Linux，101：Debian 包管理</a>” 讨论 Debian 系统上使用的包管理工具。</font></p>
<p><font size="3">从用户的角度来说，基本的包管理功能由命令提供。Linux 开发人员一直致力于让 Linux 更容易使用，他们开发了其他工具（包括  GUI 工具）来补充基本工具，这对最终用户隐藏了基本工具的一部分复杂性。在本文和 <a href="http://www.ibm.com/developerworks/cn/linux/l-lpic1-v3-102-4/">学习  Linux，101：Debian 包管理</a> 中，我们主要讨论基本工具，但是也会提到一些其他工具，让您能够继续研究它们。</font></p>
<p><font size="3">RPM、YUM 和 APT（适用于 Debian  系统）有许多相似之处。它们都可以安装和删除包。关于安装的包的信息保存在数据库中。它们都有基本的命令行功能，同时通过其他工具提供对用户更友好的界 面。它们都可以从 Internet 获取包。</font></p>
<p><font size="3">在安装 Linux  系统时，通常会安装许多包。这个集合可能是根据系统的用途定制的，比如服务器、桌面或开发工作站。有时候，可能需要安装新的包以添加新功能，更新现有的 包，甚至删除不再需要或已经被新的包取代的包。我们来看看如何完成这些任务以及如何解决一些相关的难题，比如寻找包含某一命令的包。</font></p>
<p><font size="3"><a name="N100ED"><span class="smalltitle">RPM</span></a></font></p>
<p><font size="3">Red Hat 于 1995 年引入了 RPM。RPM 现在是 Linux Standard Base (LSB)  中采用的包管理系统。<code>rpm</code> 命令选项分为三组：</font></p>
<ul>
    <li><font size="3">用于查询和检查包</font></li>
    <li><font size="3">用于安装、升级和删除包</font></li>
    <li><font size="3">用于执行其他功能</font></li>
</ul>
<p><font size="3">在本文中，我们主要关注前两组命令选项。在 RPM 的手册页中可以找到其他功能的相关信息。</font></p>
<p><font size="3">还应该注意 <code>rpm</code> 是操作 RPM 的主要命令，而 <em>.rpm</em> 是 RPM  文件使用的扩展名。所以 “一个 rpm” 或 “某某 rpm” 一般是指 RPM 文件，而 <code>rpm</code> 通常指命令。</font></p>
<p><font size="3"><a name="N10116"><span class="smalltitle">YUM</span></a></font></p>
<p><font size="3">YUM 在 RPM 系统中增加了自动更新和包管理，包括依赖关系管理。与 Debian Advanced Packaging Tool  (APT) 一样，除了了解系统上安装的包之外，YUM 还使用<em>存储库</em>。存储库是包的集合，通常可以通过网络连接访问它们。</font></p>
<div class="ibm-alternate-rule"><hr>
</div>
<p class="ibm-ind-linkibm-back-to-top"><font size="3"><a class="ibm-anchor-up-link" href="http://www.ibm.com/developerworks/cn/linux/l-lpic1-v3-102-5/#ibm-pcon">回页首</a></font></p>
<p><font size="3"><a name="7-install"><span class="atitle">安装 RPM 包</span></a></font></p>
<p><font size="3">假设您想学 Lisp，一位同事让您使用 <code>gcl</code> 命令。您试着输入 <code>gcl&#160;--help</code>、<code>which&#160;gcl</code>  或 <code>type&#160;gcl</code>。但是，如果系统无法找到 <code>gcl</code>，您可能会看到与清单 1 相似的输出。</font></p>
<font size="3"><br>
<a name="list1"><strong>清单 1. 没有找到 gcl 命令</strong></a></font> <font size="3"><br>
</font>
<table width="100%" cellspacing="0" cellpadding="0" border="0">
    <tbody>
        <tr>
            <td class="code-outline">
            <pre class="displaycode"><font size="3"><br>[ian@echidna ~]$ gcl --help<br>bash: gcl: command not found<br><br>[ian@echidna ~]$ which gcl<br>/usr/bin/which: no gcl in (/usr/lib64/qt-3.3/bin:/usr/kerberos/sbin:/usr/kerber<br>os/bin:/usr/lib64/ccache:/usr/local/bin:/usr/bin:/bin:/usr/local/sbin:/usr/sbin:/<br>sbin:/home/ian/bin)<br><br>[ian@echidna ~]$ type gcl<br>bash: type: gcl: not found</font></pre>
            </td>
        </tr>
    </tbody>
</table>
<font size="3"><br>
</font>
<p><font size="3">您可能会问同事要安装哪个包，也可能猜想 <code>gcl</code> 命令应该在 gcl  包中。这种猜测常常是对的，但是也不总是。我们稍后会看到如何寻找正确的包。在这里，需要 gcl  包。假设您已经下载或以其他方式获得了这个包的拷贝，可以使用带 <code>-i</code>（代表安装）选项的 <code>rpm</code>  命令安装它，见清单 2。</font></p>
<font size="3"><br>
<a name="N10161"><strong>清单 2. 用 rpm 安装 gcl ―― 第一次尝试</strong></a></font> <font size="3"><br>
</font>
<table width="100%" cellspacing="0" cellpadding="0" border="0">
    <tbody>
        <tr>
            <td class="code-outline">
            <pre class="displaycode"><font size="3"><br>[root@echidna ~]# rpm -i gcl-2.6.8-0.6.20090701cvs.fc12.x86_64.rpm<br>error: Failed dependencies:<br>gcl-selinux is needed by gcl-2.6.8-0.6.20090701cvs.fc12.x86_64</font></pre>
            </td>
        </tr>
    </tbody>
</table>
<font size="3"><br>
</font>
<p><font size="3"><code>rpm</code>  命令知道这个包有一个依赖包，但是它并不帮助您解决依赖问题。您需要自己获取依赖包，然后再次尝试，看看是否还有其他依赖包 ―  重复这个过程，直到满足所有依赖关系为止。好消息是，可以向 <code>rpm</code>  命令提供要安装的包的列表，如果满足所有依赖关系，它会以正确的次序安装所有包。因此，您至少不必以正确的次序手工安装每个包。</font></p>
<p><font size="3">如果您使用过 Debian 的 APT，可能希望有像 <code>apt-get</code> 命令一样的功能，<code>apt-get</code>  命令会寻找需要的东西（包括依赖包）并安装它们。对于基于 RPM 的系统，YUM (Yellowdog Updater Modified)  提供这种功能。清单 3 说明如何使用带 <code>install</code> 选项的 <code>yum</code> 命令安装 gcl  和必需的 gcl-selinux 包。</font></p>
<font size="3"><br>
<a name="N10189"><strong>清单 3. 使用 yum 安装 gcl </strong></a></font> <font size="3"><br>
</font>
<table width="100%" cellspacing="0" cellpadding="0" border="0">
    <tbody>
        <tr>
            <td class="code-outline">
            <pre class="displaycode"><font size="3"><br>[root@echidna ~]# <strong>yum install gcl</strong><br>Loaded plugins: presto, refresh-packagekit<br>Setting up Install Process<br>Resolving Dependencies<br>--&gt; Running transaction check<br>---&gt; Package gcl.x86_64 0:2.6.8-0.7.20100201cvs.fc12 set to be updated<br>--&gt; Processing Dependency: gcl-selinux for package: gcl-2.6.8-0.7.20100201cvs.fc12.x86_64<br>--&gt; Running transaction check<br>---&gt; Package gcl-selinux.x86_64 0:2.6.8-0.7.20100201cvs.fc12 set to be updated<br>--&gt; Finished Dependency Resolution<br><br>Dependencies Resolved<br><br>=====================================================================================<br> Package           Arch         Version                          Repository     Size<br>=====================================================================================<br>Installing:<br> gcl               x86_64       2.6.8-0.7.20100201cvs.fc12       updates       6.3 M<br>Installing for dependencies:<br> gcl-selinux       x86_64       2.6.8-0.7.20100201cvs.fc12       updates        17 k<br><br>Transaction Summary<br>=====================================================================================<br>Install       2 Package(s)<br>Upgrade       0 Package(s)<br><br>Total download size: 6.4 M<br>Installed size: 40 M<br>Is this ok [y/N]: <strong>y</strong><br>Downloading Packages:<br>Setting up and reading Presto delta metadata<br>updates/prestodelta                                           | 964 kB     00:01     <br>Processing delta metadata<br>Package(s) data still to download: 6.4 M<br>(1/2): gcl-2.6.8-0.7.20100201cvs.fc12.x86_64.rpm              | 6.3 MB     00:12     <br>(2/2): gcl-selinux-2.6.8-0.7.20100201cvs.fc12.x86_64.rpm      |  17 kB     00:00     <br>-------------------------------------------------------------------------------------<br>Total                                                398 kB/s | 6.4 MB     00:16     <br>Running rpm_check_debug<br>Running Transaction Test<br>Transaction Test Succeeded<br>Running Transaction<br>  Installing     : gcl-selinux-2.6.8-0.7.20100201cvs.fc12.x86_64                 1/2 <br>  Installing     : gcl-2.6.8-0.7.20100201cvs.fc12.x86_64                         2/2 <br><br>Installed:<br>  gcl.x86_64 0:2.6.8-0.7.20100201cvs.fc12                                            <br><br>Dependency Installed:<br>  gcl-selinux.x86_64 0:2.6.8-0.7.20100201cvs.fc12                                    <br><br>Complete!</font></pre>
            </td>
        </tr>
    </tbody>
</table>
<font size="3"><br>
</font>
<p><font size="3">清单 3 中的输出表明，YUM 在名为 “updates” 的存储库中找到了 gcl.x86_64  0:2.6.8-0.7.20100201cvs.fc12 和 gcl-selinux.x86_64  0:2.6.8-0.7.20100201cvs.fc12（稍后详细讨论），并判断出总下载大小。按 “y”  同意之后，它下载这两个包，然后安装依赖包，最后安装 gcl。在本文后面会进一步讨论依赖关系。</font></p>
<div class="ibm-alternate-rule"><hr>
</div>
<p class="ibm-ind-linkibm-back-to-top"><font size="3"><a class="ibm-anchor-up-link" href="http://www.ibm.com/developerworks/cn/linux/l-lpic1-v3-102-5/#ibm-pcon">回页首</a></font></p>
<p><font size="3"><a name="N10198"><span class="atitle">包的位置</span></a></font></p>
<p><font size="3">在前一节中，学习了如何安装 RPM 包。但是，包来自什么地方呢？<code>yum</code> 如何知道从哪里下载包？起点是  /etc/yum.repos.d/ 目录，这个目录常常包含几个 <em>repo</em> 文件。这是 repo 的默认位置，但是可以在 YUM  配置文件（通常是 /etc/yum.conf）中指定其他位置。清单 4 给出 fedora-updates.repo，我们从它所对应的位置获取  gcl 并安装在我的 Fedora 12 系统上。</font></p>
<p><font size="3">典型的 repo 文件分为三个部分，一个用于一般的包，一个用于调试包，最后一个用于源代码包。常常可以从不同的位置（即<em>镜像</em>） 获取发行版的包拷贝。所以 repo 文件告诉 <code>yum</code>  在哪里可以找到每个部分的最新镜像列表。注意，发行版的发布级别和机器架构表示为参数，所以对于我的 x86_64 Fedora 12 系统，<code>yum</code>  会从 <a href="https://mirrors.fedoraproject.org/metalink?repo=updates-released-f12&amp;arch=x86_64">https://mirrors.fedoraproject.org/metalink?repo=updates-released-f12&amp;arch=x86_64</a>  下载列表。</font></p>
<p><font size="3">除了存储库位置之外，repo 文件还指出某个存储库是否启用了，以及是否应该使用 GPG 签名检查下载的包。</font></p>
<font size="3"><br>
<a name="N101BF"><strong>清单 4. fedora-updates.repo</strong></a></font> <font size="3"><br>
</font>
<table width="100%" cellspacing="0" cellpadding="0" border="0">
    <tbody>
        <tr>
            <td class="code-outline">
            <pre class="displaycode"><font size="3"><br>[ian@echidna ~]$ <strong>cat /etc/yum.repos.d/fedora-updates.repo</strong><br>[updates]<br>name=Fedora $releasever - $basearch - Updates<br>failovermethod=priority<br>#baseurl=http://download.fedoraproject.org/pub/fedora/linux/updates/$releasever<br>/$basearch/<br>mirrorlist=https://mirrors.fedoraproject.org/metalink?repo=updates-released-f$r<br>eleasever&amp;arch=$basearch<br>enabled=1<br>gpgcheck=1<br>gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-fedora-$basearch<br><br>[updates-debuginfo]<br>name=Fedora $releasever - $basearch - Updates - Debug<br>failovermethod=priority<br>#baseurl=http://download.fedoraproject.org/pub/fedora/linux/updates/$releasever<br>/$basearch/debug/<br>mirrorlist=https://mirrors.fedoraproject.org/metalink?repo=updates-released-deb<br>ug-f$releasever&amp;arch=$basearch<br>enabled=0<br>gpgcheck=1<br>gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-fedora-$basearch<br><br>[updates-source]<br>name=Fedora $releasever - Updates Source<br>failovermethod=priority<br>#baseurl=http://download.fedoraproject.org/pub/fedora/linux/updates/$releasever<br>/SRPMS/<br>mirrorlist=https://mirrors.fedoraproject.org/metalink?repo=updates-released-sou<br>rce-f$releasever&amp;arch=$basearch<br>enabled=0<br>gpgcheck=1<br>gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-fedora-$basearch</font></pre>
            </td>
        </tr>
    </tbody>
</table>
<font size="3"><br>
</font>
<p><font size="3">YUM 和 RPM  使用本地数据库判断安装的包。本地数据库中存储的包元数据是从启用的存储库获取的。尽管很少需要为本地数据库操心，但是可以使用 <code>yum&#160;clean</code>  命令清除本地存储的信息的不同部分，使用 <code>yum&#160;makecache</code> 在本地数据库中为启用的 repo  创建信息。例如，如果修改了 repo 配置，就可能需要这么做。</font></p>
<div class="ibm-alternate-rule"><hr>
</div>
<p class="ibm-ind-linkibm-back-to-top"><font size="3"><a class="ibm-anchor-up-link" href="http://www.ibm.com/developerworks/cn/linux/l-lpic1-v3-102-5/#ibm-pcon">回页首</a></font></p>
<p><font size="3"><a name="N101D9"><span class="atitle">删除 RPM 包</span></a></font></p>
<p><font size="3">如果要删除包，可以使用 <code>yum</code> 的 <code>remove</code> 选项或 <code>rpm</code>  的 <code>-e</code> 选项。使用 <code>rpm&#160;-e</code> 删除 gcl 的试运行见清单  5。如果可以删除这个包，就不会有输出。</font></p>
<font size="3"><br>
<a name="N101FB"><strong>清单 5. 试删除 gcl</strong></a></font> <font size="3"><br>
</font>
<table width="100%" cellspacing="0" cellpadding="0" border="0">
    <tbody>
        <tr>
            <td class="code-outline">
            <pre class="displaycode"><font size="3"><br>[root@echidna ~]# <strong>rpm -e --test gcl</strong></font></pre>
            </td>
        </tr>
    </tbody>
</table>
<font size="3"><br>
</font>
<p><font size="3">与使用 <code>apt-get</code> 模拟删除 Debian 包不同，RPM  系统并不维护自动安装的包的相关信息，所以无法通过试删除查明哪些依赖包也可以删除。但是，如果在单一命令中指定多个要删除的包，那么没有依赖关系的包会 先于有依赖关系的包删除。</font></p>
<p><font size="3">与安装包不同，当使用 <code>rpm</code>  删除包时，在删除包之前没有提示。但是，如果试图删除其他包需要的包，它不会执行删除操作，您会看到清单 6 所示的错误消息。</font></p>
<font size="3"><br>
<a name="N10214"><strong>清单 6. 用 rpm 删除依赖包</strong></a></font> <font size="3"><br>
</font>
<table width="100%" cellspacing="0" cellpadding="0" border="0">
    <tbody>
        <tr>
            <td class="code-outline">
            <pre class="displaycode"><font size="3"><br>[root@echidna ~]# <strong>rpm -e gcl-selinux</strong><br>error: Failed dependencies:<br> gcl-selinux is needed by (installed) gcl-2.6.8-0.7.20100201cvs.fc12.x86_64</font></pre>
            </td>
        </tr>
    </tbody>
</table>
<font size="3"><br>
</font>
<p><font size="3">如果使用 <code>yum&#160;remove</code>，在执行事务测试之后会显示提示。如果试图删除的包是其他已安装包的依赖 包，YUM 会提议删除这些包和依赖包，见清单 7。</font></p>
<font size="3"><br>
<a name="N1022A"><strong>清单 7. 用 yum 删除依赖包</strong></a></font> <font size="3"><br>
</font>
<table width="100%" cellspacing="0" cellpadding="0" border="0">
    <tbody>
        <tr>
            <td class="code-outline">
            <pre class="displaycode"><font size="3"><br>[root@echidna ~]# <strong>yum remove gcl-selinux</strong><br>Loaded plugins: presto, refresh-packagekit<br>Setting up Remove Process<br>Resolving Dependencies<br>--&gt; Running transaction check<br>---&gt; Package gcl-selinux.x86_64 0:2.6.8-0.7.20100201cvs.fc12 set to be erased<br>--&gt; Processing Dependency: gcl-selinux for package: gcl-2.6.8-0.7.20100201cvs.fc12.x86_64<br>--&gt; Running transaction check<br>---&gt; Package gcl.x86_64 0:2.6.8-0.7.20100201cvs.fc12 set to be erased<br>--&gt; Finished Dependency Resolution<br><br>Dependencies Resolved<br><br>=====================================================================================<br> Package          Arch        Version                            Repository     Size<br>=====================================================================================<br>Removing:<br> gcl-selinux      x86_64      2.6.8-0.7.20100201cvs.fc12         @updates       90 k<br>Removing for dependencies:<br> gcl              x86_64      2.6.8-0.7.20100201cvs.fc12         @updates       40 M<br><br>Transaction Summary<br>=====================================================================================<br>Remove        2 Package(s)<br>Reinstall     0 Package(s)<br>Downgrade     0 Package(s)<br><br>Is this ok [y/N]: <strong>n</strong><br>Exiting on user Command<br>Complete!</font></pre>
            </td>
        </tr>
    </tbody>
</table>
<font size="3"><br>
</font>
<div class="ibm-alternate-rule"><hr>
</div>
<p class="ibm-ind-linkibm-back-to-top"><font size="3"><a class="ibm-anchor-up-link" href="http://www.ibm.com/developerworks/cn/linux/l-lpic1-v3-102-5/#ibm-pcon">回页首</a></font></p>
<p><font size="3"><a name="N10236"><span class="atitle">升级 RPM 包</span></a></font></p>
<p><font size="3">既然已经了解了如何安装和删除 RPM，我们来看看如何把 RPM 包升级到更高级别。可以使用 <code>yum&#160;update</code></font>  更新整个系统，还可以指定单一包或通配符。清单 8 说明如何更新所有名称以 “gr” 开头的包。注意，这里使用撇号防止 shell 展开  “*”。</p>
<font size="3"><br>
<a name="N10248"><strong>清单 8. 使用 yum update 执行更新 </strong></a></font> <font size="3"><br>
</font>
<table width="100%" cellspacing="0" cellpadding="0" border="0">
    <tbody>
        <tr>
            <td class="code-outline">
            <pre class="displaycode"><font size="3"><br>[root@echidna ~]# <strong>yum update 'gr*'</strong><br>Loaded plugins: presto, refresh-packagekit<br>Setting up Update Process<br>Resolving Dependencies<br>--&gt; Running transaction check<br>---&gt; Package grep.x86_64 0:2.6.3-1.fc12 set to be updated<br>---&gt; Package groff.x86_64 0:1.18.1.4-20.fc12 set to be updated<br>--&gt; Finished Dependency Resolution<br><br>Dependencies Resolved<br><br>=====================================================================================<br> Package         Arch             Version                    Repository         Size<br>=====================================================================================<br>Updating:<br> grep            x86_64           2.6.3-1.fc12               updates           228 k<br> groff           x86_64           1.18.1.4-20.fc12           updates           1.5 M<br><br>Transaction Summary<br>=====================================================================================<br>Install       0 Package(s)<br>Upgrade       2 Package(s)<br><br>Total download size: 1.7 M<br>Is this ok [y/N]: <strong>y</strong><br>Downloading Packages:<br>Setting up and reading Presto delta metadata<br>Processing delta metadata<br>Download delta size: 854 k<br>http://fedora.fastsoft.net/pub/linux/fedora/linux/updates/12/x86_64/drpms/grep-2.5.3-<br>6.fc12_2.6.3-1.fc12.x86_64.drpm: [Errno 14] HTTP Error 404 : http://fedora.fastsoft.n<br>et/pub/linux/fedora/linux/updates/12/x86_64/drpms/grep-2.5.3-6.fc12_2.6.3-1.fc12.x86_<br>64.drpm <br>Trying other mirror.<br>(1/2): grep-2.5.3-6.fc12_2.6.3-1.fc12.x86_64.drpm             | 214 kB     00:00     <br>(2/2): groff-1.18.1.4-18.fc12_1.18.1.4-20.fc12.x86_64.drpm    | 640 kB     00:00     <br>Finishing rebuild of rpms, from deltarpms<br>&lt;delta rebuild&gt;                                               | 1.7 MB     00:02     <br>Presto reduced the update size by 52% (from 1.7 M to 854 k).<br>Running rpm_check_debug<br>Running Transaction Test<br>Transaction Test Succeeded<br>Running Transaction<br>  Updating       : grep-2.6.3-1.fc12.x86_64                                      1/4 <br>  Updating       : groff-1.18.1.4-20.fc12.x86_64                                 2/4 <br>  Cleanup        : grep-2.5.3-6.fc12.x86_64                                      3/4 <br>  Cleanup        : groff-1.18.1.4-18.fc12.x86_64                                 4/4 <br><br>Updated:<br>  grep.x86_64 0:2.6.3-1.fc12             groff.x86_64 0:1.18.1.4-20.fc12            <br><br>Complete!</font></pre>
            </td>
        </tr>
    </tbody>
</table>
<font size="3"><br>
</font>
<p><font size="3">如果知道 RPM 文件的位置，或者已经下载了它们，那么也可以使用 <code>rpm</code>  命令执行更新。这与安装相似，只是要使用 <code>-U</code> 或 <code>-F</code> 选项而不是 <code>-i</code>  选项。这两个选项的差异是， <code>-U</code> 选项更新现有的包，如果这个包还没有安装，就安装它；而 <code>-F</code>  选项只升级或<em>刷新</em> 已经安装的包。因此，经常使用 <code>-U</code> 选项，尤其是在命令行包含 RPM  列表的情况下。这样的话，就会安装未安装的包，升级已经安装的包。常常使用另外两个选项 <code>-v</code>（详细）和 <code>-h</code>（#  标志）提供进度显示。清单 9 说明如何使用 <code>rpm</code> 命令更新 vim-common、vim-enhanced 和  vim-minimal 包。我们已经把 vim-common 和 vim-enhanced 包下载到根用户的主目录中，而 vim-minimal  包要从一个更新镜像获取。</font></p>
<font size="3"><br>
<a name="N10285"><strong>清单 9. 用 rpm 更新包</strong></a></font> <font size="3"><br>
</font>
<table width="100%" cellspacing="0" cellpadding="0" border="0">
    <tbody>
        <tr>
            <td class="code-outline">
            <pre class="displaycode"><font size="3"><br>[root@echidna ~]# <strong>ls *.rpm</strong><br>vim-common-7.2.411-1.fc12.x86_64.rpm  vim-enhanced-7.2.411-1.fc12.x86_64.rpm<br>[root@echidna ~]# <strong>rpm -Uvh *.rpm http://mirrors.usc.edu/pub/linux/distributions\</strong><br>&gt; <strong>/fedora/linux/updates/12/x86_64/vim-minimal-7.2.411-1.fc12.x86_64.rpm</strong><br>Retrieving http://mirrors.usc.edu/pub/linux/distributions/fedora/linux/updates/12/x86<br>_64/vim-minimal-7.2.411-1.fc12.x86_64.rpm<br>Preparing...                ########################################### [100%]<br>   1:vim-common             ########################################### [ 33%]<br>   2:vim-enhanced           ########################################### [ 67%]<br>   3:vim-minimal            ########################################### [100%]</font></pre>
            </td>
        </tr>
    </tbody>
</table>
<font size="3"><br>
</font>
<div class="ibm-alternate-rule"><hr>
</div>
<p class="ibm-ind-linkibm-back-to-top"><font size="3"><a class="ibm-anchor-up-link" href="http://www.ibm.com/developerworks/cn/linux/l-lpic1-v3-102-5/#ibm-pcon">回页首</a></font></p>
<p><font size="3"><a name="N10294"><span class="atitle">查询 RPM 包</span></a></font></p>
<p><font size="3">您在前面的示例中看到，用 <code>rpm</code> 命令安装 rpm 需要包文件的完整名称（或 URL），比如  gcl-2.6.8-0.6.20090701cvs.fc12.x86_64.rpm。另一方面，用 <code>yum</code>  安装或用这两个命令删除 rpm 只需要包名，比如 gcl。与 APT 一样，RPM  在内部数据库中维护安装的包的信息，因此允许使用包名操作安装的包。在本节中，看看可以使用 <code>rpm</code> 的 <code>-q</code>（代 表<em>查询</em>）选项或相关联的 <code>yum</code> 查询从数据库获取的一些信息。</font></p>
<p><font size="3">基本查询只检查包是否已经安装了，如果安装了，就查询版本。增加 <code>-i</code>  选项会得到包的相关信息。注意，安装、升级或删除包需要根权力，但是非根用户也可以查询 rpm 数据库。</font></p>
<font size="3"><br>
<a name="N102BD"><strong>清单 10. 显示 gcl 的相关信息</strong></a></font> <font size="3"><br>
</font>
<table width="100%" cellspacing="0" cellpadding="0" border="0">
    <tbody>
        <tr>
            <td class="code-outline">
            <pre class="displaycode"><font size="3"><br>[ian@echidna ~]$ <strong>yum list gcl</strong><br>Loaded plugins: presto, refresh-packagekit<br>Installed Packages<br>gcl.x86_64                  2.6.8-0.7.20100201cvs.fc12                  @updates<br>[ian@echidna ~]$ <strong>rpm -q gcl</strong><br>gcl-2.6.8-0.7.20100201cvs.fc12.x86_64<br><br>[ian@echidna ~]$ <strong>yum info gcl</strong><br>Loaded plugins: presto, refresh-packagekit<br>Installed Packages<br>Name       : gcl<br>Arch       : x86_64<br>Version    : 2.6.8<br>Release    : 0.7.20100201cvs.fc12<br>Size       : 40 M<br>Repo       : installed<br>From repo  : updates<br>Summary    : GNU Common Lisp<br>URL        : http://www.gnu.org/software/gcl/<br>License    : GPL+ and LGPLv2+<br>Description: GCL is a Common Lisp currently compliant with the ANSI standard.<br>           : Lisp compilation produces native code through the intermediary of<br>           : the system's C compiler, from which GCL derives efficient<br>           : performance and facile portability. Currently uses TCL/Tk as GUI.<br><br>[ian@echidna ~]$ <strong>rpm -qi gcl</strong><br>Name        : gcl                          Relocations: (not relocatable)<br>Version     : 2.6.8                             Vendor: Fedora Project<br>Release     : 0.7.20100201cvs.fc12          Build Date: Tue 23 Mar 2010 03:20:36 PM EDT<br>Install Date: Wed 05 May 2010 01:01:34 PM EDT      Build Host: x86-02.phx2.fedoraproject.<br>org<br>Group       : Development/Languages         Source RPM: gcl-2.6.8-0.7.20100201cvs.fc12.sr<br>c.rpm<br>Size        : 41667750                         License: GPL+ and LGPLv2+<br>Signature   : RSA/8, Tue 23 Mar 2010 04:14:06 PM EDT, Key ID 9d1cc34857bbccba<br>Packager    : Fedora Project<br>URL         : http://www.gnu.org/software/gcl/<br>Summary     : GNU Common Lisp<br>Description :<br>GCL is a Common Lisp currently compliant with the ANSI standard.  Lisp<br>compilation produces native code through the intermediary of the<br>system's C compiler, from which GCL derives efficient performance and<br>facile portability. Currently uses TCL/Tk as GUI.</font></pre>
            </td>
        </tr>
    </tbody>
</table>
<font size="3"><br>
</font>
<p><font size="3">详细的清单显示与 RPM 包相关联的一些<em>标记</em>。注意，<code>rpm</code> 和 <code>yum</code>  以不同的格式显示不同的信息。在本文中，我们都使用标准命令选项提供的基本输出。如果希望使用 <code>rpm&#160;--queryformat</code>  选项定制查询输出，请参考手册页。如果希望了解您的 <code>rpm</code> 版本支持的所有标记，应该运行 <code>rpm&#160;--querytags</code>。</font></p>
<p><font size="3">如清单 10 所示，可以使用 <code>yum</code>  列出安装的包。还可以用它列出有更新可用的包、可以安装的包以及具有其他性质的包，比如废弃的包或存储库中最近添加的包。甚至可以使用 <code>yum</code>  搜索包。在清单 11 中可以看到，texmacs 包还没有安装，但是可以从 fedora 存储库获取它。如果搜索  “texmacs”，会看到提到它的四个包。很容易看出为什么会找到 TeXmacs* 包。使用 <code>yum&#160;info&#160;pydot</code>  查明为什么也会找到 pydot 包。</font></p>
<font size="3"><br>
<a name="N10305"><strong>清单 11. 搜索 &quot;texmacs&quot;</strong></a></font> <font size="3"><br>
</font>
<table width="100%" cellspacing="0" cellpadding="0" border="0">
    <tbody>
        <tr>
            <td class="code-outline">
            <pre class="displaycode"><font size="3"><br>[ian@echidna ~]$ <strong>yum list texmacs</strong><br>Loaded plugins: presto, refresh-packagekit<br>Available Packages<br>TeXmacs.x86_64                         1.0.7.2-2.fc12                          fedora<br>[ian@echidna ~]$ <strong>yum search texmacs</strong><br>Loaded plugins: presto, refresh-packagekit<br>================================= Matched: texmacs ==================================<br>TeXmacs-devel.i686 : Development files for TeXmacs<br>TeXmacs-devel.x86_64 : Development files for TeXmacs<br>TeXmacs.x86_64 : Structured wysiwyg scientific text editor<br>pydot.noarch : Python interface to Graphviz's Dot language</font></pre>
            </td>
        </tr>
    </tbody>
</table>
<font size="3"><br>
</font>
<p><font size="3">对于后面的查询示例，我们主要使用 <code>rpm</code>，因为它的选项更丰富。许多示例也可以使用 <code>yum</code>  完成，<code>yum</code> 有一些基本 <code>rpm</code> 选项不具备的功能。更多信息参见手册页。</font></p>
<p><font size="3"><a name="N10324"><span class="smalltitle">RPM 包和其中的文件</span></a></font></p>
<p><font size="3">用户常常希望知道一个包中有哪些文件，或者某个文件来自哪个包。使用 <code>-ql</code> 选项列出 gcl  包中的文件，见清单 12。这个包中有许多文件，所以这里只给出部分输出。</font></p>
<font size="3"><br>
<a name="N10333"><strong>清单 12. 显示 gcl 包中的文件 </strong></a></font> <font size="3"><br>
</font>
<table width="100%" cellspacing="0" cellpadding="0" border="0">
    <tbody>
        <tr>
            <td class="code-outline">
            <pre class="displaycode"><font size="3"><br>[ian@echidna ~]$ <strong>rpm -ql gcl</strong><br>/usr/bin/gcl<br>/usr/lib/gcl-2.6.8<br>/usr/lib/gcl-2.6.8/clcs<br>/usr/lib/gcl-2.6.8/clcs/sys-proclaim.lisp<br>/usr/lib/gcl-2.6.8/cmpnew<br>/usr/lib/gcl-2.6.8/cmpnew/gcl_cmpmain.lsp<br>/usr/lib/gcl-2.6.8/cmpnew/gcl_cmpopt.lsp<br>/usr/lib/gcl-2.6.8/cmpnew/gcl_collectfn.lsp<br>.<br>.<br>.<br>/usr/share/info/gcl-tk.info.gz<br>/usr/share/info/gcl.info-1.gz<br>/usr/share/info/gcl.info-2.gz<br>/usr/share/info/gcl.info-3.gz<br>/usr/share/info/gcl.info-4.gz<br>/usr/share/info/gcl.info-5.gz<br>/usr/share/info/gcl.info-6.gz<br>/usr/share/info/gcl.info-7.gz<br>/usr/share/info/gcl.info-8.gz<br>/usr/share/info/gcl.info-9.gz<br>/usr/share/info/gcl.info.gz<br>/usr/share/man/man1/gcl.1.gz</font></pre>
            </td>
        </tr>
    </tbody>
</table>
<font size="3"><br>
</font>
<p><font size="3">通过在查询中添加 <code>-c</code> 选项，可以把列出的文件限制为配置文件。<code>-d</code>  选项把输出限制为文档文件。</font></p>
<p><font size="3"><a name="N10347"><span class="smalltitle">查询包文件</span></a></font></p>
<p><font size="3">上面的包查询命令在 RPM 数据库中查询已经安装的包。如果刚下载了一个包，想获取同类信息，可以在查询中使用 <code>-p</code>（代 表<em>包文件</em>）选项并指定包的<em>文件</em> 名（与安装包时一样）。清单 13 显示前面下载的两个 vim  包的信息。我们只作为根用户运行它，因为文件在根用户的主目录中。可以添加其他查询选项，比如用 <code>-l</code> 列出文件，用 <code>-i</code>  列出信息。</font></p>
<font size="3"><br>
<a name="N10364"><strong>清单 13. 显示两个 vim 包的包文件信息</strong></a></font> <font size="3"><br>
</font>
<table width="100%" cellspacing="0" cellpadding="0" border="0">
    <tbody>
        <tr>
            <td class="code-outline">
            <pre class="displaycode"><font size="3"><br>[root@echidna ~]# rpm -qp *.rpm<br>vim-common-7.2.411-1.fc12.x86_64<br>vim-enhanced-7.2.411-1.fc12.x86_64</font></pre>
            </td>
        </tr>
    </tbody>
</table>
<font size="3"><br>
</font>
<p><font size="3"><a name="N1036A"><span class="smalltitle">查询安装的所有包</span></a></font></p>
<p><font size="3"><code>-a</code> 选项把查询应用于安装的所有包。这会生成许多输出，所以通常同时使用一个或多个筛选器，比如用 <code>sort</code>  进行排序，用 <code>more</code> 或 <code>less</code> 进行分页输出，用 <code>wc</code>  获取包或文件内容，用 <code>grep</code> 搜索您不确定名称的包。清单 14 给出以下查询：</font></p>
<ol>
    <li><font size="3">系统上所有包的排序列表</font></li>
    <li><font size="3">系统上所有包的数量</font></li>
    <li><font size="3">系统上所有包中的所有文件的数量</font></li>
    <li><font size="3">用 RPM 安装的所有文档文件的数量</font></li>
    <li><font size="3">搜索名称中包含 “gcl” 的所有包（区分大小写）</font></li>
</ol>
<font size="3"><br>
<a name="N1039E"><strong>清单 14. 对所有包执行查询</strong></a></font> <font size="3"><br>
</font>
<table width="100%" cellspacing="0" cellpadding="0" border="0">
    <tbody>
        <tr>
            <td class="code-outline">
            <pre class="displaycode"><font size="3"><br>[ian@echidna ~]$ <strong>rpm -qa | sort | more</strong><br>aalib-libs-1.4.0-0.18.rc5.fc12.x86_64<br>abrt-1.0.8-2.fc12.x86_64<br>abrt-addon-ccpp-1.0.8-2.fc12.x86_64<br>abrt-addon-kerneloops-1.0.8-2.fc12.x86_64<br>abrt-addon-python-1.0.8-2.fc12.x86_64<br>abrt-desktop-1.0.8-2.fc12.x86_64<br>abrt-gui-1.0.8-2.fc12.x86_64<br>abrt-libs-1.0.8-2.fc12.x86_64<br>abrt-plugin-bugzilla-1.0.8-2.fc12.x86_64<br>abrt-plugin-logger-1.0.8-2.fc12.x86_64<br>abrt-plugin-runapp-1.0.8-2.fc12.x86_64<br>abyssinica-fonts-1.0-5.fc12.noarch<br>acl-2.2.49-2.fc12.x86_64<br>...<br>[ian@echidna ~]$ <strong>rpm -qa | wc -l</strong><br>1792<br>[ian@echidna ~]$ <strong>rpm -qal | wc -l</strong><br>281052<br>[ian@echidna ~]$ <strong>rpm -qad | wc -l</strong><br>45686<br>[ian@echidna ~]$ <strong>rpm -qa | grep -i gcl</strong><br>gcl-selinux-2.6.8-0.7.20100201cvs.fc12.x86_64<br>gcl-2.6.8-0.7.20100201cvs.fc12.x86_64</font></pre>
            </td>
        </tr>
    </tbody>
</table>
<font size="3"><br>
</font>
<p><font size="3">使用 <code>rpm -qa</code>  可以简化对多个系统的管理。如果把排序的输出重定向到一台机器上的文件，然后在另一台机器上也这么做，就可以使用 <code>diff</code>  程序寻找差异。</font></p>
<p><font size="3"><a name="N103BE"><span class="smalltitle">哪个包包含某一文件？</span></a></font></p>
<p><font size="3">既然可以列出所有包和一个包中的所有文件，现在就掌握了查明哪个包包含某一文件所需的所有信息。但是，<code>rpm</code>  命令的 <code>-f</code>（或 <code>--file</code>）选项可以帮助找到包含某一文件的包。假设您想知道前面看到的哪个  vim 包提供 <code>vim</code> 命令。您需要文件的完整路径。清单 15 说明如何使用 <code>which</code>  命令得到 <code>vim</code> 命令的完整路径，可以使用这个输出作为 <code>rpm -qf</code> 命令的输入。注意，`<code>which  guile-config</code>` 前后的符号是反撇号。在 Bash shell 中，另一种使用方法是 <code>$(which  vim)</code>。</font></p>
<font size="3"><br>
<a name="N103ED"><strong>清单 15. 哪个包提供 vim 可执行文件</strong></a></font> <font size="3"><br>
</font>
<pre class="displaycode"><font size="3"><br>[ian@echidna ~]$ <strong>which vim</strong><br>/usr/bin/vim<br>[ian@echidna ~]$ <strong>rpm -qf `which vim`</strong><br>vim-enhanced-7.2.411-1.fc12.x86_64<br>[ian@echidna ~]$ <strong>rpm -qf $(which vim)</strong><br>vim-enhanced-7.2.411-1.fc12.x86_64</font></pre></div></table><br><div class=opt id=blogOpt><a href="http://hi.baidu.com/science09/blog/category/Linux" title="查看该分类中所有文章">类别：Linux</a><span class=x-blog-opt-sp>|</span><a href="#" onclick="addToShare(); return false;" target=_blank><img src=http://img.baidu.com/hi/apps/share/share_btn.gif border=0 align=absbottom></a><span class=x-blog-opt-sp>|</span><a title="将此文章添加到百度搜藏" href=http://cang.baidu.com/do/add onClick="return addToFavor();" target=_blank>添加到搜藏</a> <span class=x-blog-opt-sp>|</span><a title="将此文章分享到i贴吧" href="#" onclick="addToiTieba(); return false;" target=_blank>分享到i贴吧</a><span class=x-blog-opt-sp>|</span>浏览(<span id=result>719</span>)<span class=x-blog-opt-sp>|</span><a href="#send">评论</a>&nbsp;(<span id=blogCmtCount>0</span>)<script language=javascript>
										/*<![CDATA[*/
										var pre = [true,'用 Hadoop 进行分布式数据处理，第 1 部分: 入门', '用 Hadoop 进行分布式数据处理，...','\/science09/blog/item/1e5f7363a6542e49ebf8f890.html'];
										var post = [true,'学习 Linux，101: RPM 和 YUM 包管理（续）','学习 Linux，101: RPM 和 YUM 包...', '\/science09/blog/item/62687b24ef515e0e908f9d6a.html'];
										if(pre[0] || post[0]){
											document.write('<div style="height:5px;line-height:5px;">&nbsp;</div><div id="in_nav">');
											if(pre[0]){
												document.write('上一篇：<a href="' + pre[3] + '" title="' + pre[1] + '">' +  pre[2] + '</a>&nbsp;&nbsp;&nbsp;&nbsp;');
											}
											if(post[0]){
												document.write('下一篇：<a href="' + post[3] + '" title="' + post[1] + '">' +  post[2] + '</a>');
											}
											document.write('</div>');
										}
										/*]]>*/
									</script></div><div class=line>&nbsp;</div><div id=share_user_list></div><div class=line>&nbsp;</div><style type="text/css">#in_related_doc a{text-decoration:none}</style><div id=in_related_tmp></div><div id=in_reader> <div class=tit>最近读者：</div></div><div class=line>&nbsp;</div><div id=in_comment> <a name=comment></a> <div class=tit>网友评论：</div> <span id=userCommentList></span> <div id=page></div></div><form action='/science09/commit' id=blogCmtSubmitForm name=blogCmtSubmitForm method=post> <input type=hidden name=bdstoken value='c4293139abfbbd0a2dcab6ca450b2683'> <input type=hidden name=ct value=8> <input type=hidden name=cm value=2> <input type=hidden name=spBlogID value='938f12d2e4595bde562c8469'> <input type=hidden name=spBlogCmtID value=''> <input type=hidden name=spRefURL value=''></form><div id=in_send><a name=send></a><form name=form1 id=popFormSubmit action="/science09/commit" method=post onSubmit="return checkcmtform()"><input type=hidden name=bdstoken value="c4293139abfbbd0a2dcab6ca450b2683"><input type=hidden name=ct value=8><input type=hidden name=cm value=1><input type=hidden name=spBlogID value="938f12d2e4595bde562c8469"><input type=hidden name=spRefURL id=spRefURL><script>
										    document.getElementById("spRefURL").value = window.location.href;
										</script><div class=tit>发表评论：</div><table width=620 border=0 cellspacing=5 cellpadding=0><tr><td class=f14>姓　名：<td>zhu__feng001<input name=spBlogCmtor id=spBlogCmtor style="display:none;" maxlength=50 value="zhu__feng001"><div style=display:none id=nmerror>*姓名最长为50字节</div><input type=hidden name=spBlogCmtURL id=spBlogCmtURL style=width:360px maxlength=128 onChange='checkeandu("spBlogCmtURL")' value='http://hi.baidu.com/zhu__feng001'><tr id=2_err style=display:none><td>&nbsp;<td><div class=error id=2_err_con></div><tr><td valign=top class=f14 id=reTitle>内　容：<td> <textarea name="spBlogCmtText" id="spBlogCmtText" style="width:520px;height:155px" tabindex="3" onFocus="hidErr(3);" ></textarea><tr id=3_err style=display:none><td>&nbsp;<td><div class=error id=3_err_con></div><tr id=share_blog> <td> <td valign=top><input type=checkbox id=shareBlog autocomplete=off style="vertical-align:text-bottom; margin-bottom:2px; margin-bottom:-2px\9;"><label for=shareBlog>同时将此文章分享给好友</label><input type=hidden id=shareBlogEchoback name=echoback><tr id=vercode><td valign=top class=f14>验证码：<td valign=top><input type=hidden name=spVcode value=""><input onFocus="f_focus()" id=spVerifyKey name=spVerifyKey size=6 maxlength=4 autocomplete=off tabindex=4> 请点击后输入四位验证码，字母不区分大小写<br><div id=yanzheng style=display:none><img id=verifypic width=120 height=40><wbr><a onFocus="this.blur();" href="#" onClick="return newverifypic();" title="看不清左边的字符">看不清?</a></div><tr><td valign=top class=f14>&nbsp;<td valign=top class=f14><input id=btn_ok name=btn_ok type=submit autocomplete=off value="发表评论" tabindex=5>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#" id=cancleReLink onClick="canclereply(); return false;" style="display:none; font-size:12px;color:#666;">取消回复</a></table></form></div><br></div><table width="100%" border=0 cellspacing=0 cellpadding=0 height=8><tr><td class=modbl width=7>&nbsp;<td class=modbc>&nbsp;<td class=modbr width=7>&nbsp;</table></div></div></div></div><div class=clearfix></div><div style="text-align:center;margin:30px auto 15px;font-family:Arial,simsun;font-size:12px;"><div style="margin:0 auto 6px;"><a href=http://help.baidu.com/question?prod_en=space target=_blank style="color:#00C;">帮助中心</a><span>&nbsp;|&nbsp;</span><a href="http://tieba.baidu.com/f?kw=%B0%D9%B6%C8%BF%D5%BC%E4&fr=wwwt" target=_blank style="color:#00C;">空间客服</a><span>&nbsp;|&nbsp;</span><a href=http://tousu.baidu.com/hi/ target=_blank style="color:#00C;">投诉中心</a><span>&nbsp;|&nbsp;</span><a href=http://www.baidu.com/search/hi_contract.html target=_blank style="color:#00C;">空间协议</a></div><div style="color:#7A77C8;">&copy;2012&nbsp;Baidu</div></div></center><ul id=blogCmtContentList style="display:none;"></ul><script>	var g_blogTitle = '学习 Linux，101: RPM 和 YUM 包管理';
		var g_blogId = '938f12d2e4595bde562c8469';
		var g_isAllowCmt =  true ;
		var g_isByShared =  true ;
		var g_isAddRelate =  true ;
		var g_latestReader = [
									["http:\/\/hi.baidu.com\/452123035","d963343532313233303335561b","452123035"],
									["http:\/\/hi.baidu.com\/lorryren","09a16c6f72727972656e1a0b","lorryren"],
									["http:\/\/hi.baidu.com\/shiftedmind","bd8f736869667465646d696e64a209","shiftedmind"],
									["http:\/\/hi.baidu.com\/michaelhe","1e9c4d69636861656c4865af0e","MichaelHe"],
									["http:\/\/hi.baidu.com\/davidjkl","5af464617669645f6a6b6c6902","david_jkl"],
									["http:\/\/hi.baidu.com\/ynyjl","0bf6796e796a6c2000","ynyjl"],
								{}
			];
	</script><iframe id=submitiframe name=submitiframe src="http://hi.bdimg.com/static/cblog/html/blank.html?v=20111213" style="display:none;"></iframe><script src="http://hi.bdimg.com/static/base/js/conf/comment.js?v=1334907755.js"></script><script src="http://hi.bdimg.com/static/cblog/js/job/detailpage.js?v=ee7931cf.js"></script><script>
/*<![CDATA[*/
/*{cmt
    这个相当一个代理器  
  在这里想实现一种这种加载效果：加载时注册（用一个 初始化数据.数组 记录要绑定的ID），文档ready后，按需加载js+css资源，js加载完，就初始化据执行

  有个问题，有些结构是 动态 执行这个绑定的，可能会发生资源还没有加载的情况。可以考虑给初始化数据，加一个标志位，说明加载完未，如果未，则把数据push到 初始化数据中(因为是用 dom.onxxx 的方式，所以不怕多次对同一个ID执行的问题)


  }*/
var SP = SP || {};
if(!SP.mycard){
    SP.mycard = new (function(){
        var me = this;
        var _cancleAction = Session.isDrag;  /*{cmt 标记在特殊情况下，所有的注册都被abort 如拖动页面}*/
        var _list = [];
        var _sourceLoaded = false;    /*{cmt 这里用了一种资源加载结束后，回调的机制，这个标志资源是否加载结束}*/
        me.bind = function (_id){
            if(_cancleAction){  //abort
                return;
            }
            if(!_sourceLoaded){
                _list.push(_id);
            } else {
                baidu.space.mycard.bind(_id);
            }
        }
        me.init = function (_config){
            _cancleAction = !!_config.cancle;
        }
        me.onSourceLoaded = function (){
            _sourceLoaded = true;
            baidu.space.mycard.init({portrait: Session.visitorPortrait});
            for(var i=0,len=_list.length; i<len; i++){
                baidu.space.mycard.bind(_list[i]);
            }
        }
    })();
    baidu.dom.ready(function(){
        BdAjax.loadCSS('http://hi.bdimg.com/static/cblog/css/ui/ucard/ucard.css?v=50de96ca.css');
        BdAjax.loadJS('http://hi.bdimg.com/static/cblog/js/ui/ucard/ucard.js?v=fcbffbf8.js');
    });
}
SP.mycard.bind('m_blog');  /*{cmt 只有文档加载完才真正绑定，这里只是append记录 }*/
/*]]>*/
</script>