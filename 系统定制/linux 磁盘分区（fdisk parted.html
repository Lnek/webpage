<html><head><title>linux 磁盘分区（fdisk / parted）_朱庆闯的技术博客_百度空间</title><meta http-equiv=content-type content="text/html; charset=GBK"><link rel=alternate type="application/rss+xml" title="订阅该空间的博客文章" href="http://hi.baidu.com/%C6%DF%D0%C7%D6%AE%D0%C7%D4%C6/rss"><style type="text/css">.error{color:#F00;font-size:12px}.shareUser,.shareLastEditor{line-height:20px;color:#666;text-align:left}.shareLastEditor{margin:5px 0 8px}</style><script>
	    var g_pageTimerStart=new Date().getTime();
	</script><script src="http://hi.bdimg.com/static/cblog/js/other/global.js?v=009301b8.js"></script><script src="http://hi.bdimg.com/static/cblog/js/other/libs.js?v=48b209f9.js"></script><script src="http://img.baidu.com/js/tangram-1.1.0.js?v=1334907755.js"></script><script>
var Session = {
    isLogin: !true,
    isHost: 0,
    loginStatus : 0,
    userName: "七星之星云",   
    userPortrait:'7518c6dfd0c7d6aed0c7d4c6b203',
    spaceURL: "\/%C6%DF%D0%C7%D6%AE%D0%C7%D4%C6",
    spBasicURL:"http:\/\/hi.baidu.com\/%C6%DF%D0%C7%D6%AE%D0%C7%D4%C6",
    spBasicURLEnc:"http%3A%2F%2Fhi.baidu.com%2F%C6%DF%D0%C7%D6%AE%D0%C7%D4%C6",
    visitorName:    "",
    visitorPortrait:'00000000',
    isActive: '0',   /*{cmt 访问者是否激活空间}*/
    visitorURL: "\/",        // 
    pageURL: "http://hi.baidu.com\/%25C6%25DF%25D0%25C7%25D6%25AE%25D0%25C7%25D4%25C6\/blog\/item\/67e32dd476e9ef1da08bb7c7.html",    
    refer: "http:\/\/www.baidu.com\/s?bs=csdn&f=8&rsv_bp=1&rsv_spt=3&wd=linux+parted+-s&inputT=4463",
    spToken: 'the fisrt two args should be string type:0,1!', 
    spFriendDomain: 'http://frd.baidu.com',
    spSpaceDomain: 'http://hi.baidu.com',
    spPortraitDomain: 'http://tx.bdimg.com',
    spSpaceStaticDomain: 'http://hi.bdimg.com', /*{cmt TODO RD似乎还不有提供这个变量，记得补成呀！}*/
    spImgDomain : 'http://img.baidu.com',
    spStaticDomain : 'http://hi.bdimg.com',

    isDrag: false  /*{cmt 是否在拖动页：是为了通用，只对模块内容有作用，这里也作为一个通用属性}*/
    ,isProfile: false   /*{cmt 是否在拖动页：是为了通用，只对模块内容有作用，这里也作为一个通用属性}*/
    ,isPortraitVerify:!true
    };
</script></head><body> <script>
/*<![CDATA[*/
if(top.location != self.location){
	top.location = self.location;
}
var myref = encodeURIComponent("http://hi.baidu.com\/%C6%DF%D0%C7%D6%AE%D0%C7%D4%C6\/blog\/item\/67e32dd476e9ef1da08bb7c7.html");
/*]]>*/
</script><!--[if (lt IE 8.0)]><link rel=stylesheet type=text/css href="http://hi.bdimg.com/static/cblog/css/ui/mods.css?v=774e31a7.css"><![endif]--><!--[if (!IE)|(gte IE 8.0)]><!--><link rel=stylesheet type=text/css href="http://hi.bdimg.com/static/cblog/css/ui/mods_datauri.css?v=a1661a70.css"><!--<![endif]--><link rel=stylesheet type=text/css href="http://hitn.bdimg.com/2402050202/css/item/8a6d5a0301348388d53f7c66.css"><!--[if (lt IE 8.0)]><link rel=stylesheet type=text/css href="http://hi.bdimg.com/static/cblog/css/space.css?v=674c899c.css"><![endif]--><!--[if (!IE)|(gte IE 8.0)]><!--><link rel=stylesheet type=text/css href="http://hi.bdimg.com/static/cblog/css/space_datauri.css?v=b27686c7.css"><!--<![endif]--><div class=userbar><center> <div id=nav><a class=logo href=http://hi.baidu.com/index.htm><img src=http://img.baidu.com/hi/logo/logo_93_30.gif border=0 alt="百度空间"></a><div class="manage no-login"><form action="https://passport.baidu.com/?login" method=post>用户名:<input name=username>&nbsp;&nbsp; 密码:<input type=password name=password> <input type=hidden name=mem_pass value=on><input type=submit value="" style="width:0; height:0;"><a href="#" class=loginlink onclick="this.parentNode.submit(); return false;">登录</a> </form> <a href=/reg/new class=reglink>注册</a></div> </div></center></div><script src="http://hi.bdimg.com/static/base/js/conf/base.js?v=1334907755.js"></script><link rel=stylesheet type=text/css href="http://hi.bdimg.com/static/base/css/base.css?v=1334907755.css"><script language=javascript src="http://hi.bdimg.com/static/cblog/js/ui/dialog.js?v=f1d92f7b.js"></script><center><div id=main align=left><!--[if IE]><script>
var objmain = document.getElementById("main");
function updatesize(){ var bodyw = window.document.body.offsetWidth; if(bodyw <= 790) objmain.style.width="772px"; else if(bodyw >= 1016) objmain.style.width="996px"; else objmain.style.width="100%"; }
updatesize(); window.onresize = updatesize;
</script><![endif]--><div id=header><div class=lc><div class=rc></div></div><div class=tit><a href="/%C6%DF%D0%C7%D6%AE%D0%C7%D4%C6" class=titlink title="七星之星云的空间 http://hi.baidu.com/七星之星云">朱庆闯的技术博客</a></div><div class=desc>windows,linux,mac，三个系统平台的应用软件开发都有涉及。工作心得保存下来，以后来复习。</div><div id=tabline>&nbsp;</div><div id=tab><a href="http://hi.baidu.com/%C6%DF%D0%C7%D6%AE%D0%C7%D4%C6/home">主页</a><a href="http://hi.baidu.com/%C6%DF%D0%C7%D6%AE%D0%C7%D4%C6/blog" class=on>博客</a><a href="http://hi.baidu.com/%C6%DF%D0%C7%D6%AE%D0%C7%D4%C6/album">相册</a><span>|</span><a href="http://hi.baidu.com/%C6%DF%D0%C7%D6%AE%D0%C7%D4%C6/profile">个人档案</a><span>|</span><a href="http://hi.baidu.com/%C6%DF%D0%C7%D6%AE%D0%C7%D4%C6/friends">好友</a><span>|</span><a href="http://tieba.baidu.com/i/sys/jump?un=%C6%DF%D0%C7%D6%AE%D0%C7%D4%C6&fr=spacebar" onclick="BdUtil.ns_trackerLink('m_20110330_spacebar','')" target=_blank>i贴吧</a></div></div><div class=stage><div class=stagepad><div style="width:100%"><table width="100%" border=0 cellspacing=0 cellpadding=0 class=modth><tr><td class=modtl width=7>&nbsp;<td class=modtc nowrap><div class=modhead><span class=modtit>查看文章</span></div><td class=modtc nowrap align=right><td class=modtr width=7>&nbsp;</table><div id=m_blog class=modbox style="overflow-x:hidden;"><div class=tit>linux 磁盘分区（fdisk / parted）</div><div class=date>2011-10-20 14:24</div><table style="table-layout:fixed;width:100%"><tr><td><div id=blog_text class=cnt><p>在linux下，磁盘的管理和应用，只要学会几个命令和工具，就会变得相当的方便和简单。<br />主要有两个管理工具： fdisk 和 parted. 这两个都可以实现磁盘分区，但使用起来稍有不同。<br />我认为两个同时使用也许更为方便，下面我就以创建一个新的硬盘为例，来讲解这两个命令。<br /><br />一、查看 现有磁盘信息:<br />---------------------------------------------------------------------------<br /><span style="color: #ff0000;">[root@mc2800 ~]# fdisk -l</span><br /><span style="color: #0000ff;"><br /></span><span style="color: #0000ff;"><span style="color: #333333;">Disk /dev/sda: 123.5 GB, 123522416640 bytes<br />255 heads, 63 sectors/track, 15017 cylinders<br />Units = cylinders of 16065 * 512 = 8225280 bytes<br />Disk identifier: 0x6a16275e<br /><br />Device Boot Start End Blocks Id System<br />/dev/sda1 * 1 13 104391 83 Linux<br />/dev/sda2 14 1288 10241437+ 83 Linux<br />/dev/sda3 1289 1543 2048287+ 82 Linux swap / Solaris<br />/dev/sda4 1544 15017 108229905 5 Extended<br />/dev/sda5 1544 15017 108229873+ 83 Linux<br /><br />Disk /dev/sdb: 250.0 GB, 250059350016 bytes<br />255 heads, 63 sectors/track, 30401 cylinders<br />Units = cylinders of 16065 * 512 = 8225280 bytes<br />Disk identifier: 0x00068785<br /><br />Device Boot Start End Blocks Id System<br />/dev/sdb1 * 1 30401 244196001 83 Linux</span><br /><br /><span style="color: #000000;">// fdisk 这个命令用 -l 可以查看磁盘信息, -u 可以查看指定的硬盘信息.<br />---------------------------------------------------------------------------------------------<br /><span style="color: #ff0000;">[root@mc2800 ~]# fdisk -l -u /dev/sdb</span><br /><span style="color: #800000;"><br /><span style="color: #333333;">Disk /dev/sdb: 250.0 GB, 250059350016 bytes<br />255 heads, 63 sectors/track, 30401 cylinders, total 488397168 sectors<br />Units = sectors of 1 * 512 = 512 bytes<br />Disk identifier: 0x00068785<br /><br />Device Boot Start End Blocks Id System<br />/dev/sdb1 * 63 488392064 244196001 83 Linux</span></span><br /><br /></span></span><span style="color: #000000;">//parted 这个命令 -s 指定硬盘名字</span><br />------------------------------------------------------------------------------------------------<br /><span style="color: #ff0000;">[root@mc2800 ~]# parted -s /dev/sda print<br /><span style="color: #333333;"><br /></span></span><span style="color: #0000ff;"><span style="color: #333333;">Model: ATA IC35L120AVV207-0 (scsi)<br />Disk /dev/sda: 124GB<br />Sector size (logical/physical): 512B/512B<br />Partition Table: msdos<br /><br />Number Start End Size Type File system Flags<br />1 32.3kB 107MB 107MB primary ext3 boot <br />2 107MB 10.6GB 10.5GB primary ext3 <br />3 10.6GB 12.7GB 2097MB primary linux-swap <br />4 12.7GB 124GB 111GB extended <br />5 12.7GB 124GB 111GB logical ext3</span><br /><br /></span><span style="color: #000000;">//parted 这个命令 unit 可以指定硬盘大小的单位</span><span style="color: #0000ff;"></span>如： unit GB / unit MB / unit KB / unit B<br />-------------------------------------------------------------------------------------------------<br /><span style="color: #333333;"><span style="color: #ff0000;">[root@mc2800 ~]# parted -s /dev/sdb unit MB print</span><br /><br />Model: ATA ST3250824AS (scsi)<br />Disk /dev/sdb: 250059MB<br />Sector size (logical/physical): 512B/512B<br />Partition Table: msdos<br /><br />Number Start End Size Type File system Flags<br />1 0.03MB 250057MB 250057MB primary ext3 boot <br /></span><br />---------------------------------------------------------------------------------------------<br />fdisk 和 parted 两个命令都可以很清晰的看出硬盘信息，由此我们可以看到我有两个scsi硬盘。第一个硬盘 /dev/sda 123GB,第二个硬盘 /dev/sdb 250GB. <br /><br /><span style="color: #ff0000;">注：（建议新学linux的兄弟,请把数据copy ,再尝试分区,以免数据丢失.以下命令有很强的危害性,可以把硬盘数据销毁）<br /><br /></span>二、下面我开始把第二个硬盘重新分区：<br /><br />1、卸载硬盘分区（如果是新硬盘不需要这一步骤，因我的硬盘已经正常使用，所以需要先卸载）<br /><br /><span style="color: #ff0000;">[root@mc2800 ~]# umount /dev/sdb1</span><br /><br />2、创建硬盘Label</p>
<p><br /><span style="color: #ff00ff;">（有很强的破坏性）</span><br /><span style="color: #ff0000;">[root@mc2800 ~]# parted -s /dev/sdb mklabel msdos</span><br /><br /><span style="color: #333333;">Warning: The existing disk label on /dev/sdb will be destroyed and all data on this disk will be lost. Do you want to continue?</span><br /><br /><span style="color: #000000;">3、删除硬盘分区（如果是新硬盘不需要进行这一步骤。如果不是新硬盘的话，需要进行这一步骤）（我这里只有一个分区，所以只是删除 1,如果你有多个分区,请全部删除）<br /></span><span style="color: #ff00ff;">（有很强的破坏性）</span></p>
<p><br /><span style="color: #000000;"><span style="color: #ff0000;">[root@mc2800 ~]# parted -s /dev/sdb rm 1</span><br /></span><br />4、创建硬盘分区（我把硬盘只创建一个主分区）<br /><br /><span style="color: #ff0000;">root@mc2800 ~]# parted -s /dev/sdb mkpart primary ext3 0 250GB</span><br /><br />5、格式化硬盘分区（我们使用 mkfs.ext3 工具）<br /><span style="color: #ff0000;"><br />[root@mc2800 ~]# mkfs.ext3 /dev/sdb1<br /><br /><span style="color: #333333;">mke2fs 1.40.2 (12-Jul-2007)<br />Filesystem label=<br />OS type: Linux<br />Block size=4096 (log=2)<br />Fragment size=4096 (log=2)<br />30539776 inodes, 61049000 blocks<br />3052450 blocks (5.00%) reserved for the super user<br />First data block=0<br />Maximum filesystem blocks=0<br />1864 block groups<br />32768 blocks per group, 32768 fragments per group<br />16384 inodes per group<br />Superblock backups stored on blocks: <br />32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632, 2654208, <br />4096000, 7962624, 11239424, 20480000, 23887872<br /><br />Writing inode tables: done <br />Creating journal (32768 blocks): done<br />Writing superblocks and filesystem accounting information: done<br /><br />This filesystem will be automatically checked every 32 mounts or<br />180 days, whichever comes first. Use tune2fs -c or -i to override.</span><br /></span><br />6、创建加载硬盘的挂载点（我创建为 /archive01）<br /><br /><span style="color: #ff0000;">[root@mc2800 ~]# mkdir /archive01</span><br /><br />7、设置自动加载硬盘<br /><br />修改 /etc/fstab 文件 ，在文件最后一行 添加<br /><br />/dev/sdb1 /archive01 ext3 defaults 0 0<br /><br />8、重新启动，你可以看到你的硬盘已经创建并加载完成。<br /><br />上面我的工作是把一个独立的硬盘创建加载。我只是创建了一个分区，并设立为主分区。当然我们可以创建两个或者更多分区<br />。当然我们也可以把当前硬盘的一个分区进行更改。大家的应用不同，所以不可能把所有步骤写出来，大家自己研究下。有问题可以留言。<br />如果是新手中途可能 会遇见错误，我把常见的错误说明下：<br /><br />1、硬盘卸载错误 －－－可能是你的硬盘正在读写数据造成，请下停止一切对此硬盘的读写操作。<br /><br />2、创建分区出错 －－－可能是你的命令里面有错误，比如<span style="color: #ff0000;"><br />root@mc2800 ~]# parted -s /dev/sdb mkpart primary ext3 0 250GB <br /><span style="color: #000000;">这里面 0代表的这个分区的开始，250GB代表的是这个分区的结束。且两个 数据中间有空格 /dev/sdb 和 /dev/sdb1 是不一样的，一个是硬盘，一个是硬盘的第一个分区。<br /><br />3、命令书写错误 －－－这个只能自己避免，新手请多看下 linux 里man parted 的内容。<br /><br />4、完全复制我写的命令－－－可以看到 ，大家的配置不相同，参数肯定不同，比如我的硬盘是250G，如果你的120G的话就应该是这样写：</span></span><span style="color: #ff0000;"><br />root@mc2800 ~]# parted -s /dev/sdb mkpart primary ext3 0 120GB <br /><span style="color: #000000;">......<br /><br /></span></span><span style="color: #000000;">最常见的错误应该是 1、命令书写错误，2、对命令不理解，把其中的参数书写错误。<br /></span></p></div></table><br><div class=opt id=blogOpt><a href="http://hi.baidu.com/%C6%DF%D0%C7%D6%AE%D0%C7%D4%C6/blog/category/Linux" title="查看该分类中所有文章">类别：Linux</a><span class=x-blog-opt-sp>|</span><a href="#" onclick="addToShare(); return false;" target=_blank><img src=http://img.baidu.com/hi/apps/share/share_btn.gif border=0 align=absbottom></a><span class=x-blog-opt-sp>|</span><a title="将此文章添加到百度搜藏" href=http://cang.baidu.com/do/add onClick="return addToFavor();" target=_blank>添加到搜藏</a> <span class=x-blog-opt-sp>|</span><a title="将此文章分享到i贴吧" href="#" onclick="addToiTieba(); return false;" target=_blank>分享到i贴吧</a><span class=x-blog-opt-sp>|</span>浏览(<span id=result>175</span>)<span class=x-blog-opt-sp>|</span><a href="#send">评论</a>&nbsp;(<span id=blogCmtCount>0</span>)<script language=javascript>
										/*<![CDATA[*/
										var pre = [true,'linux 查看进程信息 (ps\/top)', 'linux 查看进程信息 (ps\/top)','\/%C6%DF%D0%C7%D6%AE%D0%C7%D4%C6/blog/item/1ebcb7df751fe20f622798c5.html'];
										var post = [true,'linux 时间函数（转载）','linux 时间函数（转载）', '\/%C6%DF%D0%C7%D6%AE%D0%C7%D4%C6/blog/item/45a32144150e7250500ffec0.html'];
										if(pre[0] || post[0]){
											document.write('<div style="height:5px;line-height:5px;">&nbsp;</div><div id="in_nav">');
											if(pre[0]){
												document.write('上一篇：<a href="' + pre[3] + '" title="' + pre[1] + '">' +  pre[2] + '</a>&nbsp;&nbsp;&nbsp;&nbsp;');
											}
											if(post[0]){
												document.write('下一篇：<a href="' + post[3] + '" title="' + post[1] + '">' +  post[2] + '</a>');
											}
											document.write('</div>');
										}
										/*]]>*/
									</script></div><div class=line>&nbsp;</div><style type="text/css">#in_related_doc a{text-decoration:none}</style><div id=in_related_tmp></div><div id=in_reader> <div class=tit>最近读者：</div></div><div class=line>&nbsp;</div><div id=in_comment> <a name=comment></a> <div class=tit>网友评论：</div> <span id=userCommentList></span> <div id=page></div></div><form action='/%C6%DF%D0%C7%D6%AE%D0%C7%D4%C6/commit' id=blogCmtSubmitForm name=blogCmtSubmitForm method=post> <input type=hidden name=bdstoken value='the fisrt two args should be string type:0,1!'> <input type=hidden name=ct value=8> <input type=hidden name=cm value=2> <input type=hidden name=spBlogID value='67e32dd476e9ef1da08bb7c7'> <input type=hidden name=spBlogCmtID value=''> <input type=hidden name=spRefURL value=''></form><div id=in_send><a name=send></a><form name=form1 id=popFormSubmit action="/%C6%DF%D0%C7%D6%AE%D0%C7%D4%C6/commit" method=post onSubmit="return checkcmtform()"><input type=hidden name=bdstoken value="the fisrt two args should be string type:0,1!"><input type=hidden name=ct value=8><input type=hidden name=cm value=1><input type=hidden name=spBlogID value="67e32dd476e9ef1da08bb7c7"><input type=hidden name=spRefURL id=spRefURL><script>
										    document.getElementById("spRefURL").value = window.location.href;
										</script><div class=tit>发表评论：</div><table width=620 border=0 cellspacing=5 cellpadding=0><tr><td class=f14>姓　名：<td><input name=spBlogCmtor id=spBlogCmtor style=width:220px tabindex=1 onChange="checkname('spBlogCmtor')" maxlength=49 onFocus="hidErr(1);"><script>
                                                            document.write(" &nbsp;&nbsp; <a href='http://hi.baidu.com/st/reg.html' target='_blank'>注册</a>");
                                                            document.write(' | <a href="https://passport.baidu.com/?login&tpl=sp&tpl_reg=sp&u='+myref+'" onclick="BdUtil.relogin(); return false;">登录</a>');
														</script><div style=display:none id=nmerror>*姓名最长为50字节</div><tr id=1_err style=display:none><td>&nbsp;<td><div class=error id=1_err_con></div><tr><td class=f14>网址或邮箱：<td><input name=spBlogCmtURL id=spBlogCmtURL style=width:360px maxlength=128 tabindex=2 onChange="checkeandu('spBlogCmtURL')" onFocus="hidErr(2);"> (选填)<script>
														G("spBlogCmtor").value="";
														G("spBlogCmtURL").value="";
													</script><tr id=2_err style=display:none><td>&nbsp;<td><div class=error id=2_err_con></div><tr><td valign=top class=f14 id=reTitle>内　容：<td><textarea name="spBlogCmtText" id="spBlogCmtText" style="width:520px;height:155px"  tabindex="3" onFocus="hidErr(3);" onclick="BdUtil.relogin(); return false;" ></textarea><tr id=3_err style=display:none><td>&nbsp;<td><div class=error id=3_err_con></div><tr><td valign=top class=f14>&nbsp;<td valign=top class=f14><input id=btn_ok name=btn_ok type=submit autocomplete=off onclick="BdUtil.relogin(); return false;" value="发表评论" tabindex=5>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#" id=cancleReLink onClick="canclereply(); return false;" style="display:none; font-size:12px;color:#666;">取消回复</a></table></form></div><br></div><table width="100%" border=0 cellspacing=0 cellpadding=0 height=8><tr><td class=modbl width=7>&nbsp;<td class=modbc>&nbsp;<td class=modbr width=7>&nbsp;</table></div></div></div></div><div class=clearfix></div><div style="text-align:center;margin:30px auto 15px;font-family:Arial,simsun;font-size:12px;"><div style="margin:0 auto 6px;"><a href=http://help.baidu.com/question?prod_en=space target=_blank style="color:#00C;">帮助中心</a><span>&nbsp;|&nbsp;</span><a href="http://tieba.baidu.com/f?kw=%B0%D9%B6%C8%BF%D5%BC%E4&fr=wwwt" target=_blank style="color:#00C;">空间客服</a><span>&nbsp;|&nbsp;</span><a href=http://tousu.baidu.com/hi/ target=_blank style="color:#00C;">投诉中心</a><span>&nbsp;|&nbsp;</span><a href=http://www.baidu.com/search/hi_contract.html target=_blank style="color:#00C;">空间协议</a></div><div style="color:#7A77C8;">&copy;2012&nbsp;Baidu</div></div></center><ul id=blogCmtContentList style="display:none;"></ul><script>	var g_blogTitle = 'linux 磁盘分区（fdisk \/ parted）';
		var g_blogId = '67e32dd476e9ef1da08bb7c7';
		var g_isAllowCmt =  true ;
		var g_isByShared =  false ;
		var g_isAddRelate =  true ;
		var g_latestReader = [
									["http:\/\/hi.baidu.com\/yang_chun98","3b3f79616e675f6368756e3938e514","yang_chun98"],
									["http:\/\/hi.baidu.com\/meiyalei0530","bc756d656979616c6569303533309c06","meiyalei0530"],
									["http:\/\/hi.baidu.com\/_dot_fei","d7975f444f545f466569c318","_DOT_Fei"],
									["http:\/\/hi.baidu.com\/vmstatus","96e8766d737461747573a91a","vmstatus"],
									["http:\/\/hi.baidu.com\/beyoungse","89046265796f756e6773654c00","beyoungse"],
								{}
			];
	</script><iframe id=submitiframe name=submitiframe src="http://hi.bdimg.com/static/cblog/html/blank.html?v=20111213" style="display:none;"></iframe><script src="http://hi.bdimg.com/static/base/js/conf/comment.js?v=1334907755.js"></script><script src="http://hi.bdimg.com/static/cblog/js/job/detailpage.js?v=ee7931cf.js"></script><script>
/*<![CDATA[*/
/*{cmt
    这个相当一个代理器  
  在这里想实现一种这种加载效果：加载时注册（用一个 初始化数据.数组 记录要绑定的ID），文档ready后，按需加载js+css资源，js加载完，就初始化据执行

  有个问题，有些结构是 动态 执行这个绑定的，可能会发生资源还没有加载的情况。可以考虑给初始化数据，加一个标志位，说明加载完未，如果未，则把数据push到 初始化数据中(因为是用 dom.onxxx 的方式，所以不怕多次对同一个ID执行的问题)


  }*/
var SP = SP || {};
if(!SP.mycard){
    SP.mycard = new (function(){
        var me = this;
        var _cancleAction = Session.isDrag;  /*{cmt 标记在特殊情况下，所有的注册都被abort 如拖动页面}*/
        var _list = [];
        var _sourceLoaded = false;    /*{cmt 这里用了一种资源加载结束后，回调的机制，这个标志资源是否加载结束}*/
        me.bind = function (_id){
            if(_cancleAction){  //abort
                return;
            }
            if(!_sourceLoaded){
                _list.push(_id);
            } else {
                baidu.space.mycard.bind(_id);
            }
        }
        me.init = function (_config){
            _cancleAction = !!_config.cancle;
        }
        me.onSourceLoaded = function (){
            _sourceLoaded = true;
            baidu.space.mycard.init({portrait: Session.visitorPortrait});
            for(var i=0,len=_list.length; i<len; i++){
                baidu.space.mycard.bind(_list[i]);
            }
        }
    })();
    baidu.dom.ready(function(){
        BdAjax.loadCSS('http://hi.bdimg.com/static/cblog/css/ui/ucard/ucard.css?v=50de96ca.css');
        BdAjax.loadJS('http://hi.bdimg.com/static/cblog/js/ui/ucard/ucard.js?v=fcbffbf8.js');
    });
}
SP.mycard.bind('m_blog');  /*{cmt 只有文档加载完才真正绑定，这里只是append记录 }*/
/*]]>*/
</script>