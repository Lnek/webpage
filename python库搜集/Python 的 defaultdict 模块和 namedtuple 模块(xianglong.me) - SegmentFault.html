

<!DOCTYPE HTML>
<html lang="zh-CN">
<head>
<meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
<meta name="renderer" content="webkit" />
<meta property="qc:admins" content="15317273575564615446375" />
<meta name="viewport" content="width=device-width, initial-scale=1, minimal-ui, maximum-scale=1, user-scalable=no" />
<meta name="alexaVerifyID" content="LkzCRJ7rPEUwt6fVey2vhxiw1vQ"/>
<title>Python 的 defaultdict 模块和 namedtuple 模块(xianglong.me) - SegmentFault</title>

<meta name="description" content="在Python中有一些内置的数据类型，比如int, str, list, tuple, dict等。Python的collections模块在这些内置数据类型的基础上，提供了几个额外的数据类型：namedtuple, defaultdict, deque, Counter, OrderedDict..." />

    <meta name="keywords" content="python" />

<link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="SegmentFault" />
<link rel="shortcut icon" href="//static.segmentfault.com/global/img/favicon.30f7204d.ico" />
<link rel="apple-touch-icon" href="//static.segmentfault.com/global/img/touch-icon.c78b1075.png">
<meta name="userId" value="" id="SFUserId" />
<meta name="userRank" value="" id="SFUserRank" />

<link rel="alternate" type="application/atom+xml" title="SegmentFault 最新问题" href="/feeds/questions">
<link rel="alternate" type="application/atom+xml" title="SegmentFault 最新文章" href="/feeds/blogs">



    <link rel="stylesheet" href="//static.segmentfault.com/build/global/css/global.fb60b9fe.css" />
            <link rel="stylesheet" href="//static.segmentfault.com/build/blog/css/blog_all.40820a75.css" />
        <link rel="stylesheet" href="//static.segmentfault.com/build/global/css/responsive.2e038079.css" />

<!--[if lt IE 9]>
    <link rel="stylesheet" href="//static.segmentfault.com/global/css/ie.css?" />
    <script src="//static.segmentfault.com/global/js/html5shiv.js?"></script>
    <script src="//static.segmentfault.com/global/js/respond.js?"></script>
<![endif]-->

</head>
<body class="blog-post">
<!--[if lt IE 9]>
    <div class="alert alert-danger topframe" role="alert">你的浏览器实在<strong>太太太太太太旧了</strong>，放学别走，升级完浏览器再说 <a target="_blank" class="alert-link" href="http://browsehappy.com">立即升级</a></div>
<![endif]-->



<div class="global-nav">
    <nav class="container nav">
        <div class="dropdown m-menu">
            <a href="javascript:void(0);" id="dLabel" class="visible-xs-block m-toptools" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <span class="glyphicon glyphicon-align-justify"></span>
                <span class="mobile-menu__unreadpoint"></span>
            </a>
            <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                <li class="mobile-menu__item"><a href="/">问答</a></li>
                <li class="mobile-menu__item"><a href="/blogs">文章</a></li>
                <li class="mobile-menu__item"><a href="/events">活动</a></li>
                <li class="mobile-menu__item"><a href="/tags">标签</a></li>
                <li class="mobile-menu__item"><a href="/users">榜单</a></li>
                <li class="mobile-menu__item"><a href="/sites">子站</a></li>
                            </ul>
        </div>

        <h1 class="logo"><a href="/">SegmentFault</a></h1>

                <a href="/user/login" class="visible-xs-block pull-right m-ask m-toptools"><span class="glyphicon glyphicon-log-in"></span></a>
        
        <form action="/search" class="header-search pull-left hidden-sm hidden-xs">
            <button type="submit" class="btn btn-link"><span class="sr-only">搜索</span><span class="glyphicon glyphicon-search"></span></button>
            <input id="searchBox" name="q" type="text" placeholder="输入关键字搜索" class="form-control" value="">
        </form>

        <ul class="menu list-inline pull-left hidden-xs">
            <li class="menu__item"><a href="/">问答</a></li>
            <li class="menu__item"><a href="/blogs">文章</a></li>
            <li class="menu__item"><a href="/events">活动</a></li>
            <li class="menu__item"><a href="/tags">标签</a></li>
            <li class="menu__item"><a href="/users">榜单</a></li>
            <li class="menu__item dropdown hoverDropdown">
                <a data-toggle="dropdown" href="/sites" class="more dropdownBtn">
                    &middot;&middot;&middot;<span class="sr-only">更多</span>
                </a>
                <ul class="dropdown-menu">
                    <li><a href="/sites">子站</a></li>
                                    </ul>
            </li>
        </ul>

        <ul class="opts pull-right list-inline hidden-xs">
                    <li class="opts__item">赶快加入吧 <a id="sfLogin" href="/user/login" class="SFLogin em ml10" onClick="_gaq.push(['_trackEvent', 'Button', 'Click', 'Login']);">立即登录</a></li>
                    </ul>
    </nav>
</div>

<div class="wrap">

    <div class="post-topheader">
        <div class="container">
            <div class="row">
                <div class="col-md-9">
                    <ol class="breadcrumb">
                        <li><a href="/blogs">文章</a></li>
                        <li><a href="/blog/wuxianglong">WuXianglong</a></li>
                        <li class="active">文章详情</li>
                    </ol>
                    <h1 class="h3 title" id="articleTitle" data-id="1190000002399119"><a href="/blog/wuxianglong/1190000002399119"> Python 的 defaultdict 模块和 namedtuple 模块(xianglong.me)</a></h1>
                    <div class="author" data-username="WuXianglong" data-userslug="wuxianglong" data-useravatar="http://static.segmentfault.com/global/img/user-128.png?14.3.24.1" >
                        <a href="/u/wuxianglong" class="mr5"><img class="avatar-24 mr10" src="http://static.segmentfault.com/global/img/user-128.png?14.3.24.1" alt="WuXianglong"><strong>WuXianglong</strong></a> <strong class="text-black mr10">66</strong>
                        2014年12月01日 发布
                                                                    </div>
                </div>
                <div class="col-md-3">
                    <ul class="widget-action--ver list-unstyled">
                        <li>
                                                                                            <button type="button" class="btn btn-success btn-sm" data-id="1190000002399119" id="sideLike">推荐</button>
                                                                                        <strong id="sideLiked">0</strong> 推荐
                        </li>
                        <li>
                                                                                            <button type="button" id="sideBookmark" class="btn btn-default btn-sm" data-id="1190000002399119" data-id="1190000002399119" data-type="article">收藏</button>
                                                                                        <strong id="sideBookmarked">7</strong> 收藏，<strong class="no-stress">426</strong> 浏览
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div><!-- end .post-topheader -->

    <div class="container mt30">
        <div class="row">
            <div class="col-xs-12 col-md-9 main">
                <div class="article fmt">
                    
<p>在Python中有一些内置的数据类型，比如int, str, list, tuple, dict等。Python的collections模块在这些内置数据类型的基础上，提供了几个额外的数据类型：namedtuple, defaultdict, deque, Counter, OrderedDict等，其中defaultdict和namedtuple是两个很实用的扩展类型。defaultdict继承自dict，namedtuple继承自tuple。</p>

<h2>一、defaultdict</h2>

<h3>1. 简介</h3>

<p>在使用Python原生的数据结构dict的时候，如果用d[key]这样的方式访问，当指定的key不存在时，是会抛出KeyError异常的。但是，如果使用defaultdict，只要你传入一个默认的工厂方法，那么请求一个不存在的key时， 便会调用这个工厂方法使用其结果来作为这个key的默认值。</p>

<p>defaultdict在使用的时候需要传一个工厂函数(function_factory)，defaultdict(function_factory)会构建一个类似dict的对象，该对象具有默认值，默认值通过调用工厂函数生成。</p>

<h3>2. 示例</h3>

<p>下面给一个defaultdict的使用示例：</p>

<pre><code>In [1]: from collections import defaultdict

In [2]: s = [('xiaoming', 99), ('wu', 69), ('zhangsan', 80), ('lisi', 96), ('wu', 100), ('yuan', 98), ('xiaoming', 89)]

In [3]: d = defaultdict(list)

In [4]: for k, v in s:
   ...:     d[k].append(v)
   ...:     

In [5]: d
Out[5]: defaultdict(&lt;type 'list'&gt;, {'lisi': [96], 'xiaoming': [99, 89], 'yuan': [98], 'zhangsan': [80], 'wu': [69, 100]})

In [6]: for k, v in d.items():
   ...:     print '%s: %s' % (k, v)
   ...:     
lisi: [96]
xiaoming: [99, 89]
yuan: [98]
zhangsan: [80]
wu: [69, 100]
</code></pre>

<p>对Python比较熟悉的同学可以发现defaultdict(list)的用法和dict.setdefault(key, [])比较类似，上述代码使用setdefault实现如下：</p>

<pre><code>s = [('xiaoming', 99), ('wu', 69), ('zhangsan', 80), ('lisi', 96), ('wu', 100), ('yuan', 98), ('xiaoming', 89)]
d = {}

for k, v in s:
    d.setdefault(k, []).append(v)
</code></pre>

<h3>3. 原理</h3>

<p>从以上的例子中，我们可以基本了defaultdict的用法，下面我们可以通过help(defaultdict)了解一下defaultdict的原理。通过Python console打印出的help信息来看，我们可以发现defaultdict具有默认值主要是通过<strong>missing</strong>方法实现的，如果工厂函数不为None，则通过工厂方法返回默认值，具体如下：</p>

<pre><code>def __missing__(self, key):
    # Called by __getitem__ for missing key
    if self.default_factory is None:
        raise KeyError((key,))
    self[key] = value = self.default_factory()
    return value
</code></pre>

<p>从上面的说明中，我们可以发现一下几个需要注意的地方：</p>

<ol>
<li><p><strong>missing</strong>方法是在调用<strong>getitem</strong>方法发现KEY不存在时才调用的，所以，defaultdict也只会在使用d[key]或者d.<strong>getitem</strong>(key)的时候才会生成默认值；如果使用d.get(key)是不会返回默认值的，会出现KeyError；</p></li>
<li>
<p>defaultdict主要是通过<strong>missing</strong>方法实现，所以，我们也可以通过实现该方法来生成自己的defaultdict，代码入下</p>

<pre><code>In [1]: class MyDefaultDict(dict):
   ...:     def __missing__(self, key):
   ...:         self[key] = 'default'
   ...:         return 'default'
   ...:     

In [2]: my_default_dict = MyDefaultDict()

In [3]: my_default_dict
Out[3]: {}

In [4]: print my_default_dict['test']
default

In [5]: my_default_dict
Out[5]: {'test': 'default'}
</code></pre>
</li>
</ol>
<h3>4. 版本</h3>

<p>defaultdict是在Python 2.5之后才加入的功能，在旧版本的Python中是不支持这个功能的，不过，知道了它的原理，我们可以自己实现一个defaultdict。</p>

<pre><code># http://code.activestate.com/recipes/523034/
try:
    from collections import defaultdict
except:
    class defaultdict(dict):

        def __init__(self, default_factory=None, *a, **kw):
            if (default_factory is not None and
                not hasattr(default_factory, '__call__')):
                raise TypeError('first argument must be callable')
            dict.__init__(self, *a, **kw)
            self.default_factory = default_factory

        def __getitem__(self, key):
            try:
                return dict.__getitem__(self, key)
            except KeyError:
                return self.__missing__(key)

        def __missing__(self, key):
            if self.default_factory is None:
                raise KeyError(key)
            self[key] = value = self.default_factory()
            return value

        def __reduce__(self):
            if self.default_factory is None:
                args = tuple()
            else:
                args = self.default_factory,
            return type(self), args, None, None, self.items()

        def copy(self):
            return self.__copy__()

        def __copy__(self):
            return type(self)(self.default_factory, self)

        def __deepcopy__(self, memo):
            import copy
            return type(self)(self.default_factory, copy.deepcopy(self.items()))

        def __repr__(self):
            return 'defaultdict(%s, %s)' % (self.default_factory, dict.__repr__(self))
</code></pre>

<h2>二、namedtuple</h2>

<p>namedtuple主要用来产生可以使用名称来访问元素的数据对象，通常用来增强代码的可读性，在访问一些tuple类型的数据时尤其好用。其实，在大部分时候你应该使用namedtuple替代tuple，这样可以让你的代码更容易读懂，更加pythonic。举个例子：</p>

<pre><code>from collections import namedtuple

# 变量名和namedtuple中的第一个参数一般保持一致，但也可以不一样
Student = namedtuple('Student', 'id name score')
# 或者 Student = namedtuple('Student', ['id', 'name', 'score'])

students = [(1, 'Wu', 90), (2, 'Xing', 89), (3, 'Yuan', 98), (4, 'Wang', 95)]

for s in students:
    stu = Student._make(s)
    print stu

# Output:
# Student(id=1, name='Wu', score=90)
# Student(id=2, name='Xing', score=89)
# Student(id=3, name='Yuan', score=98)
# Student(id=4, name='Wang', score=95)
</code></pre>

<p>在上面的例子中，Student就是一个namedtuple，它和tuple的使用方法一样，可以通过index直接取，而且是只读的。这种方式比tuple容易理解多了，可以很清楚的知道每个值代表的含义。</p>

<p>Over!</p>

                </div>

                                                
                <div class="clearfix">

                    <ul class="taglist--inline pull-left">
                                                <li class="tagPopup"><a class="tag" href="/t/python/blogs" data-toggle="popover" data-img="http://sfault-avatar.b0.upaiyun.com/378/252/3782524817-1040000000089534_huge100" data-placement="top" data-original-title="python" data-id="1040000000089534">python</a></li>
                                            </ul>

                    <ul class="pull-right article-operation list-inline">
                        <li><a href="#911" data-toggle="modal" data-target="#911" data-type="article" data-id="1190000002399119" data-typetext="文章">举报</a></li>
                                                                                                                                                                                    </ul>
                </div>

                <div class="text-center">
                                                        <button type="button" id="mainLike" data-id="1190000002399119" class="btn btn-success mr10">
                        0 推荐
                    </button>
                                    
                                    <button type="button" id="mainBookmark" data-type="article" data-id="1190000002399119" class="btn btn-default ">
                        收藏
                    </button>
                                </div>

                <ul class="list-unstyled text-muted mt30">
                                                            <li class="mt5">下一篇：<a href="/blog/wuxianglong/1190000002399134">Django运行方式及处理流程总结（xianglong.me）</a></li>
                                    </ul>

                <h2 class="h4 post-title">讨论区</h2>
                <ul class="widget-comments" id="comment-1190000002399119" data-id="1190000002399119">
            <li class="widget-comments__item hover-show" id="1050000002399142">
        <div class="votes widget-vote">
            <button class="like" data-id="1050000002399142" type="button" data-do="like" data-type="comment"></button>
            <span class="count">0</span>
        </div>
        <div class="comment-content wordbreak">
                        <div class="content fmt">
                
<p>转自我的博客：<a rel="nofollow" href="http://xianglong.me/article/learn-python-10-defaultdict-namedtuple/">http://xianglong.me/article/learn-python-10-defaultdict-namedtuple/</a></p>

            </div>
            <p class="comment-meta">
                <a href="/c/1050000002399142" class="text-muted">#1</a> <a href="/u/wuxianglong" class="commentUser" data-userid="1030000002398782" data-username="WuXianglong" data-userslug="" data-useravatar="http://static.segmentfault.com/global/img/user-40.png?14.3.24.1">
                    <strong>WuXianglong</strong>
                </a>
                &middot;
                2014年12月01日
                &middot;
                <a href="javascript:void(0);" class="commentReply" data-userid="1030000002398782" data-id="1050000002399142" data-username="WuXianglong">回复</a>

                <span class="pull-right commentTools hover-show-obj">
                                                            <a href="#911" class="ml10" data-toggle="modal" data-target="#911" data-type="comment" data-id="1050000002399142" data-typetext="评论" data-placement="top" title="举报">举报</a>
                </span>
            </p>
        </div>
    </li>
            <li class="widget-comments__item hover-show" id="1050000002404319">
        <div class="votes widget-vote">
            <button class="like" data-id="1050000002404319" type="button" data-do="like" data-type="comment"></button>
            <span class="count">0</span>
        </div>
        <div class="comment-content wordbreak">
                        <div class="content fmt">
                
<p>是否可以转载此文章到我的网站：www.itdiffer.com</p>

            </div>
            <p class="comment-meta">
                <a href="/c/1050000002404319" class="text-muted">#1</a> <a href="/u/qiwsir" class="commentUser" data-userid="1030000000392521" data-username="老齐Py" data-userslug="" data-useravatar="http://sfault-avatar.b0.upaiyun.com/151/769/1517698138-1030000000392521_medium40">
                    <strong>老齐Py</strong>
                </a>
                &middot;
                2014年12月03日
                &middot;
                <a href="javascript:void(0);" class="commentReply" data-userid="1030000000392521" data-id="1050000002404319" data-username="老齐Py">回复</a>

                <span class="pull-right commentTools hover-show-obj">
                                                            <a href="#911" class="ml10" data-toggle="modal" data-target="#911" data-type="comment" data-id="1050000002404319" data-typetext="评论" data-placement="top" title="举报">举报</a>
                </span>
            </p>
        </div>
    </li>
            <li class="widget-comments__item hover-show" id="1050000002405225">
        <div class="votes widget-vote">
            <button class="like" data-id="1050000002405225" type="button" data-do="like" data-type="comment"></button>
            <span class="count">0</span>
        </div>
        <div class="comment-content wordbreak">
                        <span>回复 <a href="/u/qiwsir" target="_blank">老齐Py</a>：</span>
                        <div class="content fmt">
                
<p>可以的。。</p>

            </div>
            <p class="comment-meta">
                <a href="/c/1050000002405225" class="text-muted">#1</a> <a href="/u/wuxianglong" class="commentUser" data-userid="1030000002398782" data-username="WuXianglong" data-userslug="" data-useravatar="http://static.segmentfault.com/global/img/user-40.png?14.3.24.1">
                    <strong>WuXianglong</strong>
                </a>
                &middot;
                2014年12月04日
                &middot;
                <a href="javascript:void(0);" class="commentReply" data-userid="1030000002398782" data-id="1050000002405225" data-username="WuXianglong">回复</a>

                <span class="pull-right commentTools hover-show-obj">
                                                            <a href="#911" class="ml10" data-toggle="modal" data-target="#911" data-type="comment" data-id="1050000002405225" data-typetext="评论" data-placement="top" title="举报">举报</a>
                </span>
            </p>
        </div>
    </li>
                        <a href="javascript:void(0);" class="comments showMoreComments" data-id="1190000002399119" data-target="#comment-1190000002399119">展开评论</a>
        <li class="widget-comments__form row hidden">
                                    <div class="col-md-12">
                    请先 <a class="commentLogin" href="javascript:void(0);">登录</a> 后评论
                </div>
            
    </li><!-- /.widget-comments__form -->
    </ul><!-- /.widget-comments -->



                                    <div class="widget-welcome-question mt20 mb20 hidden-xs widget-welcome">
    <div class="row">
        <div class="col-sm-12">
            <h2 class="title h4">不要错过 TA 的任何更新</h2>
            <p>如果这篇文章对你有帮助，记得点赞收藏哦，你的支持是我们的动力 ^___^</p>
        </div>
        <form id="user">
            <div class="col-sm-10">
                <div class="row">
                    <div class="col-sm-4 pr0">
                        <input type="text" class="form-control" placeholder="用户名" name="name" required>
                    </div>
                    <div class="col-sm-4 pr0">
                        <input type="text" class="form-control" placeholder="Email" name="mail" required>
                    </div>
                    <div class="col-sm-4 pr0">
                        <input type="password" class="form-control" placeholder="密码" name="password" required>
                    </div>
                </div>
            </div>
            <div class="col-sm-2">
                <button type="submit" class="btn btn-primary btn-block">注册</button>
            </div>
            <div class="col-sm-10 mt10 captcha-part" style="display:none;">
                <div class="row">
                    <div class="col-sm-4 pr0">
                        <input type="text" class="form-control" id="captcha" name="captcha" placeholder="请输入验证码" disabled required>
                    </div>
                    <div class="col-sm-4 pr0">
                        <a id="reloadCaptcha"  href="javascript:void(0)"><img src="" height="35" /></a>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>

                
            </div><!-- /.main -->


            <div class="col-xs-12 col-md-3 side">
                <div class="sfad-sidebar">
    <div class="sfad-item" data-adn="ad-981179" id="adid-981179">
    <button class="close" type="button" aria-hidden="true">&times;</button>
</div>

</div>


                                    <aside class="widget-welcome">
    <h2 class="h4 title">最专业的开发者社区</h2>
    <p>最前沿的技术问答，最纯粹的技术切磋。让你不知不觉中开拓眼界，提高技能，认识更多朋友。</p>
    <ul class="list-unstyled">
        <li><a href="/user/oauth/google" class="3rdLogin btn btn-default btn-block btn-sn-google"><span class="icon-sn-google"></span> Google 账号登录</a></li>
        <li><a href="/user/oauth/weibo" class="3rdLogin btn btn-default btn-block btn-sn-weibo"><span class="icon-sn-weibo"></span> 微博账号登录</a></li>
    </ul>
</aside>

                
                
                <div class="widget-box no-border">
                    <h2 class="h4 widget-box__title">相似文章</h2>
                    <ul class="widget-links list-unstyled">
                                                    <li class="widget-links__item"><a title="【Python】Python环境的搭建" href="/blog/meteor/1190000000517641">【Python】Python环境的搭建</a>
                                    <small class="text-muted">
                                                                                621 浏览
                                    </small>
                            </li>
                                                    <li class="widget-links__item"><a title="python bad interpreter " href="/blog/dong_jian/1190000002507127">python bad interpreter </a>
                                    <small class="text-muted">
                                                                                59 浏览
                                    </small>
                            </li>
                                                    <li class="widget-links__item"><a title="Hadoop Streaming中Python脚本里面不写 #!/usr/bin/python的后果" href="/blog/riodream/1190000000659196">Hadoop Streaming中Python脚本里面不写 #!/usr/bin/python的后果</a>
                                    <small class="text-muted">
                                                                                212 浏览
                                    </small>
                            </li>
                                                    <li class="widget-links__item"><a title="Python学习资源收录" href="/blog/watermelon/1190000000625612">Python学习资源收录</a>
                                    <small class="text-muted">
                                                                                349 浏览
                                    </small>
                            </li>
                                                    <li class="widget-links__item"><a title="从 python 到 Scala 简明教程" href="/blog/timger/1190000000660764">从 python 到 Scala 简明教程</a>
                                    <small class="text-muted">
                                                                                    3 收藏，
                                                                                311 浏览
                                    </small>
                            </li>
                                                    <li class="widget-links__item"><a title="[小帖士] 千万不要把Python脚本的第一行写成“#! /usr/bin/python”！" href="/blog/shamiao/1190000000361999">[小帖士] 千万不要把Python脚本的第一行写成“#! /usr/bin/python”！</a>
                                    <small class="text-muted">
                                                                                    11 收藏，
                                                                                3.2k 浏览
                                    </small>
                            </li>
                                                    <li class="widget-links__item"><a title="python之UTF-8解决方案" href="/blog/weakish/1190000000337296">python之UTF-8解决方案</a>
                                    <small class="text-muted">
                                                                                    10 收藏，
                                                                                1.1k 浏览
                                    </small>
                            </li>
                                                    <li class="widget-links__item"><a title="使用sublime运行python程序" href="/blog/bugbug/1190000000488518">使用sublime运行python程序</a>
                                    <small class="text-muted">
                                                                                453 浏览
                                    </small>
                            </li>
                                                    <li class="widget-links__item"><a title="Python操作Window窗口方法" href="/blog/watermelon/1190000000607268">Python操作Window窗口方法</a>
                                    <small class="text-muted">
                                                                                400 浏览
                                    </small>
                            </li>
                                                    <li class="widget-links__item"><a title="Python执行的一点理解" href="/blog/mrguu/1190000000378406">Python执行的一点理解</a>
                                    <small class="text-muted">
                                                                                434 浏览
                                    </small>
                            </li>
                                            </ul>
                </div>



                <div class="widget-share" data-text="Python 的 defaultdict 模块和 namedtuple 模块(xianglong.me)">
</div>


            </div><!-- /.side -->
        </div>
    </div>
</div>

<div id="shareToWeiboModal" class="modal" >
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">
                    <span aria-hidden="true">×</span><span class="sr-only">Close</span>
                </button>
                <h4 class="modal-title">分享</h4>
            </div>
            <div class="modal-body">
                <p class="sfModal-content">
                    分享到微博？
                </p>
            </div>
            <div class="modal-footer ">
                <button type="button" class="btn btn-default dont-likeweibo" data-dismiss="modal">取消并且不再弹出</button>
                <a href="" id="shareLink" class="btn btn-primary done-btn" target="_blank" onclick="$('#shareToWeiboModal').modal('hide')">分享</a>
            </div>
        </div>
    </div>
</div>


<div id="911" class="modal widget-911">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title">举报<span class="type-911">问题</span></h4>
            </div>
            <div class="modal-body">
                <p><strong class="required">举报理由：</strong></p>
                <div id="reportDescription">
                <div class="radio-911 radio all">
                    <label>
                        <input type="radio" name="descRadio" value="垃圾广告">
                        垃圾广告
                    </label>
                </div>
                <div class="radio-911 radio all">
                    <label>
                        <input type="radio" name="descRadio" value="带有人身攻击、辱骂、仇恨等违反条款的内容">
                        带有人身攻击、辱骂、仇恨等违反条款的内容
                    </label>
                </div>
                <div class="radio-911 radio question-only">
                    <label>
                        <input type="radio" name="descRadio" value="与已有问题重复">
                        与已有问题重复
                    </label>
                </div>
                <div class="radio-911 radio question-only">
                    <label>
                        <input type="radio" name="descRadio" value="内容质量差，或不适合在本网站出现">
                        内容质量差，或不适合在本网站出现
                    </label>
                </div>
                <div class="radio-911 radio answer-only">
                    <label>
                        <input type="radio" name="descRadio" value="答非所问，不符合答题要求">
                        答非所问，不符合答题要求
                    </label>
                </div>
                <div class="radio-911 radio all" id="btwRadio">
                    <label>
                        <input type="radio" name="descRadio" value="">
                        其他原因（请补充说明）
                    </label>
                </div>
                <div class="hide btw">
                    <p class="mt20"><strong>补充说明：</strong></p>
                    <textarea class="form-control" rows="3" autocomplete="false" id="911Desc"></textarea>
                </div>
                                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
                <button type="button" id="911Submit" class="btn btn-primary">提交</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<footer id="footer">
<div class="container">
    <div class="row hidden-xs">
        <dl class="col-sm-2 site-link">
            <dt>网站相关</dt>
            <dd><a href="/about">关于我们</a></dd>
            <dd><a href="/tos">服务条款</a></dd>
            <dd><a href="/faq">帮助中心</a></dd>
            <dd><a href="/repu">声望与权限</a></dd>
            <dd><a href="/markdown">编辑器语法</a></dd>
            <dd><a href="http://weekly.segmentfault.com/">每周精选</a></dd>
        </dl>
        <dl class="col-sm-2 site-link">
            <dt>联系合作</dt>
            <dd><a href="/contact">联系我们</a></dd>
            <dd><a href="/hiring">加入我们</a></dd>
            <dd><a href="/link">合作伙伴</a></dd>
            <dd><a href="/press">媒体报道</a></dd>
            <dd><a href="http://0x.segmentfault.com">建议反馈</a></dd>
            <dd><a href="http://pan.baidu.com/share/link?shareid=604288&uk=839272106" target="_blank">Logo 下载</a></dd>
        </dl>
        <dl class="col-sm-2 site-link">
            <dt>常用链接</dt>
            <dd><a href="/giveaways">开发者福利</a></dd>
            <dd><a href="http://mirrors.segmentfault.com/" target="_blank">文档镜像</a></dd>
            <dd>订阅：<a href="/feeds">问答</a> / <a href="/feeds/blogs">文章</a></dd>
            <dd><a href="http://segmentfault.com/events?category=4">黑客马拉松</a></dd>
            <dd><a href="http://zs.segmentfault.com/" target="_blank">一起涨姿势</a></dd>
            <dd><a href="http://namebeta.com/" target="_blank">域名搜索注册</a></dd>
        </dl>
        <dl class="col-sm-2 site-link">
            <dt>关注我们</dt>
            <dd><a href="http://twitter.com/segment_fault" target="_blank">Twitter</a></dd>
            <dd><a href="http://page.renren.com/699146294" target="_blank">人人网</a></dd>
            <dd><a href="http://weibo.com/segmentfault" target="_blank">新浪微博</a></dd>
            <dd><a href="/giveaways" target="_blank">开发者福利</a></dd>
            <dd><a href="http://blog.segmentfault.com/devblog" target="_blank">开发日志</a></dd>
        </dl>
        <dl class="col-sm-4 site-link" id="license">
            <dt>内容许可</dt>
            <dd>除特别说明外，用户内容均采用 <a rel="license" target="_blank" href="http://creativecommons.org/licenses/by-sa/3.0/cn/">知识共享署名-相同方式共享 3.0 中国大陆许可协议</a> 进行许可</dd>
            <dd>本站由 <a target="_blank" href="http://qingcloud.com/">青云 QingCloud</a> 提供云计算服务<br><a target="_blank" href="https://www.upyun.com/?utm_source=segmentfault&utm_medium=link&utm_campaign=upyun&md=segmentfault">又拍云</a> 提供 CDN 存储服务</dd>
        </dl>
    </div>
    <div class="copyright">
        Copyright &copy; 2011-2015 SegmentFault. 当前呈现版本 <a href="http://status.segmentfault.com/">14.11.22</a><br><a href="http://www.miibeian.gov.cn/" rel="nofollow">京 ICP 备 12004937 号</a>, 京公网安备 110108008332 号
    </div>
</div>
</footer>

<div id="fixedTools" class="hidden-xs hidden-sm">
  <a id="backtop" class="hidden border-bottom" href="#">回顶部</a>
  <div class="qrcodeWraper">
    <a><span class="glyphicon glyphicon-qrcode"></span></a>
    <img id="qrcode" class="border" src="//static.segmentfault.com/build/global/img/sf-wechat.27acd26c.png">
  </div>
</div>


<script id="loginModal" type="text/template">
<div class="row bg-white login-modal">
    <div class="col-md-4 col-sm-12 col-md-push-7 login-wrap">
        <h1 class="h4 text-muted login-title">用户登录</h1>
        <form action="/api/user?do=login" method="POST" role="form" class="mt30">
            <div class="form-group">
                <label class="control-label">Email</label>
                <input type="email" class="form-control" name="mail" required placeholder="hello@segmentfault.com">
            </div>
            <div class="form-group">
                <label class="control-label">密码</label>
                <input type="password" class="form-control" name="password" required placeholder="密码">
            </div>
            <div class="form-group clearfix">
                <div class="checkbox pull-left">
                    <label><input name="remember" type="checkbox" value="1" checked> 记住登录状态</label>
                </div>
                <button type="submit" class="btn btn-primary pull-right pl20 pr20">登录</button>
            </div>
        </form>
        <p class="h4 text-muted visible-xs-block h4">快速登录</p>
        <div class="widget-login mt30">
            <p class="text-muted mt5 mr10 pull-left hidden-xs">快速登录</p>
            <a href="/user/oauth/google" class="btn pl5 pr5 mb5 btn-default btn-sm btn-sn-google"><span class="icon-sn-google"></span> <strong class="visible-xs-inline">Google 账号</strong></a>
            <a href="/user/oauth/github" class="btn pl5 pr5 mb5 btn-default btn-sm btn-sn-github"><span class="icon-sn-github"></span> <strong class="visible-xs-inline">Github 账号</strong></a>
            <a href="/user/oauth/weibo" class="btn pl5 pr5 mb5 btn-default btn-sm btn-sn-weibo"><span class="icon-sn-weibo"></span> <strong class="visible-xs-inline">新浪微博账号</strong></a>
            <a href="/user/oauth/qq" class="btn pl5 pr5 mb5 btn-default btn-sm btn-sn-qq"><span class="icon-sn-qq"></span> <strong class="visible-xs-inline">QQ 账号</strong></a>
            <button type="button" class="btn mb5 btn-default btn-sm btn-sn-more" id="loginShowMore">...</button>
            <a href="/user/oauth/twitter" class="btn pl5 pr5 mb5 btn-default btn-sn-twitter btn-sm hidden"><span class="icon-sn-twitter"></span> <strong class="visible-xs-inline">Twitter 账号</strong></a>
            <a href="/user/oauth/facebook" class="btn pl5 pr5 mb5 btn-default btn-sn-facebook btn-sm hidden"><span class="icon-sn-facebook"></span> <strong class="visible-xs-inline">Facebook 账号</strong></a>
            <a href="/user/oauth/douban" class="btn pl5 pr5 mb5 btn-default btn-sn-douban btn-sm hidden"><span class="icon-sn-douban"></span> <strong class="visible-xs-inline">豆瓣账号</strong></a>
        </div>
    </div>
    <div class="login-vline hidden-xs hidden-sm"></div>
    <div class="col-md-4 col-md-pull-3 col-sm-12 login-wrap">
        <h1 class="h4 text-muted login-title">创建新账号</h1>
        <form action="/api/user?do=register" method="POST" role="form" class="mt30">
            <div class="form-group">
                <label for="name" class="control-label">用户名</label>
                <input type="text" class="form-control" name="name" required placeholder="字母、数字等，用户名唯一">
            </div>
            <div class="form-group">
                <label for="mail" class="control-label">Email</label>
                <input type="email" class="form-control" name="mail" required placeholder="hello@segmentfault.com">
            </div>
            <div class="form-group">
                <label for="password" class="control-label">密码</label>
                <input type="password" class="form-control" name="password" required placeholder="不少于 6 位">
            </div>
            <div class="form-group" style="display:none;">
                <label class="required control-label">验证码</label>
                <input type="text" class="form-control" id="captcha" name="captcha" placeholder="请输入下方的验证码">
                <div class="mt10"><a id="loginReloadCaptcha"  href="javascript:void(0)"><img src="/user/captcha?w=240&h=50" class="captcha" width="240" height="50" /></a></div>
            </div>
            <div class="form-group clearfix">
                <div class="checkbox pull-left">
                    同意并接受<a href="/tos" target="_blank">《服务条款》</a>
                </div>
                <button type="submit" class="btn btn-primary pl20 pr20 pull-right">注册</button>
            </div>
        </form>
    </div>
</div>
<div class="text-center text-muted mt30">
    <a href="/user/register" class="mr5">注册账号</a> &middot; <a href="/user/forgot" class="ml5">找回密码</a>
</div>
</script>


<script>
    (function (w) {
        w.SF = {
            staticUrl: "//static.segmentfault.com",
        };
        w.SF.token = (function () {
    var _n4LP4ut = //'E'
'ec'+'2'//'uEN'
+''///*'Ae'*/'Ae'
+''///*'lvj'*/'lvj'
+//'9XW'
'cd'+'edc'//'i4p'
+//'y'
'4'+//'gn'
'25'+'G'//'G'
+//'mrt'
'00'+//'K'
'bd3'+'055'//'E8'
+//'T'
'08b'+//'B9'
'e'+'e8'//'30G'
+'664'//'a'
+'6d'//'3'
+//'lC'
'5'+'4'//'qB'
, _nkAFdOF = [[11,12]];

    for (var i = 0; i < _nkAFdOF.length; i ++) {
        _n4LP4ut = _n4LP4ut.substring(0, _nkAFdOF[i][0]) + _n4LP4ut.substring(_nkAFdOF[i][1]);
    }

    return _n4LP4ut;
})();
    })(window);
</script>

    <script src="//static.segmentfault.com/build/3rd/assets.ce4fe392.js"></script>
            <script src="//static.segmentfault.com/build/blog/js/post.23e6a947.js"></script>
    
<script>
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-918487-8']);
  _gaq.push(['_trackPageview']);
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-918487-8', 'auto');
  ga('send', 'pageview');

</script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?e23800c454aa573c0ccb16b52665ac26";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

<script src="http://cbjs.baidu.com/js/m.js"></script>
<script>
if(typeof BAIDU_CLB_fillSlotAsync === 'function') {
    BAIDU_CLB_fillSlotAsync('981183','adid-981183');
    BAIDU_CLB_fillSlotAsync('981184','adid-981184');
    BAIDU_CLB_fillSlotAsync('981694','adid-981694');
    BAIDU_CLB_fillSlotAsync('981179','adid-981179');
}
</script>


</body>
</html>
