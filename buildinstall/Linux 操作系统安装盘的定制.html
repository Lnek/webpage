<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

	


<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN" xml:lang="zh-CN">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<title>Linux 操作系统安装盘的定制</title>
<link rel="schema.DC" href="http://purl.org/DC/elements/1.0/"/>
<link rel="SHORTCUT ICON" href="//www.ibm.com/favicon.ico"/>
<meta name="DC.Rights" content="© Copyright IBM Corporation 2005"/>
<meta name="Keywords" content="Linux, RPM, Linux 操作系统安装盘, RedHat Linux, tttlca"/>
<meta name="DC.Date" scheme="iso8601" content="2005-03-01"/>
<meta name="Source"  content="v17 delivery:developerWorks"/>
<meta name="Security" content="Public"/>
<meta name="Abstract" content="本文阐述如何以一个现有的 RedHat Linux系统安装盘为蓝本，定制符合需要的 Linux 系统安装盘。"/>
<meta name="Description" content="本文阐述如何以一个现有的 RedHat Linux系统安装盘为蓝本，定制符合需要的 Linux 系统安装盘。"/>
<meta name="IBM.Effective" scheme="W3CDTF" content="2005-03-01"/>
<meta name="Owner" content="developerWorks/China/IBM"/>
<meta name="DC.Language" scheme="rfc1766" content="zh-CN"/>
<meta name="IBM.SpecialPurpose" content="SP001"/>
<meta name="IBM.Country" content="CN"/>
<meta name="Robots" content="index,follow"/>
<meta name="DC.Type" scheme="IBM_ContentClassTaxonomy" content="CT316" />
<meta name="DC.Subject" scheme="IBM_SubjectTaxonomy" content="SWGC0" />
<meta name="dW.ContentArea" content="2" />
<meta name="dW.Topic" content="82,444" />
<!-- META_INCLUDE -->
<meta scheme="IBM_WTMCategory" name="IBM.WTMCategory" content="SOFDCLNXCN" />

<!-- HEADER_SCRIPTS_AND_CSS_INCLUDE -->
<link href="//1.www.s81c.com/common/v17/css/www.css" rel="stylesheet" title="www"  type="text/css"/>
<link href="//1.www.s81c.com/common/v17/css/country/cnzh.css" rel="stylesheet" title="www" type="text/css">    

<!-- Masthead/footer -->
<link href="//dw1.s81c.com/developerworks/css/dw-mf/v17/dw-mfN.css" media="screen,projection" rel="stylesheet" title="www" type="text/css"/>
<link href="//dw1.s81c.com/developerworks/css/v17/dw-article-6.css" rel="stylesheet" title="www" type="text/css"/>

<link href="//dw1.s81c.com/developerworks/css/v17/dw-common-features.css" rel="stylesheet" title="www" type="text/css"/>
<link href="//dw1.s81c.com/developerworks/css/v17/dw-local-site-v17-N.css" media="screen,projection" rel="stylesheet" title="www" type="text/css"/>
<script type="text/javascript" src="//1.www.s81c.com/common/js/dojo/www.js">//</script>
<script type="text/javascript" src="//dw1.s81c.com/developerworks/js/v17/dw-www.js">//</script>

<script type="text/javascript">
//  ibmweb.config.set({ sbs: { enabled: false }});
</script>
<!-- LEADSPACE_STYLES -->


</head>

<body id="ibm-com">

	<div id="ibm-top" class="ibm-landing-page">

<!-- MASTHEAD_BEGIN -->
<!-- MASTHEAD_BEGIN -->
<div id="ibm-masthead">

    <!-- TOP ROW -->    
	<div id="dw-masthead-top-row">
		<ul id="ibm-mast-options-dw" role="toolbar" class="cn">
		<li role="presentation" id="dw-mast-top-4">
				<a href="http://www.ibm.com/developerworks/cn/"><img src="//dw1.s81c.com/developerworks/i/mf/dwn-dw-badge.png" width="43" height="22" alt="dW" aria-label="dW" /></a></li>
			<li role="presentation" id="dw-mast-top-0">
				<div><a class="dw-mf-noscript" href="#" title="登录（或注册）需启用 JavaScript" role="button" tabindex="0">登录 (或注册)</a></div>
			</li>
			<li role="presentation" id="dw-mast-top-1">
				<div><a href="#SELECTLANG" role="button">中文</a></div>
			</li>
			<li role="presentation" id="dw-mast-top-3">
				<a role="button" href="http://www.ibm.com">IBM</a>
			</li>
			<li role="presentation" id="dw-mast-top-2" class="dw-mf-hide">
				<a href="#">[userid]</a>
			</li>
		</ul>
	</div>

    <!-- TOP ROW SLIDER -->
	<div id="ibm-my-menu-dw" style="display:none">
        <!-- Sign-in -->
		<div id="signin_div" class="dw-mast-columns" role="group">
			<div class="dw-mast-col-1-1">
				<div id="dw-mast-sso">
					<div id="signin_error_mf" class="no-display"></div>
					<div id="dw-mast-sso-form">
						<form id="sForm_mf" action="" method="post" name="sForm_name_mf" onsubmit="return false;">
							<div id="dw-mast-sso-id" class="dw-mast-sso-id-cn">
								<label for="ibmid_mf">IBM ID:</label>
								<input id="ibmid_mf" value="" name="ibmid_name_mf" maxlength="100"
								    onkeypress="dwsi.siInst.handleEP(event,this.form,'mf');" type="text" />
							</div>
							<div id="dw-mast-sso-pw" class="dw-mast-sso-pw-cn">
								<label for="pw_mf">密码：</label>
								<input id="pw_mf" value="" name="pw_name_mf" maxlength="100"
								    onkeypress="dwsi.siInst.handleEP(event,this.form,'mf');" type="password" />
							</div>
							<div id="dw-mast-sso-target" class="dw-mast-sso-target-cn">
								<p class="dw-mf-perm-box">
									<input id="perm_mf" name="perm_name_mf" type="checkbox"><label for="perm_mf"> 保持登录。</label></input>
								</p>
							</div>					
							<div id="dw-mast-sso-terms">
								<p class="dw-mast-sso-terms-cn">单击提交则表示您同意developerWorks 的条款和条件。 <a
								    href="//www.ibm.com/developerworks/community/terms?lang=zh">查看条款和条件</a>.</p>
									</div>
							<div>
								<input class="dw-mf-submit-btn-cn" name="ibm_submit_name_mf" value="提交"
								    onclick="dwsi.siInst.signin('mf');return false;" type="submit" />
							</div>
						</form>
					</div>
					<div id="dw-mast-sso-update">
						<div id="dw-mast-sso-update-id">
							<ul>
								<li><a href="#" onclick="(function ()
								    {window.location='//www.ibm.com/developerworks/dwwi/DWAuthRouter?m=reg&amp;lang=zh_CN&amp;d='+encodeURIComponent(location.href);})();">需要一个 IBM ID？</a></li>
								<li><a href="//www.ibm.com/developerworks/dwwi/jsp/WSHelp.jsp?lang=zh_CN">忘记 IBM ID？</a></li>
							</ul>
						</div>
						<div id="dw-mast-sso-update-pw">
							<ul class="dw-mf-pwupdate">
								<li><a href="#" onclick="(function ()
								    {window.location='https://www.ibm.com/account/profile?page=forgot&amp;lang=zh_CN&amp;appname=ibm&amp;required=null&amp;d='+encodeURIComponent(dwsi.siInst.getAuthUrl())+'%3Fm%3Dloginpage%26lang%3Den_US%26d%3D'+encodeURIComponent(location.href);})();">忘记密码？</a></li>
								<li><a href="#" onclick="(function ()
								    {window.location='https://www.ibm.com/account/profile?page=chpw&amp;lang=zh_CN&amp;appname=ibm&amp;required=null&amp;d='+encodeURIComponent(location.href);})();">更改您的密码</a></li>
							</ul>
						</div>
					</div>
					<div id="dw-mast-sso-text">
						<p>这是您第一次登陆到
						    developerWorks，已经自动为您创建了您的概要文件。 <strong>选择您概要文件中可以公开的信息的信息（如姓名、国家/地区，以及公司），这些信息同时也会与您所发布的内容相关联。 </strong>您可以随时更新您的 IBM 账号。</p>
						<p class="dw-mf-secure-cn">所有提交的信息确保安全。</p>
					</div>
				</div>
				<div id="dw-mast-dname" class="dw-mf-hide">
					<p>当您初次登录到 developerWorks 时，将会为您创建一份概要信息，您需要指定一个昵称。您的昵称将和您在 developerWorks 发布的内容显示在一起。</p><p><strong>昵称长度在 3 至 31 个字符之间</strong>。 您的昵称在 developerWorks 社区中必须是唯一的，并且出于隐私保护的原因，不能是您的电子邮件地址。</p>
					<div id="signin_dname_error_mf" class="no-display"></div>
					<div id="dw-mast-dname-form"  class="dw-mast-dname-form-cn">
						<form id="dForm_mf" action="" method="post" name="dForm_name_mf" onsubmit="return false;">
							<div id="dw-mast-dname-mf">
								<label for="dname_mf">昵称：</label>
								<input id="dname_mf" name="dname_name_mf" maxlength="31" size="25" value=""
								    onkeypress="dwsi.siInst.handleEP(event,this.form,'mf');" type="text" />
							</div>
							<div id="dw-mast-dname-terms">
								<p class="dw-mast-dname-terms-cn">单击<strong>提交</strong>则表示您同意developerWorks
								    的条款和条件。 <a href="//www.ibm.com/developerworks/community/terms?lang=zh">查看条款和条件</a>.</p>
									</div>
							<div>
								<input class="dw-mf-submit-btn-cn" name="dname_submit_name_mf" value="提交"
								    onclick="dwsi.siInst.signin('mf');return false;" type="submit" />
							</div>
						</form>								
					</div>
					<div id="dw-mast-dname-secure">
						<p class="dw-mf-secure-cn">所有提交的信息确保安全。</p>
					</div>
				</div>
				<div id="dw-mast-auth" class="dw-mf-hide">
					<div>
						<h2>developerWorks 社区:</h2>
                		<ul>
							<li><a id="dw-mast-top-0-0" href="//www.ibm.com/developerworks/community/homepage?lang=zh">我的首页</a></li>						    
							<li><a
							    href="//www.ibm.com/developerworks/community/profiles/html/myProfileView.do?lang=zh">我的概要信息</a></li>
							<li><a
							    href="//www.ibm.com/developerworks/community/groups/service/html/mycommunities?lang=zh">我的社区</a></li>
			                 <li><a href="/developerworks/community/news/?lang=zh">设置</a></li>
										    
						</ul>     
					</div>
					
					<div class="dw-mast-more">
						<ul class="ibm-link-list">
							<li><a class="dw-more-link" href="#" onclick="dwsi.siInst.signOut(); return false;"><strong>退出</strong></a></li>
						</ul>
					</div>
				</div>								
			</div>		
		</div>
        <!-- Language selector --> 
		<div id="lang_div" class="dw-mast-columns" role="group">
			<div class="dw-mast-col-2-1">
				<h2>选择语言：</h2>
				<ul>
					<li><a id="dw-mast-top-1-0" href="http://www.ibm.com/developerworks/" lang="en">English</a></li>
					<li><a href="http://www.ibm.com/developerworks/cn/">中文</a></li>
					<li><a href="http://www.ibm.com/developerworks/jp/" lang="ja">日本語</a></li>
					<li><a href="http://www.ibm.com/developerworks/ru/" lang="ru">Русский</a></li>
				</ul>
			</div>
			<div class="dw-mast-col-2-2">
				<ul>
					<li><a href="http://www.ibm.com/developerworks/br/" lang="pt">Português (Brasil)</a></li>
					<li><a href="http://www.ibm.com/developerworks/ssa/" lang="es">Español</a></li>
					<li><a href="http://www.ibm.com/developerworks/vn/" lang="vi">Việt</a></li>
				</ul>
			</div>
		</div>
		<div id="empty_div" class="dw-mast-columns" role="group"><!-- Authenticated --></div>		
		<!-- IBM -->
		<div id="ibmhome_div" class="dw-mast-columns" role="group">
			<div class="dw-mast-col-2-1">
				<ul>
					<li><a id="dw-mast-top-3-0" href="http://www.ibm.com/cn/zh/">IBM 主页</a></li>
					<li><a href="http://www.ibm.com/solutions/cn/zh/">解决方案</a></li>
					<li><a href="http://www.ibm.com/software/cn/">软件</a></li>
				</ul>
			</div>
			<div class="dw-mast-col-2-2 dw-mast-ibm">
				<ul>
							<li><a href="http://www.ibm.com/support/cn/zh/">支持门户</a></li>
							<li><a href="http://www.ibm.com/support/documentation/cn/zh/">产品文档</a></li>
							<li><a href="http://www.ibm.com/redbooks/">Redbooks（英文）</a></li>
				</ul>
			</div>	
		</div>		
	</div>
		
    <!-- BOTTOM ROW -->
	<div id="ibm-universal-nav-dw" aria-label="Site map">
		<ul id="ibm-unav-links-dw">
			<li id="ibm-unav-home-dwlogo">
				<a href="http://www.ibm.com/developerworks/cn/"><img src="//dw1.s81c.com/developerworks/i/mf/dwn-dw-wordmark.png" width="225" height="28" alt="developerWorks®" /></a>
			</li>
		</ul>
		<ul id="ibm-menu-links-dw" class="ibm-menu-links-dw-cn" role="toolbar" aria-label="Site map">
			<li id="dw-mast-nav-0" role="presentation"><a
			    href="http://www.ibm.com/developerworks/cn/topics/" role="button" tabindex="0">技术主题</a></li>
			<li id="dw-mast-nav-1" role="presentation"><a
			    href="http://www.ibm.com/developerworks/cn/downloads/" role="button">软件下载</a></li>
			<li id="dw-mast-nav-2" role="presentation"><a
			    href="http://www.ibm.com/developerworks/community/?lang=zh" role="button">社区</a></li>
			<li id="dw-mast-nav-3" role="presentation"><a href="https://www.ibm.com/developerworks/community/groups/service/html/communityview?communityUuid=6d7f9e5d-5f89-4767-a006-a81b8d186370&amp;lang=zh" role="button">技术讲座</a></li>
		</ul>
		<form id="ibm-search-form" action="//www.ibm.com/search/csass/search/" method="get" name="form1">
			<input type="hidden" name="sn" value="dw" />
			<input type="hidden" name="lang" value="zh" />
			<input type="hidden" name="cc" value="CN" />
			<input type="hidden" name="en" value="utf" />
			<input type="hidden" name="hpp" value="20" />
			<input type="hidden" name="dws" value="cndw" />
		    <input type="hidden" name="lo" value="zh" />
			<p>
				<label for="q"><img alt="搜索 developerWorks" height="1" width="1" src="//dw1.s81c.com/i/c.gif" /></label>
				<input type="text" value="搜索 developerWorks" name="q" maxlength="100" id="q"/>
				<input type="submit" id="ibm-search" class="ibm-btn-search ibm-btn-search-cn" name="Search" value="搜索" />
			</p>
		</form>
	</div>
    
	<!-- BOTTOM ROW SLIDER -->
	<div id="ibm-common-menu-dw">
		<!-- Technical topics category -->
		<div id="techtops_div" class="dw-mast-columns" role="group">
			<div class="dw-mast-col-5-1">
				<h2><a href="http://www.ibm.com/developerworks/cn/topics/">技术主题</a></h2>
				<ul role="menu">
					
					<li role="menuitem"><a id="dw-mast-nav-0-0" href="http://www.ibm.com/developerworks/cn/aix/">AIX and UNIX</a></li>
					<li role="menuitem"><a href="http://www.ibm.com/developerworks/cn/bigdata/">Big data</a></li>
					<li role="menuitem"><a href="http://www.ibm.com/developerworks/cn/cloud/">Cloud computing</a></li>
					<li role="menuitem"><a href="http://www.ibm.com/developerworks/cn/agile/">DevOps</a></li>
					
				</ul>     
			</div>
			<div class="dw-mast-col-5-2">
				<ul role="menu">
					<li role="menuitem"><a href="http://www.ibm.com/developerworks/cn/ibmi/">IBM i</a></li>
					<li role="menuitem"><a href="http://www.ibm.com/developerworks/cn/data/">Information
					    management</a></li>
					<li role="menuitem"><a href="http://www.ibm.com/developerworks/cn/java/">Java technology</a></li>
					<li role="menuitem"><a href="http://www.ibm.com/developerworks/cn/linux/">Linux</a></li>
					
				</ul>
			</div>
			<div class="dw-mast-col-5-3">
				<ul role="menu">
					<li role="menuitem"><a href="http://www.ibm.com/developerworks/cn/lotus/">Lotus</a></li> 
				    <li role="menuitem"><a href="http://www.ibm.com/developerworks/cn/mobile/">Mobile development</a></li> 
					<li role="menuitem"><a href="http://www.ibm.com/developerworks/cn/opensource/">Open source</a></li>
					<li role="menuitem"><a href="http://www.ibm.com/developerworks/cn/rational/">Rational</a></li>
					<!--<li role="menuitem"><a href="http://www.ibm.com/developerworks/cn/webservices/">SOA and web services</a></li>-->
					
					

				</ul>
			</div>
			<div class="dw-mast-col-5-4">
				<ul role="menu">
				<li role="menuitem"><a href="http://www.ibm.com/developerworks/cn/social/">Social Business</a></li>
				<li role="menuitem"><a href="http://www.ibm.com/developerworks/cn/web/">Web development</a></li>
				<li role="menuitem"><a
					    href="http://www.ibm.com/developerworks/cn/websphere/">WebSphere</a></li>
				<!--<li role="menuitem"><a href="http://www.ibm.com/developerworks/cn/xml/">XML</a></li>-->
				</ul>
			</div>
			<div class="dw-mast-col-5-5">
				<ul role="menu">
					<li role="menuitem"><a href="http://www.ibm.com/developerworks/cn/library/"><strong>文档库</strong></a></li>
					<li role="menuitem"><a href="http://www.ibm.com/developerworks/cn/products/"><strong>产品 A - Z</strong></a></li>
				</ul>
			</div>  
		</div>
		<!-- Evaluation software category -->
		<div id="evalsoft_div" class="dw-mast-columns">
			<div class="dw-mast-col-2-1">
				<h2><a id="dw-mast-nav-1-0" href="http://www.ibm.com/developerworks/cn/downloads/">软件下载</a></h2>
				<ul role="menu">
					<li role="menuitem"><a href="http://www.ibm.com/developerworks/cn/downloads/#ba">Big data</a></li>
					<li role="menuitem"><a href="http://www.ibm.com/developerworks/cn/downloads/#data">Information management</a></li>
					<li role="menuitem"><a href="http://www.ibm.com/developerworks/cn/downloads/#lotus">Lotus</a></li>
					</ul>            
			</div>
			<div class="dw-mast-col-2-2">
				<ul role="menu">
					<li role="menuitem"><a href="http://www.ibm.com/developerworks/cn/downloads/#rational">Rational</a></li>
					<li role="menuitem"><a href="http://www.ibm.com/developerworks/cn/downloads/#tivoli">Tivoli</a></li>
					<li role="menuitem"><a href="http://www.ibm.com/developerworks/cn/downloads/#websphere">WebSphere</a></li>
				</ul>            
            </div>
		</div>
		<!-- Community category -->
	    
		<div id="comm_div" class="dw-mast-columns">
			<div class="dw-mast-col-2-1">
				<h2><a id="dw-mast-nav-2-0" href="http://www.ibm.com/developerworks/community/?lang=zh">社区</a></h2>
				<ul role="menu">
					<li role="menuitem"><a
					    href="/developerworks/community/homepage/?lang=zh">我的首页</a></li>
					<li role="menuitem"><a
					    href="/developerworks/community/profiles/?lang=zh">概要信息</a></li>
					<li role="menuitem"><a href="/developerworks/community/groups/?lang=zh">群组</a></li>
					<li role="menuitem"><a href="/developerworks/community/blogs/?lang=zh">博客</a></li>

				</ul>     
			</div>
			<div class="dw-mast-col-2-2">
				<ul role="menu">
				<li role="menuitem"><a href="/developerworks/community/forums/?lang=zh">论坛</a></li>
				<li role="menuitem"><a href="/developerworks/community/wikis?lang=zh">Wiki</a></li>
				<li role="menuitem"><a href="/developerworks/community/activities/?lang=zh">活动</a></li>
				</ul>
			</div>

		</div>
		<!-- Events category -->
		<div id="evts_div" class="dw-mast-columns">
			<div class="dw-mast-col-1-1">
				<h2><a id="dw-mast-nav-3-0" href="https://www.ibm.com/developerworks/community/groups/service/html/communityview?communityUuid=6d7f9e5d-5f89-4767-a006-a81b8d186370&amp;lang=zh">技术讲座</a></h2>
					<ul role="menu">
						<li role="menuitem"><a href="https://www.ibm.com/developerworks/community/groups/service/html/communityview?communityUuid=6d7f9e5d-5f89-4767-a006-a81b8d186370&amp;lang=zh">技术讲座</a></li>
						<li role="menuitem"><a href="http://www.ibm.com/developerworks/cn/swi/">多媒体课堂</a></li>
						<li role="menuitem"><a href="http://www.ibm.com/developerworks/find/webcasts/">网络广播（英文）</a></li>
					    <li role="menuitem"><a href="http://www.ibm.com/developerworks/find/events/">查找活动（技术讲座，网络广播，会议等）（英文）</a></li> 
				</ul>            
			</div>
		</div>
	</div>
	
</div>
<div id="fdiv" class="ibm-access"></div>
    <!-- MASTHEAD_END -->
<!-- MASTHEAD_END -->

<!-- LAYOUT -->
<!-- LEADSPACE_BEGIN --> 
<div id="ibm-leadspace-head">
	<!-- LEADSPACE_BODY_BEGIN --> 
	<div id="ibm-leadspace-body">
		<!-- Navigation_Trail_BEGIN -->
      <ul id="ibm-navigation-trail"><li><a href="http://www.ibm.com/developerworks/cn/">developerWorks 中国</a></li><li><a href="http://www.ibm.com/developerworks/cn/topics/">技术主题</a></li><li><a href="http://www.ibm.com/developerworks/cn/linux/">Linux</a></li><li><a href="http://www.ibm.com/developerworks/cn/views/linux/libraryview.jsp">文档库</a></li></ul>
		<!-- END_Navigation_Trail -->
			<!-- Title_Subtitle -->
			<h1>Linux 操作系统安装盘的定制</h1>
	</div>
	<!-- LEADSPACE_BODY_END --> 
	<!-- SUMMARY_BEGIN -->
	<div id="dw-summary-area" class="dw-summary-columns">
		<div class="ibm-col-6-4">
		<p>本文阐述如何以一个现有的 RedHat Linux系统安装盘为蓝本，定制符合需要的 Linux 系统安装盘。</p>
		<p class="ibm-no-print ibm-ind-link">

			
			<span id="nCmts"></span>
		</p>
		</div>
		<div class="ibm-col-6-2 dw-toc-margin">
			<p class="dw-summary-author"><a href="#authorN10017" class="ibm-popup-link" onclick="ibmweb.overlay.show('authorN10017',this);return false;">汪伦伟</a> (<a href="mailto:xc_wangwei@163.com?subject=Linux 操作系统安装盘的定制">xc_wangwei@163.com</a>), 国防科技大学博士研究生</p>
<div id="authorN10017" class="ibm-common-overlay"><div class="ibm-head"><p><a href="#close" class="ibm-common-overlay-close">关闭 [x]</a></p></div><div class="ibm-body"><div class="ibm-main"><div class="ibm-title"><!--this is where the h2 usually goes--></div><div class="ibm-container ibm-alternate"><div class="ibm-container-body">
<p><!--.-->
汪伦伟，男，国防科技大学博士研究生，研究方向为安全操作系统。您可以通过电子邮件<a href="mailto:xc_wangwei@163.com">xc_wangwei@163.com</a>跟他联系。</p><br /><br /></div></div></div></div><div class="ibm-footer"><!----></div></div>
			<p class="dw-summary-date">2005 年 3 月 01 日</p>
			


			<div aria-hidden="true" class="ibm-container" id="dw-toc"><div class="ibm-container-body"><ul class="ibm-twisty"><li><a href="#toggle" class="ibm-twisty-trigger"><img src="//www.ibm.com/i/c.gif" alt="-"/></a><span class="ibm-twisty-head">内容</span><div class="ibm-twisty-body"><ul style="font-size:0.8em" class="ibm-link-list">
<li><a class="ibm-anchor-down-em-link" href="#N1002C">1	引言</a></li>
<li><a class="ibm-anchor-down-em-link" href="#N10041">2	RPM操作</a></li>
<li><a class="ibm-anchor-down-em-link" href="#N1004E">3	RPM包创建过程</a></li>
<li><a class="ibm-anchor-down-em-link" href="#N100DF">4	操作系统安装盘的定制过程</a></li>
<li><a class="ibm-anchor-down-em-link" href="#N1018B">5	生成iso映象</a></li>
<li><a class="ibm-anchor-down-em-link" href="#N1019E">附录一：kernel-update.sh</a></li>
<li><a class="ibm-anchor-down-em-link" href="#icomments">评论</a></li></ul></div></li></ul></div></div>
		</div>
	</div>
	<!-- SUMMARY_END -->
</div>
<!-- LEADSPACE_END -->

<div id="ibm-pcon">

<!-- BEGIN_IBM-CONTENT -->
<div id="ibm-content">

<!-- BEGIN_IBM-CONTENT-BODY -->
<div id="ibm-content-body">

<!-- BEGIN_IBM-CONTENT-MAIN -->
<div id="ibm-content-main">

<!-- 1_1_COLUMN_BEGIN -->
<div class="ibm-columns">
<div class="ibm-col-1-1">

<h2 id="N1002C">1	引言</h2><p>通常由于某种实际应用，需要一个包含所有最近更新的RPM包的操作系统发布盘，以备在安装时一次完成所有的更新操作，或者是想定制一个有自己特色的操作系统发布盘，如将自己开发的应用程序通过创建RPM包，加入到操作系统中，在系统安装时一次完成，形成包含自己产品的操作系统发布盘。这些都需要重新生成安装盘，而且生成安装盘也是十分必要的，因为操作系统发布商在每一次正式发布后，总会对一些漏洞进行更新处理，有些还是与安全相关的，在重新生成安装盘时就可以将这些bug修复添加进你自己定制的安装盘中，对一些设备新开发的驱动程序提供支持也需要重新生成安装盘。</p><p>在一些嵌入式具体应用中，由于其对操作系统的要求较具体，不需要当前操作系统安装盘中自带的那么多的功能，如Fedora Core 2当前有4张安装盘，它包含了许多其它的应用，如office、娱乐和游戏等等，而一些具体的应用根本不需要这么多的功能，因此，它们常常需要基于一个版本的操作系统，然后对之进行相应的裁减，使之能满足具体应用的实际需要，而不需要其它的多余的功能。因此，通过操作系统安装盘的定制，可以根据自己或实际的需要，选择有用的软件包，组成安装盘，从而通过定制操作系统的安装，满足具体应用的需要。</p><p>我们在定制操作系统安装盘之前，必须有一个蓝本作为安装盘的基础，比如是Red Hat 9.0安装盘或Fedora Core 2安装盘，也可以是Red Hat 9.0或Fedora Core 2安装盘的iso文件，这些我们可以从Red Hat的网站或其它一些网站上下载。现假设我们已经有了Fedora Core 2的安装盘，下面我们先大略看一下Fedora Core 2的安装盘里面的内容。</p><p>在安装盘中有一个目录为Fedora,它包含了发布盘的核心内容，如下：</p><div class="codesection"><pre class="displaycode">drwxr-xr-x    2 root     root         2048 May 13 2004 base
drwxr-xr-x    2 root     root        77824 May 13 2004 RPMS</pre></div><p>RPMS目录包含Fedora Core 2发布盘的主要部分，它是一些RPM文件。RPM包通常包含二进制可执行文件、有关的配置文件和文档，我们可以参考RPM帮助以获得更多信息。</p><p>base 目录中包含一些在安装过程中所需要的文件，如comps.xml文件，它定义哪个组件包含哪些RPM包以及RPM包之间的依赖关系，需要注意的是，在comps.xml文件中表示哪个组件有哪些RPM包采用的是RPM包名，而不是包的文件名。比如perl-5.8.3-18.i386.rpm这个文件名，在comps.xml中所表示的RPM包名为perl。对于comps.xml文件，我们会在后面作进一步解释。另一个重要的文件是hdlist文件，它包含了RPM目录中的所有RPM包大部分的头文件，这意味着在RPM包中相互依赖关系可以通过读取hdlist文件而决定，而不需要读所有的RPM包。hdlist文件的另一个作用是将包名映射到文件名，如将perl包名映射到perl-5.8.3-18.i386.rpm，这意味着如果你想更新RPM包或添加你自己的包到RPM目录中，你就需要更新hdlist这个文件，这会在后面进行描述。</p><div class="ibm-alternate-rule"><hr/></div><p class="ibm-ind-link ibm-back-to-top"><a href="#ibm-pcon" class="ibm-anchor-up-link">回页首</a></p><h2 id="N10041">2	RPM操作</h2><p>RPM（Redhat Package Management）是由RedHat开发的，在Linux系统下的系统包管理工具。它的目标是：使包的安装和卸载过程更容易，它能够证实一个包是否已经正确安装了，可以简化包的建立过程，可以从源代码建立整个包，它能用于不同的体系结构。RPM系统已经成为现在Linux系统下包管理工具事实上的标准，并且它也移植到很多商业的unix系统之下。</p><p>RPM包由包标签对它标识，包标签包含软件名，软件版本，包的发行版本几部分。在包的内部还包含包的建立时间，包的内容描述，安装包的所有文件的大小，数字签名以证实包的完整性等信息。RMP包还包含包内的文件信息，其中包括：每个文件的文件名，每个文件的权限，文件的属组和拥有者，每个文件的md5校验和，文件的内容等。</p><p>RPM包管理系统提供了下列功能：安装新的包，卸载旧的包，将一个旧包升级为新的包，获得已经安装包的信息等。</p><p>Red Hat发布盘主要是由一些RPM包组成。RPM包的名字包含一个后缀：arch.rpm，arch 指的是体系结构，对于Intel平台的有i386、i586、i686等，你所安装的包必须要与机器上的共享库的版本相匹配。如果你发现某个RPM包没有安装，你可以自己安装。任何时候，你都可以（必须是root用户）安装RPM包。RPM命令使用轻参考相关资料。</p><div class="ibm-alternate-rule"><hr/></div><p class="ibm-ind-link ibm-back-to-top"><a href="#ibm-pcon" class="ibm-anchor-up-link">回页首</a></p><h2 id="N1004E">3	RPM包创建过程</h2><p>为了完成RPM包的创建，需要执行以下步骤：</p><ul class="ibm-bullet-list"><li>执行spec文件prep节的命令和宏；</li><li>检查文件列表的内容；</li><li>执行spec文件build节的命令和宏；</li><li>执行spec文件install节的命令和宏，同时也执行文件列表中的宏；</li><li>创建二进制包文件；</li><li>创建源码包。</li></ul><p>为了执行打包的工作，RPM需要一系列目录完成建立的工作。正常的目录结构通常由一个顶级目录和五个子目录构成。这五个子目录分别是：</p><ol><li>SOURCES------包含原始的源文件和补丁文件。</li><li>SPECS--------包含控制RPM包建立过程的spec文件。</li><li>BUILD--------包含源码解包和软件建立的目录。</li><li>RPMS---------包含建立过程创建的二进制包文件。</li><li>SRPMS--------包含建立过程创建的源码包文件。</li></ol><p>除了上述这五个主要的目录外，在RPMS或SRPMS目录下通常还会有关于RPM包目标平台的目录。例如，i386、i586、i686等代表与Intel兼容cpu的平台，noarch目录下的RPM包代表可以在任何平台下执行。</p><h3 id="N10071">3.1	SPEC文件 </h3><p>spec文件是整个RPM包建立过程的中心，它的作用就如同编译程序时的Makefile文件。spec文件包含建立一个RPM包必需的信息，包括哪些文件是包的一部分以及它们安装在哪个目录下。这个文件一般分为如下的几节：</p><p>(1)	Preamle（序言） </p><p>序言包含用户请求包的信息时所显示的内容。它可以包含包的功能描述、包的软件版本、版权信息和所属的包组等。Summary 是一行关于该软件包的描述，Name 是该软件包的基名，Version 是该软件的版本号，Release 是 RPM 本身的版本号，如果修复了 spec 文件中的一个错误并发布了该软件同一版本的新 RPM，就应该增加发行版号。License 应该给出一些许可术语（如："GPL"、"Commercial"、"Shareware"），Group 标识软件类型。那些试图帮助人们管理 RPM 的程序通常按照组列出 RPM。您可以在usr/share/doc/rpm-4.0.4/GROUPS 文件看到一个 Red Hat 使用的组列表（假设您安装的 RPM 版本是 4.0.4）。但是您还可以使用那些组名以外的名称。Source0、Source1等等给这些源文件命名（通常为 tar.gz 文件）。%{name} 和 %{version} 是 RPM 宏，它们扩展成为头中定义的 rpm 名称和版本。</p><p>要注意的是，你不要在 Source 语句中包含任何路径。缺省情况下，RPM 会在 /usr/src/redhat/SOURCES 中寻找文件，请将您的源文件复制或链接到那里。（要使 spec 文件尽量可移植的话，应当尽量避免嵌入自己开发机器上的假想路径。其他开发人员就可以指示 RPM 在别的目录下查找源文件，而不用修改您的 spec 文件。）</p><p>接下来的部分从 %description 行开始。您应该在这里提供该软件更多的描述，这样任何人使用 rpm -qi 查询您的软件包时都可以看到它。您可以解释这个软件包做什么，描述任何警告或附加的配置指令，等等。</p><p>(2)	Prep节 </p><p>Prep节进行实际的打包准备工作，它是使用节前缀%prep表示的。一般而言，这一节的主要工作是检查标签语法是否正确，删除旧的软件源程序，对包含源程序的tar文件进行解码。如果包含补丁（patch）文件，将补丁文件应用到解开的源码中。它一般包含%setup与%patch两个命令。%setup用于将软件源码包解开，执行%patch可将补丁文件加入解开的源程序中。</p><p>%setup<br />
-n newdir---------将压缩的软件源程序在newdir目录下解开。<br />
-c ---------------在解开源程序之前先创建目录。<br />
-b num------------在包含多个源程序时，将第num个源程序解压缩。<br />
-T----------------不使用缺省的解压缩操作。</p><p>例如：</p><p>%setup -T -b 0<br />
/*解开第一个源程序文件。*/<br />
%setup -c -n newdir<br />
/*创建目录newdir，并在此目录之下解开源程序。*/<br />
%patch<br />
%patchN-------这里N是数字，表示使用第N个补丁文件，等价于%patch -P N<br />
-p0-----------指定使用第一个补丁文件，-p1指定使用第二个补丁文件。
-s------------在使用补丁时，不显示任何信息。<br />
-b name-------在加入补丁文件之前，将源文件名上加入name。若为指定此参数，则缺省源文件加入.orig。<br />
-T------------将所有打补丁时产生的输出文件删除。</p><p>(3)	Build节 </p><p>这一节主要用于编译源码，它是使用节前缀%build表示的。这一节一般由多个make命令组成。</p><p>(4)	Install节 </p><p>这一节主要用于完成实际安装软件必须执行的命令，它是使用节前缀%install表示的。这一节一般是由make install指令构成，但是有时也会包含cp、mv、install等指令。</p><p>这一节还能指定在用户安装的系统上，包安装时运行的脚本。这样的脚本称为安装（卸载）脚本。它可以指定包安装前、包安装后、包除去前、包除去后的系统必须运行的外壳程序段。在用户安装的系统上，为了验证一个包是否已经成功安装的验证脚本也可由这一节指定。</p><p>(5)	Clean节 </p><p>这一节所描述的内容表示在完成包建立的工作之后，自动执行此节下的脚本进行附加的清除工作，它是使用节前缀%clean表示的。一般而言，这一节的内容是简单地使用rm -rf $RPM_BUILD_ROOT命令，不需要指定此节的其它内容。</p><p>(6)	文件列表 </p><p>这一节指定构成包的文件的列表，它是使用节前缀%files表示的。此外，它还包含一系列宏控制安装后的文件属性和配置信息。</p><p>%files 列出应该捆绑到 RPM 中的文件，并能够可选地设置许可权和其它信息。在 %files 中，您可以使用 %defattr 来定义缺省的许可权、所有者和组；%defattr(-,root,root) 会安装 root 用户拥有的所有文件，使用当 RPM 从构建系统捆绑它们时它们所具有的任何许可权。</p><p>可以用 %attr(permissions,user,group) 覆盖个别文件的所有者和许可权。可以在 %files 中用一行包括多个文件。可以通过在行中添加 %doc 或 %config 来标记文件。%doc 告诉 RPM 这是一个文档文件，因此如果用户安装软件包时使用 --excludedocs，将不安装该文件。您也可以在 %doc 下不带路径列出文件名，RPM 会在构建目录下查找这些文件并在 RPM 文件中包括它们，并把它们安装到 /usr/share/doc/%{name}-%{version}。以 %doc 的形式包括 README 和 ChangeLog 这样的文件是个好主意。</p><p>%config 告诉 RPM 这是一个配置文件。在升级时，RPM 将会试图避免用 RPM 打包的缺省配置文件覆盖用户仔细修改过的配置。</p><p>注意：如果在 %files 下列出一个目录名，RPM 会包括该目录下的所有文件。通常这不是您想要的，特别对于 /bin 这样的目录。</p><p>(7)	改动日志 </p><p>这一节主要描述软件的开发记录，它是使用节前缀%changlog表示的。这个段的内容是为了开发人员能详细的了解该软件的开发过程，对于包的维护极有好处。</p><h3 id="N100C0">3.2	创建RPM包 </h3><p>如果我们需要对RPM包作修改，那么我们首先需要将源码包取来，比如我们要修改内核，那么我们可以从网上或光盘中取到内核的源代码RPM包，如kernel-2.6.5-1.358.src.rpm，将源码包解开：rpm -i kernel-2. 6.5-1.358.src.rpm，则该RPM中的内容将存放在目录/usr/src/redhat/SOURCES和/usr/src/redhat/SPEC目录中，前者存放的是源码、补丁以及一些配置文件等，后者存放的是包对应的spec文件，如kernel-2.6.spec，现在你就可以对内核进行修改。假定我们想另外再对内核打一个补丁，比如说：mypatch-2.6.5.patch，你需要将这个补丁文件复制到/usr/src/redhat/SOURCES/目录下，然后编辑kernel-2.6.spec文件。你需要先在定义补丁文件的最后加入对你补丁文件的初始定义，如：</p><div class="codesection"><pre class="displaycode">…………
Patch10000: linux-2.6.0-compile.patch
# Patch10010: linux-2.6.0-module-license.patch
Patch10030: mypatch-2.6.5.patch      /*新加入的补丁文件的定义*/
# END OF PATCH DEFINITIONS
…………</pre></div><p>然后在文件的后面加入对内核打补丁命令：</p><div class="codesection"><pre class="displaycode">…………
%patch10000 -p1
%patch10030 -p1　　　/*新加入的打补丁命令*/
# END OF PATCH APPLICATIONS
…………</pre></div><p>如果你还想对内核做其它的修改，你可以修改相应的文件或添加相应的文件，然后修改kernel-2.6.spec文件。当spec文件修改完成之后，你只需要执行
rpmbuild -ba kernel-2.6.spec
就可以生成所需要的RPM包了。另外需要注意的是，以生成内核包为例，假如我们想生成kernel-smp-2.6.5-1.358.i686.rpm包，在kernel-2.6.spec文件中包含有一些开关选项，比如，在文件的开头需要定义创建哪些内核的RPM包，如：</p><div class="codesection"><pre class="displaycode">%define buildup  1
%define buildsmp  0
%define buildsource  1</pre></div><p>在通常情况下，在执行rpmbuild -ba kernel-2.6.spec 命令后，会创建一个kernel-2.6.5-1.358.i386.rpm、kernel-source-2.6.5-1.358.i386.rpm和源码RPM包kernel-2.6.5-1.358.src.rpm。因此，当你需要创建支持SMP的内核的RPM包时，需要修改kernel-2.6.spec文件开头时的定义为：</p><div class="codesection"><pre class="displaycode">%define buildup  1
%define buildsmp  1
%define buildsource  1
%define -target_cpu    i686</pre></div><p>此外，在文件的开头还需要定义-target_cpu 为i686，从而创建i686的内核RPM包，并且需要对/usr/lib/rpm目录下面的一些宏重新定义，比如当前目录下面的macros文件，需要重新定义arch 和build_arch为i686。最后，执行命令
rpmbuild -ba kernel-2.6.spec --with smp
就可以。当然，如果对内核进行了相应的修改，就必须生成多个内核RPM包，以适用于多个arch，如kernel-2.4.18-3-i586-smp.rpm, kernel-2.4.18-3-athlon.rpm等。</p><div class="ibm-alternate-rule"><hr/></div><p class="ibm-ind-link ibm-back-to-top"><a href="#ibm-pcon" class="ibm-anchor-up-link">回页首</a></p><h2 id="N100DF">4	操作系统安装盘的定制过程</h2><p>你需要将原来操作系统发布盘上的内容拷贝到本机硬盘中，根据有几张发布盘而生成几个目录，比如Fedora Core 2有四张盘，你则需要在系统上生成四个目录，如disc1、disc2、disc3、disc4，分别将这四张盘上内容拷贝到这四个目录中，然后对相应的RPM包进行更新。</p><p>首先找到你想更新的RPM包，将新的RPM替换旧包。当然你也可以根据你的需要新增或删除RPM包，需要注意的是，你需要在comps.xml文件中将新增加或删除的RPM包名加入某个组件中，并且注意其与其它RPM包的依赖关系，也就是说你所放置的包的位置要恰当，否则它会依赖于在它之前而没有加入系统的某个RPM包。</p><h3 id="N100E8">4.1	编辑comps.xml文件 </h3><p>在生成安装盘之前，需要注意对comps.xml文件进行修改。这个文件用来告知安装程序anaconda，用户选择了某个组是应该有哪些包需要安装，定义了在安装过程中，包是如何被捆绑在一起的。在Red Hat 8.0以前版本的发布盘中，对应的文件为comps，它只是一个简单的文本文件，在Red Hat 8.0之后的版本中，用comps.xml代替了原来的comps文件。comps.xml是一个XML文件，易于对内容进行分析和说明。</p><p>comps.xml文件开始是说明xml的版本和DTD断言，然后进入以&lt;comps&gt;标记开始的文件的主体内容。如：</p><div class="codesection"><pre class="displaycode">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE comps PUBLIC "-//Red Hat, Inc.//DTD Comps info//EN" "comps.dtd"&gt;
&lt;comps&gt;</pre></div><p>comps.xml主要由三部分组成，首先是组列表，它描述了在安装过程中需要的不同的组（或组件），包括组名、组的描述和包含的RPM包；其次是组的层次结构，它将组分成不同的类，并定义了组的一个顺序，从而可以决定哪些组需要先安装；最后为一系列RPM包以及它们之间的依赖关系。</p><p>下面分别介绍comps.xml文件的这三部分：</p><p>（1）　组列表</p><p>在系统安装时，需要用到一个组中的一些属性，下面就是属性列表以及它们如何使用。一个组被定义在&lt;group&gt;和&lt;/group&gt;标记之内.</p><p>一个简单的组定义可以是：</p><div class="codesection"><pre class="displaycode">&lt;group&gt;
  &lt;id&gt;somegroup&lt;/id&gt;
  &lt;name&gt;Sample Group&lt;/name&gt;
  &lt;default&gt;true&lt;/default&gt;
  &lt;uservisible&gt;false&lt;/uservisible&gt;
  &lt;description&gt;This is a silly sample group&lt;/description&gt;
  &lt;packagelist&gt;
    &lt;packagereq type="mandatory"&gt;bash&lt;/packagereq&gt;
    &lt;packagereq type="default"&gt;cpio&lt;/packagereq&gt;
  &lt;/packagelist&gt;
&lt;/group&gt;</pre></div><p>下面分别说明组定义中一些参数的含义：</p><ul class="ibm-bullet-list"><li>id：组的id仅仅是在comps.xml文件中作为该组的一个标识，这是必须的；</li><li>name：表示用户可以看到的组的名字，它也是必须的；</li><li>default：它表示在系统安装过程中，当选择定制（custom）安装时，该组是否在缺省情况下被选中。如果没有说明，则缺省情况下为不选中。</li><li>uservisible：它表示该组在缺省情况下是否在安装时可以看到，如果没有说明，缺省设置为YES，为可以看到。</li><li>description：它表示对该组进行简短的描述，这是必须的；</li><li>packagelist：它说明在该组内的一系列安装包，这也是必须的。<br />
	packagereq：包名 <br />
属性：<br /><ul class="ibm-bullet-list"><li>type：当进行安装时，判定对应的包是否是组的"强制"部分、或"缺省"部分或"可选"部分。它可以是"mandatory"、"default"或"optional"之一。</li><li>requires：它说明只有当它所需要（依赖）的包也安装情况下，此包才安装进系统。</li></ul></li></ul><p>（2）组层次结构</p><p>它描述了组的树状层次结构，组层次结构定义在&lt;grouphierarchy&gt;和&lt;/grouphierarchy&gt;标记之间，由定义的&lt;category&gt;标记组成类。</p><p>一个简单的组层次结构可以如下所述：</p><div class="codesection"><pre class="displaycode">&lt;grouphierarchy&gt;
  &lt;category&gt;
    &lt;name&gt;Random Groups&lt;/name&gt;
    &lt;subcategories&gt;
      &lt;subcategory&gt;somegroup&lt;/subcategory&gt;
    &lt;/subcategories&gt;
  &lt;/category&gt;
&lt;/grouphierarchy&gt;</pre></div><p>一个类由下面这些属性组成：</p><ul class="ibm-bullet-list"><li>name: 它表示类名，是必须的；</li><li>subcategories: 它表示此类的一些子类，由一列表&lt;subcategory&gt;和&lt;/subcategory&gt; 元素组成
  
<ul class="ibm-bullet-list"><li>subcategory: 前面定义的组的id</li></ul></li></ul><p>（3）RPM包</p><p>此部分说明要安装的RPM包，它定义在&lt;package&gt;和&lt;/package&gt;标记之内。一个简单的RPM包部分可以如：</p><div class="codesection"><pre class="displaycode">&lt;package&gt;
  &lt;name&gt;bash&lt;/name&gt;
  &lt;dependencylist&gt;
    &lt;dependency&gt;mktemp&lt;/dependency&gt;
    &lt;dependency&gt;bash&lt;/dependency&gt;
    &lt;dependency&gt;glibc&lt;/dependency&gt;
    &lt;dependency&gt;libtermcap&lt;/dependency&gt;
  &lt;/dependencylist&gt;
&lt;/package&gt;</pre></div><ul class="ibm-bullet-list"><li>name：它指的是RPM包名，是必须的。</li><li>dependencylist：它说明此包对应的依赖的RPM包。
  
<ul class="ibm-bullet-list"><li>dependency：此包需要的包的名字</li></ul></li></ul><h3 id="N10140">4.2	产生完整的comps.xml文件</h3><p>上述说明的comps.xml文件中的RPM包部分是是自动产生的，为了形成完全的comps.xml文件，需要在系统中安装comps-extras RPM包，然后进行下面的操作：</p><ul class="ibm-bullet-list"><li>将comps.xml文件中的原来的RPM包部分删除；</li><li>运行：<br />
/usr/share/comps-extras/getfullcomps.py comps.xml /path/to/tree arch　&gt;/root/filelist
在此，/path/to/tree是Red Hat Linux操作系统安装盘内容存储的地方，arch指的是体系结构，为i386。注意的是，假定comps.xml已经存放/path/to/tree/arch/RedHat/base/目录下，将此输出重定向到一个临时文件，如/root/filelist。</li><li>将comps.xml文件中最后一行内容（为&lt;/comps&gt;）删除</li><li>将前面生成的临时文件添加到comps.xml中</li><li>再将&lt;/comps&gt;添加到comps.xml文件中</li></ul><p>通过新增你的包到comps.xml文件，你可以根据你的需要做你自己的发布盘，确信你的包在缺省情况下会被安装。需要注意的一件事是你更新的包与其它包的依赖关系，这是你需要处理的，要注意你更新的包所应该放置的位置。另外，不要在文件中随意增加或删除其余的空格。在修改comps.xml之前，也最好对最初的comps.xml做个备份，以备恢复使用。</p><h3 id="N10156">4.3	重新编译安装程序，调整安装阶段</h3><p>安装程序是不可能一次就加载进来的，必须分阶段进行，通常我们就称为"stage"。第一个阶段所用程序很小，只有这样才能从一张软盘、tftp服务器等等上面加载。通常这个阶段程序包含的只有一个精简过的Linux内核和在后续步骤当中必要的一些驱动程序（比如SCSI）。</p><p>要采用一个新的RedHat安装，就会需要很多的映像，最明显的就是引导安装盘本身（从软驱或者光驱安装）的boot.img，但是我们也需要对从硬盘、网络文件系统等安装方式提供支持。</p><p>RedHat就此提供了很好的脚本命令，只需一个简单的操作就可以完成所有的操作。这些脚本的工作就是把某些RPM包的内容提取出来，然后用来生成各安装步骤所用程序的映像。</p><p>所再强调的是，我们必须保证安装了anaconda-runtime：</p><p><code>#rpm -i  anaconda-runtime-xxxxx-i386.rpm</code></p><p>接着进入目录/usr/lib/anaconda-runtime，这里我们会看到一些非常有用的脚本，比如：</p><ul class="ibm-bullet-list"><li>mk-images.i386：包涵有创建启动磁盘时i386的专门设置（通常情况下，网络和pcmcia）以及辅助磁盘驱动程序。在此您可以改变启动映像中所包含的模块，比如说在网络启动磁盘有：<br /><div class="codesection"><pre class="displaycode">……
NETWORKMODULES="$COMMONMODULES nfs 3c59x eepro100 tulip pcnet32
ne2k-pci 8139too"
……..</pre></div></li><li>buildinstall 这是主要的。<br /><div class="codesection"><pre class="displaycode">#cd  /usr/lib/anaconda-runtime
#./buildinstall ~/disc1/</pre></div><br />

这个脚本命令会在~/disc1/images目录下更新一些的文件。</li></ul><h3 id="N10178">4.4	生成新的hdlist文件</h3><p>当安装时，安装程序需要依赖光盘上的Fedora/base/hdlist文件，它包含的是所有可用的RPM包的必要信息，这些信息在安装过程当中是用来显示每一个包的用途以及解决用户选择软件包后的依赖性问题。</p><p>用以生成hdlist文件的程序叫做genhdlist，它是由anaconda-runtime这个包产生的。现在的genhdlist多了一个新的参数：--withnumbers，是用来记录hdlist文件中每个RPM包的媒介代号。</p><p>分步处理的过程如下：</p><div class="codesection"><pre class="displaycode">#rpm -i anaconda-runtime-xxxxx-i386.rpm
#cd /usr/lib/anaconda-runtime
#./genhdlist -- withnumbers ~/disc1  ~/disc2　~/disc3  ~/disc4</pre></div><p>整个过程只需要执行一个脚本，见附录一：kernel-update.sh。</p><p>如果你在系统中添加了RPM包，那么在生成安装盘之前，最好将这四张盘上的内容复制到一个目录下，然后修改附录一的脚本文件，运行脚本，先网络安装一次，看是否存在包的依赖关系问题。如果没有，则可以生成安装盘。</p><div class="ibm-alternate-rule"><hr/></div><p class="ibm-ind-link ibm-back-to-top"><a href="#ibm-pcon" class="ibm-anchor-up-link">回页首</a></p><h2 id="N1018B">5	生成iso映象</h2><p>当前面系统进行网络安装成功后，则可以生成iso映象，然后进行刻盘，执行的操作如下：</p><div class="codesection"><pre class="displaycode"># build disk 1
cd  ~/disc1     /*假设我们将第一张盘的内容放置在此外*/
mkisofs -R -J -T -no-emul-boot -boot-load-size 4 -boot-info-table -V fedora  
   -b isolinux/isolinux.bin  -c isolinux/boot.cat -o /iso/exm-disc1.iso  .
/*使用mkisofs工具生成iso映象，将生成的iso映象放在/iso目录中*/
# build disk 2
cd  ~/disc2     /*采用同样的方法，生成第二个iso，依次。*/
mkisofs -R -J -T -V fedora -o /iso/exm-disc2.iso .</pre></div><p>在生成iso映象之后，需要对它进行测试，你可以将它挂接到某个地方，比如：</p><div class="codesection"><pre class="displaycode">mount -o loop /iso/exm1-disc1.iso  /mnt</pre></div><p>在生成安装iso（exm-disc1.iso）之后，我们可以将它复制到windows系统中，采用刻录程序进行刻录，然后可以从光盘安装，进行安装测试。</p><div class="ibm-alternate-rule"><hr/></div><p class="ibm-ind-link ibm-back-to-top"><a href="#ibm-pcon" class="ibm-anchor-up-link">回页首</a></p><h2 id="N1019E">附录一：kernel-update.sh</h2><div class="codesection"><pre class="displaycode">#!/bin/sh
# current working directory
BASE=`pwd`
# generate hdlists
mkdir -p $BASE/SOURCES
echo   
echo Copying disc1 to SOURCES directory, please wait...
cp -Rf $BASE/disc1/* $BASE/SOURCES 
echo Copying disc2 to SOURCES directory, please wait...
cp -Rf $BASE/disc2/* $BASE/SOURCES
echo Copying disc3 to SOURCES directory, please wait...
cp -Rf $BASE/disc3/* $BASE/SOURCES
echo Copying disc4 to SOURCES directory, please wait...
cp -Rf $BASE/disc4/* $BASE/SOURCES
echo   
echo Make sure anaconda, anaconda-runtime is installed...
rpm -U $BASE/SOURCES/Fedora/RPMS/anaconda-*.rpm
# generate hdlists*
cd /usr/lib/anaconda-runtime
./genhdlist --withnumbers $BASE/disc1 $BASE/disc2 $BASE/disc3  $BASE/disc4
# generate the package ordering
./pkgorder $BASE/SOURCES i386 |tee /root/pkgorder.txt
./buildinstall  --pkgorder /root/pkgorder.txt --version 1 --product "Fedora" 
   --release "Fedora" $BASE/SOURCES
$BASE/SOURCES
cp -apRf $BASE/SOURCES/images/* $BASE/disc1/images
cp -apRf $BASE/SOURCES/isolinux/* $BASE/disc1/isolinux
cp -apRf $BASE/SOURCES/RedHat/base/* $BASE/disc1/RedHat/base
echo Cleaning up...
rm -rf $BASE/SOURCES</pre></div><!--CMA ID: 58315--><!--Site ID: 10--><!--XSLT stylesheet used to transform this file: dw-document-html-7.0.xsl-->


</div>
</div>
<!-- 1_1_COLUMN_END -->

<!-- SPLIT_COLUMNS_BEGIN -->
<div class="ibm-columns">

<!-- 6_4_COLUMN_BEGIN -->
<div class="ibm-col-6-4">



<!-- INLINE_COMMENTS_BEGIN -->
<h2 id="icomments" class="ibm-alternate-rule ibm-no-print">条评论</h2>
    
<div class="ibm-no-print" id="dw-icomments-container">	
	<div id="threadShow"></div>
</div>
<!-- Sign in OVERLAY STARTS HERE -->
    
<!-- Sign in OVERLAY STARTS HERE -->
<div class="ibm-common-overlay" id="signin_overlay">
<div class="ibm-head">
<p><a class="ibm-common-overlay-close" href="#" onclick="dwsi.siInst.clearForm();">关闭 [x]</a></p>
</div>
<div class="ibm-body">
<div class="ibm-main">

 <div class="ibm-title">
<h2>developerWorks: 登录</h2>
<div id="ibm-overlay-error-signin" class="no-display"></div>
</div>
<div class="ibm-container ibm-alternate ibm-buttons-last">
<div class="ibm-container-body">
<p class="ibm-overlay-intro">标有星（<span class="ibm-required">*</span>）号的字段是必填字段。</p> 
<form class="ibm-column-form" id="sFormId" action="" method="post" name="sForm" onsubmit="return false;">
<p><label for="ibmid">IBM ID:<span class="ibm-required">*</span></label><span>
    <input name="ibm-id" id="ibmid" size="25" value="" class="required" type="text" onkeypress="dwsi.siInst.handleEP(event,this.form);" />
    <br /><a onclick="window.location='/developerworks/dwwi/DWAuthRouter?m=reg&amp;lang=zh_CN&amp;d='+encodeURIComponent(location.protocol + '//' + location.hostname + location.pathname + '#icomments'); return false;" href="#" class="ibm-forward-link">需要一个 IBM ID？</a> <br />
    <a class="ibm-forward-link" href="/developerworks/dwwi/jsp/WSHelp.jsp?lang=zh_CN">忘记 IBM ID？</a> 
</span>
</p> 
<p><label for="password">密码：<span class="ibm-required">*</span></label><span>
    <input name="password" id="password" size="25" value="" class="required" type="password" onkeypress="dwsi.siInst.handleEP(event,this.form);" />
    <br /><a class="ibm-forward-link" href="#" onclick="(function ()
        {window.location='https://www.ibm.com/account/profile?page=forgot&amp;lang=zh_CN&amp;appname=ibm&amp;required=null&amp;d='+encodeURIComponent(dwsi.siInst.getAuthUrl())+'%3Fm%3Dloginpage%26lang%3Dzh_CN%26d%3D'+encodeURIComponent(location.href);})();">忘记密码？</a>
    <br /><a class="ibm-forward-link" href="#" onclick="(function () {window.location='https://www.ibm.com/account/profile?page=chpw&amp;lang=zh_CN&amp;appname=ibm&amp;required=null&amp;d='+encodeURIComponent(location.href);})();">更改您的密码</a></span></p> 
<p class="dw-perm-box">
	<span><input id="perm" type="checkbox" name="perm_name"/><label for="perm"> 保持登录。</label></span>
</p>
<p>单击提交则表示您同意developerWorks 的条款和条件。 <a
    href="/developerworks/community/terms?lang=zh">查看条款和条件</a>。</p>
<div class="ibm-buttons-row">
   <p><input class="ibm-btn-arrow-pri" name="ibm-submit" value="提交" onclick="dwsi.siInst.signin();return false;" type="submit" /><span class="ibm-sep">&nbsp;</span>
<input value="取消" type="button" name="ibm-cancel" class="ibm-btn-cancel-sec" onclick="dwsi.siInst.clearForm();ibmweb.overlay.hide('signin_overlay');return false;"/></p>
</div>
</form>
 <div class="ibm-overlay-rule"><hr /></div> 

<p>这是您第一次登陆到 developerWorks，已经自动为您创建了您的概要文件。 <strong>选择您概要文件中可以公开的信息的信息（如姓名、国家/地区，以及公司），这些信息同时也会与您所发布的内容相关联。 </strong>您可以随时更新您的 IBM 账号。</p>
<div><p class="dw-c-overlay-secure">所有提交的信息确保安全。</p></div>
</div>
</div>
</div>
</div>
<div class="ibm-footer"></div>
</div>
<!-- Display name OVERLAY STARTS HERE -->
<div class="ibm-common-overlay" id="displayname_overlay">
<div class="ibm-head">
<p><a class="ibm-common-overlay-close" href="#" onclick="dwsi.siInst.clearForm();">关闭 [x]</a></p>
</div>
<div class="ibm-body">
<div class="ibm-main">
<div class="ibm-title">
<h2>选择您的昵称</h2><br /><br />
<div id="ibm-overlay-error-dname" class="no-display"></div>
</div>
<div class="ibm-container ibm-alternate ibm-buttons-last">
<div class="ibm-container-body">
<p class="ibm-overlay-intro">当您初次登录到 developerWorks 时，将会为您创建一份概要信息，您需要指定一个昵称。您的昵称将和您在 developerWorks 发布的内容显示在一起。</p><p><strong>昵称长度在 3 至 31 个字符之间</strong>。 
    您的昵称在 developerWorks 社区中必须是唯一的，并且出于隐私保护的原因，不能是您的电子邮件地址。</p>
<p class="ibm-overlay-intro">标有星（<span class="ibm-required">*</span>）号的字段是必填字段。</p> 
<form id="dFormId" method="post" action="" name="dForm" onsubmit="return false;" class="ibm-column-form">
<p><label for="displayname">昵称：<span class="ibm-required">*</span></label><span>
    <input name="displayname" id="displayname" size="25" value="" type="text" onkeypress="dwsi.siInst.handleEP(event,this.form);" /></span>
    <span class="ibm-form-note">(昵称长度在 3 至 31 个字符之间)</span>
</p>
<p>单击<strong>提交</strong>则表示您同意developerWorks 的条款和条件。 <a href="/developerworks/community/terms?lang=zh">查看条款和条件</a>.</p>
<div class="ibm-buttons-row">
   <p><input class="ibm-btn-arrow-pri" name="ibm-submit" value="提交" onclick="dwsi.siInst.signin();return false;" type="submit" /><span class="ibm-sep">&nbsp;</span>
<input value="取消" type="button" name="ibm-cancel" class="ibm-btn-cancel-sec" onclick="dwsi.siInst.clearForm();ibmweb.overlay.hide('displayname_overlay');return false;" /></p>
</div>
</form>
<div class="ibm-overlay-rule"><hr /></div>
<div><p class="dw-c-overlay-secure">所有提交的信息确保安全。</p></div>
</div>
</div>
</div>
</div>
<div class="ibm-footer"></div>
</div>


<!-- INLINE_COMMENTS_END -->

</div>
<!-- 6_4_COLUMN_END -->

<!-- 6_2_COLUMN_BEGIN -->
<div class="ibm-col-6-2">

<!-- Next_Steps -->
<!-- Dig_Deeper -->


<!-- Promotion_Module -->
    
<!-- PROMOTION_MODULE_START -->
<div class="ibm-alternate-rule"><hr /></div>
<ul class="ibm-portrait-module-list">
<li><img height="60" width="60" src="//www.ibm.com/developerworks/i/sm-f-cl-puresystems70.jpg" alt=""/>
<h3><a class="ibm-feature-link"
    href="http://www.ibm.com/developerworks/cn/puresystems/">IBM PureSystems</a></h3>
<p>IBM PureSystems™ 系列解决方案是一个专家集成系统</p></li>
<li><img height="60" width="60" src="//www.ibm.com/developerworks/i/sm-f-knowledgepath50.jpg" alt=""/>
<h3><a class="ibm-feature-link" href="http://www.ibm.com/developerworks/cn/views/global/libraryview.jsp?type_by=Knowledge+paths">developerWorks 学习路线图</a></h3>
<p>通过学习路线图系统掌握软件开发技能</p></li>
<li><img height="60" width="60" src="//www.ibm.com/developerworks/i/sm-f-evaluationsoftware60.png" alt=""/>
<h3><a class="ibm-feature-link" href="http://www.ibm.com/developerworks/cn/downloads/">软件下载资源中心</a></h3>
<p>软件下载、试用版及云计算</p></li>
</ul>
<!-- PROMOTION_MODULE_END -->

</div>
<!-- 6_2_COLUMN_END -->

</div>
<!-- SPLIT_COLUMNS_END -->

<!-- BOTTOM_BACK_TO_TOP -->
<div class="ibm-columns">
<div class="ibm-col-1-1">
	<div class="ibm-alternate-rule"><hr/></div><p class="ibm-ind-link ibm-back-to-top"><a href="#ibm-pcon" class="ibm-anchor-up-link">回页首</a></p>
</div>
</div>

<!-- Rating_Meta_BEGIN -->
<!--Rating_Meta_BEGIN--><div class="metavalue">static.content.url=http://www.ibm.com/developerworks/js/artrating/</div><div class="metavalue">SITE_ID=10</div><div class="metavalue">Zone=Linux</div><div class="metavalue">ArticleID=58315</div><div class="metavalue">ArticleTitle=Linux 操作系统安装盘的定制</div><div class="metavalue">publish-date=03012005</div><script language="javascript" type="text/javascript">document.write('<div class="metavalue">url='+location.href.replace(/</g,  '%3C')+'</div>');</script><!--Rating_Meta_END-->
<!-- Rating_Meta_END -->

</div>
<!-- END_IBM_CONTENT_MAIN -->

</div>
<!-- END_IBM_CONTENT_BODY -->

</div>
<!-- END_IBM_CONTENT -->

</div>
<!-- END_IBM_PCON -->
<!-- FOOTER_BEGIN -->
<!-- FOOTER_BEGIN -->
<div id="ibm-footer"><!-- IBM footer container; disabled --></div>

<div id="ibm-footer-module-dwwrapper" role="contentinfo" aria-label="developerWorks Footer">

<div id="ibm-footer-module-dw">
	<div class="dw-footer-columns">
		<div class="dw-footer-col-5-1">
			<ul>
                <li><a href="https://www.ibm.com/developerworks/secure/feedback.jsp?domain=dwchina">帮助</a></li>
				<li><a href="http://www.ibm.com/developerworks/cn/author/">联系编辑</a></li>
				<li><a href="https://www.ibm.com/developerworks/secure/myideas2.jsp?domain=dwchina&start=true">提交内容</a></li>
				<li><a href="http://www.ibm.com/developerworks/cn/sitemap/">网站导航</a></li>
				<li><a href="http://www.ibm.com/developerworks/cn/rss/">订阅源</a></li>
			</ul>
        </div>
		<div class="dw-footer-col-5-2">
			<ul>
			<li><a href="http://www.ibm.com/vrm/newsletter/10104?S_TACT=105AGX52&S_CMP=dwcntop">在线浏览每周时事通讯</a></li>
				<li><a class="dwcn-sina-link" href="http://weibo.com/ibmdw/" target="_blank">新浪微博</a></li>
				<li><a href="https://www.ibm.com/developerworks/community/report?lang=zh">报告滥用</a></li>
				<li><a href="https://www.ibm.com/developerworks/community/terms?lang=zh">使用条款</a></li>
				<li><a href="https://www.ibm.com/developerworks/cn/community/terms/thirdparty/">第三方提示</a></li>
			</ul>
		</div>
		<div class="dw-footer-col-5-3">
			<ul>
				<li><a href="http://www.ibm.com/privacy/cn/zh/">隐私条约</a></li>
				<li><a href="http://www.ibm.com/ibm/accessibility/cn/">浏览辅助</a></li>
				<li><a href="http://www.ibm.com/developerworks/cn/academic/">IBM 教育学院教育培养计划</a></li><li><a href="http://www.ibm.com/developerworks/cn/gep/">IBM 创业企业全球扶持计划</a></li><li><a href="http://www.ibm.com/partnerworld/isv/">ISV 资源 (英语)</a></li>
			</ul>
		</div>
		<div class="dw-footer-col-5-4">
		
 
			<ul>
				<li><a href="//www.ibm.com/developerworks/cn/newsletter/">dW 中国每周时事通讯</a><br /> 
				
				</li>
			</ul>
			</form>
		</div>
		<div class="dw-footer-col-5-5">
			<img width="223" height="46" alt="IBM®" src="//dw1.s81c.com/developerworks/i/mf/dwn-ibm-logo-v17.png">
			<img class="dw-preload" src="//1.www.s81c.com/i/v17/icons/ibm_sprite_social_blue_ON.png" alt="" width="1" height="1"/>
		</div>
	</div>
	<!-- Language selector no-script -->
	<noscript>
	<div id="dw-footer-selectlang">
		<h2><a name="SELECTLANG">选择语言：</a></h2>
		<ul>
			<li><a href="http://www.ibm.com/developerworks/" lang="en">English</a></li>
			<li><a href="http://www.ibm.com/developerworks/cn/">中文</a></li>
			<li><a href="http://www.ibm.com/developerworks/jp/" lang="ja">日本語</a></li>
			<li><a href="http://www.ibm.com/developerworks/ru/" lang="ru">Русский</a></li>
			<li><a href="http://www.ibm.com/developerworks/br/" lang="pt">Português (Brasil)</a></li>
			<li><a href="http://www.ibm.com/developerworks/ssa/" lang="es">Español</a></li>
			<li><a href="http://www.ibm.com/developerworks/vn/" lang="vi">Việt</a></li>
		</ul>
	</div>
	</noscript>
</div>

</div><!-- FOOTER_END --><!-- FOOTER_END -->

<!-- END_IBM-TOP -->
</div>

<!-- SCRIPTS_INCLUDE_BEGIN -->
<script type="text/javascript" src="/developerworks/js/v17/dw-comments.js">//</script>
<script type="text/javascript" language="JavaScript">
		dojo.ready(function(){
		rBHash = null;
		rBHash = new Object();
		rBHash['viperLang'] = 'zh';
		rBHash['urlLang'] = 'cn';
		
		dwsi.siInst = new dwweb.dynnav.dwsi();
		dwsi.siInst.initSI();		

		// construct the comment widget
dwc.cmts = '条评论';
dwc.signInPreText = '请';
dwc.signIn = '登录';
dwc.or = '或';
dwc.register = '注册';
dwc.signInPostText = '';
dwc.leaveCmt = '后发表评论。';
dwc.view = '查看';
dwc.totalCmts = '共有评论';
dwc.postYourCmt = '添加您的评论';
dwc.show = '显示：';
dwc.recentCmts = '最新评论';
dwc.allCmts = '所有评论';
dwc.tooLongCmt = '您的评论超过了 1000 字符限制';
dwc.numCharsLeft = '剩余 <span id="charCount">{1}</span> 字符';
dwc.reportAbuse = '报告滥用';
dwc.notifyMsg = '有新评论时提醒我';
dwc.htmlWarning = '注意：评论中不支持 HTML 语法'; 
dwc.cmt = '评论：';
dwc.addCmts = '添加评论';
dwc.addCmt = '添加评论';
dwc.doNotErase = '--在下方添加评论--'; 
dwc.viewOrAddCmts = '查看或添加评论';
dwc.reportInapprCont = '举报不良信息';
dwc.reportInapprContLink = 'http://www.ibm.com/developerworks/forums/forum.jspa?forumID=1834';
dwc.postingCmt = '正在发布评论……';
dwc.noCmt = '快来添加第一条评论';
dwc.netwkErr = '在检索评论时出错，请稍后刷新。';
dwc.addACmt = '添加评论';
dwc.instructCmt = '标有星号（<span class="ibm-required">*</span>）的是必填项目。';
dwc.btnPost = '发布';
dwc.btnPostAnon = '匿名发布';
dwc.btnClrCmt = '清除评论';
dwc.btnCancel = '取消';
dwc.showRecent = '显示最新的 {1} 条评论'; // {1} is the count to be substituted
dwc.showNext = '显示后 {1} 条评论'; // {1} is the count to be substituted
dwc.showAllCmts = '显示所有评论';
dwc.enterCmt = '请输入评论内容。';
dwc.loginErr = '暂时无法验证您的登录状态，请稍后再试。';
dwc.postErr = '暂时无法发布您的评论，请稍后再试。';
dwc.postBy = '由 <strong>{1}</strong>  于 {2} '; // {1} is the author to be substituted; {2} is the date
dwc.siteId = 10;
dwc.lang = 'zh_CN';
dwc.viperLang = 'zh';
//dwc.abuseHref =  null;
dwc.maxChars = 1000;
dwc.cmtTxt =  '评论：';
dwc.cmtsTxt =  '评论：';  
		dwc && new dwc.comments('threadShow','95%',5,'nCmts','icomments');
		});
</script>
<!-- BEGIN: Use this section to set page specific variables for the Unica Page Tag -->
<script language="JavaScript">var NTPT_PGEXTRA="ibmSkillLevel=1&ibmAdoptPhase=648&ibmRole=12&ibmCmaId=58315&ibmContentAreas=linux";</script>
<!--END --><!-- SCRIPTS_INCLUDE_END -->

<div id="ibm-metrics">
<script src="//dw1.s81c.com/common/stats/stats.js" type="text/javascript">//</script>
</div>

</body>
</html>