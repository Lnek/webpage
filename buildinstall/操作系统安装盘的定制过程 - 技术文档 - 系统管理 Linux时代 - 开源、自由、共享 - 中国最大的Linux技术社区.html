
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />

<title>操作系统安装盘的定制过程 - 技术文档 - 系统管理 Linux时代 - 开源、自由、共享 - 中国最大的Linux技术社区</title>
<meta name="keywords" content="操作系统安装盘的定制过程 - 技术文档 - 系统管理 Linux时代 - 开源、自由、共享 - 中国最大的Linux技术社区">
<meta name="description" content="操作系统安装盘的定制过程 - 技术文档 - 系统管理  系统管理 Linux 技术文档">

<link href="/css/all.css" rel="stylesheet" type="text/css" />

<style type="text/css">

<!--

.STYLE1 {color: #FF0000}

.STYLE2 {font-size: 14px}

-->

</style>

</head>



<body>

<table width="950" border="0" align="center" cellpadding="0" cellspacing="0">

  <tr>

    <td height="27">	<table border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" width="100%">
	<tr><FORM name="login" action="http://linux.chinaunix.net/bbs/logging.php?action=login"  method=post>
	<td><script language="javascript" src="http://linux.chinaunix.net/bbs/loginbox.php"></script></td>
	</form>
	<td align="right">
	・<a href="http://www.chinaunix.net" class="list1">ChinaUnix首页</a>

	・<a href="http://bbs.chinaunix.net" class="list1">论坛</a>
	・<a href="http://blog.chinaunix.net" class="list1">博客</a>&nbsp;
	</td>
	</tr>
	</table></td>

  </tr>

  <tr>

    <td height="1" bgcolor="#CCCCCC"></td>

  </tr>

  <tr>

    <td><table width="100%" border="0" cellpadding="0" cellspacing="0">

      <tr>

        <td height="84"><img src="/images/logo.jpg" /></td>

        <td align="right" ><IFRAME SRC="http://count.chinaunix.net/iframe.php?id=54" width="750" height="80" frameborder="0"  scrolling="no"></IFRAME>
</td>

      </tr>

    </table></td>

  </tr>

  <tr>

    <td><table width="100%" border="0" cellspacing="0" cellpadding="0">

      <tr>

        <td width="3"><img src="/images/bgtop1.jpg" width="3" height="26" /></td>

        <td width="944" background="/images/bgtop2.gif" class="whitetop">
<a href="http://linux.chinaunix.net/" target="_blank">Linux首页</a> |
<a href="http://linux.chinaunix.net/news/">Linux新闻</a> |
<a target="_blank" href="http://linux.chinaunix.net/bbs" style=color:red><b>Linux论坛</b></a> |
<a href="http://linux.chinaunix.net/techdoc/">Linux文档</a> |
<a target="_blank" href="http://download.chinaunix.net/disc/linux/">Linux下载</a> |
<a target="_blank" href="http://blog.chinaunix.net/techart.php?frmid=6">Linux博客</a> |
<a target="_blank" href="http://search.chinaunix.net/">Linux搜索</a> |
<a target="_blank" href="http://linux.chinaunix.net/bbs/index.php?gid=68">开源项目孵化平台</a>
 |
<a target="_blank" href="http://linux.chinaunix.net/ebook/"  style=color:red>《开源时代》</a></td>

        <td width="3" align="right"><img src="/images/bgtop3.jpg" width="3" height="26" /></td>

      </tr>

    </table></td>

  </tr>

</table>

<table width="950" border="0" align="center" cellpadding="0" cellspacing="0">

<tr>

    <td valign="bottom" class="BlkLightblue">
<a target="_blank" href="http://linux.chinaunix.net/techdoc/beginner/">
		新手入门</a> | <span lang="zh-cn">
		<a target="_blank" href="http://linux.chinaunix.net/techdoc/install/">
		安装启动</a> | </span>
		<a target="_blank" href="http://linux.chinaunix.net/techdoc/system/">
		管理员指南</a> | <a target="_blank" href="http://man.chinaunix.net/">开发手册</a> 
		| <a target="_blank" href="http://linux.chinaunix.net/techdoc/desktop/">
		桌面应用</a> |
		<a target="_blank" href="http://linux.chinaunix.net/techdoc/develop/">
		程序开发</a> |
		<a target="_blank" href="http://linux.chinaunix.net/techdoc/database/">
		数据库</a> | <span lang="zh-cn">
		<a target="_blank" href="http://linux.chinaunix.net/techdoc/net/">网络技术</a>|
<a target="_blank" href="http://linux.chinaunix.net/topics/2007-01-25/15/index.shtml">
CentOS</a></span> |
<a target="_blank" href="http://linux.chinaunix.net/search2.php?key=fedora&id=0">
Fedora</a> <span lang="zh-cn">| </span>
<a target="_blank" href="http://linux.chinaunix.net/search2.php?key=mysql&id=0">
MySQL</a>

<span lang="zh-cn">| </span>
<a target="_blank" href="http://linux.chinaunix.net/search2.php?key=apache&id=0">
Apache</a>

<span lang="zh-cn">| </span>
<a target="_blank" href="http://linux.chinaunix.net/search2.php?key=ubuntu&id=0">
<font color="#FF0000">Ubuntu</font></a>

<span lang="zh-cn">| </span>
<a target="_blank" href="http://linux.chinaunix.net/topics/2008-07-10/18/index.shtml">
<font color="#FF0000">Gentoo</font></a>| </span>
<b>
<a target="_blank" href="http://linux.chinaunix.net/topics/2008-07-30/19/index.shtml">
<font color="#FF0000">OSCON08</font></a></b>
</td>

</tr>
<tr><td>

</td></tr>
  <tr>

    <td height="30" valign="bottom">&nbsp;&nbsp;<a href="http://linux.chinaunix.net">Linux时代</a> &gt;&gt;  <a href="http://linux.chinaunix.net/techdoc/" class='list1'>技术文档</a> >> <a href="http://linux.chinaunix.net/techdoc/system/" class='list1'>系统管理</a></td>

  </tr>

  <tr>

    <td height="1" bgcolor="#CCCCCC"></td>

  </tr>

  <tr>

    <td height="8"></td>

  </tr>

</table><table width="950" border="0" align="center" cellpadding="0" cellspacing="0">

  <tr>

    <td valign="top" class="BLKtext"><table width="660" border="0" align="center" cellpadding="0" cellspacing="0">

      <tr>

        <td height="8">&nbsp;</td>

      </tr>

      <tr>

        <td height="30" class="Ftext1">操作系统安装盘的定制过程</td>

      </tr>

      <tr>

        <td><table width="80%" border="0" align="center" cellpadding="0" cellspacing="0">

          <tr>

            <td height="1" bgcolor="#CCCCCC"></td>

          </tr>

        </table></td>

      </tr>

      <tr>

        <td height="40" align="center">来源: 
 ChinaUnix博客 　日期：
2008.07.09 11:20　(共有<span class="STYLE1" id ="postcount"></span>条评论)  <a href="http://linux.chinaunix.net/bbs/thread-1016159-1-1.html" target="_blank">我要评论</a></td>

      </tr>

      <tr>

        <td>&nbsp;</td>

      </tr>

      <tr>

        <td class="F14">
操作系统安装盘的定制过程<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
你需要将原来操作系统发布盘上的内容拷贝到本机硬盘中，根据有几张发布盘而生成几个目录，比如Fedora Core<br />
2有四张盘，你则需要在系统上生成四个目录，如disc1、disc2、disc3、disc4，分别将这四张盘上内容拷贝到这四个目录中，然后对相应的<br />
RPM包进行更新。<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
首先找到你想更新的RPM包，将新的RPM替换旧包。当然你也可以根据你的需要新增或删除RPM包，需要注意<br />
的是，你需要在comps.xml文件中将新增加或删除的RPM包名加入某个组件中，并且注意其与其它RPM包的依赖关系，也就是说你所放置的包的位置要<br />
恰当，否则它会依赖于在它之前而没有加入系统的某个RPM包。<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
4.1&nbsp; &nbsp; &nbsp; &nbsp; 编辑comps.xml文件 <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
在<br />
生成安装盘之前，需要注意对comps.xml文件进行修改。这个文件用来告知安装程序anaconda，用户选择了某个组是应该有哪些包需要安装，定义<br />
了在安装过程中，包是如何被捆绑在一起的。在Red Hat 8.0以前版本的发布盘中，对应的文件为comps，它只是一个简单的文本文件，在Red<br />
Hat 8.0之后的版本中，用comps.xml代替了原来的comps文件。comps.xml是一个XML文件，易于对内容进行分析和说明。<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
comps.xml文件开始是说明xml的版本和DTD断言，然后进入以标记开始的文件的主体内容。如：<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
comps.xml主要由三部分组成，首先是组列表，它描述<br />
了在安装过程中需要的不同的组（或组件），包括组名、组的描述和包含的RPM包；其次是组的层次结构，它将组分成不同的类，并定义了组的一个顺序，从而可<br />
以决定哪些组需要先安装；最后为一系列RPM包以及它们之间的依赖关系。<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
下面分别介绍comps.xml文件的这三部分：<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
（1）　组列表<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
在系统安装时，需要用到一个组中的一些属性，下面就是属性列表以及它们如何使用。一个组被定义在和标记之内.<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
一个简单的组定义可以是：<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp;somegroup<br />
&nbsp;&nbsp;Sample Group<br />
&nbsp;&nbsp;true<br />
&nbsp;&nbsp;false<br />
&nbsp;&nbsp;This is a silly sample group<br />
&nbsp;&nbsp;<br />
&nbsp; &nbsp; bash<br />
&nbsp; &nbsp; cpio<br />
&nbsp;&nbsp;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
下面分别说明组定义中一些参数的含义：<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <ul><li>id：组的id仅仅是在comps.xml文件中作为该组的一个标识，这是必须的；<li>name：表示用户可以看到的组的名字，它也是必须的；<li>default：它表示在系统安装过程中，当选择定制（custom）安装时，该组是否在缺省情况下被选中。如果没有说明，则缺省情况下为不选中。<li>uservisible：它表示该组在缺省情况下是否在安装时可以看到，如果没有说明，缺省设置为YES，为可以看到。<li>description：它表示对该组进行简短的描述，这是必须的；<li>packagelist：它说明在该组内的一系列安装包，这也是必须的。<br />
&nbsp; &nbsp; &nbsp; &nbsp; packagereq：包名 <br />
属性：<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <ul><li>type：当进行安装时，判定对应的包是否是组的&quot;强制&quot;部分、或&quot;缺省&quot;部分或&quot;可选&quot;部分。它可以是&quot;mandatory&quot;、&quot;default&quot;或&quot;optional&quot;之一。<li>requires：它说明只有当它所需要（依赖）的包也安装情况下，此包才安装进系统。</ul><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </ul><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
（2）组层次结构<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
它描述了组的树状层次结构，组层次结构定义在和标记之间，由定义的标记组成类。<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
一个简单的组层次结构可以如下所述：<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp;<br />
&nbsp; &nbsp; Random Groups<br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp;&nbsp; &nbsp;somegroup<br />
&nbsp; &nbsp; <br />
&nbsp;&nbsp;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
一个类由下面这些属性组成：<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <ul><li>name: 它表示类名，是必须的；<li>subcategories: 它表示此类的一些子类，由一列表和 元素组成<br />
&nbsp;&nbsp;<ul><li>subcategory: 前面定义的组的id</ul><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </ul><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
（3）RPM包<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
此部分说明要安装的RPM包，它定义在和标记之内。一个简单的RPM包部分可以如：<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp;bash<br />
&nbsp;&nbsp;<br />
&nbsp; &nbsp; mktemp<br />
&nbsp; &nbsp; bash<br />
&nbsp; &nbsp; glibc<br />
&nbsp; &nbsp; libtermcap<br />
&nbsp;&nbsp;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <ul><li>name：它指的是RPM包名，是必须的。<li>dependencylist：它说明此包对应的依赖的RPM包。<br />
&nbsp;&nbsp;<ul><li>dependency：此包需要的包的名字</ul><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </ul><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
4.2&nbsp; &nbsp; &nbsp; &nbsp; 产生完整的comps.xml文件<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
上述说明的comps.xml文件中的RPM包部分是是自动产生的，为了形成完全的comps.xml文件，需要在系统中安装comps-extras RPM包，然后进行下面的操作：<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <ul><li>将comps.xml文件中的原来的RPM包部分删除；<li>运行：<br />
/usr/share/comps-extras/getfullcomps.py comps.xml /path/to/tree<br />
arch　&gt;/root/filelist<br />
在此，/path/to/tree是Red Hat<br />
Linux操作系统安装盘内容存储的地方，arch指的是体系结构，为i386。注意的是，假定comps.xml已经存放/path/to/tree<br />
/arch/RedHat/base/目录下，将此输出重定向到一个临时文件，如/root/filelist。<li>将comps.xml文件中最后一行内容（为）删除<li>将前面生成的临时文件添加到comps.xml中<li>再将添加到comps.xml文件中</ul><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
通<br />
过新增你的包到comps.xml文件，你可以根据你的需要做你自己的发布盘，确信你的包在缺省情况下会被安装。需要注意的一件事是你更新的包与其它包的<br />
依赖关系，这是你需要处理的，要注意你更新的包所应该放置的位置。另外，不要在文件中随意增加或删除其余的空格。在修改comps.xml之前，也最好对<br />
最初的comps.xml做个备份，以备恢复使用。<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
4.3&nbsp; &nbsp; &nbsp; &nbsp; 重新编译安装程序，调整安装阶段<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
安<br />
装程序是不可能一次就加载进来的，必须分阶段进行，通常我们就称为&quot;stage&quot;。第一个阶段所用程序很小，只有这样才能从一张软盘、tftp服务器等等<br />
上面加载。通常这个阶段程序包含的只有一个精简过的Linux内核和在后续步骤当中必要的一些驱动程序（比如SCSI）。<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
要采用一个新的RedHat安装，就会需要很多的映像，最明显的就是引导安装盘本身（从软驱或者光驱安装）的boot.img，但是我们也需要对从硬盘、网络文件系统等安装方式提供支持。<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
RedHat就此提供了很好的脚本命令，只需一个简单的操作就可以完成所有的操作。这些脚本的工作就是把某些RPM包的内容提取出来，然后用来生成各安装步骤所用程序的映像。<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
所再强调的是，我们必须保证安装了anaconda-runtime：<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #rpm -i&nbsp;&nbsp;anaconda-runtime-xxxxx-i386.rpm<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
接着进入目录/usr/lib/anaconda-runtime，这里我们会看到一些非常有用的脚本，比如：<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <ul><li>mk-images.i386：包涵有创建启动磁盘时i386的专门设置（通常情况下，网络和pcmcia）以及辅助磁盘驱动程序。在此您可以改变启动映像中所包含的模块，比如说在网络启动磁盘有：<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ……<br />
NETWORKMODULES=&quot;$COMMONMODULES nfs 3c59x eepro100 tulip pcnet32<br />
ne2k-pci 8139too&quot;<br />
……..<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <li>buildinstall 这是主要的。<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #cd&nbsp;&nbsp;/usr/lib/anaconda-runtime<br />
#./buildinstall ~/disc1/<br />
这个脚本命令会在~/disc1/images目录下更新一些的文件。</ul><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
4.4&nbsp; &nbsp; &nbsp; &nbsp; 生成新的hdlist文件<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
当安装时，安装程序需要依赖光盘上的Fedora/base/hdlist文件，它包含的是所有可用的RPM包的必要信息，这些信息在安装过程当中是用来显示每一个包的用途以及解决用户选择软件包后的依赖性问题。<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
用以生成hdlist文件的程序叫做genhdlist，它是由anaconda-runtime这个包产生的。现在的genhdlist多了一个新的参数：--withnumbers，是用来记录hdlist文件中每个RPM包的媒介代号。<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
分步处理的过程如下：<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #rpm -i anaconda-runtime-xxxxx-i386.rpm<br />
#cd /usr/lib/anaconda-runtime<br />
#./genhdlist -- withnumbers ~/disc1&nbsp;&nbsp;~/disc2　~/disc3&nbsp;&nbsp;~/disc4<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
整个过程只需要执行一个脚本，见附录一：kernel-update.sh。<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
如果你在系统中添加了RPM包，那么在生成安装盘之前，最好将这四张盘上的内容复制到一个目录下，然后修改附录一的脚本文件，运行脚本，先网络安装一次，看是否存在包的依赖关系问题。如果没有，则可以生成安装盘。<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
<br />
<b>本文来自ChinaUnix博客，如果查看原文请点：</b><a href="http://blog.chinaunix.net/u2/60913/showart_1076682.html" target="_blank">http://blog.chinaunix.net/u2/60913/showart_1076682.html</a> 
</td>

      </tr>


      <tr>

        <td height="20" align="right"> 　 <a href="http://linux.chinaunix.net/bbs/thread-1016159-1-1.html"  target="_blank">发表评论</a>

  <a href="http://linux.chinaunix.net/bbs/thread-1016159-1-1.html"  target="_blank">查看评论</a>(共有<span class="STYLE1" id ="postcount2"></span>条评论)
<a href="http://linux.chinaunix.net/bbs/forum-2-1.html" target="_blank">我要提问</a>
</td>

      </tr>
      <tr>

        <td>&nbsp;</td>

      </tr>

      

    </table>


</td>

    <td width="8">&nbsp;</td>

    <td width="245" valign="top" bgcolor="#FFF9EB">
<center><br>
<form action="/search2.php" method="GET">
<input type="text" name="key" size="15"><input type=hidden name="id" value=0 ><input type="submit" value="搜索">
</form>
<br>
</center>
<table width="100%" border="0" cellspacing="0" cellpadding="0">

      <tr>

        <td height="27" background="/images/bg245.jpg" class="F13"><table width="100%"><tr><td class="F13">最新资讯</td><td align="right"><a href="/news" target="_blank">更多>></a>&nbsp;</td></tr></table></td>

      </tr>

      <tr>

        <td valign="top" bgcolor="#FFFFFF" class="BLKtext" ><table width="97%" border="0" align="center" cellpadding="0" cellspacing="0">

          <tr>

            <td height="5"></td>

          </tr>

          <tr>

            <td>・ <a href='/news/2010/12/10/1175491.shtml' title='谷歌劝说诺基亚采用Android操作系统' target='_blank'>谷歌劝说诺基亚采用Android操作..</a><br />
・ <a href='/news/2010/12/10/1175493.shtml' title='Apache 基金会确认退出 JCP 执行委员会' target='_blank'>Apache 基金会确认退出 JCP 执..</a><br />
・ <a href='/news/2010/12/07/1175306.shtml' title='Chrome 10 新功能探秘：新增GPU混合加速功能' target='_blank'>Chrome 10 新功能探秘：新增GP..</a><br />
・ <a href='/news/2010/12/07/1175307.shtml' title='金山宣布开源其安全软件' target='_blank'>金山宣布开源其安全软件</a><br />
・ <a href='/news/2010/12/07/1175309.shtml' title='女黑客在开源会议上抱受骚扰' target='_blank'>女黑客在开源会议上抱受骚扰</a><br />
・ <a href='/news/2010/12/07/1175310.shtml' title='21款值得关注的Linux游戏' target='_blank'>21款值得关注的Linux游戏</a><br />
・ <a href='/news/2010/12/07/1175311.shtml' title='马化腾：腾讯半年后彻底转型，开放和分享' target='_blank'>马化腾：腾讯半年后彻底转型，..</a><br />
・ <a href='/news/2010/12/07/1175305.shtml' title='[多图] Chrome OS 预发布版本多图赏析' target='_blank'>[多图] Chrome OS 预发布版本多..</a><br />
・ <a href='/news/2010/12/01/1175001.shtml' title='Lubuntu 11.04 默认应用抢先一览' target='_blank'>Lubuntu 11.04 默认应用抢先一览</a><br />
・ <a href='/news/2010/12/01/1175002.shtml' title='Red Hat宣布收购云计算软件提供商Makara' target='_blank'>Red Hat宣布收购云计算软件提供..</a><br />
</td>

          </tr>

          <tr>

            <td height="5"></td>

          </tr>

        </table></td>

      </tr>

      <tr>

        <td height="10" bgcolor="#FFFFFF"></td>

      </tr>

      <tr></table>
<table width="100%" border="0" cellspacing="0" cellpadding="0">

      <tr>

        <td height="27" background="/images/bg245.jpg" class="F13"><table width="100%"><tr><td class="F13">论坛热点</td><td align="right"><a href="/bbs" target="_blank">更多>></a>&nbsp;</td></tr></table></td>

      </tr>

      <tr>

        <td valign="top" bgcolor="#FFFFFF" class="BLKtext" ><table width="97%" border="0" align="center" cellpadding="0" cellspacing="0">

          <tr>

            <td height="5"></td>

          </tr>

          <tr>

            <td>・ <a href='http://bbs.chinaunix.net/thread-3687970-1-1.html' title='do_execve时候用户栈中参数的位置问题' target='_blank'>do_execve时候用户栈中参数的..</a><br />
・ <a href='http://bbs.chinaunix.net/thread-3687969-1-1.html' title='swapinfo -atm 问题' target='_blank'>swapinfo -atm 问题</a><br />
・ <a href='http://bbs.chinaunix.net/thread-3687968-1-1.html' title='Linux 的优点简述' target='_blank'>Linux 的优点简述</a><br />
・ <a href='http://bbs.chinaunix.net/thread-3687967-1-1.html' title='VM虚拟机上得Red Hat Linux上搭建的ftp服务器，windows登陆不进去，但一个局域网其他' target='_blank'>VM虚拟机上得Red Hat Linux上..</a><br />
・ <a href='http://bbs.chinaunix.net/thread-3687965-1-1.html' title='我看成了上海男人喜欢女人毛多还是毛少' target='_blank'>我看成了上海男人喜欢女人毛..</a><br />
・ <a href='http://bbs.chinaunix.net/thread-3687964-1-1.html' title='校车展览，看了你就知道' target='_blank'>校车展览，看了你就知道</a><br />
・ <a href='http://bbs.chinaunix.net/thread-3687963-1-1.html' title='在遇到他之前，唯一需要做的，就是让自己足够优秀。在遇到他之前，请把最好的年华留给' target='_blank'>在遇到他之前，唯一需要做的..</a><br />
・ <a href='http://bbs.chinaunix.net/thread-3687962-1-1.html' title='GRUB的疑问' target='_blank'>GRUB的疑问</a><br />
・ <a href='http://bbs.chinaunix.net/thread-3687961-1-1.html' title='从来没有人真正付足书价――所付的只是印刷费' target='_blank'>从来没有人真正付足书价――..</a><br />
・ <a href='http://bbs.chinaunix.net/thread-3687960-1-1.html' title='云存储 vs 网盘' target='_blank'>云存储 vs 网盘</a><br />
</td>

          </tr>

          <tr>

            <td height="5"></td>

          </tr>

        </table></td>

      </tr>

      <tr>

        <td height="10" bgcolor="#FFFFFF"></td>

      </tr>

      <tr></table>
<table width="100%" border="0" cellspacing="0" cellpadding="0">

      <tr>

        <td height="27" background="/images/bg245.jpg" class="F13"><table width="100%"><tr><td class="F13">文档更新</td><td align="right"><a href="/techdoc" target="_blank">更多>></a>&nbsp;</td></tr></table></td>

      </tr>

      <tr>

        <td valign="top" bgcolor="#FFFFFF" class="BLKtext" ><table width="97%" border="0" align="center" cellpadding="0" cellspacing="0">

          <tr>

            <td height="5"></td>

          </tr>

          <tr>

            <td>・ <a href='/techdoc/develop/2012/03/16/3686893.shtml' title='orcale queue' target='_blank'>orcale queue</a><br />
・ <a href='/techdoc/develop/2012/03/16/3686868.shtml' title='谁可以推荐几本经典的操作系统的书（英文版）' target='_blank'>谁可以推荐几本经典的操作系统的..</a><br />
・ <a href='/techdoc/develop/2012/03/16/3686867.shtml' title='【北京】某物联网公司招云计算应用高级开发工程师' target='_blank'>【北京】某物联网公司招云计算应..</a><br />
・ <a href='/techdoc/develop/2012/03/16/3686866.shtml' title='【北京】某物联网公司招云计算应用高级开发工程师' target='_blank'>【北京】某物联网公司招云计算应..</a><br />
・ <a href='/techdoc/develop/2012/03/16/3686865.shtml' title='谁能推荐几本关于操作系统的书' target='_blank'>谁能推荐几本关于操作系统的书</a><br />
・ <a href='/techdoc/develop/2012/03/16/3686864.shtml' title='如何添加网络接口eth1' target='_blank'>如何添加网络接口eth1</a><br />
・ <a href='/techdoc/develop/2012/03/16/3686863.shtml' title='葡萄牙语入门教材的选取与经验分享' target='_blank'>葡萄牙语入门教材的选取与经验分享</a><br />
・ <a href='/techdoc/develop/2012/03/16/3686862.shtml' title='葡萄牙语就业前景分析' target='_blank'>葡萄牙语就业前景分析</a><br />
・ <a href='/techdoc/develop/2012/03/16/3686861.shtml' title='葡萄牙语学习经验交流' target='_blank'>葡萄牙语学习经验交流</a><br />
・ <a href='/techdoc/develop/2012/03/16/3686860.shtml' title='Щ' target='_blank'>Щ</a><br />
</td>

          </tr>

   
        </table></td>

      </tr>


      <tr></table>
</td>

  </tr>

</table>
<script src="/js/threadcount.php?tid=1016159"></script>
<table width="950" border="0" align="center" cellpadding="0" cellspacing="0">

  <tr>

    <td>&nbsp;</td>

  </tr>

</table>

<table width="950" border="0" align="center" cellpadding="0" cellspacing="0">

  <tr>

    <td height="2" bgcolor="#308CF6"></td>

  </tr>

  <tr>

    <td height="30" align="center"><a href="http://www.chinaunix.net/about/index.shtml" target="_blank">关于我们</a> | <a href="http://www.chinaunix.net/about/connect.html" target="_blank">联系方式</a> | <a href="http://www.chinaunix.net/about/service.html" target="_blank">广告合作</a> | <a href="http://www.wintalent.cn:8031/wt5/sequelmedia/web/index" target="_blank">诚聘英才</a> | <a href="http://www.chinaunix.net/about/channel.html" target="_blank">网站地图</a> | <a href="http://www.chinaunix.net/about/friend.html" target="_blank">友情链接</a> | <a href="http://linux.chinaunix.net/bbs/register.php" target="_blank">免费注册</a></td>

  </tr>

  <tr>

    <td height="2" bgcolor="#308CF6"></td>

  </tr>

  <tr>

    <td align="center"><p>Copyright &copy; 2001-2009 ChinaUnix.net All Rights Reserved</p>

        <p>感谢所有关心和支持过ChinaUnix的朋友们<br />
	<p>
 <a href="http://www.it168.com/images/icp.jpg" target="_blank">京ICP证:060528号</a></p></td>

  </tr>

</table>

<!-- 统计 START -->
<script src="http://stat.it168.com/pv.js" type="text/javascript"></script>
<script>
function sendPV(){
    var pvTrack = new PvTrack();
    pvTrack.type = 10; // 频道类别ID
    pvTrack.channel = 22; // 频道ID
   
    pvTrack.pageType = 0;
    pvTrack.track();
}
window.setTimeout("sendPV()", 0);
</script>
<script language="javascript" src="http://bbs.chinaunix.net/googlepv/pv.js" type="text/javascript"></script>
<!-- 统计 .END -->
<div style='display:none'>
<script type="text/javascript"> 
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F0ee5e8cdc4d43389b3d1bfd76e83216b' type='text/javascript'%3E%3C/script%3E"));
</script>
</div>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-11982772-4");
pageTracker._trackPageview();
} catch(err) {}
</script>
<script type='text/javascript' src='http://168.it168.com/js/601.js'></script>



</body>

</html>
