        <!DOCTYPE html><html  id="customDoc"><!--STATUS OK--> <head> <meta http-equiv=Content-Type content="text/html; charset=utf-8"> <title> psql 语法_蘇&#39;s_百度空间</title> <link rel="shortcut icon" href="http://hi.bdimg.com/static/qbase/img/mod/16_favicon.ico?v=49f19c7f.ico" type=image/x-icon>   <meta name=keywords content="psql 语法,Postgresql"> <meta name=description content=",psql 语法"><script>window.wpo={start:new Date*1,pid:109,page:'qing'}</script><!--[if IE]><script type="text/javascript">(function(){var b=("abbr,article,aside,audio,canvas,datalist,details,dialog,eventsource,figure,footer,header,hgroup,mark,menu,meter,nav,output,progress,section,time,video").split(","),a=b.length;while(a--){document.createElement(b[a])}})();</script><![endif]--><script>window.qDomain={"qing":"http://hi.baidu.com","static":"http://hi.bdimg.com","passport":"https://passport.baidu.com","portrait":"http://tx.bdimg.com","hiup":"http://hiup.baidu.com","photo":"http://hiphotos.baidu.com","message":"http://msg.baidu.com","friend":"http://frd.baidu.com","mp3":"http://mp3.baidu.com","ting":"http://ting.baidu.com","image":"http://img.baidu.com","qup":"http://upload.hi.baidu.com","www":"http://www.baidu.com"};window.qUserInfo={"userName":"mchina_tang","portrait":"16966d6368696e615f74616e676516","qingUrl":"\/mchina_tang","spaceName":"蘇&#39;s","right":"0","avatarStatus":"1","flagNeedInvite":"0","flagNotInvited":"0","version":"2"};window.qVisitorInfo={"userName":"","portrait":"","isHost": false,"loginStatus":"not_login","qingUrl":"","right":"0","version":"0"};window.qPageInfo={"pageUrl":"http:\/\/hi.baidu.com\/mchina_tang\/item\/c8765010ba4a7b543a176e04","referUrl":"http:\/\/www.baidu.com\/s?wd=psql&rsv_bp=0&rsv_spt=3&inputT=1663"};window.qUserAvatar={size20:"http://hiphotos.baidu.com/space/scrop=20;q=100/sign=41fdafb370cf3bc7ec5e8ab3a13d8891/e61190ef76c6a7efe8effb98fdfaaf51f2de6646.jpg",size40:"http://hiphotos.baidu.com/space/scrop=40;q=100/sign=563b5d499f3df8dca263c8cebd2c46bb/e61190ef76c6a7efe8effb98fdfaaf51f2de6646.jpg",size65:"http://hiphotos.baidu.com/space/scrop=65;q=100/sign=b9c99e52d100baa1be7200e4372d8f27/e61190ef76c6a7efe8effb98fdfaaf51f2de6646.jpg",size110:"http://hiphotos.baidu.com/space/scrop=110;q=100/sign=b8db618628381f309a47caf6d93c7d39/e61190ef76c6a7efe8effb98fdfaaf51f2de6646.jpg",size160:"http://hiphotos.baidu.com/space/scrop=160;q=100/sign=b8db618628381f309a47caf6d93c7d3e/e61190ef76c6a7efe8effb98fdfaaf51f2de6646.jpg"};window.qVisitorAvatar={size20:"",size40:"",size65:"",size110:"",size160:""};window.qBdsToken="the fisrt two args should be string type:0,1!";window.qErrorInfo={"no":"0","msg":""};window.qServerInfo={"timeStamp":"1344935578"};window.qLongPolling={"url":"http:\/\/m.hi.baidu.com\/i\/msg\/listen"}</script><!--[if (lt IE 8.0)]><link href="http://hi.bdimg.com/static/qbase/css/qbase.css?v=be8a5272.css" type=text/css rel=stylesheet><![endif]--><!--[if (!IE)|(gte IE 8.0)]><!--><link href="http://hi.bdimg.com/static/qbase/css/qbase_datauri.css?v=00440ea5.css" type=text/css rel=stylesheet><!--<![endif]-->     <!--[if (lt IE 8.0)]><link rel=stylesheet type=text/css href="http://hi.bdimg.com/static/qcomment/css/qcomment.css?v=45ade295.css"><![endif]--><!--[if (!IE)|(gte IE 8.0)]><!--><link rel=stylesheet type=text/css href="http://hi.bdimg.com/static/qcomment/css/qcomment_datauri.css?v=97b9740e.css"><!--<![endif]--><link rel=stylesheet type=text/css href="http://hi.bdimg.com/static/qhome/css/common/mod_userInfo.css?v=86bf4259.css">   <!--[if (lt IE 8.0)]><link type=text/css rel=stylesheet href="http://hi.bdimg.com/static/qhome/css/detail/20001/detail.css?v=fdcbe083.css"><![endif]--><!--[if (!IE)|(gte IE 8.0)]><!--><link type=text/css rel=stylesheet href="http://hi.bdimg.com/static/qhome/css/detail/20001/detail_datauri.css?v=0a3fa809.css"><!--<![endif]-->   <script src="http://hi.bdimg.com/static/qbase/js/qing/qing.js?v=43b043ad.js"></script>  <script>
    /*最终页页面变量*/ 
    window.detailPage = {
        threadId : "c8765010ba4a7b543a176e04",
        blogTitle: "psql 语法" || "无标题",
        contentType : "text",
        originAuthorName : "",
        originPortrait : "",
        originThreadId : ""
    }; 
    </script><script>wpo.head=new Date*1;</script> </head> <body>  <header class=mod-topbar id=modTopbar><iframe class=mod-topbar-bgframe></iframe><div class=mod-topbar-pseudo-real><div class="wrapper-box clearfix"><div class=left-box><a href="http://hi.baidu.com" class=logo-box><span id=baiduSpaceLogo class=q-logo></span></a></div><div class=center-box><ul class=q-menubox><li class=q-menuitem><a href="http://hi.baidu.com/tag" >推荐</a></ul></div><div class=right-box><ul class=q-navbox><li class=q-navitem><a href="http://hi.baidu.com/go/login" class=q-goto-login>登录</a><li class="q-navitem q-nav-sp"><span></span><li class=q-navitem><a href="http://hi.baidu.com/go/reg">注册</a> </ul><div class="right mod-qhome-follow-box"><a href="#" class="follow-btn a-btn-follow">关注此空间</a></div></div></div></div></header>  <section class=mod-page-body> <div class="mod-page-main wordwrap clearfix">  <div class=x-page-container>
    <section class="mod-topspaceinfo mod-cs-header"><div class=head-topbar></div><div class=container><h1><a class="space-name cs-header-spacename" href="/new/mchina_tang">蘇&#39;s</a></h1><p class="space-description cs-header-spacesummary"></p></div><div class=head-footer></div></section>    <div class="mod-blogpage-wraper">
        <div class="blog-bg-main-repeat hide"></div>
        <div class="grid-80 mod-blogpage">
            <div class="blog-bg-main hide"></div>
            
        <div class="mod-text-content mod-post-content">   
                      <div class="content-head clearfix">  <div class=content-other-info> <span>2011-11-30 14:31</span> </div>   <h2 class="title content-title">psql 语法</h2>  </div> <div id=content class="content text-content clearfix"> psql --  PostgreSQL 交互终端Synopsis<p><tt>psql</tt>[<tt><em>option</em></tt>...] [<tt><em>dbname</em></tt>[<tt><em>username</em></tt>]]</p>描述<p>psql 是一个以终端为基础的 PostgreSQL 前端。它允许你交互地键入查询，把它们发出给 PostgreSQL， 然后看看查询的结果。另外，输入可以来自一个文件。还有， 它提供了一些元命令和多种类 shell 地特性来实现书写脚本以及对大量任务的自动化。</p>选项<dl><dt><tt>-a</tt><br /><tt>--echo-all</tt></dt><dd><p>在读取行时向标准输出打印所有内容。 这个选项在脚本处理时比交互模式时更有用。这个选项等效于设置变量 <tt>ECHO</tt> 为 <tt>all</tt>。</p></dd><dt><tt>-A</tt><br /><tt>--no-align</tt></dt><dd><p>切换为非对齐输出模式。（缺省输出模式是对齐的。）</p></dd><dt><tt>-c <tt><em>command</em></tt></tt><br /><tt>--command <tt><em>command</em></tt></tt></dt><dd><p>声明 psql 将执行一条查询字串， <tt><em>command</em></tt>，然后退出。这一点在 shell 脚本里很有用。</p><p><tt><em>command</em></tt> 必须是一条完全可以被服务器分析的查询字串（也就是说，它不包含 psql特有的特性）， 或者是一个反斜杠命令。这样你就不会混合 SQL 和 psql 元命令。要想混合使用，你可以把字串定向到 psql里，象这样： <tt>echo &quot;\x \\ select * from foo;&quot; | psql</tt>。</p><p>如果命令字串包含多个 SQL 命令，那么他们在一个事务里处理， 除非在字串里包含了明确的 BEGIN/COMMIT 命令把他们分成多个事务。 这个和从 psql 的标准输入里给它填充相同字串不同。</p></dd><dt><tt>-d <tt><em>dbname</em></tt></tt><br /><tt>--dbname <tt><em>dbname</em></tt></tt></dt><dd><p>声明想要联接的数据库名称。等效于在命令行行上把 <tt><em>dbname</em></tt> 声明为第一个非选项参数。</p></dd><dt><tt>-e</tt><br /><tt>--echo-queries</tt></dt><dd><p>把所有发送给服务器的查询同时也拷贝到标准输出。 等效于把变量 <tt>ECHO</tt> 设置为 <tt>queries</tt>。</p></dd><dt><tt>-E</tt><br /><tt>--echo-hidden</tt></dt><dd><p>回显由<tt>\d</tt>和其他反斜杠命令生成的实际查询。 你可以使用这个命令学习 psql 的内部操作。 这等效于在psql里设置变量<tt>ECHO_HIDDEN</tt>。</p></dd><dt><tt>-f <tt><em>filename</em></tt></tt><br /><tt>--file <tt><em>filename</em></tt></tt></dt><dd><p>使用 <tt><em>filename</em></tt>作为命令的语句源而不是交互式读入查询。 在处理完文件后，psql 结束。这个选项在很多方面等效于内部命令 <tt>\i</tt>。</p><p>如果 <tt><em>filename</em></tt> 是 <tt>-</tt>（连字符），则从标准输入读取。</p><p>使用这个选项与用 <tt>psql &lt; <tt><em>filename</em></tt></tt> 有微小的区别。通常，两者都回按照你预期那样运行，但是使用 <tt>-f</tt>打开了一些很好的特性， 比如带行号的错误信息。而且，使用这个选项还有可能有减小启动负荷的机会。 另一方面，如果你把所有内容手工输入， 使用 shell 输入定向的方式（理论上）能保证生成和你已经得到的完全一样的输出（译注：重复运行命令）。</p></dd><dt><tt>-F <tt><em>separator</em></tt></tt><br /><tt>--field-separator <tt><em>separator</em></tt></tt></dt><dd><p>使用 <tt><em>separator</em></tt> 作为未对齐输出的域分隔符。等效于 <tt>\pset fieldsep</tt> 或 <tt>\f</tt>。</p></dd><dt><tt>-h <tt><em>hostname</em></tt></tt><br /><tt>--host <tt><em>hostname</em></tt></tt></dt><dd><p>声明正在运行服务器的主机名。 如果主机名以斜杠开头，则它被用做到 Unix 域套接字的路径。</p></dd><dt><tt>-H</tt><br /><tt>--html</tt></dt><dd><p>打开HTML格式输出。等效于 <tt>\pset format html</tt>或 <tt>\H</tt> 命令。</p></dd><dt><tt>-l</tt><br /><tt>--list</tt></dt><dd><p>列出所有可用的数据库，然后退出。其他非联接选项将被忽略。类似于内部命令 <tt>\list</tt>。</p></dd><dt><tt>-L <tt><em>filename</em></tt></tt><br /><tt>--log-file <tt><em>filename</em></tt></tt></dt><dd><p>除了正常的输出源之外，把所有查询输出记录到文件 <tt><em>filename</em></tt>。</p></dd><dt><tt>-o <tt><em>filename</em></tt></tt><br /><tt>--output <tt><em>filename</em></tt></tt></dt><dd><p>将所有查询输出定向到文件 <tt><em>filename</em></tt>。这个选项等效于命令 <tt>\o</tt>。</p></dd><dt><tt>-p <tt><em>port</em></tt></tt><br /><tt>--port <tt><em>port</em></tt></tt></dt><dd><p>声明被服务器侦听的 TCP 端口或使用的缺省本地 Unix 主控套接字文件句柄。 缺省的是环境变量<tt>PGPORT</tt>的值，如果没有设置的话是编译是声明的端口，通常是 5432。</p></dd><dt><tt>-P <tt><em>assignment</em></tt></tt><br /><tt>--pset <tt><em>assignment</em></tt></tt></dt><dd><p>允许你在命令行上以 <tt>\pset</tt>的风格设置打印选项。 要注意的是你在这里用等号分割名称和值，而不能用空格。 因此要把输出格式设置为 LaTeX，你可以敲入 <tt>-P format=latex</tt>。</p></dd><dt><tt>-q</tt><br /><tt>--quiet</tt></dt><dd><p>声明 psql 将安静地执行处理任务。 缺省时psql将打印欢迎和许多其他输出信息。 如果使用了此选项，这些都不出现。这在和 <tt>-c</tt> 选项一起使用时很有效。在 psql 里，你可以通过设置 <tt>QUIET</tt> 变量实现同样效果。</p></dd><dt><tt>-R <tt><em>separator</em></tt></tt><br /><tt>--record-separator <tt><em>separator</em></tt></tt></dt><dd><p>使用 <tt><em>separator</em></tt> 做为非对齐输出的记录分隔符。 等效于<tt>\pset recordsep</tt>命令。</p></dd><dt><tt>-s</tt><br /><tt>--single-step</tt></dt><dd><p>进入单步模式运行。意味着每个查询在发往服务器之前都要提示用户， 用这个选项也可以取消执行。此选项主要用于调试脚本。</p></dd><dt><tt>-S</tt><br /><tt>--single-line</tt></dt><dd><p>进入单行运行模式，这时每个命令都将由换行符结束，象分号那样。</p><p><strong>注意: </strong>注意这个模式是给那些坚持要这个特性的人的，我们不鼓励你这么用。 实际上，如果你在一行里混合使用 SQL 和元命令，执行的顺序对不熟练的用户而言不总是清晰的。</p></dd><dt><tt>-t</tt><br /><tt>--tuples-only</tt></dt><dd><p>关闭打印列名称和结果行计数脚注等信息。等效于 <tt>\t</tt> 命令。</p></dd><dt><tt>-T <tt><em>table_options</em></tt></tt><br /><tt>--table-attr <tt><em>table_options</em></tt></tt></dt><dd><p>允许你声明放在 HTMLtable 标记里的选项。 参阅 <tt>\pset</tt> 获取细节。</p></dd><dt>-u </dt><dd><p>强制 psql 在和数据库联接之提示输入用户的用户名和口令。</p><p>这个选项已经废弃了，因为它在概念上有漏洞。 （提示输入非缺省用户名和提示输入服务器要求的口令是完全两码事。）我们鼓励你用 <tt>-U</tt> 和 <tt>-W</tt> 选项取代。</p></dd><dt><tt>-U <tt><em>username</em></tt></tt><br /><tt>--username <tt><em>username</em></tt></tt></dt><dd><p>以用户 <tt><em>username</em></tt> 代替缺省用户与数据库联接。（当然，你必须有这么做的权限。）</p></dd><dt><tt>-v <tt><em>assignment</em></tt></tt><br /><tt>--set <tt><em>assignment</em></tt></tt><br /><tt>--variable <tt><em>assignment</em></tt></tt></dt><dd><p>进行一次变量分配，象内部命令 <tt>\set</tt> 那样。 注意，如果有变量名和值的话，你必须在命令行上用等号分隔它们。要重置一个变量， 去掉等号。这个分配是在启动的很早的阶段进行的，所以为内部使用保留的变量可能被再次覆盖。</p></dd><dt><tt>-V</tt><br /><tt>--version</tt></dt><dd><p>打印 psql 版本然后退出。</p></dd><dt><tt>-W</tt><br /><tt>--password</tt></dt><dd><p>强制 psql 在与一个数据库联接前提示输入口令。</p><p>如果服务器要求口令认证，psql 自动提出一个口令提示符。不过，目前是否需要输入口令的判断并不完全可靠， 因此用这个选项强制一个提示符。 如果没有发出口令提示符而服务器要求口令认证，那么联接企图将失败。</p><p>这个选项将在整个会话过程中有效，即使你用元命令 <tt>\connect</tt> 改变了所联接的数据库。</p></dd><dt><tt>-x</tt><br /><tt>--expanded</tt></dt><dd><p>打开扩展表格式模式。等效于命令 <tt>\x</tt>。</p></dd><dt><tt>-X,</tt><br /><tt>--no-psqlrc</tt></dt><dd><p>不读取启动文件（系统的 <tt>psqlrc</tt> 或者你的 <tt>~/.psqlrc</tt> 都不读取）。</p></dd><dt><tt>-?</tt><br /><tt>--help</tt></dt><dd><p>显示关于psql命令行参数的帮助然后退出。</p></dd></dl>退出状态<p>如果正常结束，那么 psql 向 shell 返回 0， 如果自身发生致命错误，则返回 1（内存用尽，未找到文件等）， 如果和数据库的连接失效而且会话不再活跃则返回 2， 如果脚本中发生错误并且设置了 <tt>ON_ERROR_STOP</tt> 则返回 3。</p>用法与一个数据库联接<p>psql 是一个普通的 PostgreSQL 客户端应用。为了与一个数据库联接，你需要知道你的目标数据库， 服务器的主机名和端口号以及你希望以哪个用户的身份进行联接等信息。 我们可以通过命令行参数告诉 psql 这些信息，分别是 <tt>-d</tt>， <tt>-h</tt>，<tt>-p</tt>，和 <tt>-U</tt>。 如果有个参数不属于任何选项开关， 那么它会被解释成数据库名（或者是用户名——如果数据库名称已经给出了。）。 不是所有这些选项都是必须的，有缺省存在。 如果你省略主机名， psql 将通过 Unix 域套接字与本地主机的服务器相联， 或者在没有 unix 域套接字的机器上，通过 TCP/IP 与 <tt>localhost</tt> 连接。 缺省的端口号是编译时确定的。因为数据库服务器使用同样的缺省值， 所以在大多数设置下，你可能不需要声明端口号。缺省的用户名是你的 Unix 用户名，与数据库同名。 要注意的是你不能用任意用户名与任何数据库相联。你的数据库管理员应该告诉你你的访问权限。</p><p>如果缺省不太正确，那么你可以通过设置几个环境变量 <tt>PGDATABASE</tt>， <tt>PGHOST</tt>，<tt>PGPORT</tt> 和/或 <tt>PGUSER</tt> 为对应的值的方法节约几次敲击。另外，用一个 <tt>~/.pgpass</tt> 文件来避免输入密码也是很方便的。</p><p>如果因为任何原因而无法与数据库相联（例如，权限不够，服务器没有运行等）， psql 将返回一个错误并退出。</p> </div>   <div class="mod-post-info clearfix"> <div class="tag-box clearfix">  <a class=tag href="/tag/Postgresql/feeds">#Postgresql</a>  </div> <div class=op-box>  <a class="report-btn hide" href="#" onclick="return false"> 举报 </a>  <span class=pv>浏览(292)</span> <a class=comment-bnt id=commentBnt href="#" onclick="return false"> 评论<span class=comment-nub></span> </a>   <a href="#" id=shareBnt onclick="return false" class=share-bnt> 转载<span id=shareNub class=share-nub></span> </a>   </div></div>              </div>
    
            <div class="mod-share-detail" id="shareDetail" style="display:none"></div>
            
            <div class="mod-detail-pager clearfix">
                                    <div class="detail-nav-pre">
                       <a href="http://hi.baidu.com/mchina_tang/item/f2ebad35827d518fb80c031e" hidefocus title="上一篇"></a>
                    </div>
                                                    <div class="detail-nav-next">
                        <a  href="http://hi.baidu.com/mchina_tang/item/5a246b4cecc1d9f9a5c06603" hidefocus title="下一篇"></a>
                    </div>
                            </div>
                            <div id="commentDetail" class="mod-comment-detail clearfix">
                    <div class="comment-title">评论</div>
                    <div class="comment-content"></div>
                </div>
                    </div>
    </div>
 </div> </div> </section>  <footer class="mod-footer mod-cs-footer"><div class="clearfix hidden-box"></div><div class=footer-box><div class=inner-box><a href="http://hi.baidu.com/go/show/introduce" target=_blank>帮助中心</a><span>&nbsp;|&nbsp;</span><a href=http://tieba.baidu.com/p/1781683739 target=_blank>空间客服</a><span>&nbsp;|&nbsp;</span><a href=http://tousu.baidu.com/hi/add target=_blank>投诉中心</a><span>&nbsp;|&nbsp;</span><a href=http://www.baidu.com/search/hi_contract.html target=_blank>空间协议</a></div><div class=copy-box>&copy;2012&nbsp;Baidu</div></div></footer>  <script src="http://hi.bdimg.com/static/qbase/js/mod/mod_foot.js?v=267e28ab.js"></script> <script>
        	qing.dom.ready(function(){
				if (qVisitorInfo.loginStatus == 'activated'){
					qext.fn.setStoken();
				}
			});
        </script>     <script>qext.stat.ns('m_20120425_');</script> 
    <script src="http://hi.bdimg.com/static/qcomment/js/qcmt_import.js?v=98e733fd.js"></script>	
	<script type="text/javascript">
		window.qIsNotice = '';
		window.qUserInfo.sex = '男';
		window.qUserInfo.age = '23';
		window.qUserInfo.residenceProvince = '江苏';
		window.qUserInfo.residenceCity = '苏州';
		window.qUserInfo.residenceDistrict = '吴中区';
	</script>
	
    <script src="http://hi.bdimg.com/static/qhome/js/detail/20001/detail.js?v=17f417db.js"></script>
        <script type="text/javascript" id="bdshare_js" data="type=slide&amp;mini=1&amp;img=4&amp;uid=713670" ></script>
    <script type="text/javascript" id="bdshell_js"></script>
    <script type="text/javascript">
        var bds_config = {'bdTop':240};
                    var all_img = qing.g('content').getElementsByTagName('img');
            if(all_img.length>0){
                bds_config.bdPic = all_img[0].src;
            }
                document.getElementById("bdshell_js").src = "http://bdimg.share.baidu.com/static/js/shell_v2.js?v=44223225.js?cdnversion=" + new Date().getHours();
		
    </script>
	
     <script>wpo.tti=new Date*1;</script><script>document.write(unescape("%3Cscript src='http://hm.baidu.com/h.js%3F8c869b543955d43e496c2efee5b55823' type='text/javascript'%3E%3C/script%3E"));qext.stat.ns('m_20120713_qing_pv');</script>