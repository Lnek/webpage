<!DOCTYPE html>
<!--[if IE 7]>
<html class="ie ie7" lang="en-US">
<![endif]-->
<!--[if IE 8]>
<html class="ie ie8" lang="en-US">
<![endif]-->
<!--[if !(IE 7) | !(IE 8)  ]><!-->
<html lang="en-US">
<!--<![endif]-->
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width" />
<title>Adventures in Scaling, Part 3: PostgreSQL Streaming Replication | The CodePath Blog</title>
<link rel="profile" href="http://gmpg.org/xfn/11" />
<link rel="pingback" href="http://blog.thecodepath.com/xmlrpc.php" />
<!--[if lt IE 9]>
<script src="http://blog.thecodepath.com/wp-content/themes/twentytwelve/js/html5.js" type="text/javascript"></script>
<![endif]-->
<link rel="alternate" type="application/rss+xml" title="The CodePath Blog &raquo; Feed" href="http://blog.thecodepath.com/feed/" />
<link rel="alternate" type="application/rss+xml" title="The CodePath Blog &raquo; Comments Feed" href="http://blog.thecodepath.com/comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="The CodePath Blog &raquo; Adventures in Scaling, Part 3: PostgreSQL Streaming Replication Comments Feed" href="http://blog.thecodepath.com/2012/02/13/adventures-in-scaling-part-3-postgresql-streaming-replication/feed/" />
<link rel='stylesheet' id='jetpack-subscriptions-css'  href='http://blog.thecodepath.com/wp-content/plugins/jetpack/modules/subscriptions/subscriptions.css?ver=3.8.3' type='text/css' media='all' />
<link rel='stylesheet' id='jetpack-widgets-css'  href='http://blog.thecodepath.com/wp-content/plugins/jetpack/modules/widgets/widgets.css?ver=20121003' type='text/css' media='all' />
<link rel='stylesheet' id='twentytwelve-fonts-css'  href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700&#038;subset=latin,latin-ext' type='text/css' media='all' />
<link rel='stylesheet' id='twentytwelve-style-css'  href='http://blog.thecodepath.com/wp-content/themes/twentytwelve/style.css?ver=3.8.3' type='text/css' media='all' />
<!--[if lt IE 9]>
<link rel='stylesheet' id='twentytwelve-ie-css'  href='http://blog.thecodepath.com/wp-content/themes/twentytwelve/css/ie.css?ver=20121010' type='text/css' media='all' />
<![endif]-->
<link rel='stylesheet' id='pre-tag-css'  href='http://blog.thecodepath.com/wp-content/plugins/wp-syntaxhighlighter/css/pre.css?ver=1.0' type='text/css' media='all' />
<link rel='stylesheet' id='core3.0-css'  href='http://blog.thecodepath.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0' type='text/css' media='all' />
<link rel='stylesheet' id='core-Midnight3.0-css'  href='http://blog.thecodepath.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/styles/shCoreMidnight.css?ver=3.0' type='text/css' media='all' />
<link rel='stylesheet' id='theme-Midnight3.0-css'  href='http://blog.thecodepath.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/styles/shThemeMidnight.css?ver=3.0' type='text/css' media='all' />
<script type='text/javascript' src='http://blog.thecodepath.com/wp-includes/js/jquery/jquery.js?ver=1.10.2'></script>
<script type='text/javascript' src='http://blog.thecodepath.com/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.2.1'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://blog.thecodepath.com/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://blog.thecodepath.com/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='You&#8217;re Overthinking It' href='http://blog.thecodepath.com/2012/02/01/youre-overthinking-it/' />
<link rel='next' title='Asynchronous Processing in Web Applications, Part 1: A Database Is Not a Queue' href='http://blog.thecodepath.com/2012/11/15/asynchronous-processing-in-web-applications-part-1-a-database-is-not-a-queue/' />
<meta name="generator" content="WordPress 3.8.3" />
<link rel='canonical' href='http://blog.thecodepath.com/2012/02/13/adventures-in-scaling-part-3-postgresql-streaming-replication/' />
<link rel='shortlink' href='http://wp.me/p3NyIo-aL' />

<!-- WP SyntaxHighlighter Ver.1.7.3 CSS for code Begin -->
<style type='text/css'>
.syntaxhighlighter,
.syntaxhighlighter a,
.syntaxhighlighter div,
.syntaxhighlighter code,
.syntaxhighlighter table,
.syntaxhighlighter table td,
.syntaxhighlighter table tr,
.syntaxhighlighter table tbody,
.syntaxhighlighter table thead,
.syntaxhighlighter table caption,
.syntaxhighlighter textarea {
font-size: 14px !important; /* Set the font size in pixels */  
font-family: "Consolas", "Bitstream Vera Sans Mono", "Courier New", Courier, monospace !important; /* Set the font type */  
}
.syntaxhighlighter table caption {
/* For Title(Caption) */  
font-size: 14px !important; /* Set the font size in pixels */  
font-family: "Consolas", "Bitstream Vera Sans Mono", "Courier New", Courier, monospace !important; /* Set the font type */  
}
.syntaxhighlighter.nogutter td.code .line {
/* Set the left padding space when no-gutter in ver. 3.0 */  
padding-left: 3px !important;
}
.syntaxhighlighter {
/* For Chrome/Safari(WebKit) */  
/* Hide the superfluous vertical scrollbar in ver. 3.0 */  
overflow-y: hidden !important;
padding: 1px !important;
}
.widget-area.syntaxhighlighter a,
.widget-area.syntaxhighlighter div,
.widget-area.syntaxhighlighter code,
.widget-area.syntaxhighlighter table,
.widget-area.syntaxhighlighter table td,
.widget-area.syntaxhighlighter table tr,
.widget-area.syntaxhighlighter table tbody,
.widget-area.syntaxhighlighter table thead,
.widget-area.syntaxhighlighter table caption,
.widget-area.syntaxhighlighter textarea {
/* For Widget */  
font-size: 14px !important; /* Set the font size in pixels */  
font-family: "Consolas", "Bitstream Vera Sans Mono", "Courier New", Courier, monospace !important; /* Set the font type */  
}
.widget-area table caption {
/* For Widget */  
/* For Title(Caption) */  
font-size: 10px !important; /* Set the font size in pixels */  
font-family: "Consolas", "Bitstream Vera Sans Mono", "Courier New", Courier, monospace !important; /* Set the font type */  
}
</style>
<!-- WP SyntaxHighlighter Ver.1.7.3 CSS for code End -->
	<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
	<style type="text/css" id="twentytwelve-header-css">
			.site-header h1 a,
		.site-header h2 {
			color: #444;
		}
		</style>
	<style type="text/css" id="custom-background-css">
body.custom-background { background-color: #e6e6e6; }
</style>

<!-- Jetpack Open Graph Tags -->
<meta property="og:type" content="article" />
<meta property="og:title" content="Adventures in Scaling, Part 3: PostgreSQL Streaming Replication" />
<meta property="og:url" content="http://blog.thecodepath.com/2012/02/13/adventures-in-scaling-part-3-postgresql-streaming-replication/" />
<meta property="og:description" content="In my last post in this series, I overviewed how to get PostgreSQL setup, running and properly tuned on your system. This works well to setup a primary database for your system but depending on you..." />
<meta property="article:published_time" content="2012-02-13T15:25:10+00:00" />
<meta property="article:modified_time" content="2012-02-13T15:25:10+00:00" />
<meta property="article:author" content="http://blog.thecodepath.com/author/nathan/" />
<meta property="og:site_name" content="The CodePath Blog" />
<meta property="og:image" content="http://wordpress.com/i/blank.jpg" />
<meta name="twitter:site" content="@jetpack" />
<meta name="twitter:card" content="summary" />
</head>

<body class="single single-post postid-667 single-format-standard custom-background custom-font-enabled">
<div id="page" class="hfeed site">
	<header id="masthead" class="site-header" role="banner">
		<hgroup>
			<h1 class="site-title"><a href="http://thecodepath.com" title="The CodePath Blog" rel="home">The CodePath Blog</a></h1>
			<h2 class="site-description"></h2>
		</hgroup>

		<nav id="site-navigation" class="main-navigation" role="navigation">
			<h3 class="menu-toggle">Menu</h3>
			<a class="assistive-text" href="#content" title="Skip to content">Skip to content</a>
			<div class="menu-main_nav-container"><ul id="menu-main_nav" class="nav-menu"><li id="menu-item-5641" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-5641"><a>Categories</a>
<ul class="sub-menu">
	<li id="menu-item-5647" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-5647"><a href="http://blog.thecodepath.com/category/all/">All</a></li>
	<li id="menu-item-5643" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-5643"><a href="http://blog.thecodepath.com/category/all/design/">Design</a></li>
	<li id="menu-item-5645" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-5645"><a href="http://blog.thecodepath.com/category/all/engineering/">Engineering</a></li>
</ul>
</li>
</ul></div>		</nav><!-- #site-navigation -->

			</header><!-- #masthead -->

	<div id="main" class="wrapper">
	<div id="primary" class="site-content">
		<div id="content" role="main">

			
				
	<article id="post-667" class="post-667 post type-post status-publish format-standard hentry category-all category-engineering">
				<header class="entry-header">
									<h1 class="entry-title">Adventures in Scaling, Part 3: PostgreSQL Streaming Replication</h1>
								</header><!-- .entry-header -->

				<div class="entry-content">
			<p>In my <a href="http://engineering.gomiso.com/2011/07/28/adventures-in-scaling-part-2-postgresql/">last post in this series</a>, I overviewed how to get PostgreSQL setup, running and properly tuned on your system. This works well to setup a primary database for your system but depending on your needs, you may find yourself in a position where you would like to start taking advantage of the <a href="http://wiki.postgresql.org/wiki/Streaming_Replication">Streaming Replication</a> and <a href="http://wiki.postgresql.org/wiki/High_Availability">High Availability</a> built into PostgreSQL 9.</p>
<p>When running a database such as PostgreSQL on a server, a single primary master database that performs all reads and writes for your applications will likely not be able to sustain your traffic forever. At a certain point, your application will generate too many concurrent reads and writes, you&#8217;ll want to be able to recover from database failure, or for whatever reason your database will need help scaling. </p>
<h2>Hot Standby? High Availability?</h2>
<p>On a high level, the challenge with scaling out a database is a problem of synchronization. With a single database, there is a single source of truth for your application. All records are in one place which acts as the authority for your data. However, once you begin scaling your database, you have multiple servers all responsible for your data. As data is created, updated and destroyed, this information must necessarily be propagated as quickly as possible to all other servers as well. If servers are out of sync, data can be mis-reported or outright lost. Therefore, each database must be in a consistent state with the others with little margin for error. Since no particular approach solves this problem perfectly for all needs, instead there are <a href="http://www.postgresql.org/docs/9.1/static/different-replication-solutions.html">many strategies</a> for scaling a database.  </p>
<p>The approach you should take as load increases has a lot to do with the specific characteristics of your application. Is your application read-heavy? or write-heavy? If your application has many more reads by volume, then the most common strategy is to setup secondary databases that synchronize data with the primary database. This strategy of setting up read-only databases that track changes to the primary is only part of the scaling story. There will be also be cases where you have too many writes for a single box (multi-master) or you need to distribute data across many boxes (sharding), but this post will focus on solving the problem of simply scaling reads. Look for a future post on more advanced scaling and replication strategies.</p>
<p>Fortunately, the strategy for scaling reads is fairly straightforward. The primary database that accepts writes is called the &#8220;master&#8221; and all other databases that can only help with the reads are called &#8220;slaves&#8221;. Typically, you can setup as many slaves as you&#8217;d like to help distribute the querying load on the database. In addition, in some database setups, these slaves can also help in cases of database/server failure. In the event that the master database fails or becomes unavailable, a slave in a good position can elect to take over as the master so that your application can still accept and retrieve data without downtime. In this scenario, the slaves that can be elected to be masters are called <strong>hot standbys</strong> and this concept is a strategy contributing towards achieve <strong>high availability</strong> which means that your database is robust against failure.</p>
<h2>Understanding Replication</h2>
<p>To understand how to achieve high availability and how multiple PostgreSQL databases keep synchronized, one must understand the concept of &#8220;continuous archiving&#8221; and &#8220;write-ahead logs&#8221;. The key concept of high availability has to do with the database being resilient to server failure. Specifically, in the event that one database server goes down, another one should be ready to step up and assume the responsibilities. This secondary server that must be ready to step up at any time is called a &#8220;standby&#8221;. </p>
<p>In order to achieve this synchronization, the primary and standby servers work together. The primary server is continuously archiving the data coming in or being modified, while each standby server operates in continuous recovery mode, reading the archives from the primary. This &#8220;continuous archive&#8221; is a comprehensive log of all activity coming into the database (every table created, every row inserted, et al). This comprehensive log is called the &#8220;write-ahead log&#8221; or WAL and is essential to the replication process.</p>
<p>WAL is described well in the <a href="http://www.postgresql.org/docs/current/static/wal-intro.html">PostgreSQL user&#8217;s guide</a>:</p>
<blockquote><p>Write-Ahead Logging (WAL) is a standard method for ensuring data integrity. WAL&#8217;s central concept is that changes to data files (where tables and indexes reside) must be written only after those changes have been logged, that is, after log records describing the changes have been flushed to permanent storage. If we follow this procedure, we do not need to flush data pages to disk on every transaction commit, because we know that in the event of a crash we will be able to recover the database using the log: any changes that have not been applied to the data pages can be redone from the log records.</p></blockquote>
<p>As logs are being written by the master, these log (WAL) records are then transferred to other database servers that act as standbys. Generally the best way for this process to happen is to streams WAL records to the standby as they&#8217;re generated, without waiting for the WAL file to be completely filled. This process of moving the WAL records (in small chunked segments) in this way is known as &#8220;Streaming Replication&#8221;. One important aspect to note about this process is that transferring happens asynchronously. This means that the WAL records are shipped after a transaction has been committed so there is a small delay between committing a transaction in the primary and for the changes to become visible in the standby. However, &#8220;streaming replication&#8221; has delays generally under one second unlike older transfer strategies. </p>
<h2>Setting This Up</h2>
<p>Great, now that we have covered the high-level concepts, let&#8217;s jump into how to setup hot standby streaming replication step-by-step. This guide assumes you have a UNIX server provisioned (Debian-based) and have already <a href="http://engineering.gomiso.com/2011/07/28/adventures-in-scaling-part-2-postgresql">followed our guide</a> to setup PostgreSQL on that machine.</p>
<p>The first thing to do to setup a standby is to provision another server (preferably same specs as the primary) and follow the steps to setup the basic PostgreSQL server again as similarly to the primary database as possible. Ideally, the standby is essentially a clone of your first server, so if you can duplicate the server, feel free to do that as a time saver. These database servers should ideally be part of the same local network and communicate through their private IPs.  </p>
<h3>Master Setup</h3>
<p>Next, we need to setup your master such that the database can connect to your standby machines in <code>/etc/postgresql/9.1/main/pg_hba.conf</code>:</p>
<pre class="brush: shell; auto-links: true; collapse: false; gutter: true; first-line: 1; highlight: []; html-script: false; light: false; pad-line-numbers: false; toolbar: true'">
# /etc/postgresql/9.1/main/pg_hba.conf
host   replication      all             SLAVEIP/32              trust
</pre>
<p>Be sure to replace <strong>SLAVEIP</strong> with the correct IP address for the standby. Next, it is a good practice to create the empty WAL directories on both the master and the slaves:</p>
<pre class="brush: shell; auto-links: true; collapse: false; gutter: true; first-line: 1; highlight: []; html-script: false; light: false; pad-line-numbers: false; toolbar: true'">
master$ sudo mkdir /var/lib/postgresql/9.1/wals/
master$ sudo chown postgres /var/lib/postgresql/9.1/wals/
slave$ sudo mkdir /var/lib/postgresql/9.1/wals/
slave$ sudo chown postgres /var/lib/postgresql/9.1/wals/
</pre>
<p>You should also be sure that the master has easy keyless SSH access to the slave:</p>
<pre class="brush: shell; auto-links: true; collapse: false; gutter: true; first-line: 1; highlight: []; html-script: false; light: false; pad-line-numbers: false; toolbar: true'">
su - postgres
ssh-keygen -b 2048
ssh-copy-id -i ~/.ssh/id_rsa.pub root@slave.host.com
</pre>
<p>Now that your master can easily access your slave, you will need to enable streaming replication and WAL logging for your database in <code>/etc/postgresql/9.1/main/postgresql.conf</code>:</p>
<pre class="brush: shell; auto-links: true; collapse: false; gutter: true; first-line: 1; highlight: []; html-script: false; light: false; pad-line-numbers: false; toolbar: true'">
# /etc/postgresql/9.1/main/postgresql.conf
# ...
# Listen allows slaves to connect
listen_addresses = &#039;MASTERIP, localhost&#039;
wal_level = hot_standby
wal_keep_segments = 32 # is the WAL segments to store
max_wal_senders = 2 #  is the max # of slaves that can connect
archive_mode    = on
archive_command = &#039;rsync -a %p root@slave.host.com:/var/lib/postgresql/9.1/wals/%f &lt;/dev/null&#039;
</pre>
<p>Now create a user that the slave can use to connect to master:</p>
<pre class="brush: shell; auto-links: true; collapse: false; gutter: true; first-line: 1; highlight: []; html-script: false; light: false; pad-line-numbers: false; toolbar: true'">
&gt; SELECT pg_switch_xlog();
&gt; CREATE USER replicator WITH SUPERUSER ENCRYPTED PASSWORD &#039;secretpassword12345&#039;;
</pre>
<p>At this point you should probably restart PostgreSQL:</p>
<pre class="brush: shell; auto-links: true; collapse: false; gutter: true; first-line: 1; highlight: []; html-script: false; light: false; pad-line-numbers: false; toolbar: true'">
sudo /etc/init.d/postgresql restart
</pre>
<p>In order for the standby to start replicating, the entire database needs to be archived and then reloaded into the standby. This process is called a &#8220;base backup&#8221;, and can be performed on the master and then transferred to the slave. Let&#8217;s create a snapshot to transfer to the slave by capturing a binary backup of the entire PostgreSQL data directory.</p>
<pre class="brush: shell; auto-links: true; collapse: false; gutter: true; first-line: 1; highlight: []; html-script: false; light: false; pad-line-numbers: false; toolbar: true'">
su - postgres
psql -c &quot;SELECT pg_start_backup(&#039;backup&#039;, true)&quot;
rsync -av --exclude postmaster.pid --exclude pg_xlog /var/lib/postgresql/9.1/main/ root@slave.host.com:/var/lib/postgresql/9.1/main/
psql -c &quot;SELECT pg_stop_backup()&quot;
</pre>
<p>This will transfer all the binary data from the PostgreSQL master to the slave. Next, time to setup the standby machine to begin replication.</p>
<h3>Standby Setup</h3>
<p>First, let&#8217;s shutdown the database on the standby:</p>
<pre class="brush: shell; auto-links: true; collapse: false; gutter: true; first-line: 1; highlight: []; html-script: false; light: false; pad-line-numbers: false; toolbar: true'">
sudo /etc/init.d/postgresql stop
</pre>
<p>Let&#8217;s enable the slave as a hot standby:</p>
<pre class="brush: shell; auto-links: true; collapse: false; gutter: true; first-line: 1; highlight: []; html-script: false; light: false; pad-line-numbers: false; toolbar: true'">
# /etc/postgresql/9.1/main/postgresql.conf
# ...
wal_level = hot_standby
hot_standby = on
</pre>
<p>and modify the recovery settings:</p>
<pre class="brush: shell; auto-links: true; collapse: false; gutter: true; first-line: 1; highlight: []; html-script: false; light: false; pad-line-numbers: false; toolbar: true'">
# /var/lib/postgresql/9.1/main/recovery.conf
standby_mode = &#039;on&#039;
primary_conninfo = &#039;host=MASTERIP port=5432 user=replicator password=secretpassword1234&#039;
trigger_file = &#039;/tmp/pgsql.trigger&#039;
restore_command = &#039;cp -f /var/lib/postgresql/9.1/wals/%f %p &lt;/dev/null&#039;
archive_cleanup_command = &#039;pg_archivecleanup /var/lib/postgresql/9.1/wals/ %r&#039;
</pre>
<p>One interesting option in the file above that is worth noting is the <code>trigger_file</code> parameter which tells the standby when to become the master. In the event of a machine failure and that file becomes present, the slave will be triggered and become the master. In the event that this standby is one day elected as the master, you need to ensure certain files are in place. Let&#8217;s clone the connections listed on master:</p>
<pre class="brush: shell; auto-links: true; collapse: false; gutter: true; first-line: 1; highlight: []; html-script: false; light: false; pad-line-numbers: false; toolbar: true'">
# /etc/postgresql/9.1/main/pg_hba.conf
host   replication      all             MASTERIP/32              trust
host   replication      all             SLAVEIP/32              trust
</pre>
<p>At this point, the slave should be ready to start accepting WAL records and replicating all data from the primary. Let&#8217;s restart the database:</p>
<pre class="brush: shell; auto-links: true; collapse: false; gutter: true; first-line: 1; highlight: []; html-script: false; light: false; pad-line-numbers: false; toolbar: true'">
sudo /etc/init.d/postgresql start
</pre>
<h3>Verification</h3>
<p>Check the logs to make sure that the connection was properly established on the slave (and/or master):</p>
<pre class="brush: shell; auto-links: true; collapse: false; gutter: true; first-line: 1; highlight: []; html-script: false; light: false; pad-line-numbers: false; toolbar: true'">
# /var/log/postgresql/postgresql-9.1-main.log
LOG:  entering standby mode
LOG:  streaming replication successfully connected to primary
</pre>
<p>If you see those two lines, then this means replication has started successfully. If not, follow the error messages and fix the configuration until you can restart and see these lines.</p>
<p>You can also check certain processes on the machines to ensure replication is established:</p>
<pre class="brush: shell; auto-links: true; collapse: false; gutter: true; first-line: 1; highlight: []; html-script: false; light: false; pad-line-numbers: false; toolbar: true'">
master$ ps -ef | grep sender
slave$ ps -ef | grep receiver
</pre>
<p>If both machines have the expected process, then that means that replication is running along happily.</p>
<h2>Wrapping Up</h2>
<p>At this point, replication should be established on the standby machine and you can repeat this process for any number of additional standbys. Once a standby is established, the WAL records should be continuously streamed to the machine keeping the data synchronized with the primary. In the event of a disconnection, the standby is generally resilient enough to backfill data and catch back up to the primary.</p>
<p>Once the standbys are in place, since they have been configured as &#8216;hot&#8217; they can actually be used easily as read slaves. Simply setup your application to read from these slaves but only write to the master. If you are using Rails, one good gem to support this concept of standbys is called <a href="https://github.com/tchandy/octopus">Octopus</a>. </p>
<p>Hopefully you have found this post useful as a straightforward guide to understanding and setting up hot standby streaming replication. In a future post, we hope to cover more advanced replication strategies as well as a detailed guide from how to do a large data migration from MySQL to PostgreSQL. If you run into any problems or spot errors in this guide, please let us know so we can update the steps.</p>
					</div><!-- .entry-content -->
		
		<footer class="entry-meta">
			This entry was posted in <a href="http://blog.thecodepath.com/category/all/" title="View all posts in All" rel="category tag">All</a>, <a href="http://blog.thecodepath.com/category/all/engineering/" title="View all posts in Engineering" rel="category tag">Engineering</a> on <a href="http://blog.thecodepath.com/2012/02/13/adventures-in-scaling-part-3-postgresql-streaming-replication/" title="3:25 pm" rel="bookmark"><time class="entry-date" datetime="2012-02-13T15:25:10+00:00">February 13, 2012</time></a><span class="by-author"> by <span class="author vcard"><a class="url fn n" href="http://blog.thecodepath.com/author/nathan/" title="View all posts by Nathan Esquenazi" rel="author">Nathan Esquenazi</a></span></span>.										<div class="author-info">
					<div class="author-avatar">
						<img alt='' src='http://0.gravatar.com/avatar/eed0ec4e961298c38e71f198c1611d17?s=68&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D68&amp;r=G' class='avatar avatar-68 photo' height='68' width='68' />					</div><!-- .author-avatar -->
					<div class="author-description">
						<h2>About Nathan Esquenazi</h2>
						<p>I've been working professionally at early-stage startups for the last 10 years developing for web, mobile and desktop across many platforms. I have always been passionate about education, actively tutoring in college, holding workshops for students and volunteering to teach practical technical skills to those that want to learn them.</p>
						<div class="author-link">
							<a href="http://blog.thecodepath.com/author/nathan/" rel="author">
								View all posts by Nathan Esquenazi <span class="meta-nav">&rarr;</span>							</a>
						</div><!-- .author-link	-->
					</div><!-- .author-description -->
				</div><!-- .author-info -->
					</footer><!-- .entry-meta -->
	</article><!-- #post -->

				<nav class="nav-single">
					<h3 class="assistive-text">Post navigation</h3>
					<span class="nav-previous"><a href="http://blog.thecodepath.com/2012/02/01/youre-overthinking-it/" rel="prev"><span class="meta-nav">&larr;</span> You&#8217;re Overthinking It</a></span>
					<span class="nav-next"><a href="http://blog.thecodepath.com/2012/11/15/asynchronous-processing-in-web-applications-part-1-a-database-is-not-a-queue/" rel="next">Asynchronous Processing in Web Applications, Part 1: A Database Is Not a Queue <span class="meta-nav">&rarr;</span></a></span>
				</nav><!-- .nav-single -->

				
<div id="comments" class="comments-area">

	
			<h2 class="comments-title">
			11 thoughts on &ldquo;<span>Adventures in Scaling, Part 3: PostgreSQL Streaming Replication</span>&rdquo;		</h2>

		<ol class="commentlist">
				<li class="comment even thread-even depth-1" id="li-comment-1961">
		<article id="comment-1961" class="comment">
			<header class="comment-meta comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/3690dee254e9aa9d98ff964a70e89f23?s=44&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D44&amp;r=G' class='avatar avatar-44 photo' height='44' width='44' /><cite><b class="fn"><a href='http://gravatar.com/gonzoprosperity' rel='external nofollow' class='url'>gonzoprosperity</a></b> </cite><a href="http://blog.thecodepath.com/2012/02/13/adventures-in-scaling-part-3-postgresql-streaming-replication/#comment-1961"><time datetime="2012-02-13T17:17:06+00:00">February 13, 2012 at 5:17 pm</time></a>			</header><!-- .comment-meta -->

			
			<section class="comment-content comment">
				<p>I love Postgres too. We have a similar setup where we stream WAL segments to slaves for hot standby and in addition we archive WAL segments to S3 for backups. The Heroku guys have provided WAL-E which makes it dead simple.</p>
<p><a href="https://github.com/heroku/wal-e" rel="nofollow">https://github.com/heroku/wal-e</a></p>
<p>WAL-E is awesome sauce. Check it out.</p>
							</section><!-- .comment-content -->

			<div class="reply">
							</div><!-- .reply -->
		</article><!-- #comment-## -->
	</li><!-- #comment-## -->
	<li class="pingback odd alt thread-odd thread-alt depth-1" id="comment-1962">
		<p>Pingback: <a href='http://www.dbrunas.com.ar/2012/02/16/adventures-in-scaling-part-3-postgresql-streaming-replication/' rel='external nofollow' class='url'>Adventures in Scaling, Part 3: PostgreSQL Streaming Replication &laquo; DbRunas &#8211; Noticias y Recursos sobre Bases de Datos</a> </p>
	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-1963">
		<article id="comment-1963" class="comment">
			<header class="comment-meta comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/03d7f6c6401acf1d5849793024b25a9d?s=44&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D44&amp;r=G' class='avatar avatar-44 photo' height='44' width='44' /><cite><b class="fn"><a href='http://OptionalURL' rel='external nofollow' class='url'>AM</a></b> </cite><a href="http://blog.thecodepath.com/2012/02/13/adventures-in-scaling-part-3-postgresql-streaming-replication/#comment-1963"><time datetime="2012-03-13T16:19:39+00:00">March 13, 2012 at 4:19 pm</time></a>			</header><!-- .comment-meta -->

			
			<section class="comment-content comment">
				<p>Great Article! </p>
<p>Two questions&#8230; in the master configuration file do you really put SLAVEIP on the listen_address as you have above?<br />
The server isn&#8217;t using that IP (it&#8217;s on the slave server for obvious reasons..)</p>
<p>Is there a way to make the failover from master to slave without needing to change the IP address on the clients connecting to Postgres?</p>
<p>Thanks.</p>
							</section><!-- .comment-content -->

			<div class="reply">
							</div><!-- .reply -->
		</article><!-- #comment-## -->
	<ol class="children">
	<li class="comment byuser comment-author-nathan bypostauthor odd alt depth-2" id="li-comment-1966">
		<article id="comment-1966" class="comment">
			<header class="comment-meta comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/eed0ec4e961298c38e71f198c1611d17?s=44&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D44&amp;r=G' class='avatar avatar-44 photo' height='44' width='44' /><cite><b class="fn">nathan</b> <span>Post author</span></cite><a href="http://blog.thecodepath.com/2012/02/13/adventures-in-scaling-part-3-postgresql-streaming-replication/#comment-1966"><time datetime="2012-03-30T20:14:28+00:00">March 30, 2012 at 8:14 pm</time></a>			</header><!-- .comment-meta -->

			
			<section class="comment-content comment">
				<p>Yes, that was a typo, fixed now! Thanks for bring it to my attention.</p>
							</section><!-- .comment-content -->

			<div class="reply">
							</div><!-- .reply -->
		</article><!-- #comment-## -->
	</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment even thread-odd thread-alt depth-1" id="li-comment-1964">
		<article id="comment-1964" class="comment">
			<header class="comment-meta comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/dbc7d66e1d38065b528b443526e94715?s=44&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D44&amp;r=G' class='avatar avatar-44 photo' height='44' width='44' /><cite><b class="fn"><a href='http://OptionalURL' rel='external nofollow' class='url'>foobarz0r</a></b> </cite><a href="http://blog.thecodepath.com/2012/02/13/adventures-in-scaling-part-3-postgresql-streaming-replication/#comment-1964"><time datetime="2012-03-30T19:38:15+00:00">March 30, 2012 at 7:38 pm</time></a>			</header><!-- .comment-meta -->

			
			<section class="comment-content comment">
				<p>@AM</p>
<p>I think that SLAVEIP is probably a typo as you said.</p>
<p>As for failing over automatically, you could have your clients connect to a floating IP that you move to the slave when the master dies (see keepalived or heartbeat or similar). I think HAProxy and pgpool-II may also be options.</p>
							</section><!-- .comment-content -->

			<div class="reply">
							</div><!-- .reply -->
		</article><!-- #comment-## -->
	</li><!-- #comment-## -->
	<li class="comment odd alt thread-even depth-1" id="li-comment-1965">
		<article id="comment-1965" class="comment">
			<header class="comment-meta comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/dbc7d66e1d38065b528b443526e94715?s=44&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D44&amp;r=G' class='avatar avatar-44 photo' height='44' width='44' /><cite><b class="fn"><a href='http://OptionalURL' rel='external nofollow' class='url'>foobarz0r</a></b> </cite><a href="http://blog.thecodepath.com/2012/02/13/adventures-in-scaling-part-3-postgresql-streaming-replication/#comment-1965"><time datetime="2012-03-30T20:06:20+00:00">March 30, 2012 at 8:06 pm</time></a>			</header><!-- .comment-meta -->

			
			<section class="comment-content comment">
				<p>BTW I&#8217;m guessing this should be postgres@, not root@:</p>
<p>archive_command = &#8216;rsync -a %p <a href="mailto:root@slave.host.com">root@slave.host.com</a>:/var/lib/postgresql/9.1/wals/%f &lt;/dev/null&#039;</p>
							</section><!-- .comment-content -->

			<div class="reply">
							</div><!-- .reply -->
		</article><!-- #comment-## -->
	</li><!-- #comment-## -->
	<li class="comment even thread-odd thread-alt depth-1" id="li-comment-1967">
		<article id="comment-1967" class="comment">
			<header class="comment-meta comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/ec1cfa3bdb24f3dbc1f75715db0d0283?s=44&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D44&amp;r=G' class='avatar avatar-44 photo' height='44' width='44' /><cite><b class="fn"><a href='http://OptionalURL' rel='external nofollow' class='url'>Subha</a></b> </cite><a href="http://blog.thecodepath.com/2012/02/13/adventures-in-scaling-part-3-postgresql-streaming-replication/#comment-1967"><time datetime="2012-05-15T10:12:23+00:00">May 15, 2012 at 10:12 am</time></a>			</header><!-- .comment-meta -->

			
			<section class="comment-content comment">
				<p>A good article with crystal clear explanation for a begineer to do replication.</p>
							</section><!-- .comment-content -->

			<div class="reply">
							</div><!-- .reply -->
		</article><!-- #comment-## -->
	</li><!-- #comment-## -->
	<li class="comment odd alt thread-even depth-1" id="li-comment-1968">
		<article id="comment-1968" class="comment">
			<header class="comment-meta comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/24986052ee6cdfef84a60591ce70940d?s=44&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D44&amp;r=G' class='avatar avatar-44 photo' height='44' width='44' /><cite><b class="fn"><a href='http://OptionalURL' rel='external nofollow' class='url'>rohi</a></b> </cite><a href="http://blog.thecodepath.com/2012/02/13/adventures-in-scaling-part-3-postgresql-streaming-replication/#comment-1968"><time datetime="2012-09-09T09:00:46+00:00">September 9, 2012 at 9:00 am</time></a>			</header><!-- .comment-meta -->

			
			<section class="comment-content comment">
				<p>Great article! I&#8217;m starting implementing now streaming replication in our system,  and there is just a pair of things that I&#8217;d like to understand better: in case I have more than one slave, all set in hot standby, how postgres decides which will replace the master? And in case one master will not be enough, does streaming replication support master-master (each one with attached multiple slaves)?<br />
One last thing: is there any good tool to manage the machines?<br />
Thanks a lot!</p>
							</section><!-- .comment-content -->

			<div class="reply">
							</div><!-- .reply -->
		</article><!-- #comment-## -->
	</li><!-- #comment-## -->
	<li class="comment even thread-odd thread-alt depth-1" id="li-comment-1969">
		<article id="comment-1969" class="comment">
			<header class="comment-meta comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/068f52e9c480ca6498bfd270270af429?s=44&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D44&amp;r=G' class='avatar avatar-44 photo' height='44' width='44' /><cite><b class="fn"><a href='http://amberbit.com' rel='external nofollow' class='url'>Hubert Łępicki</a></b> </cite><a href="http://blog.thecodepath.com/2012/02/13/adventures-in-scaling-part-3-postgresql-streaming-replication/#comment-1969"><time datetime="2012-11-22T08:30:59+00:00">November 22, 2012 at 8:30 am</time></a>			</header><!-- .comment-meta -->

			
			<section class="comment-content comment">
				<p>Everything worked like a charm, very good step-by-step tutorial. With one exception, however. On Ubuntu 12.04 server, I had to put the replication.conf in /var/lib/postgresql/9.1/main and not in /etc as I expected. I think this is Ubuntu-specific, but can be annoying if you don&#8217;t know about it.</p>
							</section><!-- .comment-content -->

			<div class="reply">
							</div><!-- .reply -->
		</article><!-- #comment-## -->
	</li><!-- #comment-## -->
	<li class="comment odd alt thread-even depth-1" id="li-comment-1970">
		<article id="comment-1970" class="comment">
			<header class="comment-meta comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/7b09c6f55c3c1a2b34514990fb8d8e8b?s=44&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D44&amp;r=G' class='avatar avatar-44 photo' height='44' width='44' /><cite><b class="fn"><a href='http://OptionalURL' rel='external nofollow' class='url'>Tomaž</a></b> </cite><a href="http://blog.thecodepath.com/2012/02/13/adventures-in-scaling-part-3-postgresql-streaming-replication/#comment-1970"><time datetime="2012-12-26T22:09:15+00:00">December 26, 2012 at 10:09 pm</time></a>			</header><!-- .comment-meta -->

			
			<section class="comment-content comment">
				<p>Thank you for the tutorial, had only a couple of small problems, root user should be replaced with postgres (for which I first needed to set up a password) and when doing rsync, I had to remove &#8220;&#8211;exclude pg_xlog&#8221; part from rsynv command, otherwise the standby server would complain about it missing.</p>
							</section><!-- .comment-content -->

			<div class="reply">
							</div><!-- .reply -->
		</article><!-- #comment-## -->
	</li><!-- #comment-## -->
	<li class="comment even thread-odd thread-alt depth-1" id="li-comment-1971">
		<article id="comment-1971" class="comment">
			<header class="comment-meta comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/8dd58b610b3f66be68fea6bed03ecba5?s=44&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D44&amp;r=G' class='avatar avatar-44 photo' height='44' width='44' /><cite><b class="fn"><a href='http://www.zettazebra.com' rel='external nofollow' class='url'>David Clymer</a></b> </cite><a href="http://blog.thecodepath.com/2012/02/13/adventures-in-scaling-part-3-postgresql-streaming-replication/#comment-1971"><time datetime="2013-02-02T21:19:46+00:00">February 2, 2013 at 9:19 pm</time></a>			</header><!-- .comment-meta -->

			
			<section class="comment-content comment">
				<p>Using /tmp/pgsql.trigger allows any user on the system to trigger a switch to master mode. I would be a little uncomfortable with that on my systems.</p>
<p>Perhaps the trigger would be better placed in a location without global write permission.</p>
							</section><!-- .comment-content -->

			<div class="reply">
							</div><!-- .reply -->
		</article><!-- #comment-## -->
	</li><!-- #comment-## -->
		</ol><!-- .commentlist -->

		
				<p class="nocomments">Comments are closed.</p>
		
	
			
</div><!-- #comments .comments-area -->
			
		</div><!-- #content -->
	</div><!-- #primary -->


			<div id="secondary" class="widget-area" role="complementary">
			<aside id="search-2" class="widget widget_search"><form role="search" method="get" id="searchform" class="searchform" action="http://blog.thecodepath.com/">
				<div>
					<label class="screen-reader-text" for="s">Search for:</label>
					<input type="text" value="" name="s" id="s" />
					<input type="submit" id="searchsubmit" value="Search" />
				</div>
			</form></aside>		<aside id="recent-posts-2" class="widget widget_recent_entries">		<h3 class="widget-title">Recent Posts</h3>		<ul>
					<li>
				<a href="http://blog.thecodepath.com/2013/08/19/thinking-bigger-a-free-engineering-school/">Thinking bigger: a free engineering school</a>
						</li>
					<li>
				<a href="http://blog.thecodepath.com/2013/01/06/asynchronous-processing-in-web-applications-part-2-developers-need-to-understand-message-queues/">Asynchronous Processing in Web Applications, Part 2: Developers Need to Understand Message Queues</a>
						</li>
					<li>
				<a href="http://blog.thecodepath.com/2012/11/15/asynchronous-processing-in-web-applications-part-1-a-database-is-not-a-queue/">Asynchronous Processing in Web Applications, Part 1: A Database Is Not a Queue</a>
						</li>
					<li>
				<a href="http://blog.thecodepath.com/2012/02/13/adventures-in-scaling-part-3-postgresql-streaming-replication/">Adventures in Scaling, Part 3: PostgreSQL Streaming Replication</a>
						</li>
					<li>
				<a href="http://blog.thecodepath.com/2012/02/01/youre-overthinking-it/">You&#8217;re Overthinking It</a>
						</li>
				</ul>
		</aside><aside id="recent-comments-2" class="widget widget_recent_comments"><h3 class="widget-title">Recent Comments</h3><ul id="recentcomments"><li class="recentcomments">Olga on <a href="http://blog.thecodepath.com/2013/08/19/thinking-bigger-a-free-engineering-school/#comment-2370">Thinking bigger: a free engineering school</a></li><li class="recentcomments">Nathan Esquenazi on <a href="http://blog.thecodepath.com/2013/08/19/thinking-bigger-a-free-engineering-school/#comment-2306">Thinking bigger: a free engineering school</a></li><li class="recentcomments"><a href='http://www.skiboa.com' rel='external nofollow' class='url'>Amber</a> on <a href="http://blog.thecodepath.com/2013/08/19/thinking-bigger-a-free-engineering-school/#comment-2279">Thinking bigger: a free engineering school</a></li><li class="recentcomments">Sudha on <a href="http://blog.thecodepath.com/2013/08/19/thinking-bigger-a-free-engineering-school/#comment-2259">Thinking bigger: a free engineering school</a></li><li class="recentcomments">Tim Lee on <a href="http://blog.thecodepath.com/2013/08/19/thinking-bigger-a-free-engineering-school/#comment-2163">Thinking bigger: a free engineering school</a></li></ul></aside><aside id="archives-2" class="widget widget_archive"><h3 class="widget-title">Archives</h3>		<ul>
			<li><a href='http://blog.thecodepath.com/2013/08/'>August 2013</a></li>
	<li><a href='http://blog.thecodepath.com/2013/01/'>January 2013</a></li>
	<li><a href='http://blog.thecodepath.com/2012/11/'>November 2012</a></li>
	<li><a href='http://blog.thecodepath.com/2012/02/'>February 2012</a></li>
	<li><a href='http://blog.thecodepath.com/2011/12/'>December 2011</a></li>
	<li><a href='http://blog.thecodepath.com/2011/11/'>November 2011</a></li>
	<li><a href='http://blog.thecodepath.com/2011/08/'>August 2011</a></li>
	<li><a href='http://blog.thecodepath.com/2011/07/'>July 2011</a></li>
	<li><a href='http://blog.thecodepath.com/2011/06/'>June 2011</a></li>
	<li><a href='http://blog.thecodepath.com/2011/05/'>May 2011</a></li>
	<li><a href='http://blog.thecodepath.com/2011/02/'>February 2011</a></li>
	<li><a href='http://blog.thecodepath.com/2011/01/'>January 2011</a></li>
		</ul>
</aside><aside id="categories-2" class="widget widget_categories"><h3 class="widget-title">Categories</h3>		<ul>
	<li class="cat-item cat-item-2"><a href="http://blog.thecodepath.com/category/all/" title="View all posts filed under All">All</a>
</li>
	<li class="cat-item cat-item-48"><a href="http://blog.thecodepath.com/category/all/education/" title="View all posts filed under Education">Education</a>
</li>
	<li class="cat-item cat-item-4"><a href="http://blog.thecodepath.com/category/all/engineering/" title="View all posts filed under Engineering">Engineering</a>
</li>
		</ul>
</aside><aside id="meta-2" class="widget widget_meta"><h3 class="widget-title">Meta</h3>			<ul>
						<li><a href="http://blog.thecodepath.com/wp-login.php">Log in</a></li>
			<li><a href="http://blog.thecodepath.com/feed/" title="Syndicate this site using RSS 2.0">Entries <abbr title="Really Simple Syndication">RSS</abbr></a></li>
			<li><a href="http://blog.thecodepath.com/comments/feed/" title="The latest comments to all posts in RSS">Comments <abbr title="Really Simple Syndication">RSS</abbr></a></li>
			<li><a href="http://wordpress.org/" title="Powered by WordPress, state-of-the-art semantic personal publishing platform.">WordPress.org</a></li>						</ul>
</aside>		</div><!-- #secondary -->
		</div><!-- #main .wrapper -->
	<footer id="colophon" role="contentinfo">
		<div class="site-info">
						<a href="http://wordpress.org/" title="Semantic Personal Publishing Platform">Proudly powered by WordPress</a>
		</div><!-- .site-info -->
	</footer><!-- #colophon -->
</div><!-- #page -->


<!-- WP SyntaxHighlighter Ver.1.7.3 Begin -->
<script type="text/javascript" src="http://blog.thecodepath.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js?ver=3.0"></script>
<script type="text/javascript" src="http://blog.thecodepath.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shLegacy.js?ver=3.0"></script>
<script type="text/javascript" src="http://blog.thecodepath.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shAutoloader.js?ver=3.0"></script>
<script type="text/javascript" src="http://blog.thecodepath.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushAppleScript.js?ver=3.0"></script>
<script type="text/javascript" src="http://blog.thecodepath.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushAS3.js?ver=3.0"></script>
<script type="text/javascript" src="http://blog.thecodepath.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushBash.js?ver=3.0"></script>
<script type="text/javascript" src="http://blog.thecodepath.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushColdFusion.js?ver=3.0"></script>
<script type="text/javascript" src="http://blog.thecodepath.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushCpp.js?ver=3.0"></script>
<script type="text/javascript" src="http://blog.thecodepath.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushCSharp.js?ver=3.0"></script>
<script type="text/javascript" src="http://blog.thecodepath.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushCss.js?ver=3.0"></script>
<script type="text/javascript" src="http://blog.thecodepath.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushDelphi.js?ver=3.0"></script>
<script type="text/javascript" src="http://blog.thecodepath.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushDiff.js?ver=3.0"></script>
<script type="text/javascript" src="http://blog.thecodepath.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushErlang.js?ver=3.0"></script>
<script type="text/javascript" src="http://blog.thecodepath.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushGroovy.js?ver=3.0"></script>
<script type="text/javascript" src="http://blog.thecodepath.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushJava.js?ver=3.0"></script>
<script type="text/javascript" src="http://blog.thecodepath.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushJavaFX.js?ver=3.0"></script>
<script type="text/javascript" src="http://blog.thecodepath.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushJScript.js?ver=3.0"></script>
<script type="text/javascript" src="http://blog.thecodepath.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushPerl.js?ver=3.0"></script>
<script type="text/javascript" src="http://blog.thecodepath.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushPhp.js?ver=3.0"></script>
<script type="text/javascript" src="http://blog.thecodepath.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushPlain.js?ver=3.0"></script>
<script type="text/javascript" src="http://blog.thecodepath.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushPowerShell.js?ver=3.0"></script>
<script type="text/javascript" src="http://blog.thecodepath.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushPython.js?ver=3.0"></script>
<script type="text/javascript" src="http://blog.thecodepath.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushRuby.js?ver=3.0"></script>
<script type="text/javascript" src="http://blog.thecodepath.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushSass.js?ver=3.0"></script>
<script type="text/javascript" src="http://blog.thecodepath.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushScala.js?ver=3.0"></script>
<script type="text/javascript" src="http://blog.thecodepath.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushSql.js?ver=3.0"></script>
<script type="text/javascript" src="http://blog.thecodepath.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushVb.js?ver=3.0"></script>
<script type="text/javascript" src="http://blog.thecodepath.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushXml.js?ver=3.0"></script>
<script type="text/javascript">//<![CDATA[
	SyntaxHighlighter.autoloader(
	"applescript	http://blog.thecodepath.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushAppleScript.js?ver=3.0"
	,"as3 actionscript3	http://blog.thecodepath.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushAS3.js?ver=3.0"
	,"bash shell	http://blog.thecodepath.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushBash.js?ver=3.0"
	,"cf coldfusion	http://blog.thecodepath.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushColdFusion.js?ver=3.0"
	,"cpp c	http://blog.thecodepath.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushCpp.js?ver=3.0"
	,"c# c-sharp csharp	http://blog.thecodepath.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushCSharp.js?ver=3.0"
	,"css	http://blog.thecodepath.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushCss.js?ver=3.0"
	,"delphi pas pascal	http://blog.thecodepath.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushDelphi.js?ver=3.0"
	,"diff patch	http://blog.thecodepath.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushDiff.js?ver=3.0"
	,"erl erlang	http://blog.thecodepath.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushErlang.js?ver=3.0"
	,"groovy	http://blog.thecodepath.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushGroovy.js?ver=3.0"
	,"java	http://blog.thecodepath.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushJava.js?ver=3.0"
	,"jfx javafx	http://blog.thecodepath.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushJavaFX.js?ver=3.0"
	,"js jscript javascript	http://blog.thecodepath.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushJScript.js?ver=3.0"
	,"perl pl	http://blog.thecodepath.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushPerl.js?ver=3.0"
	,"php	http://blog.thecodepath.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushPhp.js?ver=3.0"
	,"plain text	http://blog.thecodepath.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushPlain.js?ver=3.0"
	,"ps powershell	http://blog.thecodepath.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushPowerShell.js?ver=3.0"
	,"py python	http://blog.thecodepath.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushPython.js?ver=3.0"
	,"rails ror ruby rb	http://blog.thecodepath.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushRuby.js?ver=3.0"
	,"sass scss	http://blog.thecodepath.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushSass.js?ver=3.0"
	,"scala	http://blog.thecodepath.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushScala.js?ver=3.0"
	,"sql	http://blog.thecodepath.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushSql.js?ver=3.0"
	,"vb vbnet	http://blog.thecodepath.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushVb.js?ver=3.0"
	,"xml xhtml xslt html	http://blog.thecodepath.com/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushXml.js?ver=3.0"
	);
	SyntaxHighlighter.defaults['auto-links'] = true;
	SyntaxHighlighter.defaults['quick-code'] = true;
	SyntaxHighlighter.defaults['title'] = '';
	SyntaxHighlighter.defaults['class-name'] = 'notranslate';
	SyntaxHighlighter.defaults['collapse'] = false;
	SyntaxHighlighter.defaults['first-line'] = 1;
	SyntaxHighlighter.defaults['gutter'] = true;
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.defaults['smart-tabs'] = true;
	SyntaxHighlighter.defaults['tab-size'] = 4;
	SyntaxHighlighter.defaults['toolbar'] = true;
 SyntaxHighlighter.config.stripBrs = true;
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = "Can't find brush for: ";
	SyntaxHighlighter.config.strings.brushNotHtmlScript = "Brush wasn't configured for html-script option: ";
	SyntaxHighlighter.all();
	dp.SyntaxHighlighter.HighlightAll('code')
//]]></script>
<!-- WP SyntaxHighlighter Ver.1.7.3 End -->
	<div style="display:none">
	<div class="grofile-hash-map-eed0ec4e961298c38e71f198c1611d17">
	</div>
	<div class="grofile-hash-map-3690dee254e9aa9d98ff964a70e89f23">
	</div>
	<div class="grofile-hash-map-03d7f6c6401acf1d5849793024b25a9d">
	</div>
	<div class="grofile-hash-map-eed0ec4e961298c38e71f198c1611d17">
	</div>
	<div class="grofile-hash-map-dbc7d66e1d38065b528b443526e94715">
	</div>
	<div class="grofile-hash-map-ec1cfa3bdb24f3dbc1f75715db0d0283">
	</div>
	<div class="grofile-hash-map-24986052ee6cdfef84a60591ce70940d">
	</div>
	<div class="grofile-hash-map-068f52e9c480ca6498bfd270270af429">
	</div>
	<div class="grofile-hash-map-7b09c6f55c3c1a2b34514990fb8d8e8b">
	</div>
	<div class="grofile-hash-map-8dd58b610b3f66be68fea6bed03ecba5">
	</div>
	</div>
<script type='text/javascript' src='http://s0.wp.com/wp-content/js/devicepx-jetpack.js?ver=201419'></script>
<script type='text/javascript' src='http://s.gravatar.com/js/gprofiles.js?ver=2014Mayaa'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var WPGroHo = {"my_hash":""};
/* ]]> */
</script>
<script type='text/javascript' src='http://blog.thecodepath.com/wp-content/plugins/jetpack/modules/wpgroho.js?ver=3.8.3'></script>
<script type='text/javascript' src='http://blog.thecodepath.com/wp-content/themes/twentytwelve/js/navigation.js?ver=1.0'></script>

	<script src="http://stats.wordpress.com/e-201419.js" type="text/javascript"></script>
	<script type="text/javascript">
	st_go({v:'ext',j:'1:2.9.3',blog:'56140528',post:'667',tz:'0'});
	var load_cmc = function(){linktracker_init(56140528,667,2);};
	if ( typeof addLoadEvent != 'undefined' ) addLoadEvent(load_cmc);
	else load_cmc();
	</script></body>
</html>
<!--Cached using Nginx-Helper on 2014-05-09 09:06:15. It took 63 queries executed in 0.410 seconds.-->
<!--Visit http://wordpress.org/extend/plugins/nginx-helper/faq/ for more details-->