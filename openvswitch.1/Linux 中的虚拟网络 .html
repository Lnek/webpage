<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Linux 中的虚拟网络 - jincm13的专栏 - 博客频道 - CSDN.NET</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="description" content="现在计算又重新兴盛起来。虽然虚拟化出现是在几十年前，但通过商品硬件的使用，它真正的潜力现在才被认识到。虚拟化加强了服务器负载的效率，但服务器生态系统的其他部分也成为了未来加强的选项。许多人视虚拟化为 CPU，内存和存储的巩固，但是这样太过简单化解决方案了。网络是虚拟化的一个关键方面，代表虚拟化设置中第一等的元素。虚拟化网络我们从问题的高层次开始探索，然后深入到 Linux&#174; 构建和" />
<script src="http://static.blog.csdn.net/scripts/jquery.js" type="text/javascript"></script>
<script type="text/javascript" src="http://static.blog.csdn.net/scripts/ad.js?v=1.1"></script>
<link rel="Stylesheet" type="text/css" href="http://static.blog.csdn.net/skin/default/css/style.css?v=1.1" />
<link id="RSSLink" title="RSS" type="application/rss+xml" rel="alternate" href="/jincm13/rss/list" />
<link rel="shortcut icon" href="/favicon.ico" />
<link type="text/css" rel="stylesheet" href="http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/default.css" />
</head>
<body>
<script src="http://csdnimg.cn/pubnav/js/pub_topnav_2011.js"type="text/javascript"></script>
<div id="container">
<div id="header">
    <div class="header">
        <div id="blog_title">
            <h1><a href="/jincm13">jincm13的专栏</a></h1>
            <h2></h2>
            <div class="clear"></div>
        </div>
        <div class="clear"></div>
    </div>
</div>
<div id="navigator">
    <div class="navigator_bg"></div>
    <div class="navigator">
        <ul>
            <li id="btnContents"><a href="/jincm13?viewmode=contents"><span><img src="http://static.blog.csdn.net/images/ico_list.gif">目录视图</span></a></li>
            <li id="btnView"><a href="/jincm13?viewmode=list"><span><img src="http://static.blog.csdn.net/images/ico_summary.gif">摘要视图</span></a></li>
            <li id="btnRss"><a href="/jincm13/rss/list"><span><img src="http://static.blog.csdn.net/images/ico_rss.gif">订阅</span></a></li>
</ul>
    </div>
</div>
<script type="text/javascript">
    var username = "jincm13";
    var blog_address = "http://blog.csdn.net/jincm13";
    var static_host = "http://static.blog.csdn.net";
    var currentUserName = "";
</script>
        
<div id="body">
<div id="main">
<div class="main">
<div class="notice"> 

<a href="http://surveies.csdn.net/survey/comein/532" target="_blank">
<font color=blue>博客专家信息更新登记表   </font></a>



&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

<a href="http://www.csdn.net/article/2013-03-12/2814461" target="_blank"><font color=red>专访卜茂霞：嵌入式汽车开发潜力巨大
</font></a>

&nbsp;&nbsp;&nbsp;&nbsp;

<a href="http://blog.csdn.net/blogdevteam/article/details/8664620" target="_blank"><font color=blue>CSDN博客移动开发排行榜 


</font></a>

<br />





<a href="http://www.csdn.net/article/2013-03-05/2814348"target="_blank">
<font color=red>专访陈勇： 敏捷开发现状及发展之路

 </font></a>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

<a href="http://huiyi.csdn.net/tech/view/223
"target="_blank">
<font color=red>“传统商家移动化之路”会议
 </font></a>



&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

<a href="http://bbs.csdn.net/topics/390393217"target="_blank">
<font color=red>下载频道3月领任务~赚下载分！ 
  </font></a>


</div><div id="article_details" class="details">
    <div class="article_title">
    <span class="ico ico_type_Repost"></span>
    <h3>
        <span class="link_title"><a href="/jincm13/article/details/7802488">
        Linux 中的虚拟网络
        </a></span>
    </h3>
</div>

        
    <div class="article_manage">
        <span class="link_categories">
        分类：
            <a href="/jincm13/article/category/1196238">虚拟交换机</a> 
        </span>
    <span class="link_postdate">2012-07-30 16:10</span>
    <span class="link_view" title="阅读次数">237人阅读</span>
    <span class="link_comments" title="评论次数"><a href="#comments">评论</a>(0)</span>
    <span class="link_collect"><a href="javascript:void(0);" onclick="javascript:collectArticle('Linux 中的虚拟网络','7802488');return false;" title="收藏">收藏</a></span>
    <span class="link_report"><a href="#report"  onclick="javascript:report(7802488,2);return false;" title="举报">举报</a></span>
    
</div>
<div class="tag2box"><a href='http://blog.csdn.net/tag/details.html?tag=linux' target=_blank>linux</a><a href='http://blog.csdn.net/tag/details.html?tag=%e8%99%9a%e6%8b%9f%e5%8c%96' target=_blank>虚拟化</a><a href='http://blog.csdn.net/tag/details.html?tag=%e7%bd%91%e7%bb%9c' target=_blank>网络</a><a href='http://blog.csdn.net/tag/details.html?tag=%e6%9c%8d%e5%8a%a1%e5%99%a8' target=_blank>服务器</a><a href='http://blog.csdn.net/tag/details.html?tag=%e6%a1%86%e6%9e%b6' target=_blank>框架</a><a href='http://blog.csdn.net/tag/details.html?tag=xen' target=_blank>xen</a></div>


    
<div id="article_content" class="article_content">

<p style="font-family:arial,nsimsun,sans-serif; margin-top:0px; margin-bottom:0px; padding-top:0.3em; padding-right:5px; padding-bottom:0.7em; padding-left:5px; font-size:0.76em; text-align:left">
</p>
<p style="font-family:arial,nsimsun,sans-serif; margin-top:0px; margin-bottom:0px; padding-top:0.3em; padding-right:5px; padding-bottom:0.7em; padding-left:5px; font-size:0.76em; text-align:left">
现在计算又重新兴盛起来。虽然虚拟化出现是在几十年前，但通过商品硬件的使用，它真正的潜力现在才被认识到。虚拟化加强了服务器负载的效率，但服务器生态系统的其他部分也成为了未来加强的选项。许多人视虚拟化为 CPU，内存和存储的巩固，但是这样太过简单化解决方案了。网络是虚拟化的一个关键方面，代表虚拟化设置中第一等的元素。</p>
<p style="font-family:arial,nsimsun,sans-serif; margin-top:0px; margin-bottom:0px; padding-top:0.3em; padding-right:5px; padding-bottom:0.7em; padding-left:5px; font-size:0.76em; text-align:left">
<a name="virt_networks"><span class="atitle" style="font-size:1.5em; font-weight:bold">虚拟化网络</span></a></p>
<p style="font-family:arial,nsimsun,sans-serif; margin-top:0px; margin-bottom:0px; padding-top:0.3em; padding-right:5px; padding-bottom:0.7em; padding-left:5px; font-size:0.76em; text-align:left">
我们从问题的高层次开始探索，然后深入到 Linux® 构建和支持的网络虚拟化各种方法。</p>
<p style="font-family:arial,nsimsun,sans-serif; margin-top:0px; margin-bottom:0px; padding-top:0.3em; padding-right:5px; padding-bottom:0.7em; padding-left:5px; font-size:0.76em; text-align:left">
在传统环境中（见图 1 ），一系列物理服务器支持所需的应用程序设置。为了实现服务器间的通信，每个服务器都包含一个或者多个网络接口卡（NICs），它们连接到一个外部网络设施上。带有网络软件栈的 NIC 通过网络设施支持端点间的通信。正如图 1 所示，这个在功能上表示为一个交换机，它支持参与其中的端点间的高效数据包通信。</p>
<br style="font-family:Simsun; text-align:left; font-size:16px">
<a name="fig1" style="font-family:Simsun; text-align:left; font-size:16px"><span style="font-size:0.76em; padding-top:0.3em; padding-right:5px; padding-bottom:0.7em; padding-left:5px; font-family:arial,sans-serif">图 1. 传统网络基础架构</span></a><br style="font-family:Simsun; text-align:left; font-size:16px">
<img alt="传统网络基础架构" height="206" src="http://www.ibm.com/developerworks/cn/linux/l-virtual-networking/figure1.gif" width="580" style="border-top-width:0px; border-right-width:0px; border-bottom-width:0px; border-left-width:0px; border-style:initial; border-color:initial; padding-top:0.3em; padding-right:5px; padding-bottom:0.7em; padding-left:5px; font-family:Simsun; text-align:left; font-size:16px"><span style="font-family:Simsun; text-align:left; font-size:16px">&nbsp;</span><br style="font-family:Simsun; text-align:left; font-size:16px">
<p style="font-family:arial,nsimsun,sans-serif; margin-top:0px; margin-bottom:0px; padding-top:0.3em; padding-right:5px; padding-bottom:0.7em; padding-left:5px; font-size:0.76em; text-align:left">
服务器合并背后的关键改革是物理硬件的抽象，允许多操作系统和应用程序共享硬件（见图 2）。这一改革名为&nbsp;<em>hypervisor</em>&nbsp;（或者<em>virtual machine [VM] monitor</em>）。每个 VM（一个操作系统和应用程序设置）视底层硬件为非共享的，一个完整机器，即使它们部分可能并不存在，或者被多个 VM 共享。虚拟的 NIC（vNIC）就是一个例子。管理程序为每个 VM 创建一个或者多个 vNICs。这些 NICs 对 VM 可以作为物理 NICs，但是它们实际上只表示
 NIC 的接口。管理程序也允许虚拟网络的动态构建，由虚拟交换机完成，支持可配置的 VM 端点间的通信。最后，管理程序还允许和物理网络基础架构的通信，通过将服务器的物理 NICs 连接到管理程序的逻辑设施，允许管理程序中 VMs 间高效的通信，以及和外部网络的高效通信。在&nbsp;<a href="http://www.ibm.com/developerworks/cn/linux/l-virtual-networking/#resources" style="color:rgb(153,102,153)">参考资料</a>&nbsp;部分，您将会找到更多关于
 Linux 管理程序信息的链接（开源操作系统的丰富区域）。</p>
<br style="font-family:Simsun; text-align:left; font-size:16px">
<a name="fig2" style="font-family:Simsun; text-align:left; font-size:16px"><span style="font-size:0.76em; padding-top:0.3em; padding-right:5px; padding-bottom:0.7em; padding-left:5px; font-family:arial,sans-serif">图 2. 虚拟的网络设施</span></a><br style="font-family:Simsun; text-align:left; font-size:16px">
<img alt="虚拟的网络设施" height="351" src="http://www.ibm.com/developerworks/cn/linux/l-virtual-networking/figure2.gif" width="580" style="border-top-width:0px; border-right-width:0px; border-bottom-width:0px; border-left-width:0px; border-style:initial; border-color:initial; padding-top:0.3em; padding-right:5px; padding-bottom:0.7em; padding-left:5px; font-family:Simsun; text-align:left; font-size:16px"><span style="font-family:Simsun; text-align:left; font-size:16px">&nbsp;</span><br style="font-family:Simsun; text-align:left; font-size:16px">
<p style="font-family:arial,nsimsun,sans-serif; margin-top:0px; margin-bottom:0px; padding-top:0.3em; padding-right:5px; padding-bottom:0.7em; padding-left:5px; font-size:0.76em; text-align:left">
虚拟网络设施还支持其他有趣的革新，比如虚拟设备。除了虚拟网络的元素以外，我们还关注这些内容，作为该探索的一部分。</p>
<div class="ibm-alternate-rule" style="clear:both; height:1px; font-family:Simsun; text-align:left; font-size:16px">
</div>
<p class="ibm-ind-link ibm-back-to-top" style="font-family:arial,nsimsun,sans-serif; margin-top:0px; margin-bottom:0px; padding-top:5px; padding-right:5px; padding-bottom:5px; padding-left:5px; font-size:0.76em; clear:both; text-align:right; height:15px">
<a href="http://www.ibm.com/developerworks/cn/linux/l-virtual-networking/#ibm-pcon" class="ibm-anchor-up-link" style="color:rgb(153,102,153); display:inline; margin-top:0px; margin-right:0px; margin-bottom:0px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:18px; text-decoration:none; background-color:initial; font-weight:bold">回页首</a></p>
<p style="font-family:arial,nsimsun,sans-serif; margin-top:0px; margin-bottom:0px; padding-top:0.3em; padding-right:5px; padding-bottom:0.7em; padding-left:5px; font-size:0.76em; text-align:left">
<a name="virt_switching"><span class="atitle" style="font-size:1.5em; font-weight:bold">虚拟交换机</span></a></p>
<p style="font-family:arial,nsimsun,sans-serif; margin-top:0px; margin-bottom:0px; padding-top:0.3em; padding-right:5px; padding-bottom:0.7em; padding-left:5px; font-size:0.76em; text-align:left">
虚拟网络设施的关键开发之一就是虚拟交换机的开发。虚拟交换机连接 vNICs 到服务器的物理 NICs，并且 —更重要的是—它将 vNICs 连接到服务器中的其他 vNICs，进行本地通信。这之所以有趣是因为在一个虚拟交换机中，所受限制和网络速度无关，而是和内存带宽有关，它允许本地 VMs 间的高效通信，并且最小化网络设施的开销。这个节省是源自物理网络只用于服务器间的通信，服务期间的跨 VM 通信被隔离。</p>
<p style="font-family:arial,nsimsun,sans-serif; margin-top:0px; margin-bottom:0px; padding-top:0.3em; padding-right:5px; padding-bottom:0.7em; padding-left:5px; font-size:0.76em; text-align:left">
但是，因为 Linux 已经在内核中包含一个 2 层交换机，所以有人可能会问，为什么会需要虚拟交换机？答案包括多个属性，但是最重要之一的是由这些交换机类型的新分类定义的。新的类名为&nbsp;<em>分布式虚拟交换机</em>，它采用使底层服务器架构更透明的方法，支持跨服务器桥接。一个服务器中的虚拟交换机能够透明地和其他服务器中的虚拟交换机连接（见&nbsp;<a href="http://www.ibm.com/developerworks/cn/linux/l-virtual-networking/#fig3" style="color:rgb(153,102,153)">图
 3</a>），使服务器间（以及它们的虚拟接口）的 VM 迁移更简单，因为它们可以连接到另一个服务器的分布式虚拟交换机，并且透明地连接到它的虚拟交换网络。</p>
<br style="font-family:Simsun; text-align:left; font-size:16px">
<a name="fig3" style="font-family:Simsun; text-align:left; font-size:16px"><span style="font-size:0.76em; padding-top:0.3em; padding-right:5px; padding-bottom:0.7em; padding-left:5px; font-family:arial,sans-serif">图 3. 分布式虚拟交换机</span></a><br style="font-family:Simsun; text-align:left; font-size:16px">
<img alt="分布式虚拟交换机" height="262" src="http://www.ibm.com/developerworks/cn/linux/l-virtual-networking/figure3.gif" width="580" style="border-top-width:0px; border-right-width:0px; border-bottom-width:0px; border-left-width:0px; border-style:initial; border-color:initial; padding-top:0.3em; padding-right:5px; padding-bottom:0.7em; padding-left:5px; font-family:Simsun; text-align:left; font-size:16px"><span style="font-family:Simsun; text-align:left; font-size:16px">&nbsp;</span><br style="font-family:Simsun; text-align:left; font-size:16px">
<p style="font-family:arial,nsimsun,sans-serif; margin-top:0px; margin-bottom:0px; padding-top:0.3em; padding-right:5px; padding-bottom:0.7em; padding-left:5px; font-size:0.76em; text-align:left">
在这期间最重要的项目之一名为&nbsp;<em>Open vSwitch，</em>&nbsp;接下来本文会探讨这部分内容。</p>
<p style="font-family:arial,nsimsun,sans-serif; margin-top:0px; margin-bottom:0px; padding-top:0.3em; padding-right:5px; padding-bottom:0.7em; padding-left:5px; font-size:0.76em; text-align:left">
在服务器中隔离本地流量的一个问题就是流量不是外部可视的（例如，对网络分析员）。实现通过各种计划解决了这一问题，例如 OpenFlow，NetFlow 和 sFlow，它们还用于输出远程访问来控制和监控流量。</p>
<p style="font-family:arial,nsimsun,sans-serif; margin-top:0px; margin-bottom:0px; padding-top:0.3em; padding-right:5px; padding-bottom:0.7em; padding-left:5px; font-size:0.76em; text-align:left">
<a name="open_vswitch"><span class="smalltitle" style="font-size:1.2em; font-weight:bold">Open vSwitch</span></a></p>
<p style="font-family:arial,nsimsun,sans-serif; margin-top:0px; margin-bottom:0px; padding-top:0.3em; padding-right:5px; padding-bottom:0.7em; padding-left:5px; font-size:0.76em; text-align:left">
分布式虚拟交换机的早期实现已经结束，并且受限于管理程序专有设置的操作。但是在今天的云环境中，支持多管理程序共存的异构环境是很理想的。</p>
<p style="font-family:arial,nsimsun,sans-serif; margin-top:0px; margin-bottom:0px; padding-top:0.3em; padding-right:5px; padding-bottom:0.7em; padding-left:5px; font-size:0.76em; text-align:left">
Open vSwitch 是一个多层的虚拟交换机，在 Apache 2.0 许可下可用作为开放资源。截止 2010 年 5 月，Open vSwitch 已有版本 1.0.1 可用，并且支持一系列有用的功能。Open vSwitch 支持领先的开源管理程序解决方案，包括基于内核的 VM（KVM），VirtualBox，Xen 和 XenServer。它还是当前 Linux 桥模块的下拉替换。</p>
<p style="font-family:arial,nsimsun,sans-serif; margin-top:0px; margin-bottom:0px; padding-top:0.3em; padding-right:5px; padding-bottom:0.7em; padding-left:5px; font-size:0.76em; text-align:left">
Open vSwitch 由交换机守护，管理基于流的交换机的配套内核模块组成。还存在各种其他的守护程序和实体，用于管理交换机（特别是从 OpenFlow 方面）。您可以在用户空间完全运行 Open vSwitch，但是这么做会导致性能的下降。</p>
<p style="font-family:arial,nsimsun,sans-serif; margin-top:0px; margin-bottom:0px; padding-top:0.3em; padding-right:5px; padding-bottom:0.7em; padding-left:5px; font-size:0.76em; text-align:left">
除了为 VM 环境提供一个生产品质的交换机，Open vSwitch 还有令人印象深刻的功能路线图，和其他相&#20284;的、专有的解决方案竞争。</p>
<div class="ibm-alternate-rule" style="clear:both; height:1px; font-family:Simsun; text-align:left; font-size:16px">
</div>
<p class="ibm-ind-link ibm-back-to-top" style="font-family:arial,nsimsun,sans-serif; margin-top:0px; margin-bottom:0px; padding-top:5px; padding-right:5px; padding-bottom:5px; padding-left:5px; font-size:0.76em; clear:both; text-align:right; height:15px">
<a href="http://www.ibm.com/developerworks/cn/linux/l-virtual-networking/#ibm-pcon" class="ibm-anchor-up-link" style="color:rgb(153,102,153); display:inline; margin-top:0px; margin-right:0px; margin-bottom:0px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:18px; text-decoration:none; background-color:initial; font-weight:bold">回页首</a></p>
<p style="font-family:arial,nsimsun,sans-serif; margin-top:0px; margin-bottom:0px; padding-top:0.3em; padding-right:5px; padding-bottom:0.7em; padding-left:5px; font-size:0.76em; text-align:left">
<a name="ndv"><span class="atitle" style="font-size:1.5em; font-weight:bold">网络设备虚拟化</span></a></p>
<p style="font-family:arial,nsimsun,sans-serif; margin-top:0px; margin-bottom:0px; padding-top:0.3em; padding-right:5px; padding-bottom:0.7em; padding-left:5px; font-size:0.76em; text-align:left">
NIC 硬件的虚拟化以各种形式已经存在了一段时间 — 在虚拟交换机出现之前。本节将说明实现和硬件加速的部分内容，它们可用于改善网络虚拟化的速度。</p>
<p style="font-family:arial,nsimsun,sans-serif; margin-top:0px; margin-bottom:0px; padding-top:0.3em; padding-right:5px; padding-bottom:0.7em; padding-left:5px; font-size:0.76em; text-align:left">
<a name="qemu"><span class="smalltitle" style="font-size:1.2em; font-weight:bold">QEMU</span></a></p>
<p style="font-family:arial,nsimsun,sans-serif; margin-top:0px; margin-bottom:0px; padding-top:0.3em; padding-right:5px; padding-bottom:0.7em; padding-left:5px; font-size:0.76em; text-align:left">
虽然 QEMU 是一个平台模拟器，但它还提供各种硬件设备的软件模拟，包括 NICs。此外，QEMU 还提供了用于 IP 地址分配的内部 Dynamic Host Configuration Protocol 服务器。QEMU 和 KVM 一起运作，提供平台模拟和独立的设备模拟，为基于 KVM 的虚拟化提供平台。您可以在&nbsp;<a href="http://www.ibm.com/developerworks/cn/linux/l-virtual-networking/#resources" style="color:rgb(153,102,153)">参考资料</a>&nbsp;部分了解更多关于
 QEMU 的内容。</p>
<p style="font-family:arial,nsimsun,sans-serif; margin-top:0px; margin-bottom:0px; padding-top:0.3em; padding-right:5px; padding-bottom:0.7em; padding-left:5px; font-size:0.76em; text-align:left">
<a name="virtio"><span class="smalltitle" style="font-size:1.2em; font-weight:bold">virtio</span></a></p>
<p style="font-family:arial,nsimsun,sans-serif; margin-top:0px; margin-bottom:0px; padding-top:0.3em; padding-right:5px; padding-bottom:0.7em; padding-left:5px; font-size:0.76em; text-align:left">
<code style="font-size:small!important">virtio</code>&nbsp;是一个 Linux 的输入/输出（I/O）准虚拟化框架，它简化并加快了 VM 到管理程序的 I/O 通信。<code style="font-size:small!important">virtio</code>&nbsp;创建了 VM 和用于虚拟块设备，通用的外围组件互连（PCI）设备，网络设备等的管理程序间 I/O 的标准化传输机制。您可以在&nbsp;<a href="http://www.ibm.com/developerworks/cn/linux/l-virtual-networking/#resources" style="color:rgb(153,102,153)">参考资料</a>&nbsp;部分了解更多&nbsp;<code style="font-size:small!important">virtio</code>的内容。</p>
<p style="font-family:arial,nsimsun,sans-serif; margin-top:0px; margin-bottom:0px; padding-top:0.3em; padding-right:5px; padding-bottom:0.7em; padding-left:5px; font-size:0.76em; text-align:left">
<a name="tun"><span class="smalltitle" style="font-size:1.2em; font-weight:bold">TAP 和 TUN</span></a></p>
<p style="font-family:arial,nsimsun,sans-serif; margin-top:0px; margin-bottom:0px; padding-top:0.3em; padding-right:5px; padding-bottom:0.7em; padding-left:5px; font-size:0.76em; text-align:left">
虚拟化在网络栈中实现已经有一段时间了，允许 VM 访客网络栈访问主机网络栈。计划之二就是 TAP 和 TUN。TAP 是一个虚拟网络内核驱动，该驱动实现 Ethernet 设备，并在 Ethernet 框架级别操作。TAP 驱动提供了 Ethernet “tap”，访客 Ethernet 框架能够通过它进行通信。TUN（或者网络“通道”）模拟网络层设备，并且在 IP 数据包的较高层进行通信，这些数据包提供一些优化，因为底层 Ethernet 设备能够管理 TUN 的 IP 数据包的 2 层框架。</p>
<p style="font-family:arial,nsimsun,sans-serif; margin-top:0px; margin-bottom:0px; padding-top:0.3em; padding-right:5px; padding-bottom:0.7em; padding-left:5px; font-size:0.76em; text-align:left">
<a name="io_virt"><span class="smalltitle" style="font-size:1.2em; font-weight:bold">I/O 虚拟化</span></a></p>
<p style="font-family:arial,nsimsun,sans-serif; margin-top:0px; margin-bottom:0px; padding-top:0.3em; padding-right:5px; padding-bottom:0.7em; padding-left:5px; font-size:0.76em; text-align:left">
I/O 虚拟化来自在硬件层上支持加速虚拟化的 PCI-Special Interest Group（SIG）的标准化计划。特别是，Single-root IOV（SR-IOV）提供一个接口，通过它独立的 PCI Express（PCIe）卡能够作为多 PCIe 卡出现在众多用户面前，允许多个独立的驱动连接到 PCIe 卡，无需相互了解。SR-IOV 通过将虚拟功能扩展到各种用户来实现，这是作为 PCIe 空间的物理功能，但是在卡中作为共享功能表示。</p>
<p style="font-family:arial,nsimsun,sans-serif; margin-top:0px; margin-bottom:0px; padding-top:0.3em; padding-right:5px; padding-bottom:0.7em; padding-left:5px; font-size:0.76em; text-align:left">
SR-IOV 带给网络虚拟化的好处就是性能。比起实现物理 NIC 共享的管理程序，卡自身实现复合，允许从访客 VM I/O 接口直接到卡的通路。</p>
<p style="font-family:arial,nsimsun,sans-serif; margin-top:0px; margin-bottom:0px; padding-top:0.3em; padding-right:5px; padding-bottom:0.7em; padding-left:5px; font-size:0.76em; text-align:left">
Linux 今天包含对 SR-IOV 的支持，这对 KVM 管理程序很有好处。Xen 也包括对 SR-IOV 的支持，允许它高效地向访客 VMs 显示 vNIC。对 SR-IOV 的支持在 Open vSwitch 的路线图上。</p>
<p style="font-family:arial,nsimsun,sans-serif; margin-top:0px; margin-bottom:0px; padding-top:0.3em; padding-right:5px; padding-bottom:0.7em; padding-left:5px; font-size:0.76em; text-align:left">
<a name="vlan"><span class="smalltitle" style="font-size:1.2em; font-weight:bold">虚拟 LANs</span></a></p>
<p style="font-family:arial,nsimsun,sans-serif; margin-top:0px; margin-bottom:0px; padding-top:0.3em; padding-right:5px; padding-bottom:0.7em; padding-left:5px; font-size:0.76em; text-align:left">
虽然相关，但是虚拟 LANs（VLANs）是网络虚拟化的物理方法。VLANs 提供创建跨分布网络的虚拟网络的能力，这样就会出现不同的主机（在独立的网络上），如果它们是相同广播域的一部分。VLANs 通过使用 VLAN 信息标记框架完成这个，用来识别特定 LAN（按照 Institute of Electrical and Electronics Engineers [IEEE] 802.1Q 标准）的成员关系。主机和 VLAN 交换机一起运作，进行物理网络虚拟化。然而，虽然 VLANs 提供独立网络的假象，但它们共享同一个网络以及可用带宽，影响阻塞带来的结果。</p>
<p style="font-family:arial,nsimsun,sans-serif; margin-top:0px; margin-bottom:0px; padding-top:0.3em; padding-right:5px; padding-bottom:0.7em; padding-left:5px; font-size:0.76em; text-align:left">
<a name="hw_acceleration"><span class="smalltitle" style="font-size:1.2em; font-weight:bold">硬件加速</span></a></p>
<p style="font-family:arial,nsimsun,sans-serif; margin-top:0px; margin-bottom:0px; padding-top:0.3em; padding-right:5px; padding-bottom:0.7em; padding-left:5px; font-size:0.76em; text-align:left">
许多针对 I/O 的虚拟化加速开始出现，寻址 NICs 和其他设备。Intel® Virtualization Technology for Directed I/O（VT-d）提供隔离 I/O 资源的功能来获得改进的可靠性和安全性，它包括重映射直接内存访问（使用多级页表）和设备相关的中断重映射，支持未修正的和虚拟化感知的访客。Intel Virtual Machine Device Queues（VMDq）还通过硬件中的嵌入排序和智能排序，加速了在虚拟化设置中的网络通信流，实现了管理程序较低的 CPU 利用率和总体系统性能的更大程度改善。Linux
 包含对两者的支持。</p>
<div class="ibm-alternate-rule" style="clear:both; height:1px; font-family:Simsun; text-align:left; font-size:16px">
</div>
<p class="ibm-ind-link ibm-back-to-top" style="font-family:arial,nsimsun,sans-serif; margin-top:0px; margin-bottom:0px; padding-top:5px; padding-right:5px; padding-bottom:5px; padding-left:5px; font-size:0.76em; clear:both; text-align:right; height:15px">
<a href="http://www.ibm.com/developerworks/cn/linux/l-virtual-networking/#ibm-pcon" class="ibm-anchor-up-link" style="color:rgb(153,102,153); display:inline; margin-top:0px; margin-right:0px; margin-bottom:0px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:18px; text-decoration:none; background-color:initial; font-weight:bold">回页首</a></p>
<p style="font-family:arial,nsimsun,sans-serif; margin-top:0px; margin-bottom:0px; padding-top:0.3em; padding-right:5px; padding-bottom:0.7em; padding-left:5px; font-size:0.76em; text-align:left">
<a name="virt_appliances"><span class="atitle" style="font-size:1.5em; font-weight:bold">网络虚拟设备</span></a></p>
<p style="font-family:arial,nsimsun,sans-serif; margin-top:0px; margin-bottom:0px; padding-top:0.3em; padding-right:5px; padding-bottom:0.7em; padding-left:5px; font-size:0.76em; text-align:left">
目前为止，本文探讨了 NIC 设备和交换机的虚拟化，当前实现的部分内容，通过硬件加速虚拟化的部分方法。现在，我们将这个讨论扩大到通常的网络服务。</p>
<p style="font-family:arial,nsimsun,sans-serif; margin-top:0px; margin-bottom:0px; padding-top:0.3em; padding-right:5px; padding-bottom:0.7em; padding-left:5px; font-size:0.76em; text-align:left">
虚拟化范围内的有趣革新之一就是从服务器整合演化而来的生态系统。比起将应用程序投入到特定的硬件版本，服务器的一部分和服务器内扩展服务的强大 VM 相隔离。这些 VMs 被称为&nbsp;<em>虚拟设备，</em>&nbsp;因为它们关注一个特定的应用程序，被部署用于虚拟化设置。</p>
<p style="font-family:arial,nsimsun,sans-serif; margin-top:0px; margin-bottom:0px; padding-top:0.3em; padding-right:5px; padding-bottom:0.7em; padding-left:5px; font-size:0.76em; text-align:left">
虚拟设备通常连接到管理程序 — 或者有管理程序的良好网络设置— 来扩展特定的服务。这个之所以独特是因为，在合并服务器中，处理功能的部分（例如核）和 I/O 带宽能够为虚拟设备动态地配置。这个功能使它更成本有效（因为一个独立的服务器并不会为它而被隔离），并且您能够根据在服务器上运行的其他应用程序的需求，动态地改变它的功能。虚拟设备还能更易于管理，因为应用程序被绑定在操作系统中（在 VM 内）。无需特殊配置，因为 VM 是作为整体进行预配置的。这对于虚拟设备来说是个&#20540;得考虑的好处，这也是今天它一直发展的原因。</p>
<p style="font-family:arial,nsimsun,sans-serif; margin-top:0px; margin-bottom:0px; padding-top:0.3em; padding-right:5px; padding-bottom:0.7em; padding-left:5px; font-size:0.76em; text-align:left">
虚拟设备已经为许多企业软件进行了开发，并且包括 WAN 优化，路由器，虚拟专用网，防火墙，防止/检测入侵的系统，邮件分类和管理等等。除了网络服务以外，虚拟设备还用于存储，安全，应用程序框架以及内容管理。</p>
<div class="ibm-alternate-rule" style="clear:both; height:1px; font-family:Simsun; text-align:left; font-size:16px">
</div>
<p class="ibm-ind-link ibm-back-to-top" style="font-family:arial,nsimsun,sans-serif; margin-top:0px; margin-bottom:0px; padding-top:5px; padding-right:5px; padding-bottom:5px; padding-left:5px; font-size:0.76em; clear:both; text-align:right; height:15px">
<a href="http://www.ibm.com/developerworks/cn/linux/l-virtual-networking/#ibm-pcon" class="ibm-anchor-up-link" style="color:rgb(153,102,153); display:inline; margin-top:0px; margin-right:0px; margin-bottom:0px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:18px; text-decoration:none; background-color:initial; font-weight:bold">回页首</a></p>
<p style="font-family:arial,nsimsun,sans-serif; margin-top:0px; margin-bottom:0px; padding-top:0.3em; padding-right:5px; padding-bottom:0.7em; padding-left:5px; font-size:0.76em; text-align:left">
<a name="N1015C"><span class="atitle" style="font-size:1.5em; font-weight:bold">结束语</span></a></p>
<p style="font-family:arial,nsimsun,sans-serif; margin-top:0px; margin-bottom:0px; padding-top:0.3em; padding-right:5px; padding-bottom:0.7em; padding-left:5px; font-size:0.76em; text-align:left">
曾几何时一切都可管理还是物理上可实现的。但是今天，在我们不断虚拟化的世界中，物理设备和服务已经消失不见。物理网络被虚拟化地分割，允许通信隔离和跨地理实体的虚拟网络的构建。应用程序消失在虚拟设备中，这些设备在强大服务器的核之间被分割，虽然为管理者添加了很多复杂性，但是也提供了更好的灵活性，改善了可管理能力。当然，Linux 就走在前沿。</p>
<p style="font-family:arial,nsimsun,sans-serif; margin-top:0px; margin-bottom:0px; padding-top:0.3em; padding-right:5px; padding-bottom:0.7em; padding-left:5px; font-size:0.76em; text-align:left">
</p>

</div>
<div class="share_buttons" id="sharePanel"></div>
<!--192.168.1.237-->
<div class="article_next_prev">
    <li class="prev_article"><span>上一篇：</span><a href="/jincm13/article/details/7802099">虚拟化实现</a></li>
    <li class="next_article"><span>下一篇：</span><a href="/jincm13/article/details/7802562">xen体系结构</a></li>
</div>


    
</div>
<div id="ad_cen"></div>
<script type="text/javascript">
    new Ad(4, 'ad_cen');
</script>
<div id="comment_title" class="panel_head">查看评论<a name="comments"></a></div>
<div id="comment_list"></div>
<div id="comment_bar"></div>
<div id="comment_form"></div>
<div class="announce">* 以上用户言论只代表其个人观点，不代表CSDN网站的观点或立场<a name="reply"></a><a name="quote"></a></div>
<script type="text/javascript">
    var fileName = '7802488';
    var commentscount = 0;
    var islock = false
</script>
<script type="text/javascript" src="http://static.blog.csdn.net/scripts/comment.js?v=1.8"></script>
<div id="ad_bot"></div>
<script type="text/javascript">
    new Ad(5, 'ad_bot');
</script>
<div id="report_dialog"></div>

<div id="d-top" style="display:none;">
<a id="d-top-a" href="#" title="回到顶部">
<img src="http://static.blog.csdn.net/images/top.png" alt="TOP" /></a>
</div>
<script type="text/javascript">
    $(function(){
        var d_top=$('#d-top');
        document.onscroll=function(){
            var scrTop=(document.body.scrollTop||document.documentElement.scrollTop);
            if(scrTop>500){
                d_top.show();
            }else{
                d_top.hide();
            }
        }
        $('#d-top-a').click(function(){
            scrollTo(0,0);
            this.blur();
            return false;
        });
    });
</script>



<div class="clear"></div>
</div>
</div>

<div id="side">
<div class="side">
<div id="panel_Profile" class="panel">
    <ul class="panel_head"><span>个人资料</span></ul>
    <ul class="panel_body profile">
        <div id="blog_userface">
            <a href="http://my.csdn.net/jincm13" target="_blank">
            <img src="http://avatar.csdn.net/A/0/D/1_jincm13.jpg" title="访问我的空间" style="max-width:90%"/>
            </a>
            <br />
            <span><a href="http://my.csdn.net/jincm13" class="user_name" target="_blank">jincm13</a></span>
        </div>
<div class="interact">
<!--<a href="#" class="attented" title="已关注"></a>-->
<a href="javascript:void(0);" class="attent" id="span_add_follow" title="[加关注]"></a>
<a href="javascript:void(0);" class="letter" onclick="loginto(1)" title="[发私信]"></a>
</div>
        <div id="blog_medal">
        </div>
        <ul id="blog_rank">
            <li>访问：<span>61619次</span></li>
            <li>积分：<span>769分</span></li>
            <li>排名：<span>第13402名</span></li>
        </ul>
        <ul id="blog_statistics">
            <li>原创：<span>0篇</span></li>
            <li>转载：<span>104篇</span></li>
            <li>译文：<span>0篇</span></li>
            <li>评论：<span>3条</span></li>
        </ul>
    </ul>
</div>
<script type="text/javascript">
    var _blogger = 'jincm13';
</script>



<div class="panel" id="panel_Search">
    <ul class="panel_head"><span>文章搜索</span></ul>
    <ul class="panel_body">
        <form id="frmSearch" action="http://so.csdn.net/search" class="form_search" target="_blank">
        <span><input id="inputSearch" type="text" class="blogsearch" title="请输入关键字" /></span>
        <input id="btnSubmit" type="submit" value="搜索" title="search in blog" />
        <input type="hidden" name="q" id="inputQ" />
        <input type="hidden" name="t" value="blog" />
        <a id="btnSearchBlog" target="_blank"></a>
        </form>
    </ul>
</div><div id="panel_Category" class="panel">
    <ul class="panel_head"><span>文章分类</span></ul>
    <ul class="panel_body">
        <li>
        <a href="http://blog.csdn.net/jincm13/article/category/1196238">虚拟交换机</a><span>(5)</span>
        </li>
        <li>
        <a href="http://blog.csdn.net/jincm13/article/category/1196013">虚拟化</a><span>(18)</span>
        </li>
        <li>
        <a href="http://blog.csdn.net/jincm13/article/category/1196014">linux内核</a><span>(13)</span>
        </li>
        <li>
        <a href="http://blog.csdn.net/jincm13/article/category/1196015">web开发</a><span>(2)</span>
        </li>
        <li>
        <a href="http://blog.csdn.net/jincm13/article/category/1205831">linux应用</a><span>(26)</span>
        </li>
        <li>
        <a href="http://blog.csdn.net/jincm13/article/category/1206154">openflow</a><span>(0)</span>
        </li>
        <li>
        <a href="http://blog.csdn.net/jincm13/article/category/1211778">防火墙</a><span>(1)</span>
        </li>
        <li>
        <a href="http://blog.csdn.net/jincm13/article/category/1231883">vpn</a><span>(1)</span>
        </li>
        <li>
        <a href="http://blog.csdn.net/jincm13/article/category/1251763">云安全</a><span>(2)</span>
        </li>
        <li>
        <a href="http://blog.csdn.net/jincm13/article/category/1255642">健康</a><span>(2)</span>
        </li>
        <li>
        <a href="http://blog.csdn.net/jincm13/article/category/1258219">openstack</a><span>(2)</span>
        </li>
        <li>
        <a href="http://blog.csdn.net/jincm13/article/category/1302656">网络</a><span>(2)</span>
        </li>
        <li>
        <a href="http://blog.csdn.net/jincm13/article/category/1302657">网络协议</a><span>(1)</span>
        </li>
        <li>
        <a href="http://blog.csdn.net/jincm13/article/category/1312442">linux开发</a><span>(1)</span>
        </li>
        <li>
        <a href="http://blog.csdn.net/jincm13/article/category/1316430">修身养性</a><span>(3)</span>
        </li>
        <li>
        <a href="http://blog.csdn.net/jincm13/article/category/1316553">c/c++/python/shell</a><span>(1)</span>
        </li>
    </ul>
</div><div id="panel_Archive" class="panel">
    <ul class="panel_head"><span>文章存档</span></ul>
    <ul class="panel_body">
        <div id="archive_list">
        <!--归档统计-->
        <li><a href="http://blog.csdn.net/jincm13/article/month/2013/03">2013年03月</a><span>(1)</span></li><li><a href="http://blog.csdn.net/jincm13/article/month/2013/01">2013年01月</a><span>(2)</span></li><li><a href="http://blog.csdn.net/jincm13/article/month/2012/12">2012年12月</a><span>(26)</span></li><li><a href="http://blog.csdn.net/jincm13/article/month/2012/11">2012年11月</a><span>(6)</span></li><li><a href="http://blog.csdn.net/jincm13/article/month/2012/10">2012年10月</a><span>(18)</span></li><li><a href="http://blog.csdn.net/jincm13/article/month/2012/09">2012年09月</a><span>(4)</span></li><li><a href="http://blog.csdn.net/jincm13/article/month/2012/08">2012年08月</a><span>(27)</span></li><li><a href="http://blog.csdn.net/jincm13/article/month/2012/07">2012年07月</a><span>(20)</span></li>
        </div>
    </ul>
</div>
<div id="hotarticls" class="panel">
    <ul class="panel_head"><span>阅读排行</span></ul>
    <ul class="panel_body itemlist">
        <li>
            <a href="/jincm13/article/details/7861575" title="netscreen&amp;fortinet">netscreen&amp;fortinet</a><span>(5800)</span>
        </li>
        <li>
            <a href="/jincm13/article/details/7825754" title="SDN和Openflow flowvisor NOX">SDN和Openflow flowvisor NOX</a><span>(4806)</span>
        </li>
        <li>
            <a href="/jincm13/article/details/7839932" title="OpenFlow-建设一个永远不会崩溃的网络">OpenFlow-建设一个永远不会崩溃的网络</a><span>(3754)</span>
        </li>
        <li>
            <a href="/jincm13/article/details/7818093" title="以计算为中心的下一代数据中心交换网络">以计算为中心的下一代数据中心交换网络</a><span>(2014)</span>
        </li>
        <li>
            <a href="/jincm13/article/details/7790036" title="云界伦语- 戏说云界趣事，喜看云中漫步">云界伦语- 戏说云界趣事，喜看云中漫步</a><span>(1982)</span>
        </li>
        <li>
            <a href="/jincm13/article/details/7837943" title="git使用">git使用</a><span>(1790)</span>
        </li>
        <li>
            <a href="/jincm13/article/details/8077501" title="虚拟化">虚拟化</a><span>(1743)</span>
        </li>
        <li>
            <a href="/jincm13/article/details/8083903" title="cloudstack">cloudstack</a><span>(1640)</span>
        </li>
        <li>
            <a href="/jincm13/article/details/7789393" title="八大主流云管理平台对比导购">八大主流云管理平台对比导购</a><span>(1570)</span>
        </li>
        <li>
            <a href="/jincm13/article/details/7818854" title="ASIC：万兆路由的基石">ASIC：万兆路由的基石</a><span>(1357)</span>
        </li>
    </ul>
</div>
<div id="hotarticls2" class="panel">
    <ul class="panel_head"><span>评论排行</span></ul>
    <ul class="panel_body itemlist">
        <li>
            <a href="/jincm13/article/details/7843800" title="xen架构">xen架构</a><span>(1)</span>
        </li>
        <li>
            <a href="/jincm13/article/details/8432057" title="交换机：vlan">交换机：vlan</a><span>(1)</span>
        </li>
        <li>
            <a href="/jincm13/article/details/8455083" title="道德经">道德经</a><span>(1)</span>
        </li>
        <li>
            <a href="/jincm13/article/details/8035206" title="调试linux内核模块">调试linux内核模块</a><span>(0)</span>
        </li>
        <li>
            <a href="/jincm13/article/details/8107775" title="Cloud computing with Linux">Cloud computing with Linux</a><span>(0)</span>
        </li>
        <li>
            <a href="/jincm13/article/details/8135446" title="linux数据结构">linux数据结构</a><span>(0)</span>
        </li>
        <li>
            <a href="/jincm13/article/details/8153497" title="linux内核内存管理">linux内核内存管理</a><span>(0)</span>
        </li>
        <li>
            <a href="/jincm13/article/details/8202794" title="中断的上半部和下半部">中断的上半部和下半部</a><span>(0)</span>
        </li>
        <li>
            <a href="/jincm13/article/details/8207585" title="softirq">softirq</a><span>(0)</span>
        </li>
        <li>
            <a href="/jincm13/article/details/8224483" title="linux内核增加系统调用">linux内核增加系统调用</a><span>(0)</span>
        </li>
    </ul>
</div>
<div id="homepageArticles" class="panel">
    <ul class="panel_head"><span>推荐文章</span></ul>
    <ul class="panel_body" id="ad_commend">
    </ul>
</div>
<script type="text/javascript">
    new Ad(12, 'ad_commend');
</script><div id="newcomments" class="panel">
<ul class="panel_head"><span>最新评论</span></ul>
<ul class="panel_body itemlist">
    <li>
    <a href="/jincm13/article/details/8455083#comments">道德经</a>
    <p style="margin:0px;"><a href="/mttsui" class="user_name">mttsui</a>:
大杂烩。
    </p>
    </li>
    <li>
    <a href="/jincm13/article/details/8432057#comments">交换机：vlan</a>
    <p style="margin:0px;"><a href="/xu9920" class="user_name">xu9920</a>:
回帖是美德，也学习到了知识！
    </p>
    </li>
    <li>
    <a href="/jincm13/article/details/7843800#comments">xen架构</a>
    <p style="margin:0px;"><a href="/lujun54nilaopo" class="user_name">lujun54nilaopo</a>:
厉害啊，是把原文翻译过来的吗
    </p>
    </li>
</ul>
</div>
</div>
<div class="clear"></div>
</div>

<div class="clear"></div>
</div>

<script type="text/javascript" src="http://static.blog.csdn.net/scripts/newblog.min.js?v=1.1"></script>
<script type="text/javascript" src="http://medal.blog.csdn.net/showblogmedal.ashx?blogid=1320942"></script>

<script type="text/javascript" src="http://csdnimg.cn/pubfooter/js/publib_footer.js"></script>

<script type="text/javascript" src="http://passport.csdn.net/content/loginbox/login.js"></script>
<script type="text/javascript">document.write("<img src=http://counter.csdn.net/pv.aspx?id=24 border=0 width=0 height=0>");</script>
<script type="text/javascript" src="http://www.csdn.net/ui/scripts/Csdn/counter.js"></script>


<script type="text/javascript" src="http://ad.csdn.net/scripts/ad-blog.js"></script>
</div>
</body>
</html>