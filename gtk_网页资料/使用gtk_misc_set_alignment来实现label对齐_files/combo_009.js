require("core::util[cookie]",function(a){var b={appId:"1019",title:"想要查看更多精彩内容，马上登录吧！"};define("core::util::beLogin",function(f){if(a.cookie.getCookie("ppinf")){return false}var g=arguments.callee.caller,e=g.arguments;var d=a.probe(b,f&&f.options||f),c=f&&f.self||f||{};d.onLogin=function(){a.cookie.reload(function(){c.recalledFromBeLogin=true;(d.reload||d.reload===0)&&setTimeout(function(){window.location.reload()},Number(d.reload)||1);g.apply(c,e)})};loadResource("/mysohu/plugins/ppdialog/default/ppdialog.css");require("core::ui::ppDialog",function(h){h(d)});return true})});
require("plugins::Template",function(a){define("app::widgets::template",a({theme:'<div id="skin_bar"><div class="themes-wrapper"><div class="theme-name-wrapper"><div class="theme-names groups">{{#}} <span class="group" title="{{{title}}}" action="show-group"><a href="javascript:;">{{{title}}}</a></span> {{/}}</div></div><div class="theme-page-wrapper"><a class="prev" href="javascript:;" title="上一页" action="prev"></a></div><div class="icons"></div><div class="theme-page-wrapper"><a class="next" href="javascript:;" title="下一页" action="next"></a></div></div><div class="theme-extends"><div class="theme-actions-wrapper"><div class="theme-actions"><span class="ui-btn btn-save" title="保存当前皮肤" action="save"><span>保存</span></span><span class="ui-btn btn-gray btn-cancel" title="取消设定" action="cancel"><span>取消</span></span></div><br class="clear" /></div></div></div>',theme_list:'<div class="list" style="width: {{{width}}}px">{{#themes}} <span style="background-image: url(http://s3.suc.itc.cn/themes/{{{id}}}/icon.jpg)"> <a class="skin" theme="{{{id}}}" href="javascript:;" action="wear-skin"><div class="title">{{{title}}}</div></a></span>{{/themes}}</div>',group_sort:'<div class="group-order-box"><div class="order-preview-wrapper"><h3>分组显示预览</h3><ul class="tabs-menu">{{{tabs}}}</ul></div><div class="group-list-wrapper"><h3>拖拽分组名称，调整分组顺序，点击文本还可编辑分组名称</h3><ul class="group-list">{{#groups}}<li data-gid="{{id}}"><a class="editable" title="点击进行编辑">{{name}}</a></li> {{/groups}}</ul></div></div>',theme_custom:'{{#weared}}<div class="bg_setting{{^url}} no-bg{{/url}}"><span class="bg-upload"{{#url}} style="background:{{{bg_sm}}} no-repeat center center"{{/url}}><a class="skin" href="javascript:;"><object id="theme_bg-upload"></object><div class="no-bg add-bg"><span class="no-uploading"><i></i><span class="text-up">添加背景图片</span></span><span class="progress"></span></div><div class="title have-bg">更换图片</div></a></span><span class="bg_option"><div class="hint upload-hint no-bg">点击左侧可以上传本地背景图片。<br/>支持jpg、jpeg、gif、png格式，请上传小于2M图片，过大的图片会影响你的展示效果哦~</div><span class="have-bg"><div class="row"><span class="hint cell">对齐方式</span><a id="i_select_Position" href="javascript:;" class="i-select cell">左对齐</a><span class="cell gray">选择背景图片对齐方式</span></div><div class="row"><span class="hint cell">显示方式</span><a id="i_select_Repeat" href="javascript:;" class="i-select cell">不平铺</a><span class="cell gray">选择背景图片显示方式</span></div><label action="reset-bg"><input type="checkbox"{{#custom}} checked="checked"{{/custom}} />使用自定义背景图片</label></span></span></div>{{/weared}}<div class="vr"></div><div class="right"><p class="hint color-hint">你还可以选择配色方案</p><div class="color-list">{{#colors}}<a href="javascript:;" action="custom-color" data-color="{{id}}" title="{{title}}" style="background-image: url(http://s3.suc.itc.cn/themes/{{id}}/icon.jpg)"></a>{{/colors}}</div></div>',forward:'<div class="forward-box clearfix emote-handler">{{+usericon}}<div class="forward-con"><div class="forward-fields"><textarea name="" id="" cols="50" rows="2"></textarea></div><div class="forward-options clearfix"><div class="forwoard-tip-txt">0 / {{chars}}</div><div class="pub-faces"><div style="width: 0; height: 0;"><div class="emotion-list" style="display: none;"></div></div><a href="javascript:;" action="emote"><span class="btn-emot"></span></a></div><ul>{{#origin}}<li><label> <input type="checkbox" checked="checked" /> 同时评论给{{unick}}</label></li> {{#fwd}}<li><label> <input type="checkbox" checked="checked" /> 同时评论给原文作者 {{unick}}</label></li> {{/fwd}}{{/origin}}</ul></div>{{#data}}<div class="forward-body clearfix"><h3>{{>username}} {{#album}} 的专辑 <a href="{{url}}" target="_blank">{{{title}}}</a></h3><p>{{{content}}}</p>{{/album}} {{#photo}} 的图片</h3><p>{{{content}}}</p>{{/photo}} {{#blog}} 的博客 <a href="{{url}}" target="_blank">{{{title}}}</a></h3><p>{{{content}}}</p>{{/blog}} {{#video}} 的视频 <a href="{{url}}" target="_blank">{{{title}}}</a></h3><p>{{{content}}}</p>{{/video}} {{#sentence}}<span class="user-suffix">：</span>{{{filtered_title}}}</h3>{{/sentence}} {{#qingsohu}}&nbsp;的新闻 <a href="{{url}}" target="_blank">{{{title}}}</a></h3><p>{{{content}}}</p>{{/qingsohu}}</div>{{/data}}</div></div>',page:'<div class="ui-pagination"><a class="null" href="javascript:;" data-page="1" action="page">首页</a> <a class="null" href="javascript:;" data-page="prev" action="page">上一页</a> <span class="page-num"><p style="display: none;"></p> <span class=""><span class="cpage">第<span>1</span>页</span><span class="btn-arrow"></span></span></span> <a class="txt" data-page="next" href="javascript:;" action="page">下一页</a> <a class="null" href="javascript:;" data-page="tail" action="page">末页</a></div>',atTa:'<div class="post-wrapper-inner emote-handler sentence-box" style="width: 388px"><div class="post-area" id="sentence_post_area"><div class="post-state-wrapper"><div style="display: none;" class="post-state success" id="post_state"></div></div><div class="textarea-wrapper post-state-success"><textarea rows="1" cols="60" id="onesentencetext" name="" style="height: 54px; display: inline; color: rgb(153, 153, 153);"></textarea></div></div><div class="post-action"><div class="post-options"><div><div class="emotion-list"></div></div><div class="pub-faces"><div class="clearfix"><a href="javascript:;" action="emote"><span class="btn-emot"></span></a></div></div></div><div class="post-btns"><div class="btn-submit"><a id="sentence_submit" href="javascript:void(0);"><span class="submit">发布</span></a></div><div class="txt-number"><span class="txt-number-now">0 / 300</span></div><div class="txt-error">请输入内容</div></div><div class="clear"></div></div></div>',albumview:'<div class="albumview"><!--[if IE 6]><div class="albumview-bg"></div><![endif]--><div class="albumview-wrapper origin"><a href="" target="_blank"></a></div><div class="albumview-wrapper pic"><a href="" target="_blank" title="查看原始图片"></a></div><div class="albumview-wrapper func"><a href="javascript:;" class="roleft clickHandler" action="roleft"><i></i><span class="tit">向左转图片</span></a> <a href="javascript:;" class="roright clickHandler" action="roright"><i></i><span class="tit">向右转图片</span></a> <a href="javascript:;" class="fwd clickHandler" action="forward"><span class="func-float"></span><i></i><span class="tit">转发此图片<span class="num"></span></span></a> <a href="javascript:;" class="cmt clickHandler" action="discuss"><span class="func-float"></span><i></i> <span class="tit">评论此图片<span class="num"></span></span></a></div><div class="albumview-wrapper desc"><div class="albumview-desc"><span></span></div></div><div class="albumview-body"><a href="javascript:;" class="albumview-close" title="关闭视图并返回到新鲜事列表"></a><div style="clear: both; height: 1px;"></div><div class="albumview-nav"><a href="javascript:;" title="下一张" class="albumview-next clickHandler" action="show" data-index="next"></a> <a href="javascript:;" title="上一张" class="albumview-prev clickHandler" action="show" data-index="prev"></a></div><div class="albumview-discuss"><textarea>说说你的看法</textarea><a href="javascript:;" class="discuss-post clickHandler" action="discuss.post"></a><span class="discuss-count"></span><span class="discuss-more"><label><input type="checkbox" />同时转发</label><a href="" target="_blank">查看评论(<span></span>条)</span></a></div><div class="albumview-count"><span></span></div></div><div class="albumview-bottombar"><div class="albumview-preview"></div></div></div>',whisper:'<div class="whisper-wrapper">{{^nick}}<div style="width: 0; height: 0; overflow: visible"><div class="nicks"><div class="nicks-head"><i></i></div><ul></ul></div></div><label for="whisper_nick">收件人</label><input id="whisper_nick" type="text" /> <br class="clear" /><div class="contact"></div>{{/nick}} <label for="whisper_content">内&nbsp;&nbsp;容</label><textarea id="whisper_content">{{content}}</textarea><span class="hint"><span>{{{chars}}}</span> / {{{chars}}} </span> <a href="javascript:;" class="emote"><span class="btn-emot"></span>表情</a></div><br class="clear" /><div class="emotion-list"></div><style type="text/css">.jquery-dialog.dialog-whisper .dialog-button-container { padding: 9px 0 7px; text-align: right; }</style>'}))});
require("core::util",function(a){function d(g,h){this.emotes=h;for(var f in g){this[f]=g[f]}this.initEmoteReg();this.initEmotes()}d.prototype={name:"name",title:"title",icon:"",baseURI:"",prefix:"[",suffix:"]",regExp:null,initEmoteReg:function(){var g=/([\^\$\(\)\[\{\\\|\.\*\+\?\<\>])/g,h="\\$1";var f=[];for(var i in this.emotes){f.push(i.replace(g,h))}this.regExp=new RegExp(this.prefix.replace(g,h)+"("+f.join("|")+")"+this.suffix.replace(g,h),"g")},initEmotes:function(){for(var g in this.emotes){var f=this.emotes[g];this.emotes[g]='<img class="emote-'+this.name+'" data-ubb="'+this.name+"."+g+'" src="'+this.baseURI+f[0]+'.gif"  title="'+f[1]+'"/>'}}};var c={base:new d({name:"base",title:"基本",baseURI:"http://js3.pp.sohu.com.cn/ppp/images/emotion/base/"},{":)":["smile","微笑"],"#_#":["flatter","谄媚"],"8*)":["titter","偷笑"],":D":["spit","大笑"],":-)":["shame","害羞"],":P":["naughty","调皮"],"B_)":["complacent","得意"],B_I:["cool","耍酷"],"^_*":["lash","讽刺"],":$":["complaint","委屈"],":|":["gloomy","郁闷"],":(":["sorry","难过"],":.(":["weep","泪奔"],":_(":["cry","大哭"],"):(":["detonate","发火"],":V":["curse","咒骂"],"*_*":["muzzy","发呆"],":^":["misunderstand","不懂"],":?":["haze","疑惑"],":!":["surprise","吃惊"],"=:|":["perspire","流汗"],":%":["embarrassed","尴尬"],":O":["fright","惊恐"],":X":["stopper","闭嘴"],"|-)":["yawn","犯困"],":Z":["sleep","睡觉"],":9":["greedy","馋"],":T":["puke","吐"],":-*":["whisper","耳语"],"*_/":["pirate","海盗"],":#|":["bandage","重伤"],":69":["hug","拥抱"],"//shuang":["comfortably","爽"],"//qiang":["strong","强"],"//ku":["cool2","酷"],"//zan":["good","赞"],"//heart":["heart","红心"],"//break":["hearted","心碎"],"//F":["blow","花开"],"//W":["fade","花谢"],"//mail":["mail","邮件"],"//strong":["fine","手势-棒"],"//weak":["bad","手势-逊"],"//share":["share","握手"],"//phone":["phone","电话"],"//mobile":["mobile","手机"],"//kiss":["lip","嘴唇"],"//V":["victory","V"],"//sun":["sun","太阳"],"//moon":["moon","月亮"],"//star":["star","星星"],"(!)":["bulb","灯泡"],"//TV":["tv","电视"],"//clock":["clock","闹钟"],"//gift":["gift","礼物"],"//cash":["cash","现金"],"//coffee":["coffee","咖啡"],"//rice":["dining","饭"],"//watermelon":["watermelon","西瓜"],"//tomato":["tomato","番茄"],"//pill":["pill","药丸"],"//pig":["pig","猪头"],"//football":["football","足球"],"//shit":["shit","便便"]}),fox:new d({name:"fox",title:"狐狸",baseURI:"http://js3.pp.sohu.com.cn/ppp/images/emotion/s/",prefix:"[{s}"},{"//pig":["pig","猪头"],"//heart":["heart","红心"],B_I:["cool","耍酷"],snt:["snot","鼻涕"],"=:|":["perspire","流汗"],"8*)":["titter","偷笑"],elv:["elvis","猫王"],nob:["nostbleed","鼻血"],":D":["spit","大笑"],lny:["loney","坏笑"],":_(":["cry","大哭"],rdf:["redflag","红旗"],":9":["greedy","馋"],":|":["gloomy","郁闷"],"//shit":["shit","便便"],ctm:["contemn","蔑视"],plg:["plunger","搋子"],":Z":["sleep","睡觉"],":#|":["bandage","重伤"],":?":["haze","疑惑"],ft:["faint","晕"],"//zan":["good","赞"],epd:["explode","爆炸"],"//share":["share","握手"],":$":["complaint","委屈"],drk:["drink","饮料"],brs:["brushing","刷牙"],"//rice":["dining","饭"],bra:["bra","胸罩"],spk:["speaker","喇叭"],"//clock":["clock","闹钟"],xms:["xmas","圣诞"],bsk:["basketball","篮球"],flw:["floweret","小花"],ber:["beer","啤酒"],cak:["cake","蛋糕"],chr:["cheer","加油"],oly:["olympic","奥运"],tor:["torch","火炬"],up:["up","顶"]}),pafu:new d({name:"pafu",baseURI:"http://js3.pp.sohu.com.cn/ppp/images/emotion/b/",prefix:"[{b}"},{hi:["hi","HI"],ok:["ok","OK"],fco:["faceoff","变脸"],":T":["puke","吐"],":D":["spit","大笑"],"):(":["detonate","发火"],":!":["surprise","吃惊"],bet:["beat","扁人"],ft:["faint","晕"],gdn:["goodnight","晚安"],"#_#":["flatter","谄媚"],"=:|":["perspire","流汗"],sof:["sofa","沙发"],":.(":["weep","泪奔"],nob:["nostbleed","鼻血"],glw:["gallow","我吓死你"],thd:["thunder","被雷到了"],pas:["pass","路过"],":?":["haze","疑惑"],mop:["mop","鬼脸"],b4:["b4","鄙视"],"^_*":["lash","讽刺"],":(":["sorry","难过"],up:["up","顶"],agi:["agitation","咱聊聊啊"],soy:["soysauce","打酱油"],stg:["struggle","努力"],bj:["beijing","北京欢迎您"],cmp:["champion","冠军"],bdn:["birdnest","鸟巢"],fbi:["feibi","加油哦"],skt:["skate","滑冰"],wuy:["wuying","无影手"],olc:["olymcheer","奥运加油"]})};load("/app/emote/d/emote.css");var b=null;var e={Data:c,show:function(j,g,m,k){if(!j){if(!b){b=$('<div class="emotion-list"></div>');document.body.appendChild(b[0])}j=b}if(j[0].wrapped){j=j[0].wrapped;return j.destroy?j.destroy():j.show()}else{j[0].wrapped=j}var f=this;g.nodeType||(g=g[0]);if(!j){j=$('<div class="emotion-list"></div>');document.body.appendChild(j[0])}this.render("base",j);var h=false;$(a.ie?document:window).bind("keydown",i).bind("keyup",i);function i(n){if(n.keyCode==17){h=n.type=="keydown"}}j.css({zIndex:1025}).show();k!==undefined&&j.find(".arrow").css("left",k+"px").html("");$(document).bind("click",l);j.destroy=function(){$(document).unbind("click",l);$(a.ie?document:window).unbind("keydown",i).unbind("keyup",i);this.html("").hide();this.destroy=null;this[0].wrapped=null;console.log("destroy");return this};console.log("init");return j;function l(s){s.preventDefault();var n,r=s.target;if(r.nodeName==="A"&&r.children.length===1&&r.firstChild.nodeName==="IMG"){r=r.firstChild}if(r.nodeName==="IMG"&&(n=r.getAttribute("data-ubb"))){var v=n.substr(0,n.indexOf("."));n="["+n.substr(v.length+1)+"]";if(m){m(n)}else{if(document.selection){g.parentNode.focus();g.focus();setTimeout(function(){var w=document.selection.createRange();w.text=n},1)}else{if(g.selectionStart||g.selectionStart=="0"){g.focus();var t=g.selectionStart,o=g.selectionEnd,p=g.scrollTop,u=g.value;g.value=u.substring(0,t)+n+u.substring(o,u.length);g.selectionStart=g.selectionEnd=t+n.length}else{g.focus();g.value+=n}}}g.wrapped&&g.wrapped.onChange&&g.wrapped.onChange(g.value);if(!h){j.destroy()}}else{var q=s.target;for(var q=s.target;q;q=q.parentNode){if(q==j[0]){return}}j.destroy()}}},render:function(h,j){var i=c[h];if(!i.layout){var f=[];for(var g in i.emotes){f.push('<a href="javascript:;">',i.emotes[g],"</a>")}i.layout=f.join("")}j.html('<div class="emotion-head"><span class="arrow"></span></div><div class="emotion-body clearfix">'+i.layout+"</div>")},parseEmote:function(f){for(var g in c){var h=c[g];f=f.replace(h.regExp,function(j,i){return h.emotes[i]||j})}return f},parseBlogEmote:function(f){return this.parseEmote(f)}};define("app::emote",e);define("plugins::hijacker::emote",function(j){var g=$(j.actionTarget).closest(".emote-handler"),i=g.data("EmoteHandler");if(!i){return}j.stopPropagation();var f=i.getEmoteContext.apply(g);var h=e.show(f.target,f.editor,f.insert,f.arrowLeft);h&&i.onEmote&&i.onEmote.call(g,h)})});
require("app::emote",function(c){var b=/@([-_a-zA-Z0-9\u4e00-\u9fa5]+)(\.[a-zA-Z]{2,})?/g,e=/[\x00-\x7f]/g,d=/[<>"]/,f=["lt","gt","quot"];var a={gbLength:function(g){return typeof g==="string"?g.length+g.replace(e,"").length+1>>1:0},gbSubstr:function(i,h){if(typeof i!=="string"){return i}h+=h;for(var j=0,g=i.length;j<g&&h>0;j++){h-=i.charCodeAt(j)>127?2:1}return i.substr(0,j)},gbCut:function(i,h){if(typeof i!=="string"||i.length<=h||a.gbLength(i)<=h){return i}var g=a.gbSubstr(i,h-2);return g+'<span title="'+a.filter_html(i.substr(g.length))+'">...</span>'},safeCut:function(h,g){if(!h||a.gbLength(h)<g){return h}h=a.gbSubstr(h,g+2);if(/&(?:#[\da-f]{4}|[a-z]{1,6});$/i.test(h)){return h}if(/&(?:#[\da-f]{1,4}|[a-z]{1,6})$/i.test(h)){return h.substr(0,h.lastIndexOf("&"))}if(/\bhttp:\/\/[0-9a-f#?&-_\.]*$/i.test(h)){return h.substr(0,h.lastIndexOf("http://"))}if(/@[-_a-zA-Z0-9\u4e00-\u9fa5]+$/.test(h)){return h.substr(0,h.lastIndexOf("@"))}return h.substr(0,h.length-1)},filter_html:function(g){return g.replace(/&(#\d{2,4};|\w{2,4};)?/g,function(h,i){return i?h:"&amp;"+i}).replace(d,function(h){return"&"+f['<>"'.indexOf(h)]+";"})},filter_all:function(h,g){h=a.filter_lt(h);h=a.filter_link(h);h=a.filter_atname(h);g&&(h=a.filter_topic(h));h=a.filter_emote(h);return h},filter_lt:function(g){return g&&g.replace(/<(\/)?(\w+)\b/ig,"&lt;$1$2")},filter_emote:function(g){return g&&c.parseEmote(g)},filter_link:function(g){if(typeof g==="string"){g=g.replace(/\bhttp:\/\/[\-A-Z0-9+&#\/%?=~_|!:,.;]*[A-Z0-9+&#\/%=~_|]/ig,'<a href="$&" target="_blank">$&</a>')}return g},filter_atname:function(g){return typeof g==="string"?g.replace(b,function(h,j,i){if(i&&!/[\u4e00-\u9fa5]/.test(j)){return h}return['<a target="_blank" href="http://i.sohu.com/nick/',encodeURIComponent(j),'" data-card="true" data-card-action="nick='+j+'"',">@",j,"</a>",i||""].join("")}):g},filter_topic:function(g){if(typeof g==="string"){g=g.replace(/(?!=&)#([^#]+)#/g,function(i,h){return'<a href="/a/app/mblog/mytopic.htm?_input_encode=UTF-8&_output_encode=UTF-8&topic='+encodeURIComponent(h)+'&from=tblog" target="_blank">#'+h+"#</a>"})}return g}};define("core::stringUtil",a)});
require("core::util::jQuery",function(a){define("plugins::hijacker",{hijackthis:function(d){var c=a(d);if(c.length&&!c.closest(".hijacked").length){c.click(b).addClass("hijacked")}},free:function(d){var c=a(d);if(c.length&&d.hijacked){c.unbind("click",b).removeClass("hijacked")}},hijack:function(c){require(c.action.indexOf("::")==-1?"plugins::hijacker::"+c.action:c.action,function(d){d.call(c.actionTarget,c)})}});function b(g){if(g.actionTarget){return}var d;for(var f=g.target,c=g.currentTarget.parentNode;f!=c;f=f.parentNode){if(f.nodeName!="FORM"&&(d=f.getAttribute("action"))){break}}if(d==="junction"){f=a.find(f.getAttribute("jTarget"))[0];d=f.getAttribute("action")}if(!d||f.hijacker_loading&&f.hijacker_loading!="false"){return}f.hijacker_loading=true;g.action=d;g.actionTarget=f;require(d.indexOf("::")==-1?"plugins::hijacker::"+d:d,function(e){f.hijacker_loading=false;e.call(g.actionTarget,g)});g.dont_prevent||g.preventDefault()}});
