(function(c){if(c.fn.iButton){return}function b(d){return function(){if(!/disabled/.test(this.className)){c(this).addClass(d)}}}function a(d){return function(){c(this).removeClass(d)}}c.fn.iButton=function(k){var l={id:null,className:null,title:null,text:"",icon:null,disabled:null};var f=c.extend(l,k);var e=[];for(i=0;i<this.length;i++){if(!this.eq(i).is("input[type='button'], button")){e.push(this.eq(i)[0]);continue}var p=this.eq(i),h=f.id||p.attr("id"),j=p[0].attributes.classname?p[0].attributes.classname.value:null,s=p.attr("class"),n=(f.className||j||"i-button-default")+(s?" "+s:""),r=f.title||p.attr("title"),t=f.text||(p.is("button")?p.text():p.val()),q=f.icon||p.attr("icon"),m=(f.disabled===null?p.attr("disabled"):f.disabled);var d=c('<div tabindex="0"'+(h?(' id="'+h+'"'):"")+' class="i-button '+n+'"'+(r?(' title="'+r+'"'):"")+'"><div class="i-button-left'+(m?" i-button-left-disabled":"")+'">'+(q?('<div class="i-button-icon '+q+(m?(" "+q+"-disabled"):"")+'"></div>'):"")+'<div class="i-button-text'+(m?" i-button-text-disabled":"")+'">'+t+'</div></div><div class="i-button-right'+(m?" i-button-right-disabled":"")+'"></div></div>');p.replaceWith(d);e.push(d[0]);if(q){d.data("ibutton-icon",q)}d.hover(b("hover"),a("hover")).focus(b("focus")).bind("blur focusout",a("focus")).mousedown(b("active")).bind("i-button-mouseup",a("active")).keypress(function(u){if(!/disabled/.test(this.className)&&u.which==13){u.preventDefault();p.trigger("click")}}).keydown(function(u){if(!/disabled/.test(this.className)&&u.which==32){p.addClass("active")}}).keyup(function(u){if(!/disabled/.test(this.className)&&u.which==32){p.removeClass("active")}}).bind("selectstart",function(){return false}).find("*").attr("unselectable","on")}var o=c(e);var g=o.click;o.click=function(u){g.call(this,function(v){var w=c(this);if(!w.hasClass("disabled")){u.call(this,v)}});return this};o.text=function(v){var u=this.filter("div.i-button");if(u.length&&typeof v=="undefined"){return c("div.i-button-text",u.eq(0)).text()}else{if(u.length&&typeof v!="undefined"){c("div.i-button-text",u).text(v+"")}}return this};o.icon=function(A){var w=this.filter("div.i-button");if(typeof A=="undefined"&&w.length){return w.eq(0).data("ibutton-icon")}else{for(var v=0;v<w.length;v++){var z=w.eq(v),u=c("div.i-button-icon",z),y=z.data("ibutton-icon"),x=z.hasClass("disabled");if(A){if(u.length){u.removeClass(y+"-hover "+y+"-focus "+y+"-active "+y+"-disabled")}else{u=c('<div class="i-button-icon"></div>');c("div.i-button-text",z).before(u)}u.addClass(A+(x?(" "+A+"-disabled"):""));z.data("ibutton-icon",A+"")}else{if(u.length){u.remove();z.removeData("ibutton-icon")}}}}return this};o.disabled=function(y){var v=this.filter("div.i-button");if(typeof y=="undefined"&&v.length){return v.eq(0).hasClass("disabled")}else{for(var u=0;u<v.length;u++){var x=v.eq(u),w=x.data("ibutton-icon");if(y){c("div.i-button-left",x).removeClass("i-button-left-hover i-button-left-focus i-button-left-active").addClass("i-button-left-disabled");c("div.i-button-right",x).removeClass("i-button-right-hover i-button-right-focus i-button-right-active").addClass("i-button-right-disabled");c("div.i-button-text",x).removeClass("i-button-text-hover i-button-text-focus i-button-text-active").addClass("i-button-text-disabled");if(w){c("div.i-button-icon",x).removeClass(w+"-hover "+w+"-focus "+w+"-active").addClass(w+"-disabled")}x.addClass("disabled")}else{c("div.i-button-left",x).removeClass("i-button-left-disabled");c("div.i-button-right",x).removeClass("i-button-right-disabled");c("div.i-button-text",x).removeClass("i-button-text-disabled");if(w){c("div.i-button-icon",x).removeClass(w+"-disabled")}x.removeClass("disabled")}}}return this};return o};c(document).mouseup(function(){c("div.i-button").trigger("i-button-mouseup")})})(jQuery);