<html><head><title>GTK+ 布局管理_大海xp的空间_百度空间</title><meta http-equiv=content-type content="text/html; charset=GBK"><link rel=alternate type="application/rss+xml" title="订阅该空间的博客文章" href="http://hi.baidu.com/%B4%F3%BA%A3xp/rss"><style type="text/css">.error{color:#F00;font-size:12px}.shareUser,.shareLastEditor{line-height:20px;color:#666;text-align:left}.shareLastEditor{margin:5px 0 8px}</style><script>
	    var g_pageTimerStart=new Date().getTime();
	</script><script src="http://hi.bdimg.com/static/cblog/js/other/global.js?v=009301b8.js"></script><script src="http://hi.bdimg.com/static/cblog/js/other/libs.js?v=48b209f9.js"></script><script src="http://img.baidu.com/js/tangram-1.1.0.js?v=1332752585.js"></script><script>
var Session = {
    isLogin: !true,
    isHost: 0,
    loginStatus : 0,
    userName: "大海xp",   
    userPortrait:'0707b4f3baa378704109',
    spaceURL: "\/%B4%F3%BA%A3xp",
    spBasicURL:"http:\/\/hi.baidu.com\/%B4%F3%BA%A3xp",
    spBasicURLEnc:"http%3A%2F%2Fhi.baidu.com%2F%B4%F3%BA%A3xp",
    visitorName:    "",
    visitorPortrait:'00000000',
    isActive: '0',   /*{cmt 访问者是否激活空间}*/
    visitorURL: "\/",        // 
    pageURL: "http://hi.baidu.com\/%25B4%25F3%25BA%25A3xp\/blog\/item\/aee0c52cd54804414fc226d2.html",    
    refer: "http:\/\/www.baidu.com\/s?wd=gtk_alignment_new&rsv_bp=0&rsv_spt=3&rsv_n=2&inputT=569",
    spToken: 'the fisrt two args should be string type:0,1!', 
    spFriendDomain: 'http://frd.baidu.com',
    spSpaceDomain: 'http://hi.baidu.com',
    spPortraitDomain: 'http://tx.bdimg.com',
    spSpaceStaticDomain: 'http://hi.bdimg.com', /*{cmt TODO RD似乎还不有提供这个变量，记得补成呀！}*/
    spImgDomain : 'http://img.baidu.com',
    spStaticDomain : 'http://hi.bdimg.com',

    isDrag: false  /*{cmt 是否在拖动页：是为了通用，只对模块内容有作用，这里也作为一个通用属性}*/
    ,isProfile: false   /*{cmt 是否在拖动页：是为了通用，只对模块内容有作用，这里也作为一个通用属性}*/
    ,isPortraitVerify:!true
    };
</script></head><body> <script>
/*<![CDATA[*/
if(top.location != self.location){
	top.location = self.location;
}
var myref = encodeURIComponent("http://hi.baidu.com\/%B4%F3%BA%A3xp\/blog\/item\/aee0c52cd54804414fc226d2.html");
/*]]>*/
</script><!--[if (lt IE 8.0)]><link rel=stylesheet type=text/css href="http://hi.bdimg.com/static/cblog/css/ui/mods.css?v=774e31a7.css"><![endif]--><!--[if (!IE)|(gte IE 8.0)]><!--><link rel=stylesheet type=text/css href="http://hi.bdimg.com/static/cblog/css/ui/mods_datauri.css?v=a1661a70.css"><!--<![endif]--><link rel=stylesheet type=text/css href="http://hitn.bdimg.com/2402050202/css/item/e52f3819a6b8afd5ad6e75e5.css"><!--[if (lt IE 8.0)]><link rel=stylesheet type=text/css href="http://hi.bdimg.com/static/cblog/css/space.css?v=b4fcdc9b.css"><![endif]--><!--[if (!IE)|(gte IE 8.0)]><!--><link rel=stylesheet type=text/css href="http://hi.bdimg.com/static/cblog/css/space_datauri.css?v=166edb76.css"><!--<![endif]--><div class=userbar><center> <div id=nav><a class=logo href=http://hi.baidu.com/index.htm><img src=http://img.baidu.com/hi/logo/logo_93_30.gif border=0 alt="百度空间"></a><div class="manage no-login"><form action="https://passport.baidu.com/?login" method=post>用户名:<input name=username>&nbsp;&nbsp; 密码:<input type=password name=password> <input type=hidden name=mem_pass value=on><input type=submit value="" style="width:0; height:0;"><a href="#" class=loginlink onclick="this.parentNode.submit(); return false;">登录</a> </form> <a href=/reg/new class=reglink>注册</a></div> </div></center></div><script src="http://hi.bdimg.com/static/base/js/conf/base.js?v=1332752585.js"></script><link rel=stylesheet type=text/css href="http://hi.bdimg.com/static/base/css/base.css?v=1332752585.css"><script language=javascript src="http://hi.bdimg.com/static/cblog/js/ui/dialog.js?v=f1d92f7b.js"></script><center><div id=main align=left><!--[if IE]><script>
var objmain = document.getElementById("main");
function updatesize(){ var bodyw = window.document.body.offsetWidth; if(bodyw <= 790) objmain.style.width="772px"; else if(bodyw >= 1016) objmain.style.width="996px"; else objmain.style.width="100%"; }
updatesize(); window.onresize = updatesize;
</script><![endif]--><div id=header><div class=lc><div class=rc></div></div><div class=tit><a href="/%B4%F3%BA%A3xp" class=titlink title="大海xp的空间 http://hi.baidu.com/大海xp">大海xp的空间</a></div><div class=desc></div><div id=tabline>&nbsp;</div><div id=tab><a href="http://hi.baidu.com/%B4%F3%BA%A3xp/home">主页</a><a href="http://hi.baidu.com/%B4%F3%BA%A3xp/blog" class=on>博客</a><a href="http://hi.baidu.com/%B4%F3%BA%A3xp/album">相册</a><span>|</span><a href="http://hi.baidu.com/%B4%F3%BA%A3xp/profile">个人档案</a><span>|</span><a href="http://hi.baidu.com/%B4%F3%BA%A3xp/friends">好友</a><span>|</span><a href="http://tieba.baidu.com/i/sys/jump?un=%B4%F3%BA%A3xp&fr=spacebar" onclick="BdUtil.ns_trackerLink('m_20110330_spacebar','')" target=_blank>i贴吧</a></div></div><div class=stage><div class=stagepad><div style="width:100%"><table width="100%" border=0 cellspacing=0 cellpadding=0 class=modth><tr><td class=modtl width=7>&nbsp;<td class=modtc nowrap><div class=modhead><span class=modtit>查看文章</span></div><td class=modtc nowrap align=right><td class=modtr width=7>&nbsp;</table><div id=m_blog class=modbox style="overflow-x:hidden;"><div class=tit>GTK+ 布局管理</div><div class=date>2010-12-13 14:08</div><table style="table-layout:fixed;width:100%"><tr><td><div id=blog_text class=cnt>

<p>
在本章中，我们将讲述如何将构件布置在窗口与对话框中。
</p>

<p>
当我们在设计应用程序的图形界面时，我们首先要决定的是在程序中用到哪种构件和管理应用程序中的这些构件。为了方便管理我们的构件，在GTK+通常使用不
可见的构件称作<b>layout containers</b>. 。在本章节中，我们将设计其中的―― 
<b class="keyword">GtkAlignment</b>,
<b class="keyword">GtkFixed</b>, <b class="keyword">GtkVBox</b> 和 <b class="keyword">GtkTable</b>.
</p>


<h2>GtkFixed</h2>

<p>
容器构件<b class="keyword">GtkFixed</b> 
用于布置子构件在一个固定的位置和设定固定的大小。这种构件并不是属于自动的布局关系器。实质上，在我们设计的大多数应用程序中，我并不使用
GtkFixed；而在只用于一些比较特殊的场合。例如，游戏，含有绘图功能的专用软件，那些需要移动和调整大小的软件（正如电子表格中的图表）以及那些
小型的教育用途软件。 
</p>

<pre class="code">#include &lt;gtk/gtk.h&gt;<br><br><br>int main( int argc, char *argv[])<br>{<br>  GtkWidget *window;<br>  GtkWidget *fixed;<br><br>  GtkWidget *button1;<br>  GtkWidget *button2;<br>  GtkWidget *button3;<br><br>  gtk_init(&amp;argc, &amp;argv);<br><br>  window = gtk_window_new(GTK_WINDOW_TOPLEVEL);<br>  gtk_window_set_title(GTK_WINDOW(window), "GtkFixed");<br>  gtk_window_set_default_size(GTK_WINDOW(window), 290, 200);<br>  gtk_window_set_position(GTK_WINDOW(window), GTK_WIN_POS_CENTER);<br><br>  fixed = gtk_fixed_new();<br>  gtk_container_add(GTK_CONTAINER(window), fixed);<br><br>  button1 = gtk_button_new_with_label("Button");<br>  gtk_fixed_put(GTK_FIXED(fixed), button1, 150, 50);<br>  gtk_widget_set_size_request(button1, 80, 35);<br><br>  button2 = gtk_button_new_with_label("Button");<br>  gtk_fixed_put(GTK_FIXED(fixed), button2, 15, 15);<br>  gtk_widget_set_size_request(button2, 80, 35);<br><br>  button3 = gtk_button_new_with_label("Button");<br>  gtk_fixed_put(GTK_FIXED(fixed), button3, 100, 100);<br>  gtk_widget_set_size_request(button3, 80, 35);<br><br>  g_signal_connect_swapped(G_OBJECT(window), "destroy", <br>      G_CALLBACK(gtk_main_quit), NULL);<br><br>  gtk_widget_show_all(window);<br><br>  gtk_main();<br><br>  return 0;<br>}<br></pre>

<p>
在我上面的这个例子中，我用代码生成了三个按钮构件然后把他们布局在固定的坐标上。当我们如果试图去改变窗口的大小的时候，其中按钮将会保持他们的大小和
之前的坐标。 
</p>

<pre class="explanation"> fixed = gtk_fixed_new();<br></pre>

<p>
上面的代码就可以生成了一个<b class="keyword">GtkFixed</b> 的容器构件。 
</p>

<pre class="explanation"> gtk_fixed_put(GTK_FIXED(fixed), button1, 150, 50);<br></pre>

<p>
第一个按钮就 <b class="keyword">gtk_fixed_put()</b>函数来进行布局，坐标为x=150, y=50. 

</p>


<br>
<img src="http://hiphotos.baidu.com/%B4%F3%BA%A3xp/pic/item/13e5591e9844ddc687d6b6a3.jpg" alt="GtkFixed container">
<div class="figure">Figure: GtkFixed container</div>
<br>


<h2>GtkVBox</h2>

<p>
<b class="keyword">GtkVBox</b> 
是一种用于垂直布局的容器型构件。他把放置在他中的子构件放置在一个单独的列中。类似的是
<b class="keyword">GtkHBox</b>也有相似的功能，有区别的在于他是用于水平布局，他的子构件是布置在一个单独的行中的。 

</p>

<pre class="code">#include &lt;gtk/gtk.h&gt;<br><br><br>int main( int argc, char *argv[])<br>{<br><br>  GtkWidget *window;<br>  GtkWidget *vbox;<br><br>  GtkWidget *settings;<br>  GtkWidget *accounts;<br>  GtkWidget *loans;<br>  GtkWidget *cash;<br>  GtkWidget *debts;<br><br>  gtk_init(&amp;argc, &amp;argv);<br><br>  window = gtk_window_new(GTK_WINDOW_TOPLEVEL);<br>  gtk_window_set_position(GTK_WINDOW(window), GTK_WIN_POS_CENTER);<br>  gtk_window_set_default_size(GTK_WINDOW(window), 230, 250);<br>  gtk_window_set_title(GTK_WINDOW(window), "GtkVBox");<br>  gtk_container_set_border_width(GTK_CONTAINER(window), 5);<br><br>  vbox = gtk_vbox_new(TRUE, 1);<br>  gtk_container_add(GTK_CONTAINER(window), vbox);<br><br>  settings = gtk_button_new_with_label("Settings");<br>  accounts = gtk_button_new_with_label("Accounts");<br>  loans = gtk_button_new_with_label("Loans");<br>  cash = gtk_button_new_with_label("Cash");<br>  debts = gtk_button_new_with_label("Debts");<br><br>  gtk_box_pack_start(GTK_BOX(vbox), settings, TRUE, TRUE, 0);<br>  gtk_box_pack_start(GTK_BOX(vbox), accounts, TRUE, TRUE, 0);<br>  gtk_box_pack_start(GTK_BOX(vbox), loans, TRUE, TRUE, 0);<br>  gtk_box_pack_start(GTK_BOX(vbox), cash, TRUE, TRUE, 0);<br>  gtk_box_pack_start(GTK_BOX(vbox), debts, TRUE, TRUE, 0);<br><br>  g_signal_connect_swapped(G_OBJECT(window), "destroy",<br>        G_CALLBACK(gtk_main_quit), G_OBJECT(window));<br><br>  gtk_widget_show_all(window);<br><br>  gtk_main();<br><br>  return 0;<br>}<br></pre>

<p>
上面的这个按钮就显示了 <b class="keyword">GtkVBox</b>的作用。他把五个按钮都布局在同一列上。如果你改变程序窗口的大
小，其中的子构件（如按钮button）也会改变大小。 
</p>

<pre class="explanation"> vbox = gtk_vbox_new(TRUE, 1);<br></pre>

<p>
上面程序中生成了<b class="keyword">GtkVBox</b>。 我们把其中的第一个参数设置为 
TRUE。这就意味着，程序中我的按钮都为同样的大小。至于按钮之间的距离大小被设置为“1”象素。
</p>

<pre class="explanation"> gtk_box_pack_start(GTK_BOX(vbox), settings, TRUE, TRUE, 0);<br></pre>

<p>
在上面的程序中我们把“settings “按钮布局在vbox容器构件中。 
至于函数实参中的前两个参数，分别是容器构件和我们要放置的子构件。接下来的三个参数中分别是expand, fill和padding。 
值得注意的是如果fill对应的参数是FALSE,则按钮就不会充满整个vbox构件。比较类似的是，如果之前在gtk_vbox_new(TRUE, 
1);已经设置按钮都是等宽高了，所以expand对应的参数，是完全没有效果的。（译者注：此处建议fill 
expand都设为TRUE,至于具体区别和含义可在编程时感受） 
</p>


<br>
<img src="http://hiphotos.baidu.com/%B4%F3%BA%A3xp/pic/item/3975473623c7cefad0a2d3a3.jpg" alt="GtkVBox container">
<div class="figure">Figure: GtkVBox container</div>
<br>



<h2>GtkTable</h2>

<p>
<b class="keyword">GtkTable</b>布局构件即可以按照行也可以按照列来布局她的子构件。 
</p>

<pre class="code">#include &lt;gtk/gtk.h&gt;<br><br><br>int main( int argc, char *argv[])<br>{<br><br>  GtkWidget *window;<br><br>  GtkWidget *table;<br>  GtkWidget *button;<br><br>  char *values[16] = { "7", "8", "9", "/", <br>     "4", "5", "6", "*",<br>     "1", "2", "3", "-",<br>     "0", ".", "=", "+"<br>  };<br><br>  gtk_init(&amp;argc, &amp;argv);<br><br>  window = gtk_window_new(GTK_WINDOW_TOPLEVEL);<br>  gtk_window_set_position(GTK_WINDOW(window), GTK_WIN_POS_CENTER);<br>  gtk_window_set_default_size(GTK_WINDOW(window), 250, 180);<br>  gtk_window_set_title(GTK_WINDOW(window), "GtkTable");<br><br>  gtk_container_set_border_width(GTK_CONTAINER(window), 5);<br><br>  table = gtk_table_new(4, 4, TRUE);<br>  gtk_table_set_row_spacings(GTK_TABLE(table), 2);<br>  gtk_table_set_col_spacings(GTK_TABLE(table), 2);<br><br>  int i = 0;<br>  int j = 0;<br>  int pos = 0;<br><br>  for( i=0; i &lt; 4; i++) {<br>    for( j=0; j &lt; 4; j++) {<br>      button = gtk_button_new_with_label(values[pos]);<br>      gtk_table_attach_defaults(GTK_TABLE(table), button, j, j+1, i, i+1 );<br>      pos++;<br>    }<br>  }<br><br>  gtk_container_add(GTK_CONTAINER(window), table);<br><br>  g_signal_connect_swapped(G_OBJECT(window), "destroy",<br>        G_CALLBACK(gtk_main_quit), G_OBJECT(window));<br><br>  gtk_widget_show_all(window);<br><br>  gtk_main();<br><br>  return 0;<br>}<br></pre>

<p>
在以上的例子中，我们将仿照计算器编写一系列按钮。 
</p>

<pre class="explanation"> table = gtk_table_new(4, 4, TRUE);<br></pre>

<p>
上面我们生成了一个新的<b class="keyword">GtkTable</b> 布局构件，并设置为4行与4列。  
</p>

<pre class="explanation"> gtk_table_set_row_spacings(GTK_TABLE(table), 2);<br> gtk_table_set_col_spacings(GTK_TABLE(table), 2);<br></pre>

<p>
上面我们就设置了每行与每列的距离。 
</p>

<pre class="explanation"> for( i=0; i &lt; 4; i++) {<br>   for( j=0; j &lt; 4; j++) {<br>     button = gtk_button_new_with_label(values[pos]);<br>     gtk_table_attach_defaults(GTK_TABLE(table), button, j, j+1, i, i+1 );<br>     pos++;<br>   }<br> }<br></pre>

<p>
以上代码将生成16个按钮并把他们布局在GtkTable容器构件中。 
</p>


<br>
<img src="http://hiphotos.baidu.com/%B4%F3%BA%A3xp/pic/item/c1b358b5ace770b931add1a3.jpg" alt="GtkTable container">
<div class="figure">Figure: GtkTable container</div>
<br>

<h2>GtkAlignment</h2>

<p>
 <b class="keyword">GtkAlignment</b> 容器构件控制了她的子构件的对齐方式与大小。
</p>

<pre class="code">#include &lt;gtk/gtk.h&gt;<br><br><br>int main( int argc, char *argv[])<br>{<br><br>  GtkWidget *window;<br>  GtkWidget *ok;<br>  GtkWidget *close;<br><br>  GtkWidget *vbox;<br>  GtkWidget *hbox;<br>  GtkWidget *halign;<br>  GtkWidget *valign;<br><br>  gtk_init(&amp;argc, &amp;argv);<br><br>  window = gtk_window_new(GTK_WINDOW_TOPLEVEL);<br>  gtk_window_set_position(GTK_WINDOW(window), GTK_WIN_POS_CENTER);<br>  gtk_window_set_default_size(GTK_WINDOW(window), 350, 200);<br>  gtk_window_set_title(GTK_WINDOW(window), "GtkAlignment");<br>  gtk_container_set_border_width(GTK_CONTAINER(window), 10);<br><br>  vbox = gtk_vbox_new(FALSE, 5);<br><br>  valign = gtk_alignment_new(0, 1, 0, 0);<br>  gtk_container_add(GTK_CONTAINER(vbox), valign);<br>  gtk_container_add(GTK_CONTAINER(window), vbox);<br><br>  hbox = gtk_hbox_new(TRUE, 3);<br><br>  ok = gtk_button_new_with_label("OK");<br>  gtk_widget_set_size_request(ok, 70, 30);<br>  gtk_container_add(GTK_CONTAINER(hbox), ok);<br>  close = gtk_button_new_with_label("Close");<br>  gtk_container_add(GTK_CONTAINER(hbox), close);<br><br>  halign = gtk_alignment_new(1, 0, 0, 0);<br>  gtk_container_add(GTK_CONTAINER(halign), hbox);<br><br>  gtk_box_pack_start(GTK_BOX(vbox), halign, FALSE, FALSE, 0);<br><br>  g_signal_connect_swapped(G_OBJECT(window), "destroy",<br>        G_CALLBACK(gtk_main_quit), G_OBJECT(window));<br><br>  gtk_widget_show_all(window);<br><br>  gtk_main();<br><br>  return 0;<br>}<br></pre>

<p>
在上面的例子中，我们把两个按钮布局在了一个窗口的右下角。为了实现这个效果，我们用一个水平盒子构件horizontal box 
、一个竖直盒子构件vertical box 和两个对齐容器构件（alignment containers）。 
</p>

<pre class="explanation"> valign = gtk_alignment_new(0, 1, 0, 0);<br></pre>

<p>
上面的代码中我们生成了一个对齐容器构件。
</p>

<pre class="explanation"> gtk_container_add(GTK_CONTAINER(vbox), valign);<br></pre>

<p>
然后我们把对齐容器构件布局在水平盒子中（vbox）。
</p>

<pre class="explanation"> hbox = gtk_hbox_new(TRUE, 3);<br><br> ok = gtk_button_new_with_label("OK");<br> gtk_widget_set_size_request(ok, 70, 30);<br> gtk_container_add(GTK_CONTAINER(hbox), ok);<br> close = gtk_button_new_with_label("Close");<br> gtk_container_add(GTK_CONTAINER(hbox), close);<br></pre>

<p>
上面代码中，我们生成了一个水平盒子（ horizontal box） 然后把两个按钮布局在其中。 
</p>

<pre class="explanation"> halign = gtk_alignment_new(1, 0, 0, 0);<br> gtk_container_add(GTK_CONTAINER(halign), hbox);<br><br> gtk_box_pack_start(GTK_BOX(vbox), halign, FALSE, FALSE, 0);<br></pre>

<p>
上面的代码中将生成一个对齐容器构件然后把布局在她中的子构件布局在右边。我们把水平盒子（ horizontal 
box）添加到对齐容器构件中，然后又把对齐容器构件添加到竖直盒子中（vertical box）。 最后，我要振臂高呼一下，：）对齐容器构件（ 
alignment container ）中只能放置一个子构件，这就是为什么我们要用到那么多盒子来帮助我们布局那两个按钮了。 
</p>


<br>
<img src="http://hiphotos.baidu.com/%B4%F3%BA%A3xp/pic/item/4893e6f64fe8b7a27609d7a3.jpg" alt="GtkAlignment container">
<div class="figure">Figure: GtkAlignment container</div>
<br>

<h2>Windows</h2>

<p>
接下来我们将展示一个更加高级一点的例子。具体就是展示一个窗口，你可以在JDeveloper 
IDE（一种java的集成开发软件）中发现这个例子的身影。
</p>

<br>
<img src="http://hiphotos.baidu.com/%B4%F3%BA%A3xp/pic/item/1f304b89a6935b329e2fb4a3.jpg" alt="Windows dialog in JDeveloper">
<div class="figure">Figure: Windows dialog in JDeveloper</div>
<br>

<p>
The dialog shows all opened windows, or more precisely tabs in 
JDeveloper application.
</p>

<pre class="code">#include &lt;gtk/gtk.h&gt;<br><br><br><br>int main( int argc, char *argv[])<br>{<br><br>  GtkWidget *window;<br>  GtkWidget *table;<br><br>  GtkWidget *title;<br>  GtkWidget *activate;<br>  GtkWidget *halign;<br>  GtkWidget *halign2;<br><br>  GtkWidget *valign;<br>  GtkWidget *close;<br>  GtkWidget *wins;<br><br>  GtkWidget *help;<br>  GtkWidget *ok;<br><br>  gtk_init(&amp;argc, &amp;argv);<br><br>  window = gtk_window_new(GTK_WINDOW_TOPLEVEL);<br>  gtk_window_set_position(GTK_WINDOW(window), GTK_WIN_POS_CENTER);<br>  gtk_widget_set_size_request (window, 300, 250);<br>  gtk_window_set_resizable(GTK_WINDOW(window), FALSE);<br><br>  gtk_window_set_title(GTK_WINDOW(window), "Windows");<br><br>  gtk_container_set_border_width(GTK_CONTAINER(window), 15);<br><br>  table = gtk_table_new(8, 4, FALSE);<br>  gtk_table_set_col_spacings(GTK_TABLE(table), 3);<br><br>  title = gtk_label_new("Windows");<br>  halign = gtk_alignment_new(0, 0, 0, 0);<br>  gtk_container_add(GTK_CONTAINER(halign), title);<br>  gtk_table_attach(GTK_TABLE(table), halign, 0, 1, 0, 1, <br>      GTK_FILL, GTK_FILL, 0, 0);<br><br>  wins = gtk_text_view_new();<br>  gtk_text_view_set_editable(GTK_TEXT_VIEW(wins), FALSE);<br>  gtk_text_view_set_cursor_visible(GTK_TEXT_VIEW(wins), FALSE);<br>  gtk_table_attach(GTK_TABLE(table), wins, 0, 2, 1, 3,<br>      GTK_FILL | GTK_EXPAND, GTK_FILL | GTK_EXPAND, 1, 1);<br><br>  activate = gtk_button_new_with_label("Activate");<br>  gtk_widget_set_size_request(activate, 50, 30);<br>  gtk_table_attach(GTK_TABLE(table), activate, 3, 4, 1, 2, <br>      GTK_FILL, GTK_SHRINK, 1, 1);<br><br>  valign = gtk_alignment_new(0, 0, 0, 0);<br>  close = gtk_button_new_with_label("Close");<br> <br>  gtk_widget_set_size_request(close, 70, 30);<br>  gtk_container_add(GTK_CONTAINER(valign), close);<br>  gtk_table_set_row_spacing(GTK_TABLE(table), 1, 3);<br>  gtk_table_attach(GTK_TABLE(table), valign, 3, 4, 2, 3, <br>      GTK_FILL, GTK_FILL | GTK_EXPAND, 1, 1);<br><br>  halign2 = gtk_alignment_new(0, 1, 0, 0);<br>  help = gtk_button_new_with_label("Help");<br>  gtk_container_add(GTK_CONTAINER(halign2), help);<br>  gtk_widget_set_size_request(help, 70, 30);<br>  gtk_table_set_row_spacing(GTK_TABLE(table), 3, 6);<br>  gtk_table_attach(GTK_TABLE(table), halign2, 0, 1, 4, 5, <br>      GTK_FILL, GTK_FILL, 0, 0);<br><br>  ok = gtk_button_new_with_label("OK");<br>  gtk_widget_set_size_request(ok, 70, 30);<br>  gtk_table_attach(GTK_TABLE(table), ok, 3, 4, 4, 5, <br>      GTK_FILL, GTK_FILL, 0, 0);<br><br>  gtk_container_add(GTK_CONTAINER(window), table);<br><br>  g_signal_connect_swapped(G_OBJECT(window), "destroy",<br>        G_CALLBACK(gtk_main_quit), G_OBJECT(window));<br><br>  gtk_widget_show_all(window);<br>  gtk_main();<br><br>  return 0;<br>}<br></pre>

<p>
以上代码将生成一个简单的GTK+窗口。


</p>

<pre class="explanation"> table = gtk_table_new(8, 4, FALSE);<br></pre>

<p>
我们使用table表格容器构件来进行布局。 
</p>

<pre class="explanation"> title = gtk_label_new("Windows");<br> halign = gtk_alignment_new(0, 0, 0, 0);<br> gtk_container_add(GTK_CONTAINER(halign), title);<br> gtk_table_attach(GTK_TABLE(table), halign, 0, 1, 0, 1, <br>     GTK_FILL, GTK_FILL, 0, 0);<br></pre>

<p>
上面的代码生成了一个标签，设为居左。这个标签被布局在<b class="keyword">GtkTable</b>构件容器的第一列。
</p>

<pre class="explanation"> wins = gtk_text_view_new();<br> gtk_text_view_set_editable(GTK_TEXT_VIEW(wins), FALSE);<br> gtk_text_view_set_cursor_visible(GTK_TEXT_VIEW(wins), FALSE);<br> gtk_table_attach(GTK_TABLE(table), wins, 0, 2, 1, 3, <br>     GTK_FILL | GTK_EXPAND, GTK_FILL | GTK_EXPAND, 1, 1);<br></pre>

<p>
文本显示构件占据了两行和两列。我们把该文本编辑构件的属性设置为editable 和光标隐藏（hide the cursor）。 
</p>

<pre class="explanation"> valign = gtk_alignment_new(0, 0, 0, 0);<br> close = gtk_button_new_with_label("Close");<br> <br> gtk_widget_set_size_request(close, 70, 30);<br> gtk_container_add(GTK_CONTAINER(valign), close);<br> gtk_table_set_row_spacing(GTK_TABLE(table), 1, 3);<br> gtk_table_attach(GTK_TABLE(table), valign, 3, 4, 2, 3, <br>     GTK_FILL, GTK_FILL | GTK_EXPAND, 1, 1);<br></pre>

<p>
我们把两个靠在一起的按钮布局在文本编辑构件的左边也就是第四行（我们是从0开始记数的），我们把这两个按钮布局在“对齐构件”（alignment 
widget）中，这样我们就可以把他俩布局在顶部了。 
</p>

<br>
<img src="http://hiphotos.baidu.com/%B4%F3%BA%A3xp/pic/item/1fe7cd7dbd6a7b4528388aa3.jpg" alt="Windows"></div></table><br><div class=opt id=blogOpt><a href="http://hi.baidu.com/%B4%F3%BA%A3xp/blog/category/gtk%D1%A7%CF%B0" title="查看该分类中所有文章">类别：gtk学习</a><span class=x-blog-opt-sp>|</span><a href="#" onclick="addToShare(); return false;" target=_blank><img src=http://img.baidu.com/hi/apps/share/share_btn.gif border=0 align=absbottom></a><span class=x-blog-opt-sp>|</span><a title="将此文章添加到百度搜藏" href=http://cang.baidu.com/do/add onClick="return addToFavor();" target=_blank>添加到搜藏</a> <span class=x-blog-opt-sp>|</span><a title="将此文章分享到i贴吧" href="#" onclick="addToiTieba(); return false;" target=_blank>分享到i贴吧</a><span class=x-blog-opt-sp>|</span>浏览(<span id=result>236</span>)<span class=x-blog-opt-sp>|</span><a href="#send">评论</a>&nbsp;(<span id=blogCmtCount>0</span>)<script language=javascript>
										/*<![CDATA[*/
										var pre = [true,'GTK+ 简介关于本初级教程l', 'GTK+ 简介关于本初级教程l','\/%B4%F3%BA%A3xp/blog/item/db2787206d24bfb54623e8d0.html'];
										var post = [true,'GTK+ 中的事件（events）和信号（signals）','GTK+ 中的事件（events）和信号...', '\/%B4%F3%BA%A3xp/blog/item/19fad3d9728fcd77d0164edc.html'];
										if(pre[0] || post[0]){
											document.write('<div style="height:5px;line-height:5px;">&nbsp;</div><div id="in_nav">');
											if(pre[0]){
												document.write('上一篇：<a href="' + pre[3] + '" title="' + pre[1] + '">' +  pre[2] + '</a>&nbsp;&nbsp;&nbsp;&nbsp;');
											}
											if(post[0]){
												document.write('下一篇：<a href="' + post[3] + '" title="' + post[1] + '">' +  post[2] + '</a>');
											}
											document.write('</div>');
										}
										/*]]>*/
									</script></div><div class=line>&nbsp;</div><style type="text/css">#in_related_doc a{text-decoration:none}</style><div id=in_related_tmp></div><div id=in_reader> <div class=tit>最近读者：</div></div><div class=line>&nbsp;</div><div id=in_comment> <a name=comment></a> <div class=tit>网友评论：</div> <span id=userCommentList></span> <div id=page></div></div><form action='/%B4%F3%BA%A3xp/commit' id=blogCmtSubmitForm name=blogCmtSubmitForm method=post> <input type=hidden name=bdstoken value='the fisrt two args should be string type:0,1!'> <input type=hidden name=ct value=8> <input type=hidden name=cm value=2> <input type=hidden name=spBlogID value='aee0c52cd54804414fc226d2'> <input type=hidden name=spBlogCmtID value=''> <input type=hidden name=spRefURL value=''></form><div id=in_send><a name=send></a><form name=form1 id=popFormSubmit action="/%B4%F3%BA%A3xp/commit" method=post onSubmit="return checkcmtform()"><input type=hidden name=bdstoken value="the fisrt two args should be string type:0,1!"><input type=hidden name=ct value=8><input type=hidden name=cm value=1><input type=hidden name=spBlogID value="aee0c52cd54804414fc226d2"><input type=hidden name=spRefURL id=spRefURL><script>
										    document.getElementById("spRefURL").value = window.location.href;
										</script><div class=tit>发表评论：</div><table width=620 border=0 cellspacing=5 cellpadding=0><tr><td class=f14>姓　名：<td><input name=spBlogCmtor id=spBlogCmtor style=width:220px tabindex=1 onChange="checkname('spBlogCmtor')" maxlength=49 onFocus="hidErr(1);"><script>
                                                            document.write(" &nbsp;&nbsp; <a href='http://hi.baidu.com/st/reg.html' target='_blank'>注册</a>");
                                                            document.write(' | <a href="https://passport.baidu.com/?login&tpl=sp&tpl_reg=sp&u='+myref+'" onclick="BdUtil.relogin(); return false;">登录</a>');
														</script><div style=display:none id=nmerror>*姓名最长为50字节</div><tr id=1_err style=display:none><td>&nbsp;<td><div class=error id=1_err_con></div><tr><td class=f14>网址或邮箱：<td><input name=spBlogCmtURL id=spBlogCmtURL style=width:360px maxlength=128 tabindex=2 onChange="checkeandu('spBlogCmtURL')" onFocus="hidErr(2);"> (选填)<script>
														G("spBlogCmtor").value="";
														G("spBlogCmtURL").value="";
													</script><tr id=2_err style=display:none><td>&nbsp;<td><div class=error id=2_err_con></div><tr><td valign=top class=f14 id=reTitle>内　容：<td><textarea name="spBlogCmtText" id="spBlogCmtText" style="width:520px;height:155px"  tabindex="3" onFocus="hidErr(3);" onclick="BdUtil.relogin(); return false;" ></textarea><tr id=3_err style=display:none><td>&nbsp;<td><div class=error id=3_err_con></div><tr><td valign=top class=f14>&nbsp;<td valign=top class=f14><input id=btn_ok name=btn_ok type=submit autocomplete=off onclick="BdUtil.relogin(); return false;" value="发表评论" tabindex=5>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#" id=cancleReLink onClick="canclereply(); return false;" style="display:none; font-size:12px;color:#666;">取消回复</a></table></form></div><br></div><table width="100%" border=0 cellspacing=0 cellpadding=0 height=8><tr><td class=modbl width=7>&nbsp;<td class=modbc>&nbsp;<td class=modbr width=7>&nbsp;</table></div></div></div></div><div class=clearfix></div><div style="text-align:center;margin:30px auto 15px;font-family:Arial,simsun;font-size:12px;"><div style="margin:0 auto 6px;"><a href=http://help.baidu.com/question?prod_en=space target=_blank style="color:#00C;">帮助中心</a><span>&nbsp;|&nbsp;</span><a href="http://tieba.baidu.com/f?kw=%B0%D9%B6%C8%BF%D5%BC%E4&fr=wwwt" target=_blank style="color:#00C;">空间客服</a><span>&nbsp;|&nbsp;</span><a href=http://tousu.baidu.com/hi/ target=_blank style="color:#00C;">投诉中心</a><span>&nbsp;|&nbsp;</span><a href=http://www.baidu.com/search/hi_contract.html target=_blank style="color:#00C;">空间协议</a></div><div style="color:#7A77C8;">&copy;2012&nbsp;Baidu</div></div></center><ul id=blogCmtContentList style="display:none;"></ul><script>	var g_blogTitle = 'GTK+ 布局管理';
		var g_blogId = 'aee0c52cd54804414fc226d2';
		var g_isAllowCmt =  true ;
		var g_isByShared =  false ;
		var g_isAddRelate =  true ;
		var g_latestReader = [
									["http:\/\/hi.baidu.com\/reporter521","a77f7265706f72746572353231cf07","reporter521"],
									["http:\/\/hi.baidu.com\/疾风r10","f74abcb2b7e75231301f03","疾风R10"],
									["http:\/\/hi.baidu.com\/arlose","3d7e61726c6f7365320b","arlose"],
									["http:\/\/hi.baidu.com\/shoucql","19be73686f7563716c130b","shoucql"],
									["http:\/\/hi.baidu.com\/精品视频之家","238fbeabc6b7cad3c6b5d6aebcd2ee23","精品视频之家"],
									["http:\/\/hi.baidu.com\/当时那一剑","752ab5b1cab1c4c7d2bbbda3a106","当时那一剑"],
									["http:\/\/hi.baidu.com\/wangyinzhi1989","1fe077616e6779696e7a6869313938399d14","wangyinzhi1989"],
									["http:\/\/hi.baidu.com\/mtcapple","db216d74636170706c65c003","mtcapple"],
								{}
			];
	</script><iframe id=submitiframe name=submitiframe src="http://hi.bdimg.com/static/cblog/html/blank.html?v=20111213" style="display:none;"></iframe><script src="http://hi.bdimg.com/static/base/js/conf/comment.js?v=1332752585.js"></script><script src="http://hi.bdimg.com/static/cblog/js/job/detailpage.js?v=ee7931cf.js"></script><script>
/*<![CDATA[*/
/*{cmt
    这个相当一个代理器  
  在这里想实现一种这种加载效果：加载时注册（用一个 初始化数据.数组 记录要绑定的ID），文档ready后，按需加载js+css资源，js加载完，就初始化据执行

  有个问题，有些结构是 动态 执行这个绑定的，可能会发生资源还没有加载的情况。可以考虑给初始化数据，加一个标志位，说明加载完未，如果未，则把数据push到 初始化数据中(因为是用 dom.onxxx 的方式，所以不怕多次对同一个ID执行的问题)


  }*/
var SP = SP || {};
if(!SP.mycard){
    SP.mycard = new (function(){
        var me = this;
        var _cancleAction = Session.isDrag;  /*{cmt 标记在特殊情况下，所有的注册都被abort 如拖动页面}*/
        var _list = [];
        var _sourceLoaded = false;    /*{cmt 这里用了一种资源加载结束后，回调的机制，这个标志资源是否加载结束}*/
        me.bind = function (_id){
            if(_cancleAction){  //abort
                return;
            }
            if(!_sourceLoaded){
                _list.push(_id);
            } else {
                baidu.space.mycard.bind(_id);
            }
        }
        me.init = function (_config){
            _cancleAction = !!_config.cancle;
        }
        me.onSourceLoaded = function (){
            _sourceLoaded = true;
            baidu.space.mycard.init({portrait: Session.visitorPortrait});
            for(var i=0,len=_list.length; i<len; i++){
                baidu.space.mycard.bind(_list[i]);
            }
        }
    })();
    baidu.dom.ready(function(){
        BdAjax.loadCSS('http://hi.bdimg.com/static/cblog/css/ui/ucard/ucard.css?v=50de96ca.css');
        BdAjax.loadJS('http://hi.bdimg.com/static/cblog/js/ui/ucard/ucard.js?v=fcbffbf8.js');
    });
}
SP.mycard.bind('m_blog');  /*{cmt 只有文档加载完才真正绑定，这里只是append记录 }*/
/*]]>*/
</script>