<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Linux的脚本自动 交互 - xiaofei0859的专栏 - 博客频道 - CSDN.NET</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="description" content="Linux的脚本中自动登陆远程主机方法汇总为了方便，我写了个脚本自动ssh登录远端机器，如下，这个脚本需要安装expect包================================#!/usr/bin/expectset timeout 30spawn ssh -l root 192.168.1.117expect password:send nopasswd/rinteract================================set timeout 30设置超时时间的，计时单" />
<script src="http://static.blog.csdn.net/scripts/jquery.js" type="text/javascript"></script>
<script type="text/javascript" src="http://static.blog.csdn.net/scripts/ad.js?v=1.1"></script>
<link rel="Stylesheet" type="text/css" href="http://static.blog.csdn.net/skin/default/css/style.css?v=1.1" />
<link id="RSSLink" title="RSS" type="application/rss+xml" rel="alternate" href="/xiaofei0859/rss/list" />
<link rel="shortcut icon" href="/favicon.ico" />
<link type="text/css" rel="stylesheet" href="http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/default.css" />
</head>
<body>
<script src="http://csdnimg.cn/pubnav/js/pub_topnav_2011.js"type="text/javascript"></script>

<div id="container">
<div id="header">
    <div class="header">
        <div id="blog_title">
            <h1><a href="/xiaofei0859">xiaofei0859的专栏</a></h1>
            <h2></h2>
            <div class="clear"></div>
        </div>
        <div class="clear"></div>
    </div>
</div>
<div id="navigator">
    <div class="navigator_bg"></div>
    <div class="navigator">
        <ul>
            <li id="btnContents"><a href="/xiaofei0859?viewmode=contents"><span><img src="http://static.blog.csdn.net/images/ico_list.gif">目录视图</span></a></li>
            <li id="btnView"><a href="/xiaofei0859?viewmode=list"><span><img src="http://static.blog.csdn.net/images/ico_summary.gif">摘要视图</span></a></li>
            <li id="btnRss"><a href="/xiaofei0859/rss/list"><span><img src="http://static.blog.csdn.net/images/ico_rss.gif">订阅</span></a></li>
</ul>
    </div>
</div>
<script type="text/javascript">
    var username = "xiaofei0859";
    var _blogger = username;
    var blog_address = "http://blog.csdn.net/xiaofei0859";
    var static_host = "http://static.blog.csdn.net";
    var currentUserName = "";
</script>

<div id="body">
<div id="main">
<div class="main">
<div class="notice"> 

<a href="http://events.csdn.net/DR2013/roadshow/index.html" target="_blank">
<font color=red>【免费有礼】欧美最新网络营销技巧分享 
   </font></a>



&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

<a href="http://blog.csdn.net/l09196891/article/details/8845828" target="_blank"><font color=blue>博客导入工具
</font></a>

&nbsp;&nbsp;&nbsp;&nbsp;

<a href="http://blog.csdn.net/blogdevteam/article/details/8863634" target="_blank"><font color=red>【限时优惠】第五届云计算大会社区门票抢购




</font></a>

<br />





<a href="http://events.csdn.net/wy/APC/invite.html
"target="_blank">
<font color=red>探究云计算数据中心节能增效之道


 </font></a>

&nbsp;&nbsp;&nbsp;&nbsp;

<a href="http://www.csdn.net/article/2013-05-02/2815118 "target="_blank">
<font color=red>专访邓凡平：Android开发路上的快速学习之道
 </font></a>


&nbsp;&nbsp;&nbsp;&nbsp;

<a href="http://blog.csdn.net/blogdevteam/article/details/8853291"target="_blank">
<font color=blue>CSDN博客第二期最佳移动开发博主评选
 </font></a>




</div>
<div id="article_details" class="details">
    <div class="article_title">
    <span class="ico ico_type_Repost"></span>
    <h3>
        <span class="link_title"><a href="/xiaofei0859/article/details/6045754">
        Linux的脚本自动 交互
        </a></span>
    </h3>
</div>

        
    <div class="article_manage">
    <span class="link_postdate">2010-11-30 16:22</span>
    <span class="link_view" title="阅读次数">2404人阅读</span>
    <span class="link_comments" title="评论次数"><a href="#comments">评论</a>(0)</span>
    <span class="link_collect"><a href="javascript:void(0);" onclick="javascript:collectArticle('Linux的脚本自动 交互','6045754');return false;" title="收藏">收藏</a></span>
    <span class="link_report"><a href="#report"  onclick="javascript:report(6045754,2);return false;" title="举报">举报</a></span>
    
</div>
<div class="tag2box"><a href='http://blog.csdn.net/tag/details.html?tag=linux' target=_blank>linux</a><a href='http://blog.csdn.net/tag/details.html?tag=%e8%84%9a%e6%9c%ac' target=_blank>脚本</a><a href='http://blog.csdn.net/tag/details.html?tag=shell' target=_blank>shell</a><a href='http://blog.csdn.net/tag/details.html?tag=ftp%e6%9c%8d%e5%8a%a1%e5%99%a8' target=_blank>ftp服务器</a><a href='http://blog.csdn.net/tag/details.html?tag=command' target=_blank>command</a><a href='http://blog.csdn.net/tag/details.html?tag=user' target=_blank>user</a></div>


    
<div id="article_content" class="article_content">
<div class="content">
<p><span style="font-size: medium;">Linux的脚本中自动登陆远程主机方法汇总</span></p>
<p><span style="font-size: medium;">&nbsp;</span></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="font-size: medium;">为了方便，我写了个脚本自动ssh登录远端机器，如下，这个脚本需要安装expect包</span></p>
<p><span style="font-size: medium;">================================</span></p>
<p><span style="font-size: medium;">#!/usr/bin/expect<br />set timeout 30<br />spawn ssh -l root 192.168.1.117<br />expect "password:"<br />send "nopasswd/r"<br />interact</span></p>
<p><span style="font-size: medium;">================================</span></p>
<p><span style="font-size: medium;">set timeout 30<br />设置超时时间的，计时单位：秒</span></p>
<p><span style="font-size: medium;">spawn ssh -l root 192.168.1.117<br />spawn是进入expect环境后才可以执行的expect内部命令，如果没有装expect或者直接在默认的SHELL下执行是找不到spawn命令的。所以不要用 &ldquo;which spawn&ldquo;之类的命令去找spawn命令。好比windows里的dir就是一个内部命令，这个命令由shell自带，你无法找到一个dir.com 或 dir.exe 的可执行文件。它主要的功能是给ssh运行进程加个壳，用来传递交互指令。</span></p>
<p><span style="font-size: medium;">expect "password:"<br />这里的expect也是expect的一个内部命令，expect的shell命令和内部命令是一样的，但不是一个功能。这个命令的意思是判断上次输出结果里是否包含&ldquo;password:&rdquo;的字符串，如果有则立即返回，否则就等待一段时间后返回，这里等待时长就是前面设置的30秒</span></p>
<p><span style="font-size: medium;">send "nopasswd/r"<br />这里就是执行交互动作，与手工输入密码的动作等效。<br />温馨提示： 命令字符串结尾别忘记加上 &ldquo;/r&rdquo;，如果出现异常等待的状态可以核查一下。</span></p>
<p><span style="font-size: medium;">interact<br />执行完成后保持交互状态，把控制权交给控制台，这个时候就可以手工操作了。如果没有这一句登录完成后会退出，而不是留在远程终端上。如果你只是登录过去执行一段命令就退出，可改为〔expect eof〕</span></p>
<p><span style="font-size: medium;">注意：在crontab里执行expect脚本，那么最后一句就不能是interact，应该是expect eof</span></p>
<p><span style="font-size: medium;">参考：</span><a href="http://my.unix-center.net/~xiaoshe/tag/expectcrontabmysql"><span style="font-size: medium;">http://my.unix-center.net/~xiaoshe/tag/expectcrontabmysql</span></a><span style="font-size: medium;">定期备份数据库/</span></p>
<p><span style="font-size: medium;">如下为网上转载的其他的shell自动交互的方法</span></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="font-size: medium;">--------------------------------------------------------------------------------</span><br /><span style="font-size: medium;">shell脚本中如何进行自动的交互</span></p>
<p><br /><span style="font-size: medium;">在编写shell脚本的批处理代码时，一般只要求用户在调用shell时，输入有限的几个参数，然后由shell进行批处理作业，在批处理作业完成之前，中途不会</span></p>
<p><span style="font-size: medium;">有任何打断。但是linux有些命令本身是要求进行人机交互的，命令基本上是以一问一答形式在终端上跟用户交互，如passwd、smbpasswd，在设置某个用户</span></p>
<p><span style="font-size: medium;">的密码时，传入username参数，回车后系统要求输入密码，而smbpasswd还要求再次输入确认密码，这样就需要人工干预2次，这个命令才能执行完毕。</span></p>
<p><span style="font-size: medium;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 最近写一个小工具，恰巧碰到这个问题，用户要求提供一个shell，输入username和端口号后，自动完成linux 用户的创建、密码设置、网上邻居的开</span></p>
<p><span style="font-size: medium;">通、代码的检出、apache配置、启动等一系列操作，所有帐号中username跟passwd一致。用户输入shell命令敲击回车后，便不再与系统交互，由系统自动完</span></p>
<p><span style="font-size: medium;">成之后的所有操作。</span></p>
<p><span style="font-size: medium;">&nbsp;&nbsp;&nbsp; 但由于passwd和smbpasswd两个命令都需要用户干预才能完成，有没有什么办法不用用户干预，由系统模拟用户完成输入操作呢？答案是肯定的，就是利</span></p>
<p><span style="font-size: medium;">用linux的管道技术，通过&ldquo;echo&rdquo;命令进行标准输出，然后通过管道符&ldquo;|&rdquo;转换为passwd和smbpasswd的标准输入，由此模拟人机交互，具体实现：</span></p>
<p><span style="font-size: medium;">假设用户调用shell脚本为：</span></p>
<p><span style="font-size: medium;">[root@myhost]# ./myshell.sh username </span></p>
<p><span style="font-size: medium;">则在脚本里实现为：</span></p>
<p><span style="font-size: medium;">#!/bin/sh<br />#Usage: myshell.sh username<br />userName=$1;<br />password=$1;</span></p>
<p><span style="font-size: medium;">#add user and set default password <br />useradd $userName;<br />#通过设定&ndash;stdin参数，指明接受标准输入；<br />echo $password | passwd - -stdin $userName;</span></p>
<p><span style="font-size: medium;">#add samba user and set default password <br />#通过设置-s参数，指明使用安静模式设置密码<br />( echo $password ; echo $password&nbsp; ) | smbpasswd -s -a $userName;&nbsp;&nbsp; </span></p>
<p><span style="font-size: medium;">&nbsp; 这样的话，通过linux 的管道技术，将标准输出通过管道转换为某些命令的标准输入，实现了人工输入的模拟，从而屏蔽了人机交互，实现了完全的自动</span></p>
<p><span style="font-size: medium;">化。</span></p>
<p>&nbsp;</p>
<p><br /><span style="font-size: medium;">例子：<br />&nbsp;#！/usr/bin/expect -f</span></p>
<p><br /><span style="font-size: medium;">set password 密码</span></p>
<p><span style="font-size: medium;">spawn scp 用户名@目标IP：拷贝文件的路径 存放本地文件的路径</span></p>
<p><span style="font-size: medium;">set timeout 300(s)</span></p>
<p><span style="font-size: medium;">expect "用户名@目标ip`s password:"</span></p>
<p><span style="font-size: medium;">set timeout 300</span></p>
<p><span style="font-size: medium;">send"$password/r"</span></p>
<p><span style="font-size: medium;">set timeout 300</span></p>
<p><span style="font-size: medium;">send"exit/r"</span></p>
<p><span style="font-size: medium;">expect eof<br /><br /></span><span style="font-size: medium;">--------------------------------------------------------------------------------</span></p>
<p><span style="font-size: medium;">src:http://os.51cto.com/art/200912/167898.htm</span></p>
<p><span style="font-size: medium;">你了解Linux系统么？你是Linux系统的应用者么？如果你要学习linux，你可能会遇到Linux Shell自动交互问题，这里将介绍Linux Shell自动交互的解决方法，在这里拿出来和大家分享一下。</span></p>
<p><span style="font-size: medium;">一、背景</span></p>
<p><span style="font-size: medium;">shell脚本在处理自动循环或大的任务方面可节省大量的时间，通过创建一个处理任务的命令清单，使用变量、条件、算术和循环等方法快速创建脚本以完成相应工作，这比在命令行下一个个敲入命令要省时省力得多。</span></p>
<p><span style="font-size: medium;">但是有时候我们可能会需要实现和交互程序如ftp,telnet服务器等进行交互的功能，这时候我们需要用到shell的自动交互功能，本文收集了较常用的三种自动交互方法，并进行了比较和总结。</span></p>
<p><span style="font-size: medium;">二、需求</span></p>
<p><span style="font-size: medium;">需求1：<br />从一台Linux机器ftp登陆到另一台Linux机器，进行系列操作后关闭，懒得每次都手动输入密码。</span></p>
<p><span style="font-size: medium;">需求2：<br />改变登录用户密码，懒得每次都输入新旧密码。</span></p>
<p><span style="font-size: medium;">需求3：<br />希望su自动登录到root账户，懒得每次都输入root密码。</span></p>
<p><span style="font-size: medium;">三、调试环境</span></p>
<p><span style="font-size: medium;">终端：SecureCRT</span></p>
<p><span style="font-size: medium;">系统：WinXP, CentOS 4.4(VmWare)</span></p>
<p><span style="font-size: medium;">Shell:bash</span></p>
<p><span style="font-size: medium;">注：shell有很多种，B类SHELL（sh, bash, ksh）之间行为相近；C类SHELL（csh, tcsh）之间行为相近，还有zsh和rc等shell，本文的调试环境是bash。</span></p>
<p><span style="font-size: medium;">四、自动交互方法一</span></p>
<p><span style="font-size: medium;">自动交互最关键的就是交互信息的自动输入，首先联想到文件重定向，在shell编程中有这样一种用法(参考Linux与UNIX SHELL编程指南 chapt 5.7)："command &lt;&lt; delimiter&nbsp; 从标准输入中读入，直至遇到delimiter分界符。"</span></p>
<p><span style="font-size: medium;">重定向操作符command &lt;&lt; delimiter是一种非常有用的命令，shell将分界符delimiter之后直至下一个同样的分界符之前的所有内容都作为输入，遇到下一个分界符， shell就知道输入结束了。最常见的delimiter分界符是EOF，当然完全可以自定为其他字符。</span></p>
<p><span style="font-size: medium;">对于需求1 要求的自动登陆ftp，并作系列操作，则可以用这种方法进行自动交互。代码如下：</span></p>
<p><span style="font-size: medium;">&nbsp;&nbsp; 1. #!/bin/bash&nbsp; <br />&nbsp;&nbsp; 2. ftp -i -n 192.168.167.187 &lt;&lt; EOF <br />&nbsp;&nbsp; 3. user hzc 123456&nbsp; <br />&nbsp;&nbsp; 4. pwd&nbsp; <br />&nbsp;&nbsp; 5. cd test&nbsp; <br />&nbsp;&nbsp; 6. pwd&nbsp; <br />&nbsp;&nbsp; 7. close&nbsp; <br />&nbsp;&nbsp; 8. bye&nbsp; <br />&nbsp;&nbsp; 9. EOF</span></p>
<p><span style="font-size: medium;">测试可以发现，如上代码使用帐号名hzc，密码123456成功登陆了ftp服务器，并进入目录，打印出了pwd。</span></p>
<p><span style="font-size: medium;">五、自动交互方法二</span></p>
<p><span style="font-size: medium;">需求2中要求采用非交互的方式改变登录用户密码，尝试用方法1，无法实现。</span></p>
<p><span style="font-size: medium;">这时候联想到交互信息的另一个自动输入方法，管道，通过echo + sleep + | 可以实现这个需求。</span></p>
<p><span style="font-size: medium;">&nbsp;&nbsp; 1. #!/bin/bash&nbsp; <br />&nbsp;&nbsp; 2. (echo "curpassword"&nbsp; <br />&nbsp;&nbsp; 3. sleep 1&nbsp; <br />&nbsp;&nbsp; 4. echo "newpassword"&nbsp;&nbsp; <br />&nbsp;&nbsp; 5. sleep 1&nbsp; <br />&nbsp;&nbsp; 6. echo "newpassword")|passwd</span></p>
<p><span style="font-size: medium;">测试通过，运行这个脚本，直接把当前用户的curpassword改成newpassword。</span></p>
<p><span style="font-size: medium;">六、自动交互方法三</span></p>
<p><span style="font-size: medium;">需求3中要求自动登录root账号，尝试方法1和方法2，都出现错误提示standard in must be a tty。</span></p>
<p><span style="font-size: medium;">这时候尝试寻找外部帮助，一个shell工具expect可以实现这个功能，其实expect就是一个专门用来实现自动交互功能的工具，expect的语法可以参考相关资料，代码如下：</span></p>
<p><span style="font-size: medium;">&nbsp;&nbsp; 1. #!/usr/bin/expect&nbsp; <br />&nbsp;&nbsp; 2. spawn su root&nbsp; <br />&nbsp;&nbsp; 3. expect "password: "&nbsp; <br />&nbsp;&nbsp; 4. send "123456/r"&nbsp; <br />&nbsp;&nbsp; 5. expect eof&nbsp; <br />&nbsp;&nbsp; 6. exit</span></p>
<p><span style="font-size: medium;">测试通过，运行这个脚本，直接从当前用户登录到root用户。</span></p>
<p><span style="font-size: medium;">七、方法总结</span></p>
<p><span style="font-size: medium;">方法一(重定向)简单直观，也经常有实际应用，但是在自动交互领域功能有限。</span></p>
<p><span style="font-size: medium;">方法二(管道)也很简单直观，有时甚至不用sleep配合就能展现强大的自动交互实力，但是在某些时候也束手无策。</span></p>
<p><span style="font-size: medium;">方法三(expect)在功能上是最为强大的，expect本来就是为实现自动交互功能而生，但是缺点是需要安装expect包，在嵌入式等环境下难以安装。</span></p>
<p><span style="font-size: medium;">三个方法各有优劣，应用的好，都可以完成Linux Shell自动交互。</span></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="font-size: medium;">********************************************</span></p>
<p><span style="font-size: medium;">但是有时候我们可能会需要实现和交互程序如ftp,telnet服务器等进行交互的功能，这时候我们需要用到shell的自动交互功能.</span></p>
<p><span style="font-size: medium;">　　最简单的例子就是创建用户，我创建100个用户，初始密码为123，那么要是挨着passwd&nbsp; username&nbsp; ，交互性输入密码，那不得疯掉，但是脚本里应该</span></p>
<p><span style="font-size: medium;">怎么写呢？将密码123，输入到passwd命令？</span></p>
<p><span style="font-size: medium;">　　本文收集了较常用交互方法，并进行了比较和总结。</span></p>
<p><span style="font-size: medium;">　　自动交互方法一：利用命令的自带参数，将标准输入作为手动输入的内容</span></p>
<p><span style="font-size: medium;">　　自动交互最关键的就是交互信息的自动输入，首先联想到文件重定向，在shell编程中有这样一种用法(参考Linux与UNIX SHELL编程指南 chapt </span></p>
<p><span style="font-size: medium;">5.7)："command &lt;&lt; delimiter&nbsp; 从标准输入中读入，直至遇到delimiter分界符。"</span></p>
<p><span style="font-size: medium;">　　重定向操作符command &lt;&lt; delimiter是一种非常有用的命令，shell将分界符delimiter之后直至下一个同样的分界符之前的所有内容都作为输入，遇到</span></p>
<p><span style="font-size: medium;">下一个分界符， shell就知道输入结束了。最常见的delimiter分界符是EOF，当然完全可以自定为其他字符。</span></p>
<p><span style="font-size: medium;">　　对于需求1 要求的自动登陆ftp，并作系列操作，则可以用这种方法进行自动交互。代码如下：</span></p>
<p><span style="font-size: medium;">　　[yjwan@test ~]$ ftp -i -n 192.168.21.46 &lt;&lt;EOF</span></p>
<p><span style="font-size: medium;">　　user dbftp dbftp101</span></p>
<p><span style="font-size: medium;">　　ls</span></p>
<p><span style="font-size: medium;">　　EOF</span></p>
<p><span style="font-size: medium;">　　下面是得到的结果：</span></p>
<p><span style="font-size: medium;">　　Connected to 192.168.21.46.</span></p>
<p><span style="font-size: medium;">　　220 developerjail FTP server (Version 6.00LS) ready.</span></p>
<p><span style="font-size: medium;">　　331 Password required for dbftp.</span></p>
<p><span style="font-size: medium;">　　230 User dbftp logged in.</span></p>
<p><span style="font-size: medium;">　　Remote system type is UNIX.</span></p>
<p><span style="font-size: medium;">　　Using binary mode to transfer files.</span></p>
<p><span style="font-size: medium;">　　229 Entering Extended Passive Mode (|||54281|)</span></p>
<p><span style="font-size: medium;">　　150 Opening ASCII mode data connection for '/bin/ls'.</span></p>
<p><span style="font-size: medium;">　　total 8847424</span></p>
<p><span style="font-size: medium;">　　-rw-r--r--&nbsp; 1 dbftp&nbsp; www&nbsp; 9055318991 Aug 28 14:28 ewiz90.sql_2010-08-29</span></p>
<p><span style="font-size: medium;">　　226 Transfer complete.</span></p>
<p><span style="font-size: medium;">　　221 Goodbye.</span></p>
<p><span style="font-size: medium;">　　测试可以发现，如上代码使用帐号名dbftp，密码dbftp101成功登陆了ftp服务器，并进入目录，ls出当前目录的文件。</span></p>
<p><span style="font-size: medium;">　　注意事项：</span></p>
<p><span style="font-size: medium;">　　1&nbsp; 这里一定要加-i ，否则必定失败！！</span></p>
<p><span style="font-size: medium;">　　这里ftp用的-I 参数 结束了交互式输入，因此可以用文本的方式自动地输入用户密码以及操作方式</span></p>
<p><span style="font-size: medium;">　　如果不用-I 参数，那么必定要求你手动输入密码的！！那么就达不到自动登陆的要求了</span></p>
<p><span style="font-size: medium;">　　你可以man ftp找到这个参数</span></p>
<p><span style="font-size: medium;">　　-i 关闭多文件传送中的交互式提示。请参考 prompt、mget、mput 和 mdelete 子命令，以取得多文件传送中的提示的描述。</span></p>
<p><span style="font-size: medium;">　　-n 防止在起始连接中的自动登录。否则， ftp 命令会搜索 $HOME/.netrc 登录项，该登录项描述了远程主机的登录和初始化过程。请参考 user 子命</span></p>
<p><span style="font-size: medium;">令。</span></p>
<p><span style="font-size: medium;">　　2&nbsp;&nbsp;&nbsp; 举一反三：只要是要求输入密码的命令，一般都带有一个参数，允许你从标准输入，输入用户密码，以及操作。</span></p>
<p><span style="font-size: medium;">　　其他常用的自动登陆命令的参数</span></p>
<p><span style="font-size: medium;">　　1)&nbsp; Passwd命令</span></p>
<p><span style="font-size: medium;">　　Linux下 Passwd有参数</span></p>
<p><span style="font-size: medium;">　　--stdin</span></p>
<p><span style="font-size: medium;">　　This option is used to indicate that passwd should read the new password from standard input, which can be a pipe.</span></p>
<p><span style="font-size: medium;">　　所以linux下自动改变用户密码的办法就是</span></p>
<p><span style="font-size: medium;">　　Echo 密码 |passwd &ndash;stdin 用户名</span></p>
<p><span style="font-size: medium;">　　Freebsd没有以上参数 注意</span></p>
<p><span style="font-size: medium;">　　他的方法是echo passwd |pw mod user username -h 0</span></p>
<p><span style="font-size: medium;">　　2)smbpasswd</span></p>
<p><span style="font-size: medium;">　　-s</span></p>
<p><span style="font-size: medium;">　　This option causes smbpasswd to be silent (i.e. not issue prompts)</span></p>
<p><span style="font-size: medium;">　　and to read its old and new passwords from standard input, rather</span></p>
<p><span style="font-size: medium;">　　than from /dev/tty (like the passwd(1) program does). This option</span></p>
<p><span style="font-size: medium;">　　is to aid people writing scripts to drive smbpasswd</span></p>
<p><span style="font-size: medium;">　　3)sudo</span></p>
<p><span style="font-size: medium;">　　在shell脚本中需要用root用的来执行指令：</span></p>
<p><span style="font-size: medium;">　　sudo 自动输入密码</span></p>
<p><span style="font-size: medium;">　　echo "password" | sudo -S netstat -tlnp</span></p>
<p><span style="font-size: medium;">　　-S</span></p>
<p><span style="font-size: medium;">　　The -S (stdin) option causes sudo to read the password from the standard input instead of the terminal device.</span></p>
<p><span style="font-size: medium;">　　3&nbsp; 标准输入还可以用以下两种写法：</span></p>
<p><span style="font-size: medium;">　　可以将下面的内容写入到一个文本</span></p>
<p><span style="font-size: medium;">　　然后ftp&nbsp; -I &ndash;n ip &lt;文本</span></p>
<p><span style="font-size: medium;">　　或者echo&nbsp; &ldquo;..&rdquo;&nbsp; |ftp &ndash;I &ndash;n ip</span></p>
<p><span style="font-size: medium;">　　都是可以的！</span></p>
<p><span style="font-size: medium;">　　因为他们都满足&ldquo;有一个标准的输入&rdquo;这个条件</span></p>
<p><span style="font-size: medium;">　　4 ssh的自动登陆没有这样的自动输入密码的参数</span></p>
<p><span style="font-size: medium;">　　一般都是使用公钥/私钥的方式自动登录</span></p>
<p>&nbsp;</p>
</div>
</div>

<div class="share_buttons" id="sharePanel"></div>
<!--192.168.1.236-->
<div class="article_next_prev">
    <li class="prev_article"><span>上一篇：</span><a href="/xiaofei0859/article/details/6044993">socket 设置非阻塞</a></li>
    <li class="next_article"><span>下一篇：</span><a href="/xiaofei0859/article/details/6045916">shell脚本调试方法</a></li>
</div>


    
</div>
<div id="ad_cen">
<script type="text/javascript" >BAIDU_CLB_SLOT_ID = "117306";</script>
<script type="text/javascript" src="http://cbjs.baidu.com/js/o.js"></script>
</div>
<script type="text/javascript">
    //new Ad(4, 'ad_cen');
</script>
<div id="comment_title" class="panel_head">查看评论<a name="comments"></a></div>
<div id="comment_list"></div>
<div id="comment_bar"></div>
<div id="comment_form"></div>
<div class="announce">* 以上用户言论只代表其个人观点，不代表CSDN网站的观点或立场<a name="reply"></a><a name="quote"></a></div>
<script type="text/javascript">
    var fileName = '6045754';
    var commentscount = 0;
    var islock = false
</script>
<script type="text/javascript" src="http://static.blog.csdn.net/scripts/comment.js"></script>
<div id="ad_bot"></div>
<script type="text/javascript">
    new Ad(5, 'ad_bot');
</script>
<div id="report_dialog"></div>

<div id="d-top" style="display:none;">
<a id="d-top-a" href="#" title="回到顶部">
<img src="http://static.blog.csdn.net/images/top.png" alt="TOP" /></a>
</div>
<script type="text/javascript">
    $(function(){
        var d_top=$('#d-top');
        document.onscroll=function(){
            var scrTop=(document.body.scrollTop||document.documentElement.scrollTop);
            if(scrTop>500){
                d_top.show();
            }else{
                d_top.hide();
            }
        }
        $('#d-top-a').click(function(){
            scrollTo(0,0);
            this.blur();
            return false;
        });
    });
</script>

<div class="clear"></div>
</div>
</div>

<div id="side">
<div class="side">
<div id="panel_Profile" class="panel">
<ul class="panel_head"><span>个人资料</span></ul>
<ul class="panel_body profile">
<div id="blog_userface">
    <a href="http://my.csdn.net/xiaofei0859" target="_blank">
    <img src="http://avatar.csdn.net/4/9/8/1_xiaofei0859.jpg" title="访问我的空间" style="max-width:90%"/>
    </a>
    <br />
    <span><a href="http://my.csdn.net/xiaofei0859" class="user_name" target="_blank">xiaofei0859</a></span>
</div>
<div class="interact">
<a href="javascript:void(0);" class="attent" id="span_add_follow" title="[加关注]"></a>
<a href="javascript:void(0);" class="letter" onclick="loginto(1)" title="[发私信]"></a>
</div>
<div id="blog_medal">
</div>
<ul id="blog_rank">
    <li>访问：<span>85383次</span></li>
    <li>积分：<span>1580分</span></li>
    <li>排名：<span>第5432名</span></li>
</ul>
<ul id="blog_statistics">
    <li>原创：<span>48篇</span></li>
    <li>转载：<span>150篇</span></li>
    <li>译文：<span>0篇</span></li>
    <li>评论：<span>19条</span></li>
</ul>
</ul>
</div>



<div class="panel" id="panel_Search">
    <ul class="panel_head"><span>文章搜索</span></ul>
    <ul class="panel_body">
        <form id="frmSearch" action="http://so.csdn.net/search" class="form_search" target="_blank">
        <span><input id="inputSearch" type="text" class="blogsearch" title="请输入关键字" /></span>
        <input id="btnSubmit" type="submit" value="搜索" title="search in blog" />
        <input type="hidden" name="q" id="inputQ" />
        <input type="hidden" name="t" value="blog" />
        <a id="btnSearchBlog" target="_blank"></a>
        </form>
    </ul>
</div><div id="panel_Archive" class="panel">
<ul class="panel_head"><span>文章存档</span></ul>
<ul class="panel_body">
<div id="archive_list">
<!--归档统计-->
<li><a href="http://blog.csdn.net/xiaofei0859/article/month/2012/10">2012年10月</a><span>(10)</span></li><li><a href="http://blog.csdn.net/xiaofei0859/article/month/2012/09">2012年09月</a><span>(3)</span></li><li><a href="http://blog.csdn.net/xiaofei0859/article/month/2011/09">2011年09月</a><span>(2)</span></li><li><a href="http://blog.csdn.net/xiaofei0859/article/month/2011/08">2011年08月</a><span>(2)</span></li><li><a href="http://blog.csdn.net/xiaofei0859/article/month/2011/07">2011年07月</a><span>(9)</span></li><li><a href="http://blog.csdn.net/xiaofei0859/article/month/2011/04">2011年04月</a><span>(2)</span></li><li><a href="http://blog.csdn.net/xiaofei0859/article/month/2011/03">2011年03月</a><span>(21)</span></li><li><a href="http://blog.csdn.net/xiaofei0859/article/month/2011/02">2011年02月</a><span>(13)</span></li><li><a href="http://blog.csdn.net/xiaofei0859/article/month/2011/01">2011年01月</a><span>(6)</span></li><li><a href="http://blog.csdn.net/xiaofei0859/article/month/2010/12">2010年12月</a><span>(15)</span></li><li><a href="http://blog.csdn.net/xiaofei0859/article/month/2010/11">2010年11月</a><span>(25)</span></li><li><a href="http://blog.csdn.net/xiaofei0859/article/month/2010/10">2010年10月</a><span>(13)</span></li><li><a href="http://blog.csdn.net/xiaofei0859/article/month/2010/09">2010年09月</a><span>(17)</span></li><li><a href="http://blog.csdn.net/xiaofei0859/article/month/2010/08">2010年08月</a><span>(10)</span></li><li><a href="http://blog.csdn.net/xiaofei0859/article/month/2010/07">2010年07月</a><span>(10)</span></li><li><a href="http://blog.csdn.net/xiaofei0859/article/month/2010/06">2010年06月</a><span>(20)</span></li><li><a href="http://blog.csdn.net/xiaofei0859/article/month/2010/05">2010年05月</a><span>(3)</span></li><li><a href="http://blog.csdn.net/xiaofei0859/article/month/2010/04">2010年04月</a><span>(3)</span></li><li><a href="http://blog.csdn.net/xiaofei0859/article/month/2009/12">2009年12月</a><span>(5)</span></li><li><a href="http://blog.csdn.net/xiaofei0859/article/month/2009/10">2009年10月</a><span>(9)</span></li>
</div>
</ul>
</div>
<div id="hotarticls" class="panel">
<ul class="panel_head"><span>阅读排行</span></ul>
<ul class="panel_body itemlist">
<li>
<a href="/xiaofei0859/article/details/6037814" title="recv send 阻塞和非阻塞">recv send 阻塞和非阻塞</a><span>(8798)</span>
</li>
<li>
<a href="/xiaofei0859/article/details/5745455" title="makefile编译静态库和动态库">makefile编译静态库和动态库</a><span>(4203)</span>
</li>
<li>
<a href="/xiaofei0859/article/details/6183017" title="IGMP PROXY和IGMP SNOOPING 有什么区别？">IGMP PROXY和IGMP SNOOPING 有什么区别？</a><span>(3090)</span>
</li>
<li>
<a href="/xiaofei0859/article/details/6045754" title="Linux的脚本自动 交互">Linux的脚本自动 交互</a><span>(2403)</span>
</li>
<li>
<a href="/xiaofei0859/article/details/6050806" title="Socket连接出现大量的FIN_WAIT_2状态">Socket连接出现大量的FIN_WAIT_2状态</a><span>(2070)</span>
</li>
<li>
<a href="/xiaofei0859/article/details/5868478" title="linux IPC-消息队列 的内核限制">linux IPC-消息队列 的内核限制</a><span>(1945)</span>
</li>
<li>
<a href="/xiaofei0859/article/details/5649059" title="关于pthread_mutex_t的初始化">关于pthread_mutex_t的初始化</a><span>(1850)</span>
</li>
<li>
<a href="/xiaofei0859/article/details/6044993" title="socket 设置非阻塞">socket 设置非阻塞</a><span>(1720)</span>
</li>
<li>
<a href="/xiaofei0859/article/details/5871268" title="madvise() 函数">madvise() 函数</a><span>(1638)</span>
</li>
<li>
<a href="/xiaofei0859/article/details/6114939" title="C语言头文件、库文件的查找路径">C语言头文件、库文件的查找路径</a><span>(1448)</span>
</li>
</ul>
</div>
<div id="hotarticls2" class="panel">
<ul class="panel_head"><span>评论排行</span></ul>
<ul class="panel_body itemlist">
<li>
<a href="/xiaofei0859/article/details/5871215" title="msync(void *addr,size_t len, int flags) 函数的使用问题">msync(void *addr,size_t len, int flags) 函数的使用问题</a><span>(2)</span>
</li>
<li>
<a href="/xiaofei0859/article/details/5856880" title="文件锁实现进程间同步">文件锁实现进程间同步</a><span>(2)</span>
</li>
<li>
<a href="/xiaofei0859/article/details/6176160" title="详解IGMP(Internet组管理协议)报文及协议">详解IGMP(Internet组管理协议)报文及协议</a><span>(2)</span>
</li>
<li>
<a href="/xiaofei0859/article/details/4719161" title="ftok函数的作用： ">ftok函数的作用： </a><span>(2)</span>
</li>
<li>
<a href="/xiaofei0859/article/details/6037814" title="recv send 阻塞和非阻塞">recv send 阻塞和非阻塞</a><span>(2)</span>
</li>
<li>
<a href="/xiaofei0859/article/details/5761107" title="堆和栈">堆和栈</a><span>(1)</span>
</li>
<li>
<a href="/xiaofei0859/article/details/5745455" title="makefile编译静态库和动态库">makefile编译静态库和动态库</a><span>(1)</span>
</li>
<li>
<a href="/xiaofei0859/article/details/6279987" title="SSM Mapping简介">SSM Mapping简介</a><span>(1)</span>
</li>
<li>
<a href="/xiaofei0859/article/details/6047207" title="linux expect的使用">linux expect的使用</a><span>(1)</span>
</li>
<li>
<a href="/xiaofei0859/article/details/6050806" title="Socket连接出现大量的FIN_WAIT_2状态">Socket连接出现大量的FIN_WAIT_2状态</a><span>(1)</span>
</li>
</ul>
</div>
<div id="homepageArticles" class="panel">
<ul class="panel_head"><span>推荐文章</span></ul>
<ul class="panel_body" id="ad_commend"></ul>
</div>
<script type="text/javascript">
 new Ad(12, 'ad_commend');
</script><div id="newcomments" class="panel">
<ul class="panel_head"><span>最新评论</span></ul>
<ul class="panel_body itemlist">
    <li>
    <a href="/xiaofei0859/article/details/6050806#comments">Socket连接出现大量的FIN_WAIT_2状态</a>
    <p style="margin:0px;"><a href="/jxcyly1985" class="user_name">jxcyly1985</a>:
如果客户端没有发送ACK回应FIN 不是出于_WAIT_1状态吗
    </p>
    </li>
    <li>
    <a href="/xiaofei0859/article/details/6176160#comments">详解IGMP(Internet组管理协议)报文及协议</a>
    <p style="margin:0px;"><a href="/fei2012" class="user_name">fei2012</a>:
不要用书的内容来发博客好不
    </p>
    </li>
    <li>
    <a href="/xiaofei0859/article/details/5856880#comments">文件锁实现进程间同步</a>
    <p style="margin:0px;"><a href="/TANG_XIAO_BIN" class="user_name">TANG_XIAO_BIN</a>:
这个是有缺陷的，尽管你是转的
    </p>
    </li>
    <li>
    <a href="/xiaofei0859/article/details/5856880#comments">文件锁实现进程间同步</a>
    <p style="margin:0px;"><a href="/TANG_XIAO_BIN" class="user_name">TANG_XIAO_BIN</a>:
这个是有缺陷的，尽管你是转的
    </p>
    </li>
    <li>
    <a href="/xiaofei0859/article/details/6031688#comments">linux上编写守护进程的例程</a>
    <p style="margin:0px;"><a href="/tyfdzyx" class="user_name">tyfdzyx</a>:
那些信息都写到哪个文件上了呢？？？
    </p>
    </li>
    <li>
    <a href="/xiaofei0859/article/details/6047207#comments">linux expect的使用</a>
    <p style="margin:0px;"><a href="/astaryang" class="user_name">astaryang</a>:
编程实在是太专业了，能不能附带操作步骤啊，给初学者来点帮助！！！
    </p>
    </li>
    <li>
    <a href="/xiaofei0859/article/details/6037814#comments">recv send 阻塞和非阻塞</a>
    <p style="margin:0px;"><a href="/blueliuyun" class="user_name">blueliuyun</a>:
好文，转发了。谢谢哈！
    </p>
    </li>
    <li>
    <a href="/xiaofei0859/article/details/4719161#comments">ftok函数的作用： </a>
    <p style="margin:0px;"><a href="/cinderellaxw" class="user_name">cinderellaxw</a>:
谢谢。！
    </p>
    </li>
    <li>
    <a href="/xiaofei0859/article/details/4719161#comments">ftok函数的作用： </a>
    <p style="margin:0px;"><a href="/cinderellaxw" class="user_name">cinderellaxw</a>:
犀利！
    </p>
    </li>
    <li>
    <a href="/xiaofei0859/article/details/6044993#comments">socket 设置非阻塞</a>
    <p style="margin:0px;"><a href="/shanleichicheng" class="user_name">shanleichicheng</a>:
3q，只是确认一下写法
    </p>
    </li>
</ul>
</div>
</div>
<div class="clear"></div>
</div>

<div class="clear"></div>
</div>

<script type="text/javascript" src="http://static.blog.csdn.net/scripts/newblog.min.js?v=1.1"></script>
<script type="text/javascript" src="http://medal.blog.csdn.net/showblogmedal.ashx?blogid=349722"></script>

<script type="text/javascript">
document.write('<script type="text/javascript" src="http://csdnimg.cn/pubfooter/js/publib_footer.js?' + Math.floor(new Date()/120000).toString(36) + '="></'+'script>');
</script>

<script type="text/javascript" src="http://passport.csdn.net/content/loginbox/login.js"></script>
<script type="text/javascript">document.write("<img src=http://counter.csdn.net/pv.aspx?id=24 border=0 width=0 height=0>");</script>
<script type="text/javascript" src="http://www.csdn.net/ui/scripts/Csdn/counter.js?v=1"></script>


<script type="text/javascript" src="http://ad.csdn.net/scripts/ad-blog.js"></script>

</div>
</body>
</html>